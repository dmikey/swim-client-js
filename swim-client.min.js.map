{"version":3,"sources":["swim-client.min.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","swim","client","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length",1,"reset","endpoint","Channel","bridge","channel","close","getHandlers","linkHandlers","link","uri","lane","handler","done","unlinked","nodeHandlers","undefined","laneHandlers","push","get","request","proto","LinkRequest","relative","send","unlink","index","Function","indexOf","splice","UnlinkRequest","handleMessage","envelope","URI","resolve","node","sendEvent","body","message","EventMessage","sendCommand","CommandMessage","handlers","GetRequest","put","PutRequest","handleState","shift","socket","WS","buffer","that","onopen","onclose","onmessage","frame","payload","data","parse","receive","w3cwebsocket","prototype","readyState","OPEN","stringify","isEventMessage","isCommandMessage","isStateResponse","CLOSED","CLOSING","components","serialize","path","query","fragment","scheme","userinfo","host","port","swim-proto-js","uri-js","websocket",2,"coerce","arguments","item","Absent","Extant","isAttr","isSlot","builder","RecordBuilder","appendField","state","coerceItem","coerceArray","isRecord","Uint8Array","Array","isArray","toRecon","coerceObject","array","value","isField","appendValue","object","prop","key","attrs","isAbsent","Attr","Slot","string","input","StringIterator","result","DocumentParser","run","writer","ReconWriter","writeBlock","apply","objectify","isExtant","objectifyArray","objectifyObject","record","items","iterator","isEmpty","head","step","base64","DataBuilder","cs","appendBase64Char","attr","slot","empty","Record","compare","x","y","equals","__proto__","Object","defineProperty","Field","enumerable","RecordIterator","writable","ValueBuilder","StringIteratee","StringBuilder","isSpace","c","isNewline","isWhitespace","isNameStartChar","isNameChar","isBase64Char","BlockParser","AttrParser","ident","IdentParser","BlockValueParser","field","InlineValueParser","RecordParser","MarkupParser","text","StringParser","DataParser","NumberParser","create","constructor","getOwnPropertyNames","isMarkup","isBlank","afterNonText","hasNonText","sections","hasAttrs","hasPrefixAttrs","hasPostfixAttrs","contains","tail","slice","foot","target","these","next","concat","appendRecord","forEach","those","toString","writeRecord","writeAttr","writeItem","dup","toRecord","isAllAttrs","isDone","c1","charCodeAt","c2","Done","isCont","isError","feed","error","unexpectedEOF","append","String","fromCharCode","appendString","prepare","size","expand","base","Math","max","aliased","set","appendByte","offset","decodeBase64Digit","decodeBase64Quantum","p","q","z","w","subarray","found","expected","Number","writeValue","inMarkup","writeText","writeNumber","writeBool","writeData","writeIdent","writeMarkup","isIdent","writeTextMarkup","writeString","number","bool","encodeBase64Digit","extant","absent",3,"decode","recon","heading","StateResponse","LinkedResponse","UnlinkedResponse","encode","Envelope","RequestEnvelope","ResponseEnvelope","MessageEnvelope","via","headers","header","recon-js",4,"./schemes/http","./schemes/urn",5,"SCHEMES","../uri",6,"URI_NS","pctEncChar","NID$","PCT_ENCODED$","TRANS$$","NSS$","URN_SCHEME","RegExp","URN_PATH","URN_PARSE","URN_EXCLUDED","UUID","options","schemeHandler","matches","match","tolerant","errors","toLowerCase","replace",7,"mergeSet","sets","nextSet","subexp","str","ALPHA$$","DIGIT$$","HEXDIG$$","GEN_DELIMS$$","SUB_DELIMS$$","RESERVED$$","UNRESERVED$$","SCHEME$","USERINFO$","DEC_OCTET$","IPV4ADDRESS$","H16$","IPV6ADDRESS$","IPVFUTURE$","IP_LITERAL$","REG_NAME$","HOST$","PORT$","AUTHORITY$","PCHAR$","SEGMENT$","SEGMENT_NZ$","SEGMENT_NZ_NC$","PATH_ABEMPTY$","PATH_ABSOLUTE$","PATH_NOSCHEME$","PATH_ROOTLESS$","PATH_EMPTY$","QUERY$","FRAGMENT$","HIER_PART$","URI$","RELATIVE_PART$","RELATIVE$","GENERIC_REF$","RELATIVE_REF$","URI_REF","NOT_SCHEME","NOT_USERINFO","NOT_HOST","NOT_PATH","NOT_PATH_NOSCHEME","NOT_QUERY","NOT_FRAGMENT","ESCAPE","UNRESERVED","PCT_ENCODEDS","URI_PARSE","RDS1","RDS2","RDS3","RDS5","NO_MATCH_IS_UNDEFINED","chr","toUpperCase","pctDecUnreserved","newStr","parseInt","substr","pctDecChars","c3","typeOf","split","pop","Components","reference","uriString","isNaN","_recomposeAuthority","uriTokens","join","removeDotSegments","output","authority","charAt","resolveComponents","skipNormalization","lastIndexOf","baseURI","relativeURI","normalize","equal","uriA","uriB","escapeComponent","unescapeComponent","./schemes",8,"W3CWebSocket","protocols","native_instance","nativeWebSocket","_global","WebSocket","MozWebSocket","version","./version",9,"../package.json",10,"name","description","keywords","author","email","url","repository","type","homepage","engines","dependencies","debug","nan","typedarray-to-buffer","devDependencies","buffer-equal","faucet","gulp","gulp-jshint","jshint-stylish","tape","config","verbose","scripts","install","test","main","directories","lib","browser","gitHead","bugs","_id","_shasum","_from","_npmVersion","_npmUser","maintainers","dist","shasum","tarball","_resolved","readme"],"mappings":"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","file":"swim-client.min.js","sourcesContent":["(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}(g.swim || (g.swim = {})).client = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nvar proto = require('swim-proto-js');\nvar URI = require('uri-js');\nvar WS = require('websocket').w3cwebsocket;\n\nvar getHandlers = {};\nvar linkHandlers = {};\n\nfunction reset() {\n  for (var endpoint in Channel.bridge) {\n    var channel = Channel.bridge[endpoint];\n    if (channel instanceof Channel) channel.close();\n  }\n  Channel.bridge = {};\n  getHandlers = {};\n  linkHandlers = {};\n}\n\n\nfunction link(uri, lane, handler) {\n  if (typeof handler === 'function') handler = {done: handler};\n\n  var unlinked = false;\n  var nodeHandlers = linkHandlers[uri];\n  if (nodeHandlers === undefined) {\n    nodeHandlers = {};\n    linkHandlers[uri] = nodeHandlers;\n  }\n  var laneHandlers = nodeHandlers[lane];\n  if (laneHandlers === undefined) {\n    unlinked = true;\n    laneHandlers = [];\n    nodeHandlers[lane] = laneHandlers;\n  }\n  laneHandlers.push(handler);\n\n  if (unlinked) {\n    var channel = Channel.get(uri);\n    var request = new proto.LinkRequest(channel.relative(uri), lane);\n    channel.send(request);\n  }\n}\n\nfunction unlink(uri, lane, handler) {\n  var nodeHandlers = linkHandlers[uri];\n  if (nodeHandlers === undefined) return;\n  var laneHandlers = nodeHandlers[lane];\n  if (laneHandlers === undefined) return;\n  var index = -1;\n  if (handler instanceof Function) {\n    var i = 0;\n    var n = laneHandlers.length;\n    while (i < n && index < 0) {\n      if (laneHandlers[i].done === handler) index = i;\n      else i += 1;\n    }\n  }\n  else index = laneHandlers.indexOf(handler);\n  if (index < 0) return;\n  laneHandlers.splice(index, 1);\n  if (laneHandlers.length === 0) {\n    delete nodeHandlers[lane];\n    if (nodeHandlers.length === 0) delete linkHandlers[uri];\n\n    var channel = Channel.get(uri);\n    var request = new proto.UnlinkRequest(channel.relative(uri), lane);\n    channel.send(request);\n  }\n}\n\nfunction handleMessage(endpoint, envelope) {\n  var uri = URI.resolve(endpoint, envelope.node);\n  var nodeHandlers = linkHandlers[uri];\n  if (nodeHandlers === undefined) return;\n  var laneHandlers = nodeHandlers[envelope.lane];\n  if (laneHandlers === undefined) return;\n  var i = 0;\n  var n = laneHandlers.length;\n  while (i < n) {\n    var handler = laneHandlers[i];\n    handler.done(envelope);\n    i += 1;\n  }\n}\n\n\nfunction sendEvent(uri, lane, body) {\n  var channel = Channel.get(uri);\n  var message = new proto.EventMessage(channel.relative(uri), lane, undefined, body);\n  channel.send(message);\n}\n\nfunction sendCommand(uri, lane, body) {\n  var channel = Channel.get(uri);\n  var message = new proto.CommandMessage(channel.relative(uri), lane, undefined, body);\n  channel.send(message);\n}\n\n\nfunction get(uri, handler) {\n  if (typeof handler === 'function') handler = {done: handler};\n\n  var handlers = getHandlers[uri];\n  if (handlers === undefined) {\n    handlers = [];\n    getHandlers[uri] = handlers;\n  }\n  handlers.push(handler);\n\n  var channel = Channel.get(uri);\n  var request = new proto.GetRequest(channel.relative(uri));\n  channel.send(request);\n}\n\nfunction put(uri, body, handler) {\n  if (typeof handler === 'function') handler = {done: handler};\n\n  var handlers = getHandlers[uri];\n  if (handlers === undefined) {\n    handlers = [];\n    getHandlers[uri] = handlers;\n  }\n  handlers.push(handler);\n\n  var channel = Channel.get(uri);\n  var request = new proto.PutRequest(channel.relative(uri), body);\n  channel.send(request);\n}\n\nfunction handleState(endpoint, envelope) {\n  var uri = URI.resolve(endpoint, envelope.node);\n  var handlers = getHandlers[uri] || [];\n  var handler;\n  while ((handler = handlers.shift())) {\n    handler.done(envelope);\n  }\n  delete getHandlers[uri];\n}\n\n\nfunction Channel(uri) {\n  this.uri = uri;\n  this.socket = new WS(uri, 'swim-0.0');\n  this.buffer = [];\n  Channel.bridge[uri] = this;\n  var that = this;\n  this.socket.onopen = function () {\n    var envelope;\n    while ((envelope = that.buffer.shift())) that.send(envelope);\n  };\n  this.socket.onclose = function () {\n    delete Channel.bridge[that.uri];\n  };\n  this.socket.onmessage = function (frame) {\n    var payload = frame.data;\n    if (typeof payload === 'string') {\n      var envelope = proto.parse(payload);\n      if (envelope) that.receive(envelope);\n    }\n  };\n}\nChannel.prototype.send = function (envelope) {\n  if (this.socket.readyState !== this.socket.OPEN) this.buffer.push(envelope);\n  else this.socket.send(proto.stringify(envelope));\n};\nChannel.prototype.receive = function (envelope) {\n  if (envelope.isEventMessage) handleMessage(this.uri, envelope);\n  else if (envelope.isCommandMessage) handleMessage(this.uri, envelope);\n  else if (envelope.isStateResponse) handleState(this.uri, envelope);\n};\nChannel.prototype.close = function () {\n  if (this.socket.readyState !== this.socket.CLOSED ||\n      this.socket.readyState !== this.socket.CLOSING)\n    this.socket.close();\n  else delete Channel.bridge[this.uri];\n};\nChannel.prototype.relative = function (uri) {\n  var components = URI.parse(uri);\n  return URI.serialize({\n    path: components.path,\n    query: components.query,\n    fragment: components.fragment\n  });\n};\nChannel.bridge = {};\nChannel.endpoint = function (uri) {\n  var components = URI.parse(uri);\n  var scheme = components.scheme;\n  if (scheme === 'swim') scheme = 'http';\n  else if (scheme === 'swims') scheme = 'https';\n  return URI.serialize({\n    scheme: scheme,\n    userinfo: components.userinfo,\n    host: components.host,\n    port: components.port\n  });\n};\nChannel.get = function (uri) {\n  var endpoint = Channel.endpoint(uri);\n  var channel = Channel.bridge[endpoint];\n  if (channel === undefined) channel = new Channel(endpoint);\n  return channel;\n};\n\n\nexports.reset = reset;\nexports.link = link;\nexports.unlink = unlink;\nexports.sendEvent = sendEvent;\nexports.sendCommand = sendCommand;\nexports.get = get;\nexports.put = put;\n\n},{\"swim-proto-js\":3,\"uri-js\":7,\"websocket\":8}],2:[function(require,module,exports){\n'use strict';\n\nfunction coerce() {\n  if (arguments.length === 1) {\n    var item = arguments[0];\n    if (item === undefined) return Absent;\n    else if (item === null) return Extant;\n    else if (item.isAttr || item.isSlot) {\n      var builder = new RecordBuilder();\n      builder.appendField(item);\n      return builder.state();\n    }\n    else return coerceItem(item);\n  }\n  else if (arguments.length > 1) return coerceArray(arguments);\n  else return Absent;\n}\nfunction coerceItem(item) {\n  if (item === null) return Extant;\n  else if (item.isRecord ||\n           item.isAttr ||\n           item.isSlot ||\n           typeof item === 'string' ||\n           typeof item === 'number' ||\n           typeof item === 'boolean' ||\n           item instanceof Uint8Array ||\n           item === Extant ||\n           item === Absent) return item;\n  else if (Array.isArray(item)) return coerceArray(item);\n  else if (typeof item === 'object') {\n    if (item.toRecon && typeof item.toRecon === 'function') return item.toRecon();\n    else return coerceObject(item);\n  }\n  else return Absent;\n}\nfunction coerceArray(array) {\n  var builder = new RecordBuilder();\n  var n = array.length;\n  var i = 0;\n  while (i < n) {\n    var value = coerceItem(array[i]);\n    if (value.isField) builder.appendField(value);\n    else builder.appendValue(value);\n    i += 1;\n  }\n  return builder.state();\n}\nfunction coerceObject(object) {\n  var builder = new RecordBuilder();\n  var prop, key, value;\n  var attrs = object['@'];\n  for (prop in attrs) {\n    key = coerce(prop);\n    if (typeof key === 'string') {\n      value = coerce(attrs[prop]);\n      if (!value.isAbsent) builder.appendField(new Attr(key, value));\n    }\n  }\n  for (prop in object) {\n    if (prop !== '@') {\n      key = coerce(prop);\n      if (!key.isAbsent) {\n        value = coerce(object[prop]);\n        if (!value.isAbsent) builder.appendField(new Slot(key, value));\n      }\n    }\n  }\n  return builder.state();\n}\n\nfunction parse(string) {\n  var input = new StringIterator(string);\n  var result = new DocumentParser().run(input);\n  return result.state();\n}\n\nfunction stringify() {\n  var writer = new ReconWriter();\n  writer.writeBlock(coerce.apply(null, arguments));\n  return writer.state();\n}\n\nfunction objectify(value) {\n  if (value === undefined || value === null || value.isExtant) return null;\n  else if (value.isAbsent) return undefined;\n  else if (value.isRecord) {\n    if (value.isArray()) return objectifyArray(value);\n    else return objectifyObject(value);\n  }\n  else return value;\n}\nfunction objectifyArray(record) {\n  var array = [];\n  var items = record.iterator();\n  while (!items.isEmpty()) {\n    var value = objectify(items.head());\n    array.push(value);\n    items.step();\n  }\n  return array;\n}\nfunction objectifyObject(record) {\n  var items = record.iterator();\n  var key, value;\n  var object = {};\n  var attrs = null;\n  var i = 0;\n  while (!items.isEmpty()) {\n    var item = items.head();\n    if (item.isField) {\n      key = objectify(item.key);\n      value = objectify(item.value);\n      if (item.isAttr) {\n        if (attrs === null) attrs = {};\n        attrs[key] = value;\n      }\n      else object[key] = value;\n    }\n    else {\n      value = objectify(item);\n      object[i] = value;\n    }\n    items.step();\n    i += 1;\n  }\n  if (attrs !== null) object['@'] = attrs;\n  return object;\n}\n\nfunction base64(string) {\n  if (string === undefined) return new Uint8Array(0);\n  var data = new DataBuilder();\n  var cs = new StringIterator(string);\n  while (!cs.isEmpty()) {\n    data.appendBase64Char(cs.head());\n    cs.step();\n  }\n  return data.state();\n}\n\nfunction attr(key, value) {\n  if (value === undefined) value = Extant;\n  return new Attr(coerce(key), coerce(value));\n}\n\nfunction slot(key, value) {\n  if (value === undefined) value = Extant;\n  return new Slot(coerce(key), coerce(value));\n}\n\nfunction empty() {\n  return new Record([], {});\n}\n\nfunction builder() {\n  return new RecordBuilder();\n}\n\nfunction compare(x, y) {\n  if (x === y) return true;\n  if (x.isRecord && y.isRecord) return x.equals(y);\n  if (x.isField && y.isField) return x.equals(y);\n  if (x instanceof Uint8Array && y instanceof Uint8Array && x.length === y.length) {\n    var i = 0;\n    var n = x.length;\n    while (i < n && x[i] === y[i]) i += 1;\n    if (i === n) return true;\n  }\n  return false;\n}\n\n\nfunction Record(items, index) {\n  if (index === undefined) {\n    index = {};\n    var i = 0;\n    var n = items.length;\n    while (i < n) {\n      var item = items[i];\n      if (item.isField) index[item.key] = item.value;\n      i += 1;\n    }\n  }\n  var record = function(key) {\n    var value = index[key];\n    if (value === undefined && typeof key === 'number') value = items[key];\n    return value;\n  };\n  record.__proto__ = Record.prototype;\n  Object.defineProperty(record, 'items', {value: items});\n  Object.defineProperty(record, 'index', {value: index});\n  return record;\n}\nRecord.prototype = Object.create(Function.prototype);\nRecord.prototype.constructor = Record;\nObject.defineProperty(Record.prototype, 'isRecord', {enumerable: true, value: true});\nObject.defineProperty(Record.prototype, 'size', {\n  enumerable: true,\n  get: function () {\n    return this.items.length;\n  }\n});\nRecord.prototype.isEmpty = function () {\n  return this.items.length === 0;\n};\nRecord.prototype.isArray = function () {\n  return this.items.length >= 0 && Object.getOwnPropertyNames(this.index).length === 0;\n};\nRecord.prototype.isMarkup = function () {\n  function isBlank(string) {\n    var cs = new StringIterator(string);\n    while (!cs.isEmpty() && isSpace(cs.head())) cs.step();\n    return cs.isEmpty();\n  }\n  var items = this.iterator();\n  var afterNonText = false;\n  var hasNonText = false;\n  var sections = 0;\n  while (!items.isEmpty()) {\n    var item = items.head();\n    if (typeof item !== 'string') {\n      if (afterNonText) return false;\n      afterNonText = true;\n      hasNonText = true;\n    }\n    else if (afterNonText && !isBlank(item)) {\n      afterNonText = false;\n      sections += 1;\n    }\n    else if (sections === 0) sections = 1;\n    items.step();\n  }\n  return hasNonText && sections >= 2;\n};\nRecord.prototype.hasAttrs = function() {\n  return this.items.length > 0 && (this.items[0].isAttr || this.items[this.items.length - 1].isAttr);\n};\nRecord.prototype.hasPrefixAttrs = function () {\n  return this.items.length > 0 && this.items[0].isAttr;\n};\nRecord.prototype.hasPostfixAttrs = function () {\n  return this.items.length > 0 && this.items[this.items.length - 1].isAttr;\n};\nRecord.prototype.contains = function (key) {\n  return this(key) !== undefined;\n};\nRecord.prototype.head = function () {\n  return this.items.length > 0 ? this.items[0] : Absent;\n};\nRecord.prototype.tail = function () {\n  return new Record(this.items.slice(1));\n};\nRecord.prototype.body = function () {\n  return new Record(this.items.slice(0, -1));\n};\nRecord.prototype.foot = function () {\n  return this.items.length > 0 ? this.items[this.items.length - 1] : Absent;\n};\nRecord.prototype.target = function () {\n  var these = this.iterator();\n  while (!these.isEmpty()) {\n    var item = these.next();\n    if (!item.isField) return item;\n  }\n  return Absent;\n};\nRecord.prototype.concat = function () {\n  var builder = new RecordBuilder();\n  builder.appendRecord(this);\n  var that = coerce.apply(null, arguments);\n  if (that.isRecord) builder.appendRecord(that);\n  else builder.appendValue(that);\n  return builder.state();\n};\nRecord.prototype.iterator = function () {\n  return new RecordIterator(this.items);\n};\nRecord.prototype.forEach = function (f) {\n  var these = this.iterator();\n  while (!these.isEmpty()) f(these.next());\n};\nRecord.prototype.equals = function (that) {\n  var these = this.iterator();\n  var those = that.iterator();\n  while (!these.isEmpty() && !those.isEmpty()) {\n    if (!compare(these.next(), those.next())) return false;\n  }\n  return these.isEmpty() && those.isEmpty();\n};\nRecord.prototype.toString = function () {\n  var writer = new ReconWriter();\n  writer.writeRecord(this);\n  return writer.state();\n};\n\n\nfunction Field() {}\nObject.defineProperty(Field.prototype, 'isField', {enumerable: true, value: true});\nObject.defineProperty(Field.prototype, 'isAttr', {enumerable: true, value: false});\nObject.defineProperty(Field.prototype, 'isSlot', {enumerable: true, value: false});\n\nfunction Attr(key, value) {\n  Field.call(this);\n  Object.defineProperty(this, 'key', {enumerable: true, value: key});\n  if (value === undefined) value = Extant;\n  Object.defineProperty(this, 'value', {enumerable: true, value: value});\n}\nAttr.prototype = Object.create(Field.prototype);\nAttr.prototype.constructor = Attr;\nObject.defineProperty(Attr.prototype, 'isAttr', {enumerable: true, value: true});\nAttr.prototype.equals = function (that) {\n  return that.isAttr && compare(this.key, that.key) && compare(this.value, that.value);\n};\nAttr.prototype.toString = function () {\n  var writer = new ReconWriter();\n  writer.writeAttr(this);\n  return writer.state();\n};\n\nfunction Slot(key, value) {\n  Field.call(this);\n  Object.defineProperty(this, 'key', {enumerable: true, value: key});\n  if (value === undefined) value = Extant;\n  Object.defineProperty(this, 'value', {enumerable: true, value: value});\n}\nSlot.prototype = Object.create(Field.prototype);\nSlot.prototype.constructor = Slot;\nObject.defineProperty(Slot.prototype, 'isSlot', {enumerable: true, value: true});\nSlot.prototype.equals = function (that) {\n  return that.isSlot && compare(this.key, that.key) && compare(this.value, that.value);\n};\nSlot.prototype.toString = function () {\n  var writer = new ReconWriter();\n  writer.writeItem(this);\n  return writer.state();\n};\n\n\nvar Extant = {};\nObject.defineProperty(Extant, 'isExtant', {enumerable: true, value: true});\n\nvar Absent = {};\nObject.defineProperty(Absent, 'isAbsent', {enumerable: true, value: true});\n\n\nfunction RecordIterator(items, index) {\n  Object.defineProperty(this, 'items', {value: items});\n  Object.defineProperty(this, 'index', {value: index || 0, writable: true});\n}\nRecordIterator.prototype.isEmpty = function () {\n  return this.index >= this.items.length;\n};\nRecordIterator.prototype.head = function () {\n  if (this.index >= this.items.length) throw 'head of empty iterator';\n  return this.items[this.index];\n};\nRecordIterator.prototype.step = function () {\n  if (this.index >= this.items.length) throw 'empty iterator step';\n  this.index += 1;\n};\nRecordIterator.prototype.next = function () {\n  if (this.index >= this.items.length) return null;\n  var item = this.items[this.index];\n  this.index += 1;\n  return item;\n};\nRecordIterator.prototype.dup = function () {\n  return new RecordIterator(this.items, this.index);\n};\nRecordIterator.prototype.toRecord = function () {\n  return new Record(this.items.slice(this.index));\n};\nRecordIterator.prototype.isAllAttrs = function () {\n  var items = this.dup();\n  while (!items.isEmpty()) {\n    if (!items.next().isAttr) return false;\n  }\n  return true;\n};\n\n\nfunction RecordBuilder() {\n  Object.defineProperty(this, 'items', {value: []});\n  Object.defineProperty(this, 'index', {value: {}});\n}\nRecordBuilder.prototype.appendField = function (field) {\n  this.items.push(field);\n  this.index[field.key] = field.value;\n};\nRecordBuilder.prototype.appendValue = function (value) {\n  this.items.push(value);\n};\nRecordBuilder.prototype.appendRecord = function (record) {\n  var items = record.iterator();\n  while (!items.isEmpty()) {\n    var item = items.next();\n    if (item.isField) this.appendField(item);\n    else this.appendValue(item);\n  }\n};\nRecordBuilder.prototype.attr = function (key, value) {\n  this.appendField(attr(key, value));\n  return this;\n};\nRecordBuilder.prototype.slot = function (key, value) {\n  this.appendField(slot(key, value));\n  return this;\n};\nRecordBuilder.prototype.item = function (value) {\n  this.appendValue(coerceItem(value));\n  return this;\n};\nRecordBuilder.prototype.state = function () {\n  return new Record(this.items, this.index);\n};\n\n\nfunction ValueBuilder() {\n  Object.defineProperty(this, 'items', {value: null, writable: true});\n  Object.defineProperty(this, 'index', {value: null, writable: true});\n  Object.defineProperty(this, 'value', {value: null, writable: true});\n}\nValueBuilder.prototype.appendField = function (field) {\n  if (this.items === null) {\n    this.items = [];\n    this.index = {};\n    if (this.value !== null) {\n      this.items.push(this.value);\n      this.value = null;\n    }\n  }\n  this.items.push(field);\n  this.index[field.key] = field.value;\n};\nValueBuilder.prototype.appendValue = function (value) {\n  if (this.items !== null) this.items.push(value);\n  else if (this.value === null) this.value = value;\n  else {\n    this.items = [];\n    this.index = {};\n    this.items.push(this.value);\n    this.value = null;\n    this.items.push(value);\n  }\n};\nValueBuilder.prototype.state = function () {\n  if (this.value !== null) return this.value;\n  else if (this.items !== null) return new Record(this.items, this.index);\n  else return Absent;\n};\n\n\nfunction StringIterator(string, index) {\n  Object.defineProperty(this, 'string', {value: string || ''});\n  Object.defineProperty(this, 'index', {value: index || 0, writable: true});\n}\nStringIterator.prototype.isDone = function () {\n  return false;\n};\nStringIterator.prototype.isEmpty = function () {\n  return this.index >= this.string.length;\n};\nStringIterator.prototype.head = function () {\n  var c1 = this.string.charCodeAt(this.index);\n  if (c1 <= 0xD7FF || c1 >= 0xE000) return c1; // U+0000..U+D7FF | U+E000..U+FFFF\n  else if (c1 <= 0xDBFF && this.index + 1 < this.string.length) { // c1 >= 0xD800\n    var c2 = this.string.charCodeAt(this.index + 1);\n    if (c2 >= 0xDC00 && c2 <= 0xDFFF) // U+10000..U+10FFFF\n      return (((c1 & 0x3FF) << 10) | (c2 & 0x3FF)) + 0x10000;\n    else return 0xFFFD;\n  }\n  else return 0xFFFD;\n};\nStringIterator.prototype.step = function () {\n  var c1 = this.string.charCodeAt(this.index);\n  if (c1 <= 0xD7FF || c1 >= 0xE000) // U+0000..U+D7FF | U+E000..U+FFFF\n    this.index += 1;\n  else if (c1 <= 0xDBFF && this.index + 1 < this.string.length) { // c1 >= 0xD800\n    var c2 = this.string.charCodeAt(this.index + 1);\n    if (c2 >= 0xDC00 && c2 <= 0xDFFF) // U+10000..U+10FFFF\n      this.index += 2;\n    else this.index += 1;\n  }\n  else this.index += 1;\n};\n\nStringIterator.Done = {\n  isDone: function () {\n    return true;\n  },\n  isEmpty: function () {\n    return true;\n  },\n  head: function () {\n    throw 'head of empty iterator';\n  },\n  step: function () {\n    throw 'empty iterator step';\n  }\n};\nStringIterator.Done.prototype = Object.create(StringIterator.prototype);\n\n\nfunction StringIteratee() {}\nStringIteratee.prototype.isCont = function () {\n  return true;\n};\nStringIteratee.prototype.isDone = function () {\n  return false;\n};\nStringIteratee.prototype.isError = function () {\n  return false;\n};\nStringIteratee.prototype.feed = function (input) {\n  return this;\n};\nStringIteratee.prototype.run = function (input) {\n  var next = this;\n  while (!input.isEmpty() && next.isCont()) next = next.feed(input);\n  if (input.isEmpty() && !input.isDone() && next.isCont()) next = next.feed(StringIterator.Done);\n  return next;\n};\n\nStringIteratee.Done = function (value) {\n  StringIteratee.call(this);\n  this.value = value;\n};\nStringIteratee.Done.prototype = Object.create(StringIteratee.prototype);\nStringIteratee.Done.prototype.constructor = StringIteratee.Done;\nStringIteratee.Done.prototype.isCont = function () {\n  return false;\n};\nStringIteratee.Done.prototype.isDone = function () {\n  return true;\n};\nStringIteratee.Done.prototype.feed = function (input) {\n  return this;\n};\nStringIteratee.Done.prototype.state = function () {\n  return this.value;\n};\n\nStringIteratee.Error = function (error) {\n  StringIteratee.call(this);\n  this.error = error;\n};\nStringIteratee.Error.prototype = Object.create(StringIteratee.prototype);\nStringIteratee.Error.prototype.constructor = StringIteratee.Error;\nStringIteratee.Error.prototype.isCont = function () {\n  return false;\n};\nStringIteratee.Error.prototype.isError = function () {\n  return true;\n};\nStringIteratee.Error.prototype.feed = function (input) {\n  return this;\n};\nStringIteratee.Error.prototype.state = function () {\n  throw this.error;\n};\n\nStringIteratee.unexpectedEOF = new StringIteratee.Error('unexpected end of input');\n\n\nfunction StringBuilder() {\n  Object.defineProperty(this, 'string', {value: '', writable: true});\n}\nStringBuilder.prototype.append = function (c) {\n  if ((c >= 0x0000 && c <= 0xD7FF) ||\n      (c >= 0xE000 && c <= 0xFFFF)) { // U+0000..U+D7FF | U+E000..U+FFFF\n    this.string += String.fromCharCode(c);\n  }\n  else if (c >= 0x10000 && c <= 0x10FFFF) { // U+10000..U+10FFFF\n    var u = c - 0x10000;\n    this.string += String.fromCharCode(0xD800 | (u >>> 10), 0xDC00 | (u & 0x3FF));\n  }\n  else { // invalid code point\n    this.string += String.fromCharCode(0xFFFD);\n  }\n};\nStringBuilder.prototype.appendString = function (s) {\n  var cs = new StringIterator(s);\n  while (!cs.isEmpty()) {\n    this.append(cs.head());\n    cs.step();\n  }\n};\nStringBuilder.prototype.state = function () {\n  return this.string;\n};\n\n\nfunction DataBuilder() {\n  Object.defineProperty(this, 'buffer', {value: null, writable: true});\n  Object.defineProperty(this, 'offset', {value: 0, writable: true});\n  Object.defineProperty(this, 'aliased', {value: true, writable: true});\n  Object.defineProperty(this, 'p', {value: 0, writable: true});\n  Object.defineProperty(this, 'q', {value: 0, writable: true});\n  Object.defineProperty(this, 'r', {value: 0, writable: true});\n  Object.defineProperty(this, 's', {value: 0, writable: true});\n}\nDataBuilder.prototype.prepare = function (size) {\n  function expand(base, size) {\n    var n = Math.max(base, size) - 1;\n    n |= n >> 1; n |= n >> 2; n |= n >> 4; n |= n >> 8;\n    return n + 1;\n  }\n  if (this.aliased || size > this.buffer.length) {\n    var array = new Uint8Array(expand(256, size));\n    if (this.buffer) array.set(this.buffer);\n    this.buffer = array;\n    this.aliased = false;\n  }\n};\nDataBuilder.prototype.appendByte = function (value) {\n  this.prepare(this.offset + 1);\n  this.buffer[this.offset] = value;\n  this.offset += 1;\n};\nDataBuilder.prototype.decodeBase64Digit = function (c) {\n  if (c >= 65/*'A'*/ && c <= 90/*'Z'*/) return c - 65/*'A'*/;\n  else if (c >= 97/*'a'*/ && c <= 122/*'z'*/) return c - 71/*'a' - 26*/;\n  else if (c >= 48/*'0'*/ && c <= 57/*'9'*/) return c + 4/*52 - '0'*/;\n  else if (c === 43/*'+'*/ || c === 45/*'-'*/) return 62;\n  else if (c === 47/*'/'*/ || c === 95/*'_'*/) return 63;\n};\nDataBuilder.prototype.decodeBase64Quantum = function () {\n  var x = this.decodeBase64Digit(this.p);\n  var y = this.decodeBase64Digit(this.q);\n  if (this.r !== 61/*'='*/) {\n    var z = this.decodeBase64Digit(this.r);\n    if (this.s !== 61/*'='*/) {\n      var w = this.decodeBase64Digit(this.s);\n      this.appendByte((x << 2) | (y >>> 4));\n      this.appendByte((y << 4) | (z >>> 2));\n      this.appendByte((z << 6) | w);\n    }\n    else {\n      this.appendByte((x << 2) | (y >>> 4));\n      this.appendByte((y << 4) | (z >>> 2));\n    }\n  }\n  else {\n    if (this.s !== 61/*'='*/) throw 'incomplete base64 quantum';\n    this.appendByte((x << 2) | (y >>> 4));\n  }\n};\nDataBuilder.prototype.appendBase64Char = function (c) {\n  if (this.p === 0) this.p = c;\n  else if (this.q === 0) this.q = c;\n  else if (this.r === 0) this.r = c;\n  else {\n    this.s = c;\n    this.decodeBase64Quantum();\n    this.s = 0;\n    this.r = 0;\n    this.q = 0;\n    this.p = 0;\n  }\n};\nDataBuilder.prototype.state = function (value) {\n  if (!this.buffer) this.buffer = new Uint8Array(0);\n  else if (this.buffer.length !== this.offset) {\n    var array = new Uint8Array(this.offset);\n    array.set(this.buffer.subarray(0, this.offset));\n    this.buffer = array;\n  }\n  this.aliased = true;\n  return this.buffer;\n};\n\n\nfunction isSpace(c) {\n  return c === 0x20 || c === 0x9;\n}\nfunction isNewline(c) {\n  return c === 0xA || c === 0xD;\n}\nfunction isWhitespace(c) {\n  return isSpace(c) || isNewline(c);\n}\nfunction isNameStartChar(c) {\n  return (\n    c >= 65/*'A'*/ && c <= 90/*'Z'*/ ||\n    c === 95/*'_'*/ ||\n    c >= 97/*'a'*/ && c <= 122/*'z'*/ ||\n    c >= 0xC0 && c <= 0xD6 ||\n    c >= 0xD8 && c <= 0xF6 ||\n    c >= 0xF8 && c <= 0x2FF ||\n    c >= 0x370 && c <= 0x37D ||\n    c >= 0x37F && c <= 0x1FFF ||\n    c >= 0x200C && c <= 0x200D ||\n    c >= 0x2070 && c <= 0x218F ||\n    c >= 0x2C00 && c <= 0x2FEF ||\n    c >= 0x3001 && c <= 0xD7FF ||\n    c >= 0xF900 && c <= 0xFDCF ||\n    c >= 0xFDF0 && c <= 0xFFFD ||\n    c >= 0x10000 && c <= 0xEFFFF);\n}\nfunction isNameChar(c) {\n  return (\n    c === 45/*'-'*/ ||\n    c >= 48/*'0'*/ && c <= 57/*'9'*/ ||\n    c >= 65/*'A'*/ && c <= 90/*'Z'*/ ||\n    c === 95/*'_'*/ ||\n    c >= 97/*'a'*/ && c <= 122/*'z'*/ ||\n    c === 0xB7 ||\n    c >= 0xC0 && c <= 0xD6 ||\n    c >= 0xD8 && c <= 0xF6 ||\n    c >= 0xF8 && c <= 0x37D ||\n    c >= 0x37F && c <= 0x1FFF ||\n    c >= 0x200C && c <= 0x200D ||\n    c >= 0x203F && c <= 0x2040 ||\n    c >= 0x2070 && c <= 0x218F ||\n    c >= 0x2C00 && c <= 0x2FEF ||\n    c >= 0x3001 && c <= 0xD7FF ||\n    c >= 0xF900 && c <= 0xFDCF ||\n    c >= 0xFDF0 && c <= 0xFFFD ||\n    c >= 0x10000 && c <= 0xEFFFF);\n}\nfunction isBase64Char(c) {\n  return (\n    c >= 48/*'0'*/ && c <= 57/*'9'*/ ||\n    c >= 65/*'A'*/ && c <= 90/*'Z'*/ ||\n    c >= 97/*'a'*/ && c <= 122/*'z'*/ ||\n    c === 43/*'+'*/ || c === 45/*'-'*/ ||\n    c === 47/*'/'*/ || c === 95/*'_'*/);\n}\n\n\nfunction DocumentParser(value) {\n  StringIteratee.call(this);\n  this.value = value || new BlockParser();\n}\nDocumentParser.prototype = Object.create(StringIteratee.prototype);\nDocumentParser.prototype.constructor = DocumentParser;\nDocumentParser.prototype.feed = function (input) {\n  var value = this.value;\n  while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n  if (value.isError()) return value;\n  if (value.isDone()) {\n    if (!input.isEmpty()) return new StringIteratee.Error({found: input.head()});\n    else if (input.isDone()) return value;\n  }\n  return new DocumentParser(value);\n};\n\n\nfunction BlockParser(builder, key, value, s) {\n  StringIteratee.call(this);\n  this.builder = builder || null;\n  this.key = key || null;\n  this.value = value || null;\n  this.s = s || 1;\n}\nBlockParser.prototype = Object.create(StringIteratee.prototype);\nBlockParser.prototype.constructor = BlockParser;\nBlockParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var value = this.value;\n  var key = this.key;\n  var builder = this.builder || new ValueBuilder();\n  while (!input.isEmpty() || input.isDone()) {\n    if (s === 1) {\n      while (!input.isEmpty() && (c = input.head(), isWhitespace(c))) input.step();\n      if (!input.isEmpty()) s = 2;\n      else if (input.isDone()) return new StringIteratee.Done(builder.state());\n    }\n    if (s === 2) {\n      key = key || new BlockValueParser();\n      while ((!input.isEmpty() || input.isDone()) && key.isCont()) key = key.feed(input);\n      if (key.isDone()) s = 3;\n      else if (key.isError()) return key;\n    }\n    if (s === 3) {\n      while (!input.isEmpty() && (c = input.head(), isSpace(c))) input.step();\n      if (!input.isEmpty()) {\n        if (c === 58/*':'*/) {\n          input.step();\n          s = 4;\n        }\n        else {\n          builder.appendValue(key.state());\n          key = null;\n          s = 6;\n        }\n      }\n      else if (input.isDone()) {\n        builder.appendValue(key.state());\n        return new StringIteratee.Done(builder.state());\n      }\n    }\n    if (s === 4) {\n      while (!input.isEmpty() && isSpace(input.head())) input.step();\n      if (!input.isEmpty()) s = 5;\n      else if (input.isDone()) {\n        builder.appendField(new Slot(key.state()));\n        return new StringIteratee.Done(builder.state());\n      }\n    }\n    if (s === 5) {\n      value = value || new BlockValueParser();\n      while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n      if (value.isDone()) {\n        builder.appendField(new Slot(key.state(), value.state()));\n        key = null;\n        value = null;\n        s = 6;\n      }\n      else if (value.isError()) return value;\n    }\n    if (s === 6) {\n      while (!input.isEmpty() && (c = input.head(), isSpace(c))) input.step();\n      if (!input.isEmpty()) {\n        if (c === 44/*','*/ || c === 59/*';'*/ || isNewline(c)) {\n          input.step();\n          s = 1;\n        }\n        else return new StringIteratee.Done(builder.state());\n      }\n      else if (input.isDone()) return new StringIteratee.Done(builder.state());\n    }\n  }\n  return new BlockParser(builder, key, value, s);\n};\n\n\nfunction AttrParser(ident, value, s) {\n  StringIteratee.call(this);\n  this.ident = ident || new IdentParser();\n  this.value = value || new BlockParser();\n  this.s = s || 1;\n}\nAttrParser.prototype = Object.create(StringIteratee.prototype);\nAttrParser.prototype.constructor = AttrParser;\nAttrParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var value = this.value;\n  var ident = this.ident;\n  if (s === 1) {\n    if (!input.isEmpty() && (c = input.head(), c === 64/*'@'*/)) {\n      input.step();\n      s = 2;\n    }\n    else if (!input.isEmpty()) return new StringIteratee.Error({expected: '\\'@\\'', found: c});\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  if (s === 2) {\n    ident = ident.feed(input);\n    if (ident.isDone()) s = 3;\n    else if (ident.isError()) return ident;\n  }\n  if (s === 3) {\n    if (!input.isEmpty() && input.head() === 40/*'('*/) {\n      input.step();\n      s = 4;\n    }\n    else if (!input.isEmpty() || input.isDone()) return new StringIteratee.Done(new Attr(ident.state()));\n  }\n  if (s === 4) {\n    while (!input.isEmpty() && (c = input.head(), isWhitespace(c))) input.step();\n    if (!input.isEmpty()) {\n      if (c === 41/*')'*/) {\n        input.step();\n        return new StringIteratee.Done(new Attr(ident.state()));\n      }\n      else s = 5;\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  if (s === 5) {\n    while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n    if (value.isDone()) s = 6;\n    else if (value.isError()) return value;\n  }\n  if (s === 6) {\n    while (!input.isEmpty() && (c = input.head(), isWhitespace(c))) input.step();\n    if (!input.isEmpty()) {\n      if (c === 41/*')'*/) {\n        input.step();\n        return new StringIteratee.Done(new Attr(ident.state(), value.state()));\n      }\n      else return new StringIteratee.Error({expected: '\\')\\'', found: c});\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  return new AttrParser(ident, value, s);\n};\n\n\nfunction BlockValueParser(builder, field, value, s) {\n  StringIteratee.call(this);\n  this.builder = builder || null;\n  this.field = field || null;\n  this.value = value || null;\n  this.s = s || 1;\n}\nBlockValueParser.prototype = Object.create(StringIteratee.prototype);\nBlockValueParser.prototype.constructor = BlockValueParser;\nBlockValueParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var value = this.value;\n  var field = this.field;\n  var builder = this.builder;\n  while (!input.isEmpty() || input.isDone()) {\n    if (s === 1) {\n      if (!input.isEmpty()) {\n        c = input.head();\n        if (c === 64/*'@'*/) {\n          field = new AttrParser();\n          s = 2;\n        }\n        else if (c === 123/*'{'*/) {\n          builder = builder || new RecordBuilder();\n          value = new RecordParser(builder);\n          s = 5;\n        }\n        else if (c === 91/*'['*/) {\n          builder = builder || new RecordBuilder();\n          value = new MarkupParser(builder);\n          s = 5;\n        }\n        else if (c === 34/*'\"'*/) {\n          value = new StringParser();\n          s = 4;\n        }\n        else if (c === 37/*'%'*/) {\n          value = new DataParser();\n          s = 4;\n        }\n        else if (c === 45/*'-'*/ || c >= 48/*'0'*/ && c <= 57/*'9'*/) {\n          value = new NumberParser();\n          s = 4;\n        }\n        else if (isNameStartChar(c)) {\n          value = new IdentParser();\n          s = 4;\n        }\n        else if (!builder) return new StringIteratee.Done(Absent);\n        else return new StringIteratee.Done(builder.state());\n      }\n      else if (input.isDone()) {\n        if (!builder) return new StringIteratee.Done(Absent);\n        else return new StringIteratee.Done(builder.state());\n      }\n    }\n    if (s === 2) {\n      while ((!input.isEmpty() || input.isDone()) && field.isCont()) field = field.feed(input);\n      if (field.isDone()) {\n        builder = builder || new ValueBuilder();\n        builder.appendField(field.state());\n        field = null;\n        s = 3;\n      }\n      else if (field.isError()) return field;\n    }\n    if (s === 3) {\n      while (!input.isEmpty() && isSpace(input.head())) input.step();\n      if (!input.isEmpty()) s = 1;\n      else if (input.isDone()) return new StringIteratee.Done(builder.state());\n    }\n    if (s === 4) {\n      while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n      if (value.isDone()) {\n        builder = builder || new ValueBuilder();\n        builder.appendValue(value.state());\n        value = null;\n        s = 6;\n      }\n      else if (value.isError()) return value;\n    }\n    if (s === 5) {\n      while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n      if (value.isDone()) {\n        value = null;\n        s = 6;\n      }\n      else if (value.isError()) return value;\n    }\n    if (s === 6) {\n      while (!input.isEmpty() && isSpace(input.head())) input.step();\n      if (!input.isEmpty()) {\n        if (input.head() === 64/*'@'*/) {\n          field = new AttrParser();\n          s = 7;\n        }\n        else return new StringIteratee.Done(builder.state());\n      }\n      else if (input.isDone()) return new StringIteratee.Done(builder.state());\n    }\n    if (s === 7) {\n      while ((!input.isEmpty() || input.isDone()) && field.isCont()) field = field.feed(input);\n      if (field.isDone()) {\n        builder = builder || new ValueBuilder();\n        builder.appendField(field.state());\n        field = null;\n        s = 6;\n      }\n      else if (field.isError()) return field;\n    }\n  }\n  return new BlockValueParser(builder, field, value, s);\n};\n\n\nfunction InlineValueParser(builder, field, value, s) {\n  StringIteratee.call(this);\n  this.builder = builder || null;\n  this.field = field || null;\n  this.value = value || null;\n  this.s = s || 1;\n}\nInlineValueParser.prototype = Object.create(StringIteratee.prototype);\nInlineValueParser.prototype.constructor = InlineValueParser;\nInlineValueParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var value = this.value;\n  var field = this.field;\n  var builder = this.builder;\n  while (!input.isEmpty() || input.isDone()) {\n    if (s === 1) {\n      if (!input.isEmpty()) {\n        c = input.head();\n        if (c === 64/*'@'*/) {\n          field = new AttrParser();\n          s = 2;\n        }\n        else if (c === 123/*'{'*/) {\n          if (builder) {\n            value = new RecordParser(builder);\n            s = 5;\n          }\n          else {\n            value = new RecordParser();\n            s = 4;\n          }\n        }\n        else if (c === 91/*'['*/) {\n          if (builder) {\n            value = new MarkupParser(builder);\n            s = 5;\n          }\n          else {\n            value = new MarkupParser();\n            s = 4;\n          }\n        }\n        else if (!builder) return new StringIteratee.Done(Absent);\n        else return new StringIteratee.Done(builder.state());\n      }\n      else if (input.isDone()) {\n        if (!builder) return new StringIteratee.Done(Absent);\n        else return new StringIteratee.Done(builder.state());\n      }\n    }\n    if (s === 2) {\n      while ((!input.isEmpty() || input.isDone()) && field.isCont()) field = field.feed(input);\n      if (field.isDone()) {\n        builder = builder || new ValueBuilder();\n        builder.appendField(field.state());\n        field = null;\n        s = 3;\n      }\n      else if (field.isError()) return field;\n    }\n    if (s === 3) {\n      while (!input.isEmpty() && isSpace(input.head())) input.step();\n      if (!input.isEmpty()) s = 1;\n      else if (input.isDone()) return new StringIteratee.Done(builder.state());\n    }\n    if (s === 4) {\n      while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n      if (value.isDone()) {\n        builder = builder || new ValueBuilder();\n        builder.appendValue(value.state());\n        return new StringIteratee.Done(builder.state());\n      }\n      else if (value.isError()) return value;\n    }\n    if (s === 5) {\n      while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n      if (value.isDone()) return new StringIteratee.Done(builder.state());\n      else if (value.isError()) return value;\n    }\n  }\n  return new InlineValueParser(builder, field, value, s);\n};\n\n\nfunction RecordParser(builder, key, value, s) {\n  StringIteratee.call(this);\n  this.builder = builder || null;\n  this.key = key || null;\n  this.value = value || null;\n  this.s = s || 1;\n}\nRecordParser.prototype = Object.create(StringIteratee.prototype);\nRecordParser.prototype.constructor = RecordParser;\nRecordParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var value = this.value;\n  var key = this.key;\n  var builder = this.builder || new RecordBuilder();\n  if (s === 1) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c === 123/*'{'*/) {\n        input.step();\n        s = 2;\n      }\n      else return new StringIteratee.Error({expected: '\\'{\\'', found: c});\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  while (!input.isEmpty() || input.isDone()) {\n    if (s === 2) {\n      while (!input.isEmpty() && (c = input.head(), isWhitespace(c))) input.step();\n      if (!input.isEmpty()) {\n        if (c === 125/*'}'*/) {\n          input.step();\n          return new StringIteratee.Done(builder.state());\n        }\n        else s = 3;\n      }\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n    if (s === 3) {\n      key = key || new BlockValueParser();\n      while ((!input.isEmpty() || input.isDone()) && key.isCont()) key = key.feed(input);\n      if (key.isDone()) s = 4;\n      else if (key.isError()) return key;\n    }\n    if (s === 4) {\n      while (!input.isEmpty() && (c = input.head(), isSpace(c))) input.step();\n      if (!input.isEmpty()) {\n        if (c === 58/*':'*/) {\n          input.step();\n          s = 5;\n        }\n        else {\n          builder.appendValue(key.state());\n          key = null;\n          s = 7;\n        }\n      }\n      else if (input.isDone()) {\n        builder.appendValue(key.state());\n        return new StringIteratee.Done(builder.state());\n      }\n    }\n    if (s === 5) {\n      while (!input.isEmpty() && isSpace(input.head())) input.step();\n      if (!input.isEmpty()) s = 6;\n      else if (input.isDone()) {\n        builder.appendField(new Slot(key.state()));\n        return new StringIteratee.Done(builder.state());\n      }\n    }\n    if (s === 6) {\n      value = value || new BlockValueParser();\n      while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n      if (value.isDone()) {\n        builder.appendField(new Slot(key.state(), value.state()));\n        key = null;\n        value = null;\n        s = 7;\n      }\n      else if (value.isError()) return value;\n    }\n    if (s === 7) {\n      while (!input.isEmpty() && (c = input.head(), isSpace(c))) input.step();\n      if (!input.isEmpty()) {\n        if (c === 44/*','*/ || c === 59/*';'*/ || isNewline(c)) {\n          input.step();\n          s = 2;\n        }\n        else if (c === 125/*'}'*/) {\n          input.step();\n          return new StringIteratee.Done(builder.state());\n        }\n       else return new StringIteratee.Error({expected: '\\'}\\', \\';\\', \\',\\', or newline', found: c});\n      }\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n  }\n  return new RecordParser(builder, key, value, s);\n};\n\n\nfunction MarkupParser(builder, text, value, s) {\n  StringIteratee.call(this);\n  this.builder = builder || null;\n  this.text = text || null;\n  this.value = value || null;\n  this.s = s || 1;\n}\nMarkupParser.prototype = Object.create(StringIteratee.prototype);\nMarkupParser.prototype.constructor = MarkupParser;\nMarkupParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var value = this.value;\n  var text = this.text;\n  var builder = this.builder;\n  if (s === 1) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c === 91/*'['*/) {\n        input.step();\n        s = 2;\n      }\n      else return new StringIteratee.Error({expected: '\\'[\\'', found: c});\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  while (!input.isEmpty() || input.isDone()) {\n    if (s === 2) {\n      while (!input.isEmpty() && (c = input.head(),\n          c !== 64/*'@'*/ &&\n          c !== 91/*'['*/ &&\n          c !== 92/*'\\\\'*/ &&\n          c !== 93/*']'*/ &&\n          c !== 123/*'{'*/ &&\n          c !== 125/*'}'*/)) {\n        input.step();\n        text = text || new StringBuilder();\n        text.append(c);\n      }\n      if (!input.isEmpty()) {\n        if (c === 93/*']'*/) {\n          input.step();\n          builder = builder || new RecordBuilder();\n          if (text) builder.appendValue(text.state());\n          return new StringIteratee.Done(builder.state());\n        }\n        else if (c === 64/*'@'*/) {\n          builder = builder || new RecordBuilder();\n          if (text) {\n            builder.appendValue(text.state());\n            text = null;\n          }\n          value = new InlineValueParser();\n          s = 3;\n        }\n        else if (c === 123/*'{'*/) {\n          builder = builder || new RecordBuilder();\n          if (text) {\n            builder.appendValue(text.state());\n            text = null;\n          }\n          value = new RecordParser(builder);\n          s = 4;\n        }\n        else if (c === 91/*'['*/) {\n          builder = builder || new RecordBuilder();\n          if (text) {\n            builder.appendValue(text.state());\n            text = null;\n          }\n          value = new MarkupParser(builder);\n          s = 4;\n        }\n        else if (c === 92/*'\\\\'*/) {\n          input.step();\n          s = 5;\n        }\n        else new StringIteratee.Error({found: c});\n      }\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n    if (s === 3) {\n      while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n      if (value.isDone()) {\n        builder.appendValue(value.state());\n        value = null;\n        s = 2;\n      }\n      else if (value.isError()) return value;\n    }\n    if (s === 4) {\n      while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n      if (value.isDone()) {\n        value = null;\n        s = 2;\n      }\n      else if (value.isError()) return value;\n    }\n    if (s === 5) {\n      if (!input.isEmpty()) {\n        c = input.head();\n        text = text || new StringBuilder();\n        if (c === 34/*'\"'*/ ||\n            c === 47/*'/'*/ ||\n            c === 64/*'@'*/ ||\n            c === 91/*'['*/ ||\n            c === 92/*'\\\\'*/ ||\n            c === 93/*']'*/ ||\n            c === 123/*'{'*/ ||\n            c === 125/*'}'*/) {\n          input.step();\n          text.append(c);\n          s = 2;\n        }\n        else if (c === 98/*'b'*/) {\n          input.step();\n          text.append(8/*'\\b'*/);\n          s = 2;\n        }\n        else if (c === 102/*'f'*/) {\n          input.step();\n          text.append(12/*'\\f'*/);\n          s = 2;\n        }\n        else if (c === 110/*'n'*/) {\n          input.step();\n          text.append(10/*'\\n'*/);\n          s = 2;\n        }\n        else if (c === 114/*'r'*/) {\n          input.step();\n          text.append(13/*'\\r'*/);\n          s = 2;\n        }\n        else if (c === 116/*'t'*/) {\n          input.step();\n          text.append(9/*'\\t'*/);\n          s = 2;\n        }\n        else return new StringIteratee.Error({expected: 'escape character', found: c});\n      }\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n  }\n  return new MarkupParser(builder, text, value, s);\n};\n\n\nfunction StringParser(text, s) {\n  StringIteratee.call(this);\n  this.text = text || null;\n  this.s = s || 1;\n}\nStringParser.prototype = Object.create(StringIteratee.prototype);\nStringParser.prototype.constructor = StringParser;\nStringParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var text = this.text;\n  if (s === 1) {\n    if (!input.isEmpty() && (c = input.head(), c === 34/*'\"'*/)) {\n      input.step();\n      s = 2;\n    }\n    else if (!input.isEmpty()) return new StringIteratee.Error({expected: '\\'\"\\'', found: c});\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  while (!input.isEmpty() || input.isDone()) {\n    if (s === 2) {\n      text = text || new StringBuilder();\n      while (!input.isEmpty() && (c = input.head(), c !== 34/*'\"'*/ && c !== 92/*'\\\\'*/)) {\n        input.step();\n        text.append(c);\n      }\n      if (!input.isEmpty()) {\n        if (c === 34/*'\"'*/) {\n          input.step();\n          return new StringIteratee.Done(text.state());\n        }\n        else if (c === 92/*'\\\\'*/) {\n          input.step();\n          s = 3;\n        }\n      }\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n    if (s === 3) {\n      if (!input.isEmpty()) {\n        c = input.head();\n        if (c === 34/*'\"'*/ ||\n            c === 47/*'/'*/ ||\n            c === 64/*'@'*/ ||\n            c === 91/*'['*/ ||\n            c === 92/*'\\\\'*/ ||\n            c === 93/*']'*/ ||\n            c === 123/*'{'*/ ||\n            c === 125/*'}'*/) {\n          input.step();\n          text.append(c);\n          s = 2;\n        }\n        else if (c === 98/*'b'*/) {\n          input.step();\n          text.append(8/*'\\b'*/);\n          s = 2;\n        }\n        else if (c === 102/*'f'*/) {\n          input.step();\n          text.append(12/*'\\f'*/);\n          s = 2;\n        }\n        else if (c === 110/*'n'*/) {\n          input.step();\n          text.append(10/*'\\n'*/);\n          s = 2;\n        }\n        else if (c === 114/*'r'*/) {\n          input.step();\n          text.append(13/*'\\r'*/);\n          s = 2;\n        }\n        else if (c === 116/*'t'*/) {\n          input.step();\n          text.append(9/*'\\t'*/);\n          s = 2;\n        }\n        else return new StringIteratee.Error({expected: 'escape character', found: c});\n      }\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n  }\n  return new StringParser(text, s);\n};\n\n\nfunction DataParser(data, s) {\n  StringIteratee.call(this);\n  this.data = data || null;\n  this.s = s || 1;\n}\nDataParser.prototype = Object.create(StringIteratee.prototype);\nDataParser.prototype.constructor = DataParser;\nDataParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var data = this.data || new DataBuilder();\n  if (s === 1) {\n    if (!input.isEmpty() && (c = input.head(), c === 37/*'%'*/)) {\n      input.step();\n      s = 2;\n    }\n    else if (!input.isEmpty()) return new StringIteratee.Error({expected: '\\'%\\'', found: c});\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  while (!input.isEmpty() || input.isDone()) {\n    if (s === 2) {\n      if (!input.isEmpty() && (c = input.head(), isBase64Char(c))) {\n        input.step();\n        data.appendBase64Char(c);\n        s = 3;\n      }\n      else if (!input.isEmpty() || input.isDone()) return new StringIteratee.Done(data.state());\n    }\n    if (s === 3) {\n      if (!input.isEmpty() && (c = input.head(), isBase64Char(c))) {\n        input.step();\n        data.appendBase64Char(c);\n        s = 4;\n      }\n      else if (!input.isEmpty()) return new StringIteratee.Error({expected: 'base64 digit', found: c});\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n    if (s === 4) {\n      if (!input.isEmpty() && (c = input.head(), isBase64Char(c) || c === 61/*'='*/)) {\n        input.step();\n        data.appendBase64Char(c);\n        if (c !== 61/*'='*/) s = 5;\n        else s = 6;\n      }\n      else if (!input.isEmpty()) return new StringIteratee.Error({expected: 'base64 digit', found: c});\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n    if (s === 5) {\n      if (!input.isEmpty() && (c = input.head(), isBase64Char(c) || c === 61/*'='*/)) {\n        input.step();\n        data.appendBase64Char(c);\n        if (c !== 61/*'='*/) s = 2;\n        else return new StringIteratee.Done(data.state());\n      }\n      else if (!input.isEmpty()) return new StringIteratee.Error({expected: 'base64 digit', found: c});\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n    else if (s === 6) {\n      if (!input.isEmpty() && (c = input.head(), c === 61/*'='*/)) {\n        input.step();\n        data.appendBase64Char(c);\n        return new StringIteratee.Done(data.state());\n      }\n      else if (!input.isEmpty()) return new StringIteratee.Error({expected: '\\'=\\'', found: c});\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n  }\n  return new DataParser(data, s);\n};\n\n\nfunction NumberParser(builder, s) {\n  StringIteratee.call(this);\n  this.builder = builder || null;\n  this.s = s || 1;\n}\nNumberParser.prototype = Object.create(StringIteratee.prototype);\nNumberParser.prototype.constructor = NumberParser;\nNumberParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var builder = this.builder || new StringBuilder();\n  if (s === 1) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c === 45/*'-'*/) {\n        input.step();\n        builder.append(c);\n      }\n      s = 2;\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  if (s === 2) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c === 48/*'0'*/) {\n        input.step();\n        builder.append(c);\n        s = 4;\n      }\n      else if (c >= 49/*'1'*/ && c <= 57/*'9'*/) {\n        input.step();\n        builder.append(c);\n        s = 3;\n      }\n      else return new StringIteratee.Error({expected: 'digit', found: c});\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  if (s === 3) {\n    while (!input.isEmpty() && (c = input.head(), c >= 48/*'0'*/ && c <= 57/*'9'*/)) {\n      input.step();\n      builder.append(c);\n    }\n    if (!input.isEmpty()) s = 4;\n    else if (input.isDone()) return new StringIteratee.Done(Number(builder.state()));\n  }\n  if (s === 4) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c === 46/*'.'*/) {\n        input.step();\n        builder.append(c);\n        s = 5;\n      }\n      else if (c === 69/*'E'*/ || c === 101/*'e'*/) {\n        input.step();\n        builder.append(c);\n        s = 8;\n      }\n      else return new StringIteratee.Done(Number(builder.state()));\n    }\n    else if (input.isDone()) return new StringIteratee.Done(Number(builder.state()));\n  }\n  if (s === 5) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c >= 48/*'0'*/ && c <= 57/*'9'*/) {\n        input.step();\n        builder.append(c);\n        s = 6;\n      }\n      else return new StringIteratee.Error({expected: 'digit', found: c});\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  if (s === 6) {\n    while (!input.isEmpty() && (c = input.head(), c >= 48/*'0'*/ && c <= 57/*'9'*/)) {\n      input.step();\n      builder.append(c);\n    }\n    if (!input.isEmpty()) s = 7;\n    else if (input.isDone()) return new StringIteratee.Done(Number(builder.state()));\n  }\n  if (s === 7) {\n    c = input.head();\n    if (c === 69/*'E'*/ || c === 101/*'e'*/) {\n      input.step();\n      builder.append(c);\n      s = 8;\n    }\n    else return new StringIteratee.Done(Number(builder.state()));\n  }\n  if (s === 8) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c === 43/*'+'*/ || c === 45/*'-'*/) {\n        input.step();\n        builder.append(c);\n      }\n      s = 9;\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  if (s === 9) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c >= 48/*'0'*/ && c <= 57/*'9'*/) {\n        input.step();\n        builder.append(c);\n        s = 10;\n      }\n      else return new StringIteratee.Error({expected: 'digit', found: c});\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  if (s === 10) {\n    while (!input.isEmpty() && (c = input.head(), c >= 48/*'0'*/ && c <= 57/*'9'*/)) {\n      input.step();\n      builder.append(c);\n    }\n    if (!input.isEmpty() || input.isDone()) return new StringIteratee.Done(Number(builder.state()));\n  }\n  return new NumberParser(builder, s);\n};\n\nfunction IdentParser(builder, s) {\n  StringIteratee.call(this);\n  this.builder = builder || null;\n  this.s = s || 1;\n}\nIdentParser.prototype = Object.create(StringIteratee.prototype);\nIdentParser.prototype.constructor = IdentParser;\nIdentParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var builder = this.builder;\n  if (s === 1) {\n    if (!input.isEmpty() && (c = input.head(), isNameStartChar(c))) {\n      builder = builder || new StringBuilder();\n      input.step();\n      builder.append(c);\n      s = 2;\n    }\n    else if (!input.isEmpty()) return new StringIteratee.Error({expected: 'identitifer', found: c});\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  if (s === 2) {\n    while (!input.isEmpty() && (c = input.head(), isNameChar(c))) {\n      input.step();\n      builder.append(c);\n    }\n    if (!input.isEmpty() || input.isDone()) {\n      var value = builder.state();\n      if (value === 'true') value = true;\n      else if (value === 'false') value = false;\n      return new StringIteratee.Done(value);\n    }\n  }\n  return new IdentParser(builder, s);\n};\n\n\nfunction ReconWriter(builder) {\n  Object.defineProperty(this, 'builder', {value: builder || new StringBuilder()});\n}\nReconWriter.prototype.writeValue = function (value, inMarkup) {\n  if (value.isRecord) this.writeRecord(value, inMarkup);\n  else if (typeof value === 'string') this.writeText(value, inMarkup);\n  else if (typeof value === 'number') this.writeNumber(value);\n  else if (typeof value === 'boolean') this.writeBool(value);\n  else if (value instanceof Uint8Array) this.writeData(value);\n};\nReconWriter.prototype.writeAttr = function(attr) {\n  this.builder.append(64/*'@'*/);\n  this.writeIdent(attr.key);\n  if (!attr.value.isExtant) {\n    this.builder.append(40/*'('*/);\n    this.writeBlock(attr.value);\n    this.builder.append(41/*')'*/);\n  }\n};\nReconWriter.prototype.writeItem = function(item) {\n  if (item.isField) {\n    this.writeValue(item.key);\n    this.builder.append(58/*':'*/);\n    if (!item.value.isExtant) this.writeValue(item.value);\n  }\n  else this.writeValue(item);\n};\nReconWriter.prototype.writeBlock = function (value) {\n  if (!value.isRecord) this.writeValue(value);\n  else if (value.isMarkup()) this.writeMarkup(value);\n  else if (value.hasAttrs()) this.writeRecord(value);\n  else {\n    var items = value.iterator();\n    if (!items.isEmpty()) {\n      this.writeItem(items.next());\n      while (!items.isEmpty()) {\n        this.builder.append(44/*','*/);\n        this.writeItem(items.next());\n      }\n    }\n  }\n};\nReconWriter.prototype.writeRecord = function (record, inMarkup) {\n  if (record.isMarkup()) this.writeMarkup(record);\n  else {\n    var items = record.iterator();\n    var item;\n    var hasAttrs = false;\n    while (!items.isEmpty() && (item = items.head(), item.isAttr)) {\n      this.writeAttr(item);\n      items.step();\n      hasAttrs = true;\n    }\n    if (!items.isEmpty()) {\n      items.step();\n      if (hasAttrs && items.isEmpty()) {\n        if (inMarkup) {\n          if (item.isRecord || typeof item === 'string') this.writeValue(item, inMarkup);\n          else {\n            this.builder.append(123/*'{'*/);\n            this.writeItem(item);\n            this.builder.append(125/*'}'*/);\n          }\n        }\n        else if (item.isRecord || item.isSlot) {\n          this.builder.append(123/*'{'*/);\n          this.writeItem(item);\n          this.builder.append(125/*'}'*/);\n        }\n        else {\n          this.builder.append(32/*' '*/);\n          this.writeValue(item);\n        }\n      }\n      else if (!items.isEmpty() && items.isAllAttrs()) {\n        if (item.isRecord || item.isSlot) {\n          this.builder.append(123/*'{'*/);\n          this.writeItem(item);\n          this.builder.append(125/*'}'*/);\n        }\n        else {\n          if (hasAttrs) this.builder.append(32/*' '*/);\n          this.writeValue(item);\n        }\n      }\n      else {\n        this.builder.append(123/*'{'*/);\n        this.writeItem(item);\n        while (!items.isEmpty() && ((item = items.head(), !item.isAttr) || !items.isAllAttrs)) {\n          this.builder.append(44/*','*/);\n          this.writeItem(item);\n          items.step();\n        }\n        this.builder.append(125/*'}'*/);\n      }\n      while (!items.isEmpty()) this.writeAttr(items.next());\n    }\n    else if (!hasAttrs) {\n      this.builder.append(123/*'{'*/);\n      this.builder.append(125/*'}'*/);\n    }\n  }\n};\nReconWriter.prototype.writeMarkup = function (record) {\n  var items = record.iterator();\n  var item;\n  var hasAttrs = false;\n  while (!items.isEmpty() && (item = items.head(), item.isAttr)) {\n    this.writeAttr(item);\n    items.step();\n    hasAttrs = true;\n  }\n  this.builder.append(91/*'['*/);\n  while (!items.isEmpty()) {\n    item = items.head();\n    if (typeof item === 'string') {\n      var cs = new StringIterator(item);\n      while (!cs.isEmpty()) {\n        var c = cs.head();\n        switch (c) {\n          case 64/*'@'*/:\n          case 91/*'['*/:\n          case 92/*'\\\\'*/:\n          case 93/*']'*/:\n          case 123/*'{'*/:\n          case 125/*'}'*/: this.builder.append(92/*'\\\\'*/); this.builder.append(c); break;\n          default: this.builder.append(c);\n        }\n        cs.step();\n      }\n    }\n    else if (item.isRecord) this.writeRecord(item, true);\n    else {\n      this.builder.append(123/*'{'*/);\n      this.writeItem(item);\n      this.builder.append(125/*'}'*/);\n    }\n    items.step();\n  }\n  this.builder.append(93/*']'*/);\n};\nReconWriter.prototype.writeText = function (text, inMarkup) {\n  function isIdent() {\n    var cs = new StringIterator(text);\n    if (cs.isEmpty() || !isNameStartChar(cs.head())) return false;\n    cs.step();\n    while (!cs.isEmpty() && isNameChar(cs.head())) cs.step();\n    return cs.isEmpty();\n  }\n  if (inMarkup) this.writeTextMarkup(text);\n  else if (isIdent()) this.writeIdent(text);\n  else this.writeString(text);\n};\nReconWriter.prototype.writeString = function (string) {\n  var cs = new StringIterator(string);\n  this.builder.append(34/*'\"'*/);\n  while (!cs.isEmpty()) {\n    var c = cs.head();\n    switch (c) {\n      case 34/*'\"'*/:\n      case 92/*'\\\\'*/: this.builder.append(92/*'\\\\'*/); this.builder.append(c); break;\n      case 8/*'\\b'*/: this.builder.append(92/*'\\\\'*/); this.builder.append(98/*'b'*/); break;\n      case 12/*'\\f'*/: this.builder.append(92/*'\\\\'*/); this.builder.append(102/*'f'*/); break;\n      case 10/*'\\n'*/: this.builder.append(92/*'\\\\'*/); this.builder.append(110/*'n'*/); break;\n      case 13/*'\\r'*/: this.builder.append(92/*'\\\\'*/); this.builder.append(114/*'r'*/); break;\n      case 9/*'\\t'*/: this.builder.append(92/*'\\\\'*/); this.builder.append(116/*'t'*/); break;\n      default: this.builder.append(c);\n    }\n    cs.step();\n  }\n  this.builder.append(34/*'\"'*/);\n};\nReconWriter.prototype.writeIdent = function (ident) {\n  this.builder.appendString(ident);\n};\nReconWriter.prototype.writeTextMarkup = function (text) {\n  var cs = new StringIterator(text);\n  this.builder.append(91/*'['*/);\n  while (!cs.isEmpty()) {\n    var c = cs.head();\n    switch (c) {\n      case 64/*'@'*/:\n      case 91/*'['*/:\n      case 92/*'\\\\'*/:\n      case 93/*']'*/:\n      case 123/*'{'*/:\n      case 125/*'}'*/: this.builder.append(92/*'\\\\'*/); this.builder.append(c); break;\n      default: this.builder.append(c);\n    }\n    cs.step();\n  }\n  this.builder.append(93/*']'*/);\n};\nReconWriter.prototype.writeNumber = function (number) {\n  this.builder.appendString(number.toString());\n};\nReconWriter.prototype.writeBool = function (bool) {\n  this.builder.appendString(bool.toString());\n};\nReconWriter.prototype.writeData = function (data) {\n  function encodeBase64Digit(x) {\n    if      (x >=  0 && x < 26) return x + 65/*'A'*/;\n    else if (x >= 26 && x < 52) return x + 71/*('a' - 26)*/;\n    else if (x >= 52 && x < 62) return x - 4/*-('0' - 52)*/;\n    else if (x === 62) return 43/*'+'*/;\n    else if (x === 63) return 47/*'/'*/;\n  }\n  this.builder.append(37/*'%'*/);\n  var i = 0;\n  var n = data.length;\n  var x, y, z;\n  while (i + 2 < n) {\n    x = data[i];\n    y = data[i + 1];\n    z = data[i + 2];\n    this.builder.append(encodeBase64Digit(x >>> 2));\n    this.builder.append(encodeBase64Digit(((x << 4) | (y >>> 4)) & 0x3F));\n    this.builder.append(encodeBase64Digit(((y << 2) | (z >>> 6)) & 0x3F));\n    this.builder.append(encodeBase64Digit(z & 0x3F));\n    i += 3;\n  }\n  if (i + 1 < n) {\n    x = data[i];\n    y = data[i + 1];\n    this.builder.append(encodeBase64Digit(x >>> 2));\n    this.builder.append(encodeBase64Digit(((x << 4) | (y >>> 4)) & 0x3F));\n    this.builder.append(encodeBase64Digit((y << 2) & 0x3F));\n    this.builder.append(61/*'='*/);\n    i += 2;\n  }\n  else if (i < n) {\n    x = data[i];\n    this.builder.append(encodeBase64Digit(x >>> 2));\n    this.builder.append(encodeBase64Digit((x << 4) & 0x3F));\n    this.builder.append(61/*'='*/);\n    this.builder.append(61/*'='*/);\n    i += 1;\n  }\n};\nReconWriter.prototype.state = function () {\n  return this.builder.state();\n};\n\n\nmodule.exports = function () {\n  return coerce.apply(null, arguments);\n};\nexports = module.exports;\nexports.parse = parse;\nexports.stringify = stringify;\nexports.objectify = objectify;\nexports.Record = Record;\nexports.Field = Field;\nexports.Attr = Attr;\nexports.Slot = Slot;\nexports.attr = attr;\nexports.slot = slot;\nexports.base64 = base64;\nexports.extant = Extant;\nexports.absent = Absent;\nexports.empty = empty;\nexports.builder = builder;\nexports.compare = compare;\n\n},{}],3:[function(require,module,exports){\n'use strict';\n\nvar recon = require('recon-js');\n\nfunction decode(record) {\n  if (record instanceof recon.Record) {\n    var heading = record.head();\n    if (heading.isField) switch (heading.key) {\n      case 'event': return EventMessage.decode(record);\n      case 'command': return CommandMessage.decode(record);\n      case 'get': return GetRequest.decode(record);\n      case 'put': return PutRequest.decode(record);\n      case 'state': return StateResponse.decode(record);\n      case 'link': return LinkRequest.decode(record);\n      case 'linked': return LinkedResponse.decode(record);\n      case 'unlink': return UnlinkRequest.decode(record);\n      case 'unlinked': return UnlinkedResponse.decode(record);\n    }\n  }\n}\n\nfunction encode(envelope) {\n  return envelope.encode();\n}\n\nfunction parse(string) {\n  return decode(recon.parse(string));\n}\n\nfunction stringify(envelope) {\n  return recon.stringify(encode(envelope));\n}\n\n\nfunction Envelope() {}\nObject.defineProperty(Envelope.prototype, 'isRequest', {value: false});\nObject.defineProperty(Envelope.prototype, 'isResponse', {value: false});\nObject.defineProperty(Envelope.prototype, 'isMessage', {value: false});\nObject.defineProperty(Envelope.prototype, 'isEventMessage', {value: false});\nObject.defineProperty(Envelope.prototype, 'isCommandMessage', {value: false});\nObject.defineProperty(Envelope.prototype, 'isGetRequest', {value: false});\nObject.defineProperty(Envelope.prototype, 'isPutRequest', {value: false});\nObject.defineProperty(Envelope.prototype, 'isStateResponse', {value: false});\nObject.defineProperty(Envelope.prototype, 'isLinkRequest', {value: false});\nObject.defineProperty(Envelope.prototype, 'isLinkedResponse', {value: false});\nObject.defineProperty(Envelope.prototype, 'isUnlinkRequest', {value: false});\nObject.defineProperty(Envelope.prototype, 'isUnlinkedResponse', {value: false});\n\n\nfunction RequestEnvelope() {\n  Envelope.call(this);\n}\nRequestEnvelope.prototype = Object.create(Envelope.prototype);\nRequestEnvelope.prototype.constructor = RequestEnvelope;\nObject.defineProperty(RequestEnvelope.prototype, 'isRequest', {value: true});\n\n\nfunction ResponseEnvelope() {\n  Envelope.call(this);\n}\nResponseEnvelope.prototype = Object.create(Envelope.prototype);\nResponseEnvelope.prototype.constructor = ResponseEnvelope;\nObject.defineProperty(RequestEnvelope.prototype, 'isResponse', {value: true});\n\n\nfunction MessageEnvelope() {\n  Envelope.call(this);\n}\nMessageEnvelope.prototype = Object.create(Envelope.prototype);\nMessageEnvelope.prototype.constructor = MessageEnvelope;\nObject.defineProperty(RequestEnvelope.prototype, 'isMessage', {value: true});\n\n\nfunction EventMessage(node, lane, via, body) {\n  MessageEnvelope.call(this);\n  Object.defineProperty(this, 'node', {enumerable: true, value: node});\n  Object.defineProperty(this, 'lane', {enumerable: true, value: lane});\n  Object.defineProperty(this, 'via', {enumerable: true, value: via || recon.absent});\n  Object.defineProperty(this, 'body', {enumerable: true, value: body || recon.empty()});\n}\nEventMessage.prototype = Object.create(MessageEnvelope.prototype);\nEventMessage.prototype.constructor = EventMessage;\nObject.defineProperty(EventMessage.prototype, 'isEventMessage', {value: true});\nEventMessage.prototype.encode = function () {\n  var builder = recon.builder();\n  var heading = recon.builder();\n  heading.slot('node', this.node);\n  heading.slot('lane', this.lane);\n  if (!this.via.isAbsent) heading.slot('via', this.via);\n  builder.attr('event', heading.state());\n  builder.appendRecord(this.body);\n  return builder.state();\n};\nEventMessage.decode = function (record) {\n  var node = '';\n  var lane = '';\n  var via = recon.absent;\n  var body = record.tail();\n  var heading = record.head();\n  if (heading.value instanceof recon.Record) {\n    var headers = heading.value.iterator();\n    var i = 0;\n    while (!headers.isEmpty()) {\n      var header = headers.next();\n      if (header.isField) switch (header.key) {\n        case 'node': node = header.value; break;\n        case 'lane': lane = header.value; break;\n        case 'via': via = header.value; break;\n      }\n      else switch (i) {\n        case 0: node = header; break;\n        case 1: lane = header; break;\n        case 2: via = header; break;\n      }\n      i += 1;\n    }\n  }\n  return new EventMessage(node, lane, via, body);\n};\n\n\nfunction CommandMessage(node, lane, via, body) {\n  MessageEnvelope.call(this);\n  Object.defineProperty(this, 'node', {enumerable: true, value: node});\n  Object.defineProperty(this, 'lane', {enumerable: true, value: lane});\n  Object.defineProperty(this, 'via', {enumerable: true, value: via || recon.absent});\n  Object.defineProperty(this, 'body', {enumerable: true, value: body || recon.empty()});\n}\nCommandMessage.prototype = Object.create(MessageEnvelope.prototype);\nCommandMessage.prototype.constructor = CommandMessage;\nObject.defineProperty(CommandMessage.prototype, 'isCommandMessage', {value: true});\nCommandMessage.prototype.encode = function () {\n  var builder = recon.builder();\n  var heading = recon.builder();\n  heading.slot('node', this.node);\n  heading.slot('lane', this.lane);\n  if (!this.via.isAbsent) heading.slot('via', this.via);\n  builder.attr('command', heading.state());\n  builder.appendRecord(this.body);\n  return builder.state();\n};\nCommandMessage.decode = function (record) {\n  var node = '';\n  var lane = '';\n  var via = recon.absent;\n  var body = record.tail();\n  var heading = record.head();\n  if (heading.value instanceof recon.Record) {\n    var headers = heading.value.iterator();\n    var i = 0;\n    while (!headers.isEmpty()) {\n      var header = headers.next();\n      if (header.isField) switch (header.key) {\n        case 'node': node = header.value; break;\n        case 'lane': lane = header.value; break;\n        case 'via': via = header.value; break;\n      }\n      else switch (i) {\n        case 0: node = header; break;\n        case 1: lane = header; break;\n        case 2: via = header; break;\n      }\n      i += 1;\n    }\n  }\n  return new CommandMessage(node, lane, via, body);\n};\n\n\nfunction GetRequest(node) {\n  RequestEnvelope.call(this);\n  Object.defineProperty(this, 'node', {enumerable: true, value: node});\n}\nGetRequest.prototype = Object.create(RequestEnvelope.prototype);\nGetRequest.prototype.constructor = GetRequest;\nObject.defineProperty(GetRequest.prototype, 'isGetRequest', {value: true});\nGetRequest.prototype.encode = function () {\n  return recon(\n    recon.attr('get', recon(\n      recon.slot('node', this.node))));\n};\nGetRequest.decode = function (record) {\n  var node = '';\n  var heading = record.head();\n  if (heading.value instanceof recon.Record) {\n    var headers = heading.value.iterator();\n    var i = 0;\n    while (!headers.isEmpty()) {\n      var header = headers.next();\n      if (header.isField) switch (header.key) {\n        case 'node': node = header.value; break;\n      }\n      else switch (i) {\n        case 0: node = header; break;\n      }\n      i += 1;\n    }\n  }\n  else if (!heading.value.isExtant) node = heading.value;\n  return new GetRequest(node);\n};\n\n\nfunction PutRequest(node, body) {\n  RequestEnvelope.call(this);\n  Object.defineProperty(this, 'node', {enumerable: true, value: node});\n  Object.defineProperty(this, 'body', {enumerable: true, value: body || recon.empty()});\n}\nPutRequest.prototype = Object.create(RequestEnvelope.prototype);\nPutRequest.prototype.constructor = PutRequest;\nObject.defineProperty(PutRequest.prototype, 'isPutRequest', {value: true});\nPutRequest.prototype.encode = function () {\n  var builder = recon.builder();\n  builder.attr('put', recon(\n    recon.slot('node', this.node)));\n  builder.appendRecord(this.body);\n  return builder.state();\n};\nPutRequest.decode = function (record) {\n  var node = '';\n  var body = record.tail();\n  var heading = record.head();\n  if (heading.value instanceof recon.Record) {\n    var headers = heading.value.iterator();\n    var i = 0;\n    while (!headers.isEmpty()) {\n      var header = headers.next();\n      if (header.isField) switch (header.key) {\n        case 'node': node = header.value; break;\n      }\n      else switch (i) {\n        case 0: node = header; break;\n      }\n      i += 1;\n    }\n  }\n  else if (!heading.value.isExtant) node = heading.value;\n  return new PutRequest(node, body);\n};\n\n\nfunction StateResponse(node, body) {\n  ResponseEnvelope.call(this);\n  Object.defineProperty(this, 'node', {enumerable: true, value: node});\n  Object.defineProperty(this, 'body', {enumerable: true, value: body || recon.empty()});\n}\nStateResponse.prototype = Object.create(ResponseEnvelope.prototype);\nStateResponse.prototype.constructor = StateResponse;\nObject.defineProperty(StateResponse.prototype, 'isStateResponse', {value: true});\nStateResponse.prototype.encode = function () {\n  var builder = recon.builder();\n  builder.attr('state', recon(\n    recon.slot('node', this.node)));\n  builder.appendRecord(this.body);\n  return builder.state();\n};\nStateResponse.decode = function (record) {\n  var node = '';\n  var body = record.tail();\n  var heading = record.head();\n  if (heading.value instanceof recon.Record) {\n    var headers = heading.value.iterator();\n    var i = 0;\n    while (!headers.isEmpty()) {\n      var header = headers.next();\n      if (header.isField) switch (header.key) {\n        case 'node': node = header.value; break;\n      }\n      else switch (i) {\n        case 0: node = header; break;\n      }\n      i += 1;\n    }\n  }\n  else if (!heading.value.isExtant) node = heading.value;\n  return new StateResponse(node, body);\n};\n\n\nfunction LinkRequest(node, lane) {\n  RequestEnvelope.call(this);\n  Object.defineProperty(this, 'node', {enumerable: true, value: node});\n  Object.defineProperty(this, 'lane', {enumerable: true, value: lane});\n}\nLinkRequest.prototype = Object.create(RequestEnvelope.prototype);\nLinkRequest.prototype.constructor = LinkRequest;\nObject.defineProperty(LinkRequest.prototype, 'isLinkRequest', {value: true});\nLinkRequest.prototype.encode = function () {\n  return recon(\n    recon.attr('link', recon(\n      recon.slot('node', this.node),\n      recon.slot('lane', this.lane))));\n};\nLinkRequest.decode = function (record) {\n  var node = '';\n  var lane = '';\n  var heading = record.head();\n  if (heading.value instanceof recon.Record) {\n    var headers = heading.value.iterator();\n    var i = 0;\n    while (!headers.isEmpty()) {\n      var header = headers.next();\n      if (header.isField) switch (header.key) {\n        case 'node': node = header.value; break;\n        case 'lane': lane = header.value; break;\n      }\n      else switch (i) {\n        case 0: node = header; break;\n        case 1: lane = header; break;\n      }\n      i += 1;\n    }\n  }\n  return new LinkRequest(node, lane);\n};\n\n\nfunction LinkedResponse(node, lane) {\n  ResponseEnvelope.call(this);\n  Object.defineProperty(this, 'node', {enumerable: true, value: node});\n  Object.defineProperty(this, 'lane', {enumerable: true, value: lane});\n}\nLinkedResponse.prototype = Object.create(ResponseEnvelope.prototype);\nLinkedResponse.prototype.constructor = LinkedResponse;\nObject.defineProperty(LinkedResponse.prototype, 'isLinkedResponse', {value: true});\nLinkedResponse.prototype.encode = function () {\n  return recon(\n    recon.attr('linked', recon(\n      recon.slot('node', this.node),\n      recon.slot('lane', this.lane))));\n};\nLinkedResponse.decode = function (record) {\n  var node = '';\n  var lane = '';\n  var heading = record.head();\n  if (heading.value instanceof recon.Record) {\n    var headers = heading.value.iterator();\n    var i = 0;\n    while (!headers.isEmpty()) {\n      var header = headers.next();\n      if (header.isField) switch (header.key) {\n        case 'node': node = header.value; break;\n        case 'lane': lane = header.value; break;\n      }\n      else switch (i) {\n        case 0: node = header; break;\n        case 1: lane = header; break;\n      }\n      i += 1;\n    }\n  }\n  return new LinkedResponse(node, lane);\n};\n\n\nfunction UnlinkRequest(node, lane) {\n  RequestEnvelope.call(this);\n  Object.defineProperty(this, 'node', {enumerable: true, value: node});\n  Object.defineProperty(this, 'lane', {enumerable: true, value: lane});\n}\nUnlinkRequest.prototype = Object.create(RequestEnvelope.prototype);\nUnlinkRequest.prototype.constructor = UnlinkRequest;\nObject.defineProperty(UnlinkRequest.prototype, 'isUnlinkRequest', {value: true});\nUnlinkRequest.prototype.encode = function () {\n  return recon(\n    recon.attr('unlink', recon(\n      recon.slot('node', this.node),\n      recon.slot('lane', this.lane))));\n};\nUnlinkRequest.decode = function (record) {\n  var node = '';\n  var lane = '';\n  var heading = record.head();\n  if (heading.value instanceof recon.Record) {\n    var headers = heading.value.iterator();\n    var i = 0;\n    while (!headers.isEmpty()) {\n      var header = headers.next();\n      if (header.isField) switch (header.key) {\n        case 'node': node = header.value; break;\n        case 'lane': lane = header.value; break;\n      }\n      else switch (i) {\n        case 0: node = header; break;\n        case 1: lane = header; break;\n      }\n      i += 1;\n    }\n  }\n  return new UnlinkRequest(node, lane);\n};\n\n\nfunction UnlinkedResponse(node, lane) {\n  ResponseEnvelope.call(this);\n  Object.defineProperty(this, 'node', {enumerable: true, value: node});\n  Object.defineProperty(this, 'lane', {enumerable: true, value: lane});\n}\nUnlinkedResponse.prototype = Object.create(ResponseEnvelope.prototype);\nUnlinkedResponse.prototype.constructor = UnlinkedResponse;\nObject.defineProperty(UnlinkedResponse.prototype, 'isUnlinkedResponse', {value: true});\nUnlinkedResponse.prototype.encode = function () {\n  return recon(\n    recon.attr('unlinked', recon(\n      recon.slot('node', this.node),\n      recon.slot('lane', this.lane))));\n};\nUnlinkedResponse.decode = function (record) {\n  var node = '';\n  var lane = '';\n  var heading = record.head();\n  if (heading.value instanceof recon.Record) {\n    var headers = heading.value.iterator();\n    var i = 0;\n    while (!headers.isEmpty()) {\n      var header = headers.next();\n      if (header.isField) switch (header.key) {\n        case 'node': node = header.value; break;\n        case 'lane': lane = header.value; break;\n      }\n      else switch (i) {\n        case 0: node = header; break;\n        case 1: lane = header; break;\n      }\n      i += 1;\n    }\n  }\n  return new UnlinkedResponse(node, lane);\n};\n\n\nexports.decode = decode;\nexports.encode = encode;\nexports.parse = parse;\nexports.stringify = stringify;\nexports.Envelope = Envelope;\nexports.RequestEnvelope = RequestEnvelope;\nexports.ResponseEnvelope = ResponseEnvelope;\nexports.MessageEnvelope = MessageEnvelope;\nexports.EventMessage = EventMessage;\nexports.CommandMessage = CommandMessage;\nexports.GetRequest = GetRequest;\nexports.PutRequest = PutRequest;\nexports.StateResponse = StateResponse;\nexports.LinkRequest = LinkRequest;\nexports.LinkedResponse = LinkedResponse;\nexports.UnlinkRequest = UnlinkRequest;\nexports.UnlinkedResponse = UnlinkedResponse;\n\n},{\"recon-js\":2}],4:[function(require,module,exports){\nrequire(\"./schemes/http\");\r\nrequire(\"./schemes/urn\");\n},{\"./schemes/http\":5,\"./schemes/urn\":6}],5:[function(require,module,exports){\n(function () {\r\n\tvar URI = require(\"../uri\").URI;\r\n\t\r\n\t//RFC 2616\r\n\tURI.SCHEMES[\"http\"] = {\r\n\t\tserialize : function (components, options) {\r\n\t\t\t//normalize the default port\r\n\t\t\tif (components.port === 80 || components.port === \"\") {\r\n\t\t\t\tcomponents.port = undefined;\r\n\t\t\t}\r\n\t\t\t//normalize the empty path\r\n\t\t\tif (!components.path) {\r\n\t\t\t\tcomponents.path = \"/\";\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//NOTE: We do not parse query strings for HTTP URIs\r\n\t\t\t//as WWW Form Url Encoded query strings are part of the HTML4+ spec,\r\n\t\t\t//and not the HTTP spec. \r\n\t\t\t\r\n\t\t\treturn components;\r\n\t\t}\r\n\t};\r\n}());\n},{\"../uri\":7}],6:[function(require,module,exports){\n(function () {\r\n\tvar URI_NS = require(\"../uri\"),\r\n\t\tURI = URI_NS.URI,\r\n\t\tpctEncChar = URI_NS.pctEncChar,\r\n\t\tNID$ = \"(?:[0-9A-Za-z][0-9A-Za-z\\\\-]{1,31})\",\r\n\t\tPCT_ENCODED$ = \"(?:\\\\%[0-9A-Fa-f]{2})\",\r\n\t\tTRANS$$ = \"[0-9A-Za-z\\\\(\\\\)\\\\+\\\\,\\\\-\\\\.\\\\:\\\\=\\\\@\\\\;\\\\$\\\\_\\\\!\\\\*\\\\'\\\\/\\\\?\\\\#]\",\r\n\t\tNSS$ = \"(?:(?:\" + PCT_ENCODED$ + \"|\" + TRANS$$ + \")+)\",\r\n\t\tURN_SCHEME = new RegExp(\"^urn\\\\:(\" + NID$ + \")$\"),\r\n\t\tURN_PATH = new RegExp(\"^(\" + NID$ + \")\\\\:(\" + NSS$ + \")$\"),\r\n\t\tURN_PARSE = /^([^\\:]+)\\:(.*)/,\r\n\t\tURN_EXCLUDED = /[\\x00-\\x20\\\\\\\"\\&\\<\\>\\[\\]\\^\\`\\{\\|\\}\\~\\x7F-\\xFF]/g,\r\n\t\tUUID = /^[0-9A-Fa-f]{8}(?:\\-[0-9A-Fa-f]{4}){3}\\-[0-9A-Fa-f]{12}$/;\r\n\t\r\n\t//RFC 2141\r\n\tURI.SCHEMES[\"urn\"] = {\r\n\t\tparse : function (components, options) {\r\n\t\t\tvar matches = components.path.match(URN_PATH),\r\n\t\t\t\tscheme, schemeHandler;\r\n\t\t\t\r\n\t\t\tif (!matches) {\r\n\t\t\t\tif (!options.tolerant) {\r\n\t\t\t\t\tcomponents.errors.push(\"URN is not strictly valid.\");\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tmatches = components.path.match(URN_PARSE);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (matches) {\r\n\t\t\t\tscheme = \"urn:\" + matches[1].toLowerCase();\r\n\t\t\t\tschemeHandler = URI.SCHEMES[scheme];\r\n\t\t\t\t\r\n\t\t\t\t//in order to serialize properly, \r\n\t\t\t\t//every URN must have a serializer that calls the URN serializer \r\n\t\t\t\tif (!schemeHandler) {\r\n\t\t\t\t\tschemeHandler = URI.SCHEMES[scheme] = {};\r\n\t\t\t\t}\r\n\t\t\t\tif (!schemeHandler.serialize) {\r\n\t\t\t\t\tschemeHandler.serialize = URI.SCHEMES[\"urn\"].serialize;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tcomponents.scheme = scheme;\r\n\t\t\t\tcomponents.path = matches[2];\r\n\t\t\t\t\r\n\t\t\t\tif (schemeHandler.parse) {\r\n\t\t\t\t\tschemeHandler.parse(components, options);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tcomponents.errors.push(\"URN can not be parsed.\");\r\n\t\t\t}\r\n\t\r\n\t\t\treturn components;\r\n\t\t},\r\n\t\t\r\n\t\tserialize : function (components, options) {\r\n\t\t\tvar scheme = components.scheme || options.scheme,\r\n\t\t\t\tmatches;\r\n\t\t\t\r\n\t\t\tif (scheme && scheme !== \"urn\") {\r\n\t\t\t\tvar matches = scheme.match(URN_SCHEME);\r\n\t\t\t\t\r\n\t\t\t\tif (!matches) {\r\n\t\t\t\t\tmatches = [\"urn:\" + scheme, scheme];\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tcomponents.scheme = \"urn\";\r\n\t\t\t\tcomponents.path = matches[1] + \":\" + (components.path ? components.path.replace(URN_EXCLUDED, pctEncChar) : \"\");\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn components;\r\n\t\t}\r\n\t};\r\n\t\r\n\t//RFC 4122\r\n\tURI.SCHEMES[\"urn:uuid\"] = {\r\n\t\tparse : function (components, options) {\r\n\t\t\tif (!options.tolerant && (!components.path || !components.path.match(UUID))) {\r\n\t\t\t\tcomponents.errors.push(\"UUID is not valid.\");\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tserialize : function (components, options) {\r\n\t\t\t//ensure UUID is valid\r\n\t\t\tif (!options.tolerant && (!components.path || !components.path.match(UUID))) {\r\n\t\t\t\t//invalid UUIDs can not have this scheme\r\n\t\t\t\tcomponents.scheme = undefined;\r\n\t\t\t} else {\r\n\t\t\t\t//normalize UUID\r\n\t\t\t\tcomponents.path = (components.path || \"\").toLowerCase();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn URI.SCHEMES[\"urn\"].serialize(components, options);\r\n\t\t}\r\n\t};\r\n}());\n},{\"../uri\":7}],7:[function(require,module,exports){\n/**\r\n * URI.js\r\n * \r\n * @fileoverview An RFC 3986 compliant, scheme extendable URI parsing/validating/resolving library for JavaScript.\r\n * @author <a href=\"mailto:gary.court@gmail.com\">Gary Court</a>\r\n * @version 1.4.2\r\n * @see http://github.com/garycourt/uri-js\r\n * @license URI.js v1.4.2 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js\r\n */\r\n\r\n/**\r\n * Copyright 2011 Gary Court. All rights reserved.\r\n * \r\n * Redistribution and use in source and binary forms, with or without modification, are\r\n * permitted provided that the following conditions are met:\r\n * \r\n *    1. Redistributions of source code must retain the above copyright notice, this list of\r\n *       conditions and the following disclaimer.\r\n * \r\n *    2. Redistributions in binary form must reproduce the above copyright notice, this list\r\n *       of conditions and the following disclaimer in the documentation and/or other materials\r\n *       provided with the distribution.\r\n * \r\n * THIS SOFTWARE IS PROVIDED BY GARY COURT ``AS IS'' AND ANY EXPRESS OR IMPLIED\r\n * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\r\n * FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL GARY COURT OR\r\n * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\r\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\r\n * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\r\n * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\r\n * ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n * \r\n * The views and conclusions contained in the software and documentation are those of the\r\n * authors and should not be interpreted as representing official policies, either expressed\r\n * or implied, of Gary Court.\r\n */\r\n\r\n/*jslint white: true, sub: true, undef: true, newcap: true, plusplus: true, bitwise: true, regexp: true, nomen: true, indent: 4 */\r\n/*global exports:true, require:true, URI:true */\r\n\r\nif (typeof exports === \"undefined\") {\r\n\texports = {}; \r\n}\r\nif (typeof require !== \"function\") {\r\n\trequire = function (id) {\r\n\t\t\"use strict\";\r\n\t\treturn exports;\r\n\t};\r\n}\r\nURI = (function () {\r\n\t\"use strict\";\r\n\t\r\n\tvar\t\r\n\t\t/**\r\n\t\t * @param {...string} sets\r\n\t\t * @return {string}\r\n\t\t */\r\n\t\tmergeSet = function (sets) {\r\n\t\t\tvar set = sets,\r\n\t\t\t\tx = 1,\r\n\t\t\t\tnextSet = arguments[x];\r\n\t\t\t\r\n\t\t\twhile (nextSet) {\r\n\t\t\t\tset = set.slice(0, -1) + nextSet.slice(1);\r\n\t\t\t\tnextSet = arguments[++x];\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn set;\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * @param {string} str\r\n\t\t * @return {string}\r\n\t\t */\r\n\t\tsubexp = function (str) {\r\n\t\t\treturn \"(?:\" + str + \")\";\r\n\t\t},\r\n\t\r\n\t\tALPHA$$ = \"[A-Za-z]\",\r\n\t\tCR$ = \"[\\\\x0D]\",\r\n\t\tDIGIT$$ = \"[0-9]\",\r\n\t\tDQUOTE$$ = \"[\\\\x22]\",\r\n\t\tHEXDIG$$ = mergeSet(DIGIT$$, \"[A-Fa-f]\"),  //case-insensitive\r\n\t\tLF$$ = \"[\\\\x0A]\",\r\n\t\tSP$$ = \"[\\\\x20]\",\r\n\t\tPCT_ENCODED$ = subexp(\"%\" + HEXDIG$$ + HEXDIG$$),\r\n\t\tGEN_DELIMS$$ = \"[\\\\:\\\\/\\\\?\\\\#\\\\[\\\\]\\\\@]\",\r\n\t\tSUB_DELIMS$$ = \"[\\\\!\\\\$\\\\&\\\\'\\\\(\\\\)\\\\*\\\\+\\\\,\\\\;\\\\=]\",\r\n\t\tRESERVED$$ = mergeSet(GEN_DELIMS$$, SUB_DELIMS$$),\r\n\t\tUNRESERVED$$ = mergeSet(ALPHA$$, DIGIT$$, \"[\\\\-\\\\.\\\\_\\\\~]\"),\r\n\t\tSCHEME$ = subexp(ALPHA$$ + mergeSet(ALPHA$$, DIGIT$$, \"[\\\\+\\\\-\\\\.]\") + \"*\"),\r\n\t\tUSERINFO$ = subexp(subexp(PCT_ENCODED$ + \"|\" + mergeSet(UNRESERVED$$, SUB_DELIMS$$, \"[\\\\:]\")) + \"*\"),\r\n\t\tDEC_OCTET$ = subexp(subexp(\"25[0-5]\") + \"|\" + subexp(\"2[0-4]\" + DIGIT$$) + \"|\" + subexp(\"1\" + DIGIT$$ + DIGIT$$) + \"|\" + subexp(\"[1-9]\" + DIGIT$$) + \"|\" + DIGIT$$),\r\n\t\tIPV4ADDRESS$ = subexp(DEC_OCTET$ + \"\\\\.\" + DEC_OCTET$ + \"\\\\.\" + DEC_OCTET$ + \"\\\\.\" + DEC_OCTET$),\r\n\t\tH16$ = subexp(HEXDIG$$ + \"{1,4}\"),\r\n\t\tLS32$ = subexp(subexp(H16$ + \"\\\\:\" + H16$) + \"|\" + IPV4ADDRESS$),\r\n\t\tIPV6ADDRESS$ = subexp(mergeSet(UNRESERVED$$, SUB_DELIMS$$, \"[\\\\:]\") + \"+\"),  //FIXME\r\n\t\tIPVFUTURE$ = subexp(\"v\" + HEXDIG$$ + \"+\\\\.\" + mergeSet(UNRESERVED$$, SUB_DELIMS$$, \"[\\\\:]\") + \"+\"),\r\n\t\tIP_LITERAL$ = subexp(\"\\\\[\" + subexp(IPV6ADDRESS$ + \"|\" + IPVFUTURE$) + \"\\\\]\"),\r\n\t\tREG_NAME$ = subexp(subexp(PCT_ENCODED$ + \"|\" + mergeSet(UNRESERVED$$, SUB_DELIMS$$)) + \"*\"),\r\n\t\tHOST$ = subexp(IP_LITERAL$ + \"|\" + IPV4ADDRESS$ + \"|\" + REG_NAME$),\r\n\t\tPORT$ = subexp(DIGIT$$ + \"*\"),\r\n\t\tAUTHORITY$ = subexp(subexp(USERINFO$ + \"@\") + \"?\" + HOST$ + subexp(\"\\\\:\" + PORT$) + \"?\"),\r\n\t\tPCHAR$ = subexp(PCT_ENCODED$ + \"|\" + mergeSet(UNRESERVED$$, SUB_DELIMS$$, \"[\\\\:\\\\@]\")),\r\n\t\tSEGMENT$ = subexp(PCHAR$ + \"*\"),\r\n\t\tSEGMENT_NZ$ = subexp(PCHAR$ + \"+\"),\r\n\t\tSEGMENT_NZ_NC$ = subexp(subexp(PCT_ENCODED$ + \"|\" + mergeSet(UNRESERVED$$, SUB_DELIMS$$, \"[\\\\@]\")) + \"+\"),\r\n\t\tPATH_ABEMPTY$ = subexp(subexp(\"\\\\/\" + SEGMENT$) + \"*\"),\r\n\t\tPATH_ABSOLUTE$ = subexp(\"\\\\/\" + subexp(SEGMENT_NZ$ + PATH_ABEMPTY$) + \"?\"),  //simplified\r\n\t\tPATH_NOSCHEME$ = subexp(SEGMENT_NZ_NC$ + PATH_ABEMPTY$),  //simplified\r\n\t\tPATH_ROOTLESS$ = subexp(SEGMENT_NZ$ + PATH_ABEMPTY$),  //simplified\r\n\t\tPATH_EMPTY$ = subexp(\"\"),  //simplified\r\n\t\tPATH$ = subexp(PATH_ABEMPTY$ + \"|\" + PATH_ABSOLUTE$ + \"|\" + PATH_NOSCHEME$ + \"|\" + PATH_ROOTLESS$ + \"|\" + PATH_EMPTY$),\r\n\t\tQUERY$ = subexp(subexp(PCHAR$ + \"|[\\\\/\\\\?]\") + \"*\"),\r\n\t\tFRAGMENT$ = subexp(subexp(PCHAR$ + \"|[\\\\/\\\\?]\") + \"*\"),\r\n\t\tHIER_PART$ = subexp(subexp(\"\\\\/\\\\/\" + AUTHORITY$ + PATH_ABEMPTY$) + \"|\" + PATH_ABSOLUTE$ + \"|\" + PATH_ROOTLESS$ + \"|\" + PATH_EMPTY$),\r\n\t\tURI$ = subexp(SCHEME$ + \"\\\\:\" + HIER_PART$ + subexp(\"\\\\?\" + QUERY$) + \"?\" + subexp(\"\\\\#\" + FRAGMENT$) + \"?\"),\r\n\t\tRELATIVE_PART$ = subexp(subexp(\"\\\\/\\\\/\" + AUTHORITY$ + PATH_ABEMPTY$) + \"|\" + PATH_ABSOLUTE$ + \"|\" + PATH_NOSCHEME$ + \"|\" + PATH_EMPTY$),\r\n\t\tRELATIVE$ = subexp(RELATIVE_PART$ + subexp(\"\\\\?\" + QUERY$) + \"?\" + subexp(\"\\\\#\" + FRAGMENT$) + \"?\"),\r\n\t\tURI_REFERENCE$ = subexp(URI$ + \"|\" + RELATIVE$),\r\n\t\tABSOLUTE_URI$ = subexp(SCHEME$ + \"\\\\:\" + HIER_PART$ + subexp(\"\\\\?\" + QUERY$) + \"?\"),\r\n\t\t\r\n\t\tGENERIC_REF$ = \"^(\" + SCHEME$ + \")\\\\:\" + subexp(subexp(\"\\\\/\\\\/(\" + subexp(\"(\" + USERINFO$ + \")@\") + \"?(\" + HOST$ + \")\" + subexp(\"\\\\:(\" + PORT$ + \")\") + \"?)\") + \"?(\" + PATH_ABEMPTY$ + \"|\" + PATH_ABSOLUTE$ + \"|\" + PATH_ROOTLESS$ + \"|\" + PATH_EMPTY$ + \")\") + subexp(\"\\\\?(\" + QUERY$ + \")\") + \"?\" + subexp(\"\\\\#(\" + FRAGMENT$ + \")\") + \"?$\",\r\n\t\tRELATIVE_REF$ = \"^(){0}\" + subexp(subexp(\"\\\\/\\\\/(\" + subexp(\"(\" + USERINFO$ + \")@\") + \"?(\" + HOST$ + \")\" + subexp(\"\\\\:(\" + PORT$ + \")\") + \"?)\") + \"?(\" + PATH_ABEMPTY$ + \"|\" + PATH_ABSOLUTE$ + \"|\" + PATH_NOSCHEME$ + \"|\" + PATH_EMPTY$ + \")\") + subexp(\"\\\\?(\" + QUERY$ + \")\") + \"?\" + subexp(\"\\\\#(\" + FRAGMENT$ + \")\") + \"?$\",\r\n\t\tABSOLUTE_REF$ = \"^(\" + SCHEME$ + \")\\\\:\" + subexp(subexp(\"\\\\/\\\\/(\" + subexp(\"(\" + USERINFO$ + \")@\") + \"?(\" + HOST$ + \")\" + subexp(\"\\\\:(\" + PORT$ + \")\") + \"?)\") + \"?(\" + PATH_ABEMPTY$ + \"|\" + PATH_ABSOLUTE$ + \"|\" + PATH_ROOTLESS$ + \"|\" + PATH_EMPTY$ + \")\") + subexp(\"\\\\?(\" + QUERY$ + \")\") + \"?$\",\r\n\t\tSAMEDOC_REF$ = \"^\" + subexp(\"\\\\#(\" + FRAGMENT$ + \")\") + \"?$\",\r\n\t\tAUTHORITY_REF$ = \"^\" + subexp(\"(\" + USERINFO$ + \")@\") + \"?(\" + HOST$ + \")\" + subexp(\"\\\\:(\" + PORT$ + \")\") + \"?$\",\r\n\t\t\r\n\t\tURI_REF = new RegExp(\"(\" + GENERIC_REF$ + \")|(\" + RELATIVE_REF$ + \")\"),\r\n\t\tNOT_SCHEME = new RegExp(mergeSet(\"[^]\", ALPHA$$, DIGIT$$, \"[\\\\+\\\\-\\\\.]\"), \"g\"),\r\n\t\tNOT_USERINFO = new RegExp(mergeSet(\"[^\\\\%\\\\:]\", UNRESERVED$$, SUB_DELIMS$$), \"g\"),\r\n\t\tNOT_HOST = new RegExp(mergeSet(\"[^\\\\%]\", UNRESERVED$$, SUB_DELIMS$$), \"g\"),\r\n\t\tNOT_PATH = new RegExp(mergeSet(\"[^\\\\%\\\\/\\\\:\\\\@]\", UNRESERVED$$, SUB_DELIMS$$), \"g\"),\r\n\t\tNOT_PATH_NOSCHEME = new RegExp(mergeSet(\"[^\\\\%\\\\/\\\\@]\", UNRESERVED$$, SUB_DELIMS$$), \"g\"),\r\n\t\tNOT_QUERY = new RegExp(mergeSet(\"[^\\\\%]\", UNRESERVED$$, SUB_DELIMS$$, \"[\\\\:\\\\@\\\\/\\\\?]\"), \"g\"),\r\n\t\tNOT_FRAGMENT = NOT_QUERY,\r\n\t\tESCAPE = new RegExp(mergeSet(\"[^]\", UNRESERVED$$, SUB_DELIMS$$), \"g\"),\r\n\t\tUNRESERVED = new RegExp(UNRESERVED$$, \"g\"),\r\n\t\tOTHER_CHARS = new RegExp(mergeSet(\"[^\\\\%]\", UNRESERVED$$, RESERVED$$), \"g\"),\r\n\t\tPCT_ENCODEDS = new RegExp(PCT_ENCODED$ + \"+\", \"g\"),\r\n\t\tURI_PARSE = /^(?:([^:\\/?#]+):)?(?:\\/\\/((?:([^\\/?#@]*)@)?([^\\/?#:]*)(?:\\:(\\d*))?))?([^?#]*)(?:\\?([^#]*))?(?:#((?:.|\\n)*))?/i,\r\n\t\tRDS1 = /^\\.\\.?\\//,\r\n\t\tRDS2 = /^\\/\\.(\\/|$)/,\r\n\t\tRDS3 = /^\\/\\.\\.(\\/|$)/,\r\n\t\tRDS4 = /^\\.\\.?$/,\r\n\t\tRDS5 = /^\\/?(?:.|\\n)*?(?=\\/|$)/,\r\n\t\tNO_MATCH_IS_UNDEFINED = (\"\").match(/(){0}/)[1] === undefined,\r\n\t\t\r\n\t\t/**\r\n\t\t * @param {string} chr\r\n\t\t * @return {string}\r\n\t\t */\r\n\t\tpctEncChar = function (chr) {\r\n\t\t\tvar c = chr.charCodeAt(0), e;\r\n \r\n\t\t\tif (c < 16) {\r\n\t\t\t\te = \"%0\" + c.toString(16).toUpperCase();\r\n\t\t\t}\r\n\t\t\telse if (c < 128) {\r\n\t\t\t\te = \"%\" + c.toString(16).toUpperCase();\r\n\t\t\t}\r\n\t\t\telse if (c < 2048) {\r\n\t\t\t\te = \"%\" + ((c >> 6) | 192).toString(16).toUpperCase() + \"%\" + ((c & 63) | 128).toString(16).toUpperCase();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\te = \"%\" + ((c >> 12) | 224).toString(16).toUpperCase() + \"%\" + (((c >> 6) & 63) | 128).toString(16).toUpperCase() + \"%\" + ((c & 63) | 128).toString(16).toUpperCase();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn e;\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * @param {string} str\r\n\t\t * @return {string}\r\n\t\t */\r\n\t\tpctDecUnreserved = function (str) {\r\n\t\t\tvar newStr = \"\", \r\n\t\t\t\ti = 0,\r\n\t\t\t\tc, s;\r\n\t \r\n\t\t\twhile (i < str.length) {\r\n\t\t\t\tc = parseInt(str.substr(i + 1, 2), 16);\r\n\t \r\n\t\t\t\tif (c < 128) {\r\n\t\t\t\t\ts = String.fromCharCode(c);\r\n\t\t\t\t\tif (s.match(UNRESERVED)) {\r\n\t\t\t\t\t\tnewStr += s;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tnewStr += str.substr(i, 3);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ti += 3;\r\n\t\t\t\t}\r\n\t\t\t\telse if ((c > 191) && (c < 224)) {\r\n\t\t\t\t\tnewStr += str.substr(i, 6);\r\n\t\t\t\t\ti += 6;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tnewStr += str.substr(i, 9);\r\n\t\t\t\t\ti += 9;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t \r\n\t\t\treturn newStr;\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * @param {string} str\r\n\t\t * @return {string}\r\n\t\t */\r\n\t\tpctDecChars = function (str) {\r\n\t\t\tvar newStr = \"\", \r\n\t\t\t\ti = 0,\r\n\t\t\t\tc, c2, c3;\r\n\t \r\n\t\t\twhile (i < str.length) {\r\n\t\t\t\tc = parseInt(str.substr(i + 1, 2), 16);\r\n\t \r\n\t\t\t\tif (c < 128) {\r\n\t\t\t\t\tnewStr += String.fromCharCode(c);\r\n\t\t\t\t\ti += 3;\r\n\t\t\t\t}\r\n\t\t\t\telse if ((c > 191) && (c < 224)) {\r\n\t\t\t\t\tc2 = parseInt(str.substr(i + 4, 2), 16);\r\n\t\t\t\t\tnewStr += String.fromCharCode(((c & 31) << 6) | (c2 & 63));\r\n\t\t\t\t\ti += 6;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tc2 = parseInt(str.substr(i + 4, 2), 16);\r\n\t\t\t\t\tc3 = parseInt(str.substr(i + 7, 2), 16);\r\n\t\t\t\t\tnewStr += String.fromCharCode(((c & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));\r\n\t\t\t\t\ti += 9;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t \r\n\t\t\treturn newStr;\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * @return {string}\r\n\t\t */\r\n\t\ttypeOf = function (o) {\r\n\t\t\treturn o === undefined ? \"undefined\" : (o === null ? \"null\" : Object.prototype.toString.call(o).split(\" \").pop().split(\"]\").shift().toLowerCase());\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * @constructor\r\n\t\t * @implements URIComponents\r\n\t\t */\r\n\t\tComponents = function () {\r\n\t\t\tthis.errors = [];\r\n\t\t}, \r\n\t\t\r\n\t\t/** @namespace */ \r\n\t\tURI = exports;\r\n\t\r\n\t/**\r\n\t * Components\r\n\t */\r\n\t\r\n\tComponents.prototype = {\r\n\t\t/**\r\n\t\t * @type String\r\n\t\t */\r\n\t\t\r\n\t\tscheme : undefined,\r\n\t\t\r\n\t\t/**\r\n\t\t * @type String\r\n\t\t */\r\n\t\t\r\n\t\tuserinfo : undefined,\r\n\t\t\r\n\t\t/**\r\n\t\t * @type String\r\n\t\t */\r\n\t\t\r\n\t\thost : undefined,\r\n\t\t\r\n\t\t/**\r\n\t\t * @type number\r\n\t\t */\r\n\t\t\r\n\t\tport : undefined,\r\n\t\t\r\n\t\t/**\r\n\t\t * @type string\r\n\t\t */\r\n\t\t\r\n\t\tpath : undefined,\r\n\t\t\r\n\t\t/**\r\n\t\t * @type string\r\n\t\t */\r\n\t\t\r\n\t\tquery : undefined,\r\n\t\t\r\n\t\t/**\r\n\t\t * @type string\r\n\t\t */\r\n\t\t\r\n\t\tfragment : undefined,\r\n\t\t\r\n\t\t/**\r\n\t\t * @type string\r\n\t\t * @values \"uri\", \"absolute\", \"relative\", \"same-document\"\r\n\t\t */\r\n\t\t\r\n\t\treference : undefined,\r\n\t\t\r\n\t\t/**\r\n\t\t * @type Array\r\n\t\t */\r\n\t\t\r\n\t\terrors : undefined\r\n\t};\r\n\t\r\n\t/**\r\n\t * URI\r\n\t */\r\n\t\r\n\t/**\r\n\t * @namespace\r\n\t */\r\n\t\r\n\tURI.SCHEMES = {};\r\n\t\r\n\t/**\r\n\t * @param {string} uriString\r\n\t * @param {Options} [options]\r\n\t * @returns {URIComponents}\r\n\t */\r\n\t\r\n\tURI.parse = function (uriString, options) {\r\n\t\tvar matches, \r\n\t\t\tcomponents = new Components(),\r\n\t\t\tschemeHandler;\r\n\t\t\r\n\t\turiString = uriString ? uriString.toString() : \"\";\r\n\t\toptions = options || {};\r\n\t\t\r\n\t\tif (options.reference === \"suffix\") {\r\n\t\t\turiString = (options.scheme ? options.scheme + \":\" : \"\") + \"//\" + uriString;\r\n\t\t}\r\n\t\t\r\n\t\tmatches = uriString.match(URI_REF);\r\n\t\t\r\n\t\tif (matches) {\r\n\t\t\tif (matches[1]) {\r\n\t\t\t\t//generic URI\r\n\t\t\t\tmatches = matches.slice(1, 10);\r\n\t\t\t} else {\r\n\t\t\t\t//relative URI\r\n\t\t\t\tmatches = matches.slice(10, 19);\r\n\t\t\t}\r\n\t\t} \r\n\t\t\r\n\t\tif (!matches) {\r\n\t\t\tif (!options.tolerant) {\r\n\t\t\t\tcomponents.errors.push(\"URI is not strictly valid.\");\r\n\t\t\t}\r\n\t\t\tmatches = uriString.match(URI_PARSE);\r\n\t\t}\r\n\t\t\r\n\t\tif (matches) {\r\n\t\t\tif (NO_MATCH_IS_UNDEFINED) {\r\n\t\t\t\t//store each component\r\n\t\t\t\tcomponents.scheme = matches[1];\r\n\t\t\t\t//components.authority = matches[2];\r\n\t\t\t\tcomponents.userinfo = matches[3];\r\n\t\t\t\tcomponents.host = matches[4];\r\n\t\t\t\tcomponents.port = parseInt(matches[5], 10);\r\n\t\t\t\tcomponents.path = matches[6] || \"\";\r\n\t\t\t\tcomponents.query = matches[7];\r\n\t\t\t\tcomponents.fragment = matches[8];\r\n\t\t\t\t\r\n\t\t\t\t//fix port number\r\n\t\t\t\tif (isNaN(components.port)) {\r\n\t\t\t\t\tcomponents.port = matches[5];\r\n\t\t\t\t}\r\n\t\t\t} else {  //IE FIX for improper RegExp matching\r\n\t\t\t\t//store each component\r\n\t\t\t\tcomponents.scheme = matches[1] || undefined;\r\n\t\t\t\t//components.authority = (uriString.indexOf(\"//\") !== -1 ? matches[2] : undefined);\r\n\t\t\t\tcomponents.userinfo = (uriString.indexOf(\"@\") !== -1 ? matches[3] : undefined);\r\n\t\t\t\tcomponents.host = (uriString.indexOf(\"//\") !== -1 ? matches[4] : undefined);\r\n\t\t\t\tcomponents.port = parseInt(matches[5], 10);\r\n\t\t\t\tcomponents.path = matches[6] || \"\";\r\n\t\t\t\tcomponents.query = (uriString.indexOf(\"?\") !== -1 ? matches[7] : undefined);\r\n\t\t\t\tcomponents.fragment = (uriString.indexOf(\"#\") !== -1 ? matches[8] : undefined);\r\n\t\t\t\t\r\n\t\t\t\t//fix port number\r\n\t\t\t\tif (isNaN(components.port)) {\r\n\t\t\t\t\tcomponents.port = (uriString.match(/\\/\\/(?:.|\\n)*\\:(?:\\/|\\?|\\#|$)/) ? matches[4] : undefined);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//determine reference type\r\n\t\t\tif (components.scheme === undefined && components.userinfo === undefined && components.host === undefined && components.port === undefined && components.path === undefined && components.query === undefined) {\r\n\t\t\t\tcomponents.reference = \"same-document\";\r\n\t\t\t} else if (components.scheme === undefined) {\r\n\t\t\t\tcomponents.reference = \"relative\";\r\n\t\t\t} else if (components.fragment === undefined) {\r\n\t\t\t\tcomponents.reference = \"absolute\";\r\n\t\t\t} else {\r\n\t\t\t\tcomponents.reference = \"uri\";\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//check for reference errors\r\n\t\t\tif (options.reference && options.reference !== \"suffix\" && options.reference !== components.reference) {\r\n\t\t\t\tcomponents.errors.push(\"URI is not a \" + options.reference + \" reference.\");\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//check if a handler for the scheme exists\r\n\t\t\tschemeHandler = URI.SCHEMES[(options.scheme || components.scheme || \"\").toLowerCase()];\r\n\t\t\tif (schemeHandler && schemeHandler.parse) {\r\n\t\t\t\t//perform extra parsing\r\n\t\t\t\tschemeHandler.parse(components, options);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tcomponents.errors.push(\"URI can not be parsed.\");\r\n\t\t}\r\n\t\t\r\n\t\treturn components;\r\n\t};\r\n\t\r\n\t/**\r\n\t * @private\r\n\t * @param {URIComponents} components\r\n\t * @returns {string|undefined}\r\n\t */\r\n\t\r\n\tURI._recomposeAuthority = function (components) {\r\n\t\tvar uriTokens = [];\r\n\t\t\r\n\t\tif (components.userinfo !== undefined) {\r\n\t\t\turiTokens.push(components.userinfo.toString().replace(NOT_USERINFO, pctEncChar));\r\n\t\t\turiTokens.push(\"@\");\r\n\t\t}\r\n\t\tif (components.host !== undefined) {\r\n\t\t\turiTokens.push(components.host.toString().toLowerCase().replace(NOT_HOST, pctEncChar));\r\n\t\t}\r\n\t\tif (typeof components.port === \"number\") {\r\n\t\t\turiTokens.push(\":\");\r\n\t\t\turiTokens.push(components.port.toString(10));\r\n\t\t}\r\n\t\t\r\n\t\treturn uriTokens.length ? uriTokens.join(\"\") : undefined;\r\n\t};\r\n\t\r\n\t/**\r\n\t * @param {string} input\r\n\t * @returns {string}\r\n\t */\r\n\t\r\n\tURI.removeDotSegments = function (input) {\r\n\t\tvar output = [], s;\r\n\t\t\r\n\t\twhile (input.length) {\r\n\t\t\tif (input.match(RDS1)) {\r\n\t\t\t\tinput = input.replace(RDS1, \"\");\r\n\t\t\t} else if (input.match(RDS2)) {\r\n\t\t\t\tinput = input.replace(RDS2, \"/\");\r\n\t\t\t} else if (input.match(RDS3)) {\r\n\t\t\t\tinput = input.replace(RDS3, \"/\");\r\n\t\t\t\toutput.pop();\r\n\t\t\t} else if (input === \".\" || input === \"..\") {\r\n\t\t\t\tinput = \"\";\r\n\t\t\t} else {\r\n\t\t\t\ts = input.match(RDS5)[0];\r\n\t\t\t\tinput = input.slice(s.length);\r\n\t\t\t\toutput.push(s);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn output.join(\"\");\r\n\t};\r\n\t\r\n\t/**\r\n\t * @param {URIComponents} components\r\n\t * @param {Options} [options]\r\n\t * @returns {string}\r\n\t */\r\n\t\r\n\tURI.serialize = function (components, options) {\r\n\t\tvar uriTokens = [], \r\n\t\t\tschemeHandler,\r\n\t\t\tauthority,\r\n\t\t\ts;\r\n\t\toptions = options || {};\r\n\t\t\r\n\t\t//check if a handler for the scheme exists\r\n\t\tschemeHandler = URI.SCHEMES[(options.scheme || components.scheme || \"\").toLowerCase()];\r\n\t\tif (schemeHandler && schemeHandler.serialize) {\r\n\t\t\t//perform extra serialization\r\n\t\t\tschemeHandler.serialize(components, options);\r\n\t\t}\r\n\t\t\r\n\t\tif (options.reference !== \"suffix\" && components.scheme) {\r\n\t\t\turiTokens.push(components.scheme.toString().toLowerCase().replace(NOT_SCHEME, \"\"));\r\n\t\t\turiTokens.push(\":\");\r\n\t\t}\r\n\t\t\r\n\t\tauthority = URI._recomposeAuthority(components);\r\n\t\tif (authority !== undefined) {\r\n\t\t\tif (options.reference !== \"suffix\") {\r\n\t\t\t\turiTokens.push(\"//\");\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\turiTokens.push(authority);\r\n\t\t\t\r\n\t\t\tif (components.path && components.path.charAt(0) !== \"/\") {\r\n\t\t\t\turiTokens.push(\"/\");\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif (components.path !== undefined) {\r\n\t\t\ts = URI.removeDotSegments(components.path.toString().replace(/%2E/ig, \".\"));\r\n\t\t\t\r\n\t\t\tif (components.scheme) {\r\n\t\t\t\ts = s.replace(NOT_PATH, pctEncChar);\r\n\t\t\t} else {\r\n\t\t\t\ts = s.replace(NOT_PATH_NOSCHEME, pctEncChar);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (authority === undefined) {\r\n\t\t\t\ts = s.replace(/^\\/\\//, \"/%2F\");  //don't allow the path to start with \"//\"\r\n\t\t\t}\r\n\t\t\turiTokens.push(s);\r\n\t\t}\r\n\t\t\r\n\t\tif (components.query !== undefined) {\r\n\t\t\turiTokens.push(\"?\");\r\n\t\t\turiTokens.push(components.query.toString().replace(NOT_QUERY, pctEncChar));\r\n\t\t}\r\n\t\t\r\n\t\tif (components.fragment !== undefined) {\r\n\t\t\turiTokens.push(\"#\");\r\n\t\t\turiTokens.push(components.fragment.toString().replace(NOT_FRAGMENT, pctEncChar));\r\n\t\t}\r\n\t\t\r\n\t\treturn uriTokens\r\n\t\t\t.join('')  //merge tokens into a string\r\n\t\t\t.replace(PCT_ENCODEDS, pctDecUnreserved)  //undecode unreserved characters\r\n\t\t\t//.replace(OTHER_CHARS, pctEncChar)  //replace non-URI characters\r\n\t\t\t.replace(/%[0-9A-Fa-f]{2}/g, function (str) {  //uppercase percent encoded characters\r\n\t\t\t\treturn str.toUpperCase();\r\n\t\t\t})\r\n\t\t;\r\n\t};\r\n\t\r\n\t/**\r\n\t * @param {URIComponents} base\r\n\t * @param {URIComponents} relative\r\n\t * @param {Options} [options]\r\n\t * @param {boolean} [skipNormalization]\r\n\t * @returns {URIComponents}\r\n\t */\r\n\t\r\n\tURI.resolveComponents = function (base, relative, options, skipNormalization) {\r\n\t\tvar target = new Components();\r\n\t\t\r\n\t\tif (!skipNormalization) {\r\n\t\t\tbase = URI.parse(URI.serialize(base, options), options);  //normalize base components\r\n\t\t\trelative = URI.parse(URI.serialize(relative, options), options);  //normalize relative components\r\n\t\t}\r\n\t\toptions = options || {};\r\n\t\t\r\n\t\tif (!options.tolerant && relative.scheme) {\r\n\t\t\ttarget.scheme = relative.scheme;\r\n\t\t\t//target.authority = relative.authority;\r\n\t\t\ttarget.userinfo = relative.userinfo;\r\n\t\t\ttarget.host = relative.host;\r\n\t\t\ttarget.port = relative.port;\r\n\t\t\ttarget.path = URI.removeDotSegments(relative.path);\r\n\t\t\ttarget.query = relative.query;\r\n\t\t} else {\r\n\t\t\tif (relative.userinfo !== undefined || relative.host !== undefined || relative.port !== undefined) {\r\n\t\t\t\t//target.authority = relative.authority;\r\n\t\t\t\ttarget.userinfo = relative.userinfo;\r\n\t\t\t\ttarget.host = relative.host;\r\n\t\t\t\ttarget.port = relative.port;\r\n\t\t\t\ttarget.path = URI.removeDotSegments(relative.path);\r\n\t\t\t\ttarget.query = relative.query;\r\n\t\t\t} else {\r\n\t\t\t\tif (!relative.path) {\r\n\t\t\t\t\ttarget.path = base.path;\r\n\t\t\t\t\tif (relative.query !== undefined) {\r\n\t\t\t\t\t\ttarget.query = relative.query;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttarget.query = base.query;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (relative.path.charAt(0) === \"/\") {\r\n\t\t\t\t\t\ttarget.path = URI.removeDotSegments(relative.path);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif ((base.userinfo !== undefined || base.host !== undefined || base.port !== undefined) && !base.path) {\r\n\t\t\t\t\t\t\ttarget.path = \"/\" + relative.path;\r\n\t\t\t\t\t\t} else if (!base.path) {\r\n\t\t\t\t\t\t\ttarget.path = relative.path;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttarget.path = base.path.slice(0, base.path.lastIndexOf(\"/\") + 1) + relative.path;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttarget.path = URI.removeDotSegments(target.path);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttarget.query = relative.query;\r\n\t\t\t\t}\r\n\t\t\t\t//target.authority = base.authority;\r\n\t\t\t\ttarget.userinfo = base.userinfo;\r\n\t\t\t\ttarget.host = base.host;\r\n\t\t\t\ttarget.port = base.port;\r\n\t\t\t}\r\n\t\t\ttarget.scheme = base.scheme;\r\n\t\t}\r\n\t\t\r\n\t\ttarget.fragment = relative.fragment;\r\n\t\t\r\n\t\treturn target;\r\n\t};\r\n\t\r\n\t/**\r\n\t * @param {string} baseURI\r\n\t * @param {string} relativeURI\r\n\t * @param {Options} [options]\r\n\t * @returns {string}\r\n\t */\r\n\t\r\n\tURI.resolve = function (baseURI, relativeURI, options) {\r\n\t\treturn URI.serialize(URI.resolveComponents(URI.parse(baseURI, options), URI.parse(relativeURI, options), options, true), options);\r\n\t};\r\n\t\r\n\t/**\r\n\t * @param {string|URIComponents} uri\r\n\t * @param {Options} options\r\n\t * @returns {string|URIComponents}\r\n\t */\r\n\t\r\n\tURI.normalize = function (uri, options) {\r\n\t\tif (typeof uri === \"string\") {\r\n\t\t\turi = URI.serialize(URI.parse(uri, options), options);\r\n\t\t} else if (typeOf(uri) === \"object\") {\r\n\t\t\turi = URI.parse(URI.serialize(uri, options), options);\r\n\t\t}\r\n\t\t\r\n\t\treturn uri;\r\n\t};\r\n\t\r\n\t/**\r\n\t * @param {string|URIComponents} uriA\r\n\t * @param {string|URIComponents} uriB\r\n\t * @param {Options} options\r\n\t */\r\n\t\r\n\tURI.equal = function (uriA, uriB, options) {\r\n\t\tif (typeof uriA === \"string\") {\r\n\t\t\turiA = URI.serialize(URI.parse(uriA, options), options);\r\n\t\t} else if (typeOf(uriA) === \"object\") {\r\n\t\t\turiA = URI.serialize(uriA, options);\r\n\t\t}\r\n\t\t\r\n\t\tif (typeof uriB === \"string\") {\r\n\t\t\turiB = URI.serialize(URI.parse(uriB, options), options);\r\n\t\t} else if (typeOf(uriB) === \"object\") {\r\n\t\t\turiB = URI.serialize(uriB, options);\r\n\t\t}\r\n\t\t\r\n\t\treturn uriA === uriB;\r\n\t};\r\n\t\r\n\t/**\r\n\t * @param {string} str\r\n\t * @returns {string}\r\n\t */\r\n\t\r\n\tURI.escapeComponent = function (str) {\r\n\t\treturn str && str.toString().replace(ESCAPE, pctEncChar);\r\n\t};\r\n\t\r\n\t/**\r\n\t * @param {string} str\r\n\t * @returns {string}\r\n\t */\r\n\t\r\n\tURI.unescapeComponent = function (str) {\r\n\t\treturn str && str.toString().replace(PCT_ENCODEDS, pctDecChars);\r\n\t};\r\n\t\r\n\t//export API\r\n\texports.pctEncChar = pctEncChar;\r\n\texports.pctDecChars = pctDecChars;\r\n\texports.Components = Components;\r\n\texports.URI = URI;\r\n\t\r\n\t//name-safe export API\r\n\texports[\"pctEncChar\"] = pctEncChar;\r\n\texports[\"pctDecChars\"] = pctDecChars;\r\n\texports[\"Components\"] = Components;\r\n\texports[\"URI\"] = {\r\n\t\t\"SCHEMES\" : URI.SCHEMES,\r\n\t\t\"parse\" : URI.parse,\r\n\t\t\"removeDotSegments\" : URI.removeDotSegments,\r\n\t\t\"serialize\" : URI.serialize,\r\n\t\t\"resolveComponents\" : URI.resolveComponents,\r\n\t\t\"resolve\" : URI.resolve,\r\n\t\t\"normalize\" : URI.normalize,\r\n\t\t\"equal\" : URI.equal,\r\n\t\t\"escapeComponent\" : URI.escapeComponent,\r\n\t\t\"unescapeComponent\" : URI.unescapeComponent\r\n\t};\r\n\t\r\n\t//load all schemes\r\n\trequire(\"./schemes\");\r\n\t\r\n\treturn URI;\r\n}());\n},{\"./schemes\":4}],8:[function(require,module,exports){\nvar _global = (function() { return this; })();\nvar nativeWebSocket = _global.WebSocket || _global.MozWebSocket;\n\n\n/**\n * Expose a W3C WebSocket class with just one or two arguments.\n */\nfunction W3CWebSocket(uri, protocols) {\n\tvar native_instance;\n\n\tif (protocols) {\n\t\tnative_instance = new nativeWebSocket(uri, protocols);\n\t}\n\telse {\n\t\tnative_instance = new nativeWebSocket(uri);\n\t}\n\n\t/**\n\t * 'native_instance' is an instance of nativeWebSocket (the browser's WebSocket\n\t * class). Since it is an Object it will be returned as it is when creating an\n\t * instance of W3CWebSocket via 'new W3CWebSocket()'.\n\t *\n\t * ECMAScript 5: http://bclary.com/2004/11/07/#a-13.2.2\n\t */\n\treturn native_instance;\n}\n\n\n/**\n * Module exports.\n */\nmodule.exports = {\n    'w3cwebsocket' : nativeWebSocket ? W3CWebSocket : null,\n    'version'      : require('./version')\n};\n\n},{\"./version\":9}],9:[function(require,module,exports){\nmodule.exports = require('../package.json').version;\n\n},{\"../package.json\":10}],10:[function(require,module,exports){\nmodule.exports={\n  \"name\": \"websocket\",\n  \"description\": \"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.\",\n  \"keywords\": [\n    \"websocket\",\n    \"websockets\",\n    \"socket\",\n    \"networking\",\n    \"comet\",\n    \"push\",\n    \"RFC-6455\",\n    \"realtime\",\n    \"server\",\n    \"client\"\n  ],\n  \"author\": {\n    \"name\": \"Brian McKelvey\",\n    \"email\": \"brian@worlize.com\",\n    \"url\": \"https://www.worlize.com/\"\n  },\n  \"version\": \"1.0.17\",\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"https://github.com/theturtle32/WebSocket-Node.git\"\n  },\n  \"homepage\": \"https://github.com/theturtle32/WebSocket-Node\",\n  \"engines\": {\n    \"node\": \">=0.8.0\"\n  },\n  \"dependencies\": {\n    \"debug\": \"~2.1.0\",\n    \"nan\": \"~1.0.0\",\n    \"typedarray-to-buffer\": \"~3.0.0\"\n  },\n  \"devDependencies\": {\n    \"buffer-equal\": \"0.0.1\",\n    \"faucet\": \"0.0.1\",\n    \"gulp\": \"git+https://github.com/gulpjs/gulp.git#4.0\",\n    \"gulp-jshint\": \"^1.9.0\",\n    \"jshint-stylish\": \"^1.0.0\",\n    \"tape\": \"^3.0.0\"\n  },\n  \"config\": {\n    \"verbose\": false\n  },\n  \"scripts\": {\n    \"install\": \"(node-gyp rebuild 2> builderror.log) || (exit 0)\",\n    \"test\": \"faucet test/unit\",\n    \"gulp\": \"gulp\"\n  },\n  \"main\": \"index\",\n  \"directories\": {\n    \"lib\": \"./lib\"\n  },\n  \"browser\": \"lib/browser.js\",\n  \"gitHead\": \"cda940b883aa884906ac13158fe514229a67f426\",\n  \"bugs\": {\n    \"url\": \"https://github.com/theturtle32/WebSocket-Node/issues\"\n  },\n  \"_id\": \"websocket@1.0.17\",\n  \"_shasum\": \"8a572afc6ec120eb41473ca517d07d932f7b6a1c\",\n  \"_from\": \"websocket@>=1.0.17 <2.0.0\",\n  \"_npmVersion\": \"1.4.28\",\n  \"_npmUser\": {\n    \"name\": \"theturtle32\",\n    \"email\": \"brian@worlize.com\"\n  },\n  \"maintainers\": [\n    {\n      \"name\": \"theturtle32\",\n      \"email\": \"brian@worlize.com\"\n    }\n  ],\n  \"dist\": {\n    \"shasum\": \"8a572afc6ec120eb41473ca517d07d932f7b6a1c\",\n    \"tarball\": \"http://registry.npmjs.org/websocket/-/websocket-1.0.17.tgz\"\n  },\n  \"_resolved\": \"https://registry.npmjs.org/websocket/-/websocket-1.0.17.tgz\",\n  \"readme\": \"ERROR: No README data found!\"\n}\n\n},{}]},{},[1])(1)\n});"],"sourceRoot":"/source/"}