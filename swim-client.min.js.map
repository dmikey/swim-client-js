{"version":3,"sources":["swim-client.min.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","swim","client","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length",1,"reset","endpoint","Channel","bridge","channel","close","getHandlers","linkHandlers","link","uri","lane","handler","done","error","unlinked","nodeHandlers","undefined","laneHandlers","push","get","request","proto","LinkRequest","relative","send","unlink","index","Function","indexOf","splice","UnlinkRequest","handleMessage","envelope","URI","resolve","node","sendEvent","body","message","EventMessage","sendCommand","CommandMessage","handlers","GetRequest","put","PutRequest","handleState","shift","socket","WS","buffer","that","onopen","onclose","onmessage","frame","payload","data","parse","receive","w3cwebsocket","prototype","readyState","OPEN","stringify","isEventMessage","isCommandMessage","isStateResponse","CLOSED","CLOSING","components","serialize","path","query","fragment","scheme","userinfo","host","port","swim-proto-js","uri-js","websocket",2,"coerce","arguments","item","Absent","Extant","isAttr","isSlot","builder","RecordBuilder","appendField","state","coerceItem","coerceArray","isRecord","Uint8Array","Array","isArray","toRecon","coerceObject","array","value","isField","appendValue","object","prop","key","attrs","isAbsent","Attr","Slot","string","input","StringIterator","result","DocumentParser","run","writer","ReconWriter","writeBlock","apply","objectify","isExtant","objectifyArray","objectifyObject","record","items","iterator","isEmpty","head","step","base64","DataBuilder","cs","appendBase64Char","attr","slot","empty","Record","compare","x","y","equals","__proto__","Object","defineProperty","Field","enumerable","RecordIterator","writable","ValueBuilder","StringIteratee","StringBuilder","isSpace","c","isNewline","isWhitespace","isNameStartChar","isNameChar","isBase64Char","BlockParser","AttrParser","ident","IdentParser","BlockValueParser","field","InlineValueParser","RecordParser","MarkupParser","text","StringParser","DataParser","NumberParser","create","constructor","getOwnPropertyNames","isMarkup","isBlank","afterNonText","hasNonText","sections","hasAttrs","hasPrefixAttrs","hasPostfixAttrs","contains","tail","slice","foot","target","these","next","concat","appendRecord","forEach","those","toString","writeRecord","writeAttr","writeItem","dup","toRecord","isAllAttrs","isDone","c1","charCodeAt","c2","Done","isCont","isError","feed","unexpectedEOF","append","String","fromCharCode","appendString","prepare","size","expand","base","Math","max","aliased","set","appendByte","offset","decodeBase64Digit","decodeBase64Quantum","p","q","z","w","subarray","found","expected","Number","writeValue","inMarkup","writeText","writeNumber","writeBool","writeData","writeIdent","writeMarkup","isIdent","writeTextMarkup","writeString","number","bool","encodeBase64Digit","extant","absent",3,"decode","heading","StateResponse","LinkedResponse","UnlinkedResponse","encode","recon","Envelope","RequestEnvelope","ResponseEnvelope","MessageEnvelope","via","headers","header","recon-js",4,"./schemes/http","./schemes/urn",5,"SCHEMES","../uri",6,"URI_NS","pctEncChar","NID$","PCT_ENCODED$","TRANS$$","NSS$","URN_SCHEME","RegExp","URN_PATH","URN_PARSE","URN_EXCLUDED","UUID","options","schemeHandler","matches","match","tolerant","errors","toLowerCase","replace",7,"mergeSet","sets","nextSet","subexp","str","ALPHA$$","DIGIT$$","HEXDIG$$","GEN_DELIMS$$","SUB_DELIMS$$","RESERVED$$","UNRESERVED$$","SCHEME$","USERINFO$","DEC_OCTET$","IPV4ADDRESS$","H16$","IPV6ADDRESS$","IPVFUTURE$","IP_LITERAL$","REG_NAME$","HOST$","PORT$","AUTHORITY$","PCHAR$","SEGMENT$","SEGMENT_NZ$","SEGMENT_NZ_NC$","PATH_ABEMPTY$","PATH_ABSOLUTE$","PATH_NOSCHEME$","PATH_ROOTLESS$","PATH_EMPTY$","QUERY$","FRAGMENT$","HIER_PART$","URI$","RELATIVE_PART$","RELATIVE$","GENERIC_REF$","RELATIVE_REF$","URI_REF","NOT_SCHEME","NOT_USERINFO","NOT_HOST","NOT_PATH","NOT_PATH_NOSCHEME","NOT_QUERY","NOT_FRAGMENT","ESCAPE","UNRESERVED","PCT_ENCODEDS","URI_PARSE","RDS1","RDS2","RDS3","RDS5","NO_MATCH_IS_UNDEFINED","chr","toUpperCase","pctDecUnreserved","newStr","parseInt","substr","pctDecChars","c3","typeOf","split","pop","Components","reference","uriString","isNaN","_recomposeAuthority","uriTokens","join","removeDotSegments","output","authority","charAt","resolveComponents","skipNormalization","lastIndexOf","baseURI","relativeURI","normalize","equal","uriA","uriB","escapeComponent","unescapeComponent","./schemes",8,"W3CWebSocket","protocols","native_instance","nativeWebSocket","_global","WebSocket","MozWebSocket","version","./version",9,"../package.json",10,"name","description","keywords","author","email","url","repository","type","homepage","engines","dependencies","debug","nan","typedarray-to-buffer","devDependencies","buffer-equal","faucet","gulp","gulp-jshint","jshint-stylish","tape","config","verbose","scripts","install","test","main","directories","lib","browser","gitHead","bugs","_id","_shasum","_from","_npmVersion","_nodeVersion","_npmUser","maintainers","dist","shasum","tarball","_resolved","readme"],"mappings":"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","file":"swim-client.min.js","sourcesContent":["(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}(g.swim || (g.swim = {})).client = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nvar proto = require('swim-proto-js');\nvar URI = require('uri-js');\nvar WS = require('websocket').w3cwebsocket;\n\nvar getHandlers = {};\nvar linkHandlers = {};\n\nfunction reset() {\n  for (var endpoint in Channel.bridge) {\n    var channel = Channel.bridge[endpoint];\n    if (channel instanceof Channel) channel.close();\n  }\n  Channel.bridge = {};\n  getHandlers = {};\n  linkHandlers = {};\n}\n\n\nfunction link(uri, lane, handler) {\n  if (typeof handler === 'function') handler = {done: handler};\n  if (!handler.error) handler.error = function () {};\n\n  var unlinked = false;\n  var nodeHandlers = linkHandlers[uri];\n  if (nodeHandlers === undefined) {\n    nodeHandlers = {};\n    linkHandlers[uri] = nodeHandlers;\n  }\n  var laneHandlers = nodeHandlers[lane];\n  if (laneHandlers === undefined) {\n    unlinked = true;\n    laneHandlers = [];\n    nodeHandlers[lane] = laneHandlers;\n  }\n  laneHandlers.push(handler);\n\n  if (unlinked) {\n    var channel = Channel.get(uri);\n    var request = new proto.LinkRequest(channel.relative(uri), lane);\n    channel.send(request);\n  }\n}\n\nfunction unlink(uri, lane, handler) {\n  var nodeHandlers = linkHandlers[uri];\n  if (nodeHandlers === undefined) return;\n  var laneHandlers = nodeHandlers[lane];\n  if (laneHandlers === undefined) return;\n  var index = -1;\n  if (handler instanceof Function) {\n    var i = 0;\n    var n = laneHandlers.length;\n    while (i < n && index < 0) {\n      if (laneHandlers[i].done === handler) index = i;\n      else i += 1;\n    }\n  }\n  else index = laneHandlers.indexOf(handler);\n  if (index < 0) return;\n  laneHandlers.splice(index, 1);\n  if (laneHandlers.length === 0) {\n    delete nodeHandlers[lane];\n    if (nodeHandlers.length === 0) delete linkHandlers[uri];\n\n    var channel = Channel.get(uri);\n    var request = new proto.UnlinkRequest(channel.relative(uri), lane);\n    channel.send(request);\n  }\n}\n\nfunction handleMessage(endpoint, envelope) {\n  var uri = URI.resolve(endpoint, envelope.node);\n  var nodeHandlers = linkHandlers[uri];\n  if (nodeHandlers === undefined) return;\n  var laneHandlers = nodeHandlers[envelope.lane];\n  if (laneHandlers === undefined) return;\n  var i = 0;\n  var n = laneHandlers.length;\n  while (i < n) {\n    var handler = laneHandlers[i];\n    handler.done(envelope);\n    i += 1;\n  }\n}\n\n\nfunction sendEvent(uri, lane, body) {\n  var channel = Channel.get(uri);\n  var message = new proto.EventMessage(channel.relative(uri), lane, undefined, body);\n  channel.send(message);\n}\n\nfunction sendCommand(uri, lane, body) {\n  var channel = Channel.get(uri);\n  var message = new proto.CommandMessage(channel.relative(uri), lane, undefined, body);\n  channel.send(message);\n}\n\n\nfunction get(uri, handler) {\n  if (typeof handler === 'function') handler = {done: handler};\n\n  var handlers = getHandlers[uri];\n  if (handlers === undefined) {\n    handlers = [];\n    getHandlers[uri] = handlers;\n  }\n  handlers.push(handler);\n\n  var channel = Channel.get(uri);\n  var request = new proto.GetRequest(channel.relative(uri));\n  channel.send(request);\n}\n\nfunction put(uri, body, handler) {\n  if (typeof handler === 'function') handler = {done: handler};\n\n  var handlers = getHandlers[uri];\n  if (handlers === undefined) {\n    handlers = [];\n    getHandlers[uri] = handlers;\n  }\n  handlers.push(handler);\n\n  var channel = Channel.get(uri);\n  var request = new proto.PutRequest(channel.relative(uri), body);\n  channel.send(request);\n}\n\nfunction handleState(endpoint, envelope) {\n  var uri = URI.resolve(endpoint, envelope.node);\n  var handlers = getHandlers[uri] || [];\n  var handler;\n  while ((handler = handlers.shift())) {\n    handler.done(envelope);\n  }\n  delete getHandlers[uri];\n}\n\n\nfunction Channel(uri) {\n  this.uri = uri;\n  this.socket = new WS(uri, 'swim-0.0');\n  this.buffer = [];\n  Channel.bridge[uri] = this;\n  var that = this;\n  this.socket.onopen = function () {\n    var envelope;\n    while ((envelope = that.buffer.shift())) that.send(envelope);\n  };\n  this.socket.onclose = function () {\n    delete Channel.bridge[that.uri];\n    for (var uri in linkHandlers) if (uri.indexOf(that.uri) === 0) {\n      var nodeHandlers = linkHandlers[uri];\n      if (nodeHandlers !== undefined) {\n        delete linkHandlers[uri];\n        for (var lane in nodeHandlers) {\n          var laneHandlers = nodeHandlers[lane];\n          var i = 0;\n          var n = laneHandlers.length;\n          while (i < n) {\n            var handler = laneHandlers[i];\n            handler.error();\n            i += 1;\n          }\n        }\n      }\n    }\n  };\n  this.socket.onmessage = function (frame) {\n    var payload = frame.data;\n    if (typeof payload === 'string') {\n      var envelope = proto.parse(payload);\n      if (envelope) that.receive(envelope);\n    }\n  };\n}\nChannel.prototype.send = function (envelope) {\n  if (this.socket.readyState !== this.socket.OPEN) this.buffer.push(envelope);\n  else this.socket.send(proto.stringify(envelope));\n};\nChannel.prototype.receive = function (envelope) {\n  if (envelope.isEventMessage) handleMessage(this.uri, envelope);\n  else if (envelope.isCommandMessage) handleMessage(this.uri, envelope);\n  else if (envelope.isStateResponse) handleState(this.uri, envelope);\n};\nChannel.prototype.close = function () {\n  if (this.socket.readyState !== this.socket.CLOSED ||\n      this.socket.readyState !== this.socket.CLOSING)\n    this.socket.close();\n  else delete Channel.bridge[this.uri];\n};\nChannel.prototype.relative = function (uri) {\n  var components = URI.parse(uri);\n  return URI.serialize({\n    path: components.path,\n    query: components.query,\n    fragment: components.fragment\n  });\n};\nChannel.bridge = {};\nChannel.endpoint = function (uri) {\n  var components = URI.parse(uri);\n  var scheme = components.scheme;\n  if (scheme === 'swim') scheme = 'http';\n  else if (scheme === 'swims') scheme = 'https';\n  return URI.serialize({\n    scheme: scheme,\n    userinfo: components.userinfo,\n    host: components.host,\n    port: components.port\n  });\n};\nChannel.get = function (uri) {\n  var endpoint = Channel.endpoint(uri);\n  var channel = Channel.bridge[endpoint];\n  if (channel === undefined) channel = new Channel(endpoint);\n  return channel;\n};\n\n\nexports.reset = reset;\nexports.link = link;\nexports.unlink = unlink;\nexports.sendEvent = sendEvent;\nexports.sendCommand = sendCommand;\nexports.get = get;\nexports.put = put;\n\n},{\"swim-proto-js\":3,\"uri-js\":7,\"websocket\":8}],2:[function(require,module,exports){\n'use strict';\n\nfunction coerce() {\n  if (arguments.length === 1) {\n    var item = arguments[0];\n    if (item === undefined) return Absent;\n    else if (item === null) return Extant;\n    else if (item.isAttr || item.isSlot) {\n      var builder = new RecordBuilder();\n      builder.appendField(item);\n      return builder.state();\n    }\n    else return coerceItem(item);\n  }\n  else if (arguments.length > 1) return coerceArray(arguments);\n  else return Absent;\n}\nfunction coerceItem(item) {\n  if (item === null) return Extant;\n  else if (item.isRecord ||\n           item.isAttr ||\n           item.isSlot ||\n           typeof item === 'string' ||\n           typeof item === 'number' ||\n           typeof item === 'boolean' ||\n           item instanceof Uint8Array ||\n           item === Extant ||\n           item === Absent) return item;\n  else if (Array.isArray(item)) return coerceArray(item);\n  else if (typeof item === 'object') {\n    if (item.toRecon && typeof item.toRecon === 'function') return item.toRecon();\n    else return coerceObject(item);\n  }\n  else return Absent;\n}\nfunction coerceArray(array) {\n  var builder = new RecordBuilder();\n  var n = array.length;\n  var i = 0;\n  while (i < n) {\n    var value = coerceItem(array[i]);\n    if (value.isField) builder.appendField(value);\n    else builder.appendValue(value);\n    i += 1;\n  }\n  return builder.state();\n}\nfunction coerceObject(object) {\n  var builder = new RecordBuilder();\n  var prop, key, value;\n  var attrs = object['@'];\n  for (prop in attrs) {\n    key = coerce(prop);\n    if (typeof key === 'string') {\n      value = coerce(attrs[prop]);\n      if (!value.isAbsent) builder.appendField(new Attr(key, value));\n    }\n  }\n  for (prop in object) {\n    if (prop !== '@') {\n      key = coerce(prop);\n      if (!key.isAbsent) {\n        value = coerce(object[prop]);\n        if (!value.isAbsent) builder.appendField(new Slot(key, value));\n      }\n    }\n  }\n  return builder.state();\n}\n\nfunction parse(string) {\n  var input = new StringIterator(string);\n  var result = new DocumentParser().run(input);\n  return result.state();\n}\n\nfunction stringify() {\n  var writer = new ReconWriter();\n  writer.writeBlock(coerce.apply(null, arguments));\n  return writer.state();\n}\n\nfunction objectify(value) {\n  if (value === undefined || value === null || value.isExtant) return null;\n  else if (value.isAbsent) return undefined;\n  else if (value.isRecord) {\n    if (value.isArray()) return objectifyArray(value);\n    else return objectifyObject(value);\n  }\n  else return value;\n}\nfunction objectifyArray(record) {\n  var array = [];\n  var items = record.iterator();\n  while (!items.isEmpty()) {\n    var value = objectify(items.head());\n    array.push(value);\n    items.step();\n  }\n  return array;\n}\nfunction objectifyObject(record) {\n  var items = record.iterator();\n  var key, value;\n  var object = {};\n  var attrs = null;\n  var i = 0;\n  while (!items.isEmpty()) {\n    var item = items.head();\n    if (item.isField) {\n      key = objectify(item.key);\n      value = objectify(item.value);\n      if (item.isAttr) {\n        if (attrs === null) attrs = {};\n        attrs[key] = value;\n      }\n      else object[key] = value;\n    }\n    else {\n      value = objectify(item);\n      object[i] = value;\n    }\n    items.step();\n    i += 1;\n  }\n  if (attrs !== null) object['@'] = attrs;\n  return object;\n}\n\nfunction base64(string) {\n  if (string === undefined) return new Uint8Array(0);\n  var data = new DataBuilder();\n  var cs = new StringIterator(string);\n  while (!cs.isEmpty()) {\n    data.appendBase64Char(cs.head());\n    cs.step();\n  }\n  return data.state();\n}\n\nfunction attr(key, value) {\n  if (value === undefined) value = Extant;\n  return new Attr(coerce(key), coerce(value));\n}\n\nfunction slot(key, value) {\n  if (value === undefined) value = Extant;\n  return new Slot(coerce(key), coerce(value));\n}\n\nfunction empty() {\n  return new Record([], {});\n}\n\nfunction builder() {\n  return new RecordBuilder();\n}\n\nfunction compare(x, y) {\n  if (x === y) return true;\n  if (x.isRecord && y.isRecord) return x.equals(y);\n  if (x.isField && y.isField) return x.equals(y);\n  if (x instanceof Uint8Array && y instanceof Uint8Array && x.length === y.length) {\n    var i = 0;\n    var n = x.length;\n    while (i < n && x[i] === y[i]) i += 1;\n    if (i === n) return true;\n  }\n  return false;\n}\n\n\nfunction Record(items, index) {\n  if (index === undefined) {\n    index = {};\n    var i = 0;\n    var n = items.length;\n    while (i < n) {\n      var item = items[i];\n      if (item.isField) index[item.key] = item.value;\n      i += 1;\n    }\n  }\n  var record = function(key) {\n    var value = index[key];\n    if (value === undefined && typeof key === 'number') value = items[key];\n    return value;\n  };\n  record.__proto__ = Record.prototype;\n  Object.defineProperty(record, 'items', {value: items});\n  Object.defineProperty(record, 'index', {value: index});\n  return record;\n}\nRecord.prototype = Object.create(Function.prototype);\nRecord.prototype.constructor = Record;\nObject.defineProperty(Record.prototype, 'isRecord', {enumerable: true, value: true});\nObject.defineProperty(Record.prototype, 'size', {\n  enumerable: true,\n  get: function () {\n    return this.items.length;\n  }\n});\nRecord.prototype.isEmpty = function () {\n  return this.items.length === 0;\n};\nRecord.prototype.isArray = function () {\n  return this.items.length >= 0 && Object.getOwnPropertyNames(this.index).length === 0;\n};\nRecord.prototype.isMarkup = function () {\n  function isBlank(string) {\n    var cs = new StringIterator(string);\n    while (!cs.isEmpty() && isSpace(cs.head())) cs.step();\n    return cs.isEmpty();\n  }\n  var items = this.iterator();\n  var afterNonText = false;\n  var hasNonText = false;\n  var sections = 0;\n  while (!items.isEmpty()) {\n    var item = items.head();\n    if (typeof item !== 'string') {\n      if (afterNonText) return false;\n      afterNonText = true;\n      hasNonText = true;\n    }\n    else if (afterNonText && !isBlank(item)) {\n      afterNonText = false;\n      sections += 1;\n    }\n    else if (sections === 0) sections = 1;\n    items.step();\n  }\n  return hasNonText && sections >= 2;\n};\nRecord.prototype.hasAttrs = function() {\n  return this.items.length > 0 && (this.items[0].isAttr || this.items[this.items.length - 1].isAttr);\n};\nRecord.prototype.hasPrefixAttrs = function () {\n  return this.items.length > 0 && this.items[0].isAttr;\n};\nRecord.prototype.hasPostfixAttrs = function () {\n  return this.items.length > 0 && this.items[this.items.length - 1].isAttr;\n};\nRecord.prototype.contains = function (key) {\n  return this(key) !== undefined;\n};\nRecord.prototype.head = function () {\n  return this.items.length > 0 ? this.items[0] : Absent;\n};\nRecord.prototype.tail = function () {\n  return new Record(this.items.slice(1));\n};\nRecord.prototype.body = function () {\n  return new Record(this.items.slice(0, -1));\n};\nRecord.prototype.foot = function () {\n  return this.items.length > 0 ? this.items[this.items.length - 1] : Absent;\n};\nRecord.prototype.target = function () {\n  var these = this.iterator();\n  while (!these.isEmpty()) {\n    var item = these.next();\n    if (!item.isField) return item;\n  }\n  return Absent;\n};\nRecord.prototype.concat = function () {\n  var builder = new RecordBuilder();\n  builder.appendRecord(this);\n  var that = coerce.apply(null, arguments);\n  if (that.isRecord) builder.appendRecord(that);\n  else builder.appendValue(that);\n  return builder.state();\n};\nRecord.prototype.iterator = function () {\n  return new RecordIterator(this.items);\n};\nRecord.prototype.forEach = function (f) {\n  var these = this.iterator();\n  while (!these.isEmpty()) f(these.next());\n};\nRecord.prototype.equals = function (that) {\n  var these = this.iterator();\n  var those = that.iterator();\n  while (!these.isEmpty() && !those.isEmpty()) {\n    if (!compare(these.next(), those.next())) return false;\n  }\n  return these.isEmpty() && those.isEmpty();\n};\nRecord.prototype.toString = function () {\n  var writer = new ReconWriter();\n  writer.writeRecord(this);\n  return writer.state();\n};\n\n\nfunction Field() {}\nObject.defineProperty(Field.prototype, 'isField', {enumerable: true, value: true});\nObject.defineProperty(Field.prototype, 'isAttr', {enumerable: true, value: false});\nObject.defineProperty(Field.prototype, 'isSlot', {enumerable: true, value: false});\n\nfunction Attr(key, value) {\n  Field.call(this);\n  Object.defineProperty(this, 'key', {enumerable: true, value: key});\n  if (value === undefined) value = Extant;\n  Object.defineProperty(this, 'value', {enumerable: true, value: value});\n}\nAttr.prototype = Object.create(Field.prototype);\nAttr.prototype.constructor = Attr;\nObject.defineProperty(Attr.prototype, 'isAttr', {enumerable: true, value: true});\nAttr.prototype.equals = function (that) {\n  return that.isAttr && compare(this.key, that.key) && compare(this.value, that.value);\n};\nAttr.prototype.toString = function () {\n  var writer = new ReconWriter();\n  writer.writeAttr(this);\n  return writer.state();\n};\n\nfunction Slot(key, value) {\n  Field.call(this);\n  Object.defineProperty(this, 'key', {enumerable: true, value: key});\n  if (value === undefined) value = Extant;\n  Object.defineProperty(this, 'value', {enumerable: true, value: value});\n}\nSlot.prototype = Object.create(Field.prototype);\nSlot.prototype.constructor = Slot;\nObject.defineProperty(Slot.prototype, 'isSlot', {enumerable: true, value: true});\nSlot.prototype.equals = function (that) {\n  return that.isSlot && compare(this.key, that.key) && compare(this.value, that.value);\n};\nSlot.prototype.toString = function () {\n  var writer = new ReconWriter();\n  writer.writeItem(this);\n  return writer.state();\n};\n\n\nvar Extant = {};\nObject.defineProperty(Extant, 'isExtant', {enumerable: true, value: true});\n\nvar Absent = {};\nObject.defineProperty(Absent, 'isAbsent', {enumerable: true, value: true});\n\n\nfunction RecordIterator(items, index) {\n  Object.defineProperty(this, 'items', {value: items});\n  Object.defineProperty(this, 'index', {value: index || 0, writable: true});\n}\nRecordIterator.prototype.isEmpty = function () {\n  return this.index >= this.items.length;\n};\nRecordIterator.prototype.head = function () {\n  if (this.index >= this.items.length) throw 'head of empty iterator';\n  return this.items[this.index];\n};\nRecordIterator.prototype.step = function () {\n  if (this.index >= this.items.length) throw 'empty iterator step';\n  this.index += 1;\n};\nRecordIterator.prototype.next = function () {\n  if (this.index >= this.items.length) return null;\n  var item = this.items[this.index];\n  this.index += 1;\n  return item;\n};\nRecordIterator.prototype.dup = function () {\n  return new RecordIterator(this.items, this.index);\n};\nRecordIterator.prototype.toRecord = function () {\n  return new Record(this.items.slice(this.index));\n};\nRecordIterator.prototype.isAllAttrs = function () {\n  var items = this.dup();\n  while (!items.isEmpty()) {\n    if (!items.next().isAttr) return false;\n  }\n  return true;\n};\n\n\nfunction RecordBuilder() {\n  Object.defineProperty(this, 'items', {value: []});\n  Object.defineProperty(this, 'index', {value: {}});\n}\nRecordBuilder.prototype.appendField = function (field) {\n  this.items.push(field);\n  this.index[field.key] = field.value;\n};\nRecordBuilder.prototype.appendValue = function (value) {\n  this.items.push(value);\n};\nRecordBuilder.prototype.appendRecord = function (record) {\n  var items = record.iterator();\n  while (!items.isEmpty()) {\n    var item = items.next();\n    if (item.isField) this.appendField(item);\n    else this.appendValue(item);\n  }\n};\nRecordBuilder.prototype.attr = function (key, value) {\n  this.appendField(attr(key, value));\n  return this;\n};\nRecordBuilder.prototype.slot = function (key, value) {\n  this.appendField(slot(key, value));\n  return this;\n};\nRecordBuilder.prototype.item = function (value) {\n  this.appendValue(coerceItem(value));\n  return this;\n};\nRecordBuilder.prototype.state = function () {\n  return new Record(this.items, this.index);\n};\n\n\nfunction ValueBuilder() {\n  Object.defineProperty(this, 'items', {value: null, writable: true});\n  Object.defineProperty(this, 'index', {value: null, writable: true});\n  Object.defineProperty(this, 'value', {value: null, writable: true});\n}\nValueBuilder.prototype.appendField = function (field) {\n  if (this.items === null) {\n    this.items = [];\n    this.index = {};\n    if (this.value !== null) {\n      this.items.push(this.value);\n      this.value = null;\n    }\n  }\n  this.items.push(field);\n  this.index[field.key] = field.value;\n};\nValueBuilder.prototype.appendValue = function (value) {\n  if (this.items !== null) this.items.push(value);\n  else if (this.value === null) this.value = value;\n  else {\n    this.items = [];\n    this.index = {};\n    this.items.push(this.value);\n    this.value = null;\n    this.items.push(value);\n  }\n};\nValueBuilder.prototype.state = function () {\n  if (this.value !== null) return this.value;\n  else if (this.items !== null) return new Record(this.items, this.index);\n  else return Absent;\n};\n\n\nfunction StringIterator(string, index) {\n  Object.defineProperty(this, 'string', {value: string || ''});\n  Object.defineProperty(this, 'index', {value: index || 0, writable: true});\n}\nStringIterator.prototype.isDone = function () {\n  return false;\n};\nStringIterator.prototype.isEmpty = function () {\n  return this.index >= this.string.length;\n};\nStringIterator.prototype.head = function () {\n  var c1 = this.string.charCodeAt(this.index);\n  if (c1 <= 0xD7FF || c1 >= 0xE000) return c1; // U+0000..U+D7FF | U+E000..U+FFFF\n  else if (c1 <= 0xDBFF && this.index + 1 < this.string.length) { // c1 >= 0xD800\n    var c2 = this.string.charCodeAt(this.index + 1);\n    if (c2 >= 0xDC00 && c2 <= 0xDFFF) // U+10000..U+10FFFF\n      return (((c1 & 0x3FF) << 10) | (c2 & 0x3FF)) + 0x10000;\n    else return 0xFFFD;\n  }\n  else return 0xFFFD;\n};\nStringIterator.prototype.step = function () {\n  var c1 = this.string.charCodeAt(this.index);\n  if (c1 <= 0xD7FF || c1 >= 0xE000) // U+0000..U+D7FF | U+E000..U+FFFF\n    this.index += 1;\n  else if (c1 <= 0xDBFF && this.index + 1 < this.string.length) { // c1 >= 0xD800\n    var c2 = this.string.charCodeAt(this.index + 1);\n    if (c2 >= 0xDC00 && c2 <= 0xDFFF) // U+10000..U+10FFFF\n      this.index += 2;\n    else this.index += 1;\n  }\n  else this.index += 1;\n};\n\nStringIterator.Done = {\n  isDone: function () {\n    return true;\n  },\n  isEmpty: function () {\n    return true;\n  },\n  head: function () {\n    throw 'head of empty iterator';\n  },\n  step: function () {\n    throw 'empty iterator step';\n  }\n};\nStringIterator.Done.prototype = Object.create(StringIterator.prototype);\n\n\nfunction StringIteratee() {}\nStringIteratee.prototype.isCont = function () {\n  return true;\n};\nStringIteratee.prototype.isDone = function () {\n  return false;\n};\nStringIteratee.prototype.isError = function () {\n  return false;\n};\nStringIteratee.prototype.feed = function (input) {\n  return this;\n};\nStringIteratee.prototype.run = function (input) {\n  var next = this;\n  while (!input.isEmpty() && next.isCont()) next = next.feed(input);\n  if (input.isEmpty() && !input.isDone() && next.isCont()) next = next.feed(StringIterator.Done);\n  return next;\n};\n\nStringIteratee.Done = function (value) {\n  StringIteratee.call(this);\n  this.value = value;\n};\nStringIteratee.Done.prototype = Object.create(StringIteratee.prototype);\nStringIteratee.Done.prototype.constructor = StringIteratee.Done;\nStringIteratee.Done.prototype.isCont = function () {\n  return false;\n};\nStringIteratee.Done.prototype.isDone = function () {\n  return true;\n};\nStringIteratee.Done.prototype.feed = function (input) {\n  return this;\n};\nStringIteratee.Done.prototype.state = function () {\n  return this.value;\n};\n\nStringIteratee.Error = function (error) {\n  StringIteratee.call(this);\n  this.error = error;\n};\nStringIteratee.Error.prototype = Object.create(StringIteratee.prototype);\nStringIteratee.Error.prototype.constructor = StringIteratee.Error;\nStringIteratee.Error.prototype.isCont = function () {\n  return false;\n};\nStringIteratee.Error.prototype.isError = function () {\n  return true;\n};\nStringIteratee.Error.prototype.feed = function (input) {\n  return this;\n};\nStringIteratee.Error.prototype.state = function () {\n  throw this.error;\n};\n\nStringIteratee.unexpectedEOF = new StringIteratee.Error('unexpected end of input');\n\n\nfunction StringBuilder() {\n  Object.defineProperty(this, 'string', {value: '', writable: true});\n}\nStringBuilder.prototype.append = function (c) {\n  if ((c >= 0x0000 && c <= 0xD7FF) ||\n      (c >= 0xE000 && c <= 0xFFFF)) { // U+0000..U+D7FF | U+E000..U+FFFF\n    this.string += String.fromCharCode(c);\n  }\n  else if (c >= 0x10000 && c <= 0x10FFFF) { // U+10000..U+10FFFF\n    var u = c - 0x10000;\n    this.string += String.fromCharCode(0xD800 | (u >>> 10), 0xDC00 | (u & 0x3FF));\n  }\n  else { // invalid code point\n    this.string += String.fromCharCode(0xFFFD);\n  }\n};\nStringBuilder.prototype.appendString = function (s) {\n  var cs = new StringIterator(s);\n  while (!cs.isEmpty()) {\n    this.append(cs.head());\n    cs.step();\n  }\n};\nStringBuilder.prototype.state = function () {\n  return this.string;\n};\n\n\nfunction DataBuilder() {\n  Object.defineProperty(this, 'buffer', {value: null, writable: true});\n  Object.defineProperty(this, 'offset', {value: 0, writable: true});\n  Object.defineProperty(this, 'aliased', {value: true, writable: true});\n  Object.defineProperty(this, 'p', {value: 0, writable: true});\n  Object.defineProperty(this, 'q', {value: 0, writable: true});\n  Object.defineProperty(this, 'r', {value: 0, writable: true});\n  Object.defineProperty(this, 's', {value: 0, writable: true});\n}\nDataBuilder.prototype.prepare = function (size) {\n  function expand(base, size) {\n    var n = Math.max(base, size) - 1;\n    n |= n >> 1; n |= n >> 2; n |= n >> 4; n |= n >> 8;\n    return n + 1;\n  }\n  if (this.aliased || size > this.buffer.length) {\n    var array = new Uint8Array(expand(256, size));\n    if (this.buffer) array.set(this.buffer);\n    this.buffer = array;\n    this.aliased = false;\n  }\n};\nDataBuilder.prototype.appendByte = function (value) {\n  this.prepare(this.offset + 1);\n  this.buffer[this.offset] = value;\n  this.offset += 1;\n};\nDataBuilder.prototype.decodeBase64Digit = function (c) {\n  if (c >= 65/*'A'*/ && c <= 90/*'Z'*/) return c - 65/*'A'*/;\n  else if (c >= 97/*'a'*/ && c <= 122/*'z'*/) return c - 71/*'a' - 26*/;\n  else if (c >= 48/*'0'*/ && c <= 57/*'9'*/) return c + 4/*52 - '0'*/;\n  else if (c === 43/*'+'*/ || c === 45/*'-'*/) return 62;\n  else if (c === 47/*'/'*/ || c === 95/*'_'*/) return 63;\n};\nDataBuilder.prototype.decodeBase64Quantum = function () {\n  var x = this.decodeBase64Digit(this.p);\n  var y = this.decodeBase64Digit(this.q);\n  if (this.r !== 61/*'='*/) {\n    var z = this.decodeBase64Digit(this.r);\n    if (this.s !== 61/*'='*/) {\n      var w = this.decodeBase64Digit(this.s);\n      this.appendByte((x << 2) | (y >>> 4));\n      this.appendByte((y << 4) | (z >>> 2));\n      this.appendByte((z << 6) | w);\n    }\n    else {\n      this.appendByte((x << 2) | (y >>> 4));\n      this.appendByte((y << 4) | (z >>> 2));\n    }\n  }\n  else {\n    if (this.s !== 61/*'='*/) throw 'incomplete base64 quantum';\n    this.appendByte((x << 2) | (y >>> 4));\n  }\n};\nDataBuilder.prototype.appendBase64Char = function (c) {\n  if (this.p === 0) this.p = c;\n  else if (this.q === 0) this.q = c;\n  else if (this.r === 0) this.r = c;\n  else {\n    this.s = c;\n    this.decodeBase64Quantum();\n    this.s = 0;\n    this.r = 0;\n    this.q = 0;\n    this.p = 0;\n  }\n};\nDataBuilder.prototype.state = function (value) {\n  if (!this.buffer) this.buffer = new Uint8Array(0);\n  else if (this.buffer.length !== this.offset) {\n    var array = new Uint8Array(this.offset);\n    array.set(this.buffer.subarray(0, this.offset));\n    this.buffer = array;\n  }\n  this.aliased = true;\n  return this.buffer;\n};\n\n\nfunction isSpace(c) {\n  return c === 0x20 || c === 0x9;\n}\nfunction isNewline(c) {\n  return c === 0xA || c === 0xD;\n}\nfunction isWhitespace(c) {\n  return isSpace(c) || isNewline(c);\n}\nfunction isNameStartChar(c) {\n  return (\n    c >= 65/*'A'*/ && c <= 90/*'Z'*/ ||\n    c === 95/*'_'*/ ||\n    c >= 97/*'a'*/ && c <= 122/*'z'*/ ||\n    c >= 0xC0 && c <= 0xD6 ||\n    c >= 0xD8 && c <= 0xF6 ||\n    c >= 0xF8 && c <= 0x2FF ||\n    c >= 0x370 && c <= 0x37D ||\n    c >= 0x37F && c <= 0x1FFF ||\n    c >= 0x200C && c <= 0x200D ||\n    c >= 0x2070 && c <= 0x218F ||\n    c >= 0x2C00 && c <= 0x2FEF ||\n    c >= 0x3001 && c <= 0xD7FF ||\n    c >= 0xF900 && c <= 0xFDCF ||\n    c >= 0xFDF0 && c <= 0xFFFD ||\n    c >= 0x10000 && c <= 0xEFFFF);\n}\nfunction isNameChar(c) {\n  return (\n    c === 45/*'-'*/ ||\n    c >= 48/*'0'*/ && c <= 57/*'9'*/ ||\n    c >= 65/*'A'*/ && c <= 90/*'Z'*/ ||\n    c === 95/*'_'*/ ||\n    c >= 97/*'a'*/ && c <= 122/*'z'*/ ||\n    c === 0xB7 ||\n    c >= 0xC0 && c <= 0xD6 ||\n    c >= 0xD8 && c <= 0xF6 ||\n    c >= 0xF8 && c <= 0x37D ||\n    c >= 0x37F && c <= 0x1FFF ||\n    c >= 0x200C && c <= 0x200D ||\n    c >= 0x203F && c <= 0x2040 ||\n    c >= 0x2070 && c <= 0x218F ||\n    c >= 0x2C00 && c <= 0x2FEF ||\n    c >= 0x3001 && c <= 0xD7FF ||\n    c >= 0xF900 && c <= 0xFDCF ||\n    c >= 0xFDF0 && c <= 0xFFFD ||\n    c >= 0x10000 && c <= 0xEFFFF);\n}\nfunction isBase64Char(c) {\n  return (\n    c >= 48/*'0'*/ && c <= 57/*'9'*/ ||\n    c >= 65/*'A'*/ && c <= 90/*'Z'*/ ||\n    c >= 97/*'a'*/ && c <= 122/*'z'*/ ||\n    c === 43/*'+'*/ || c === 45/*'-'*/ ||\n    c === 47/*'/'*/ || c === 95/*'_'*/);\n}\n\n\nfunction DocumentParser(value) {\n  StringIteratee.call(this);\n  this.value = value || new BlockParser();\n}\nDocumentParser.prototype = Object.create(StringIteratee.prototype);\nDocumentParser.prototype.constructor = DocumentParser;\nDocumentParser.prototype.feed = function (input) {\n  var value = this.value;\n  while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n  if (value.isError()) return value;\n  if (value.isDone()) {\n    if (!input.isEmpty()) return new StringIteratee.Error({found: input.head()});\n    else if (input.isDone()) return value;\n  }\n  return new DocumentParser(value);\n};\n\n\nfunction BlockParser(builder, key, value, s) {\n  StringIteratee.call(this);\n  this.builder = builder || null;\n  this.key = key || null;\n  this.value = value || null;\n  this.s = s || 1;\n}\nBlockParser.prototype = Object.create(StringIteratee.prototype);\nBlockParser.prototype.constructor = BlockParser;\nBlockParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var value = this.value;\n  var key = this.key;\n  var builder = this.builder || new ValueBuilder();\n  while (!input.isEmpty() || input.isDone()) {\n    if (s === 1) {\n      while (!input.isEmpty() && (c = input.head(), isWhitespace(c))) input.step();\n      if (!input.isEmpty()) s = 2;\n      else if (input.isDone()) return new StringIteratee.Done(builder.state());\n    }\n    if (s === 2) {\n      key = key || new BlockValueParser();\n      while ((!input.isEmpty() || input.isDone()) && key.isCont()) key = key.feed(input);\n      if (key.isDone()) s = 3;\n      else if (key.isError()) return key;\n    }\n    if (s === 3) {\n      while (!input.isEmpty() && (c = input.head(), isSpace(c))) input.step();\n      if (!input.isEmpty()) {\n        if (c === 58/*':'*/) {\n          input.step();\n          s = 4;\n        }\n        else {\n          builder.appendValue(key.state());\n          key = null;\n          s = 6;\n        }\n      }\n      else if (input.isDone()) {\n        builder.appendValue(key.state());\n        return new StringIteratee.Done(builder.state());\n      }\n    }\n    if (s === 4) {\n      while (!input.isEmpty() && isSpace(input.head())) input.step();\n      if (!input.isEmpty()) s = 5;\n      else if (input.isDone()) {\n        builder.appendField(new Slot(key.state()));\n        return new StringIteratee.Done(builder.state());\n      }\n    }\n    if (s === 5) {\n      value = value || new BlockValueParser();\n      while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n      if (value.isDone()) {\n        builder.appendField(new Slot(key.state(), value.state()));\n        key = null;\n        value = null;\n        s = 6;\n      }\n      else if (value.isError()) return value;\n    }\n    if (s === 6) {\n      while (!input.isEmpty() && (c = input.head(), isSpace(c))) input.step();\n      if (!input.isEmpty()) {\n        if (c === 44/*','*/ || c === 59/*';'*/ || isNewline(c)) {\n          input.step();\n          s = 1;\n        }\n        else return new StringIteratee.Done(builder.state());\n      }\n      else if (input.isDone()) return new StringIteratee.Done(builder.state());\n    }\n  }\n  return new BlockParser(builder, key, value, s);\n};\n\n\nfunction AttrParser(ident, value, s) {\n  StringIteratee.call(this);\n  this.ident = ident || new IdentParser();\n  this.value = value || new BlockParser();\n  this.s = s || 1;\n}\nAttrParser.prototype = Object.create(StringIteratee.prototype);\nAttrParser.prototype.constructor = AttrParser;\nAttrParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var value = this.value;\n  var ident = this.ident;\n  if (s === 1) {\n    if (!input.isEmpty() && (c = input.head(), c === 64/*'@'*/)) {\n      input.step();\n      s = 2;\n    }\n    else if (!input.isEmpty()) return new StringIteratee.Error({expected: '\\'@\\'', found: c});\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  if (s === 2) {\n    ident = ident.feed(input);\n    if (ident.isDone()) s = 3;\n    else if (ident.isError()) return ident;\n  }\n  if (s === 3) {\n    if (!input.isEmpty() && input.head() === 40/*'('*/) {\n      input.step();\n      s = 4;\n    }\n    else if (!input.isEmpty() || input.isDone()) return new StringIteratee.Done(new Attr(ident.state()));\n  }\n  if (s === 4) {\n    while (!input.isEmpty() && (c = input.head(), isWhitespace(c))) input.step();\n    if (!input.isEmpty()) {\n      if (c === 41/*')'*/) {\n        input.step();\n        return new StringIteratee.Done(new Attr(ident.state()));\n      }\n      else s = 5;\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  if (s === 5) {\n    while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n    if (value.isDone()) s = 6;\n    else if (value.isError()) return value;\n  }\n  if (s === 6) {\n    while (!input.isEmpty() && (c = input.head(), isWhitespace(c))) input.step();\n    if (!input.isEmpty()) {\n      if (c === 41/*')'*/) {\n        input.step();\n        return new StringIteratee.Done(new Attr(ident.state(), value.state()));\n      }\n      else return new StringIteratee.Error({expected: '\\')\\'', found: c});\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  return new AttrParser(ident, value, s);\n};\n\n\nfunction BlockValueParser(builder, field, value, s) {\n  StringIteratee.call(this);\n  this.builder = builder || null;\n  this.field = field || null;\n  this.value = value || null;\n  this.s = s || 1;\n}\nBlockValueParser.prototype = Object.create(StringIteratee.prototype);\nBlockValueParser.prototype.constructor = BlockValueParser;\nBlockValueParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var value = this.value;\n  var field = this.field;\n  var builder = this.builder;\n  while (!input.isEmpty() || input.isDone()) {\n    if (s === 1) {\n      if (!input.isEmpty()) {\n        c = input.head();\n        if (c === 64/*'@'*/) {\n          field = new AttrParser();\n          s = 2;\n        }\n        else if (c === 123/*'{'*/) {\n          builder = builder || new RecordBuilder();\n          value = new RecordParser(builder);\n          s = 5;\n        }\n        else if (c === 91/*'['*/) {\n          builder = builder || new RecordBuilder();\n          value = new MarkupParser(builder);\n          s = 5;\n        }\n        else if (c === 34/*'\"'*/) {\n          value = new StringParser();\n          s = 4;\n        }\n        else if (c === 37/*'%'*/) {\n          value = new DataParser();\n          s = 4;\n        }\n        else if (c === 45/*'-'*/ || c >= 48/*'0'*/ && c <= 57/*'9'*/) {\n          value = new NumberParser();\n          s = 4;\n        }\n        else if (isNameStartChar(c)) {\n          value = new IdentParser();\n          s = 4;\n        }\n        else if (!builder) return new StringIteratee.Done(Absent);\n        else return new StringIteratee.Done(builder.state());\n      }\n      else if (input.isDone()) {\n        if (!builder) return new StringIteratee.Done(Absent);\n        else return new StringIteratee.Done(builder.state());\n      }\n    }\n    if (s === 2) {\n      while ((!input.isEmpty() || input.isDone()) && field.isCont()) field = field.feed(input);\n      if (field.isDone()) {\n        builder = builder || new ValueBuilder();\n        builder.appendField(field.state());\n        field = null;\n        s = 3;\n      }\n      else if (field.isError()) return field;\n    }\n    if (s === 3) {\n      while (!input.isEmpty() && isSpace(input.head())) input.step();\n      if (!input.isEmpty()) s = 1;\n      else if (input.isDone()) return new StringIteratee.Done(builder.state());\n    }\n    if (s === 4) {\n      while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n      if (value.isDone()) {\n        builder = builder || new ValueBuilder();\n        builder.appendValue(value.state());\n        value = null;\n        s = 6;\n      }\n      else if (value.isError()) return value;\n    }\n    if (s === 5) {\n      while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n      if (value.isDone()) {\n        value = null;\n        s = 6;\n      }\n      else if (value.isError()) return value;\n    }\n    if (s === 6) {\n      while (!input.isEmpty() && isSpace(input.head())) input.step();\n      if (!input.isEmpty()) {\n        if (input.head() === 64/*'@'*/) {\n          field = new AttrParser();\n          s = 7;\n        }\n        else return new StringIteratee.Done(builder.state());\n      }\n      else if (input.isDone()) return new StringIteratee.Done(builder.state());\n    }\n    if (s === 7) {\n      while ((!input.isEmpty() || input.isDone()) && field.isCont()) field = field.feed(input);\n      if (field.isDone()) {\n        builder = builder || new ValueBuilder();\n        builder.appendField(field.state());\n        field = null;\n        s = 6;\n      }\n      else if (field.isError()) return field;\n    }\n  }\n  return new BlockValueParser(builder, field, value, s);\n};\n\n\nfunction InlineValueParser(builder, field, value, s) {\n  StringIteratee.call(this);\n  this.builder = builder || null;\n  this.field = field || null;\n  this.value = value || null;\n  this.s = s || 1;\n}\nInlineValueParser.prototype = Object.create(StringIteratee.prototype);\nInlineValueParser.prototype.constructor = InlineValueParser;\nInlineValueParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var value = this.value;\n  var field = this.field;\n  var builder = this.builder;\n  while (!input.isEmpty() || input.isDone()) {\n    if (s === 1) {\n      if (!input.isEmpty()) {\n        c = input.head();\n        if (c === 64/*'@'*/) {\n          field = new AttrParser();\n          s = 2;\n        }\n        else if (c === 123/*'{'*/) {\n          if (builder) {\n            value = new RecordParser(builder);\n            s = 5;\n          }\n          else {\n            value = new RecordParser();\n            s = 4;\n          }\n        }\n        else if (c === 91/*'['*/) {\n          if (builder) {\n            value = new MarkupParser(builder);\n            s = 5;\n          }\n          else {\n            value = new MarkupParser();\n            s = 4;\n          }\n        }\n        else if (!builder) return new StringIteratee.Done(Absent);\n        else return new StringIteratee.Done(builder.state());\n      }\n      else if (input.isDone()) {\n        if (!builder) return new StringIteratee.Done(Absent);\n        else return new StringIteratee.Done(builder.state());\n      }\n    }\n    if (s === 2) {\n      while ((!input.isEmpty() || input.isDone()) && field.isCont()) field = field.feed(input);\n      if (field.isDone()) {\n        builder = builder || new ValueBuilder();\n        builder.appendField(field.state());\n        field = null;\n        s = 3;\n      }\n      else if (field.isError()) return field;\n    }\n    if (s === 3) {\n      while (!input.isEmpty() && isSpace(input.head())) input.step();\n      if (!input.isEmpty()) s = 1;\n      else if (input.isDone()) return new StringIteratee.Done(builder.state());\n    }\n    if (s === 4) {\n      while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n      if (value.isDone()) {\n        builder = builder || new ValueBuilder();\n        builder.appendValue(value.state());\n        return new StringIteratee.Done(builder.state());\n      }\n      else if (value.isError()) return value;\n    }\n    if (s === 5) {\n      while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n      if (value.isDone()) return new StringIteratee.Done(builder.state());\n      else if (value.isError()) return value;\n    }\n  }\n  return new InlineValueParser(builder, field, value, s);\n};\n\n\nfunction RecordParser(builder, key, value, s) {\n  StringIteratee.call(this);\n  this.builder = builder || null;\n  this.key = key || null;\n  this.value = value || null;\n  this.s = s || 1;\n}\nRecordParser.prototype = Object.create(StringIteratee.prototype);\nRecordParser.prototype.constructor = RecordParser;\nRecordParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var value = this.value;\n  var key = this.key;\n  var builder = this.builder || new RecordBuilder();\n  if (s === 1) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c === 123/*'{'*/) {\n        input.step();\n        s = 2;\n      }\n      else return new StringIteratee.Error({expected: '\\'{\\'', found: c});\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  while (!input.isEmpty() || input.isDone()) {\n    if (s === 2) {\n      while (!input.isEmpty() && (c = input.head(), isWhitespace(c))) input.step();\n      if (!input.isEmpty()) {\n        if (c === 125/*'}'*/) {\n          input.step();\n          return new StringIteratee.Done(builder.state());\n        }\n        else s = 3;\n      }\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n    if (s === 3) {\n      key = key || new BlockValueParser();\n      while ((!input.isEmpty() || input.isDone()) && key.isCont()) key = key.feed(input);\n      if (key.isDone()) s = 4;\n      else if (key.isError()) return key;\n    }\n    if (s === 4) {\n      while (!input.isEmpty() && (c = input.head(), isSpace(c))) input.step();\n      if (!input.isEmpty()) {\n        if (c === 58/*':'*/) {\n          input.step();\n          s = 5;\n        }\n        else {\n          builder.appendValue(key.state());\n          key = null;\n          s = 7;\n        }\n      }\n      else if (input.isDone()) {\n        builder.appendValue(key.state());\n        return new StringIteratee.Done(builder.state());\n      }\n    }\n    if (s === 5) {\n      while (!input.isEmpty() && isSpace(input.head())) input.step();\n      if (!input.isEmpty()) s = 6;\n      else if (input.isDone()) {\n        builder.appendField(new Slot(key.state()));\n        return new StringIteratee.Done(builder.state());\n      }\n    }\n    if (s === 6) {\n      value = value || new BlockValueParser();\n      while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n      if (value.isDone()) {\n        builder.appendField(new Slot(key.state(), value.state()));\n        key = null;\n        value = null;\n        s = 7;\n      }\n      else if (value.isError()) return value;\n    }\n    if (s === 7) {\n      while (!input.isEmpty() && (c = input.head(), isSpace(c))) input.step();\n      if (!input.isEmpty()) {\n        if (c === 44/*','*/ || c === 59/*';'*/ || isNewline(c)) {\n          input.step();\n          s = 2;\n        }\n        else if (c === 125/*'}'*/) {\n          input.step();\n          return new StringIteratee.Done(builder.state());\n        }\n       else return new StringIteratee.Error({expected: '\\'}\\', \\';\\', \\',\\', or newline', found: c});\n      }\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n  }\n  return new RecordParser(builder, key, value, s);\n};\n\n\nfunction MarkupParser(builder, text, value, s) {\n  StringIteratee.call(this);\n  this.builder = builder || null;\n  this.text = text || null;\n  this.value = value || null;\n  this.s = s || 1;\n}\nMarkupParser.prototype = Object.create(StringIteratee.prototype);\nMarkupParser.prototype.constructor = MarkupParser;\nMarkupParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var value = this.value;\n  var text = this.text;\n  var builder = this.builder;\n  if (s === 1) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c === 91/*'['*/) {\n        input.step();\n        s = 2;\n      }\n      else return new StringIteratee.Error({expected: '\\'[\\'', found: c});\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  while (!input.isEmpty() || input.isDone()) {\n    if (s === 2) {\n      while (!input.isEmpty() && (c = input.head(),\n          c !== 64/*'@'*/ &&\n          c !== 91/*'['*/ &&\n          c !== 92/*'\\\\'*/ &&\n          c !== 93/*']'*/ &&\n          c !== 123/*'{'*/ &&\n          c !== 125/*'}'*/)) {\n        input.step();\n        text = text || new StringBuilder();\n        text.append(c);\n      }\n      if (!input.isEmpty()) {\n        if (c === 93/*']'*/) {\n          input.step();\n          builder = builder || new RecordBuilder();\n          if (text) builder.appendValue(text.state());\n          return new StringIteratee.Done(builder.state());\n        }\n        else if (c === 64/*'@'*/) {\n          builder = builder || new RecordBuilder();\n          if (text) {\n            builder.appendValue(text.state());\n            text = null;\n          }\n          value = new InlineValueParser();\n          s = 3;\n        }\n        else if (c === 123/*'{'*/) {\n          builder = builder || new RecordBuilder();\n          if (text) {\n            builder.appendValue(text.state());\n            text = null;\n          }\n          value = new RecordParser(builder);\n          s = 4;\n        }\n        else if (c === 91/*'['*/) {\n          builder = builder || new RecordBuilder();\n          if (text) {\n            builder.appendValue(text.state());\n            text = null;\n          }\n          value = new MarkupParser(builder);\n          s = 4;\n        }\n        else if (c === 92/*'\\\\'*/) {\n          input.step();\n          s = 5;\n        }\n        else new StringIteratee.Error({found: c});\n      }\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n    if (s === 3) {\n      while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n      if (value.isDone()) {\n        builder.appendValue(value.state());\n        value = null;\n        s = 2;\n      }\n      else if (value.isError()) return value;\n    }\n    if (s === 4) {\n      while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n      if (value.isDone()) {\n        value = null;\n        s = 2;\n      }\n      else if (value.isError()) return value;\n    }\n    if (s === 5) {\n      if (!input.isEmpty()) {\n        c = input.head();\n        text = text || new StringBuilder();\n        if (c === 34/*'\"'*/ ||\n            c === 47/*'/'*/ ||\n            c === 64/*'@'*/ ||\n            c === 91/*'['*/ ||\n            c === 92/*'\\\\'*/ ||\n            c === 93/*']'*/ ||\n            c === 123/*'{'*/ ||\n            c === 125/*'}'*/) {\n          input.step();\n          text.append(c);\n          s = 2;\n        }\n        else if (c === 98/*'b'*/) {\n          input.step();\n          text.append(8/*'\\b'*/);\n          s = 2;\n        }\n        else if (c === 102/*'f'*/) {\n          input.step();\n          text.append(12/*'\\f'*/);\n          s = 2;\n        }\n        else if (c === 110/*'n'*/) {\n          input.step();\n          text.append(10/*'\\n'*/);\n          s = 2;\n        }\n        else if (c === 114/*'r'*/) {\n          input.step();\n          text.append(13/*'\\r'*/);\n          s = 2;\n        }\n        else if (c === 116/*'t'*/) {\n          input.step();\n          text.append(9/*'\\t'*/);\n          s = 2;\n        }\n        else return new StringIteratee.Error({expected: 'escape character', found: c});\n      }\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n  }\n  return new MarkupParser(builder, text, value, s);\n};\n\n\nfunction StringParser(text, s) {\n  StringIteratee.call(this);\n  this.text = text || null;\n  this.s = s || 1;\n}\nStringParser.prototype = Object.create(StringIteratee.prototype);\nStringParser.prototype.constructor = StringParser;\nStringParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var text = this.text;\n  if (s === 1) {\n    if (!input.isEmpty() && (c = input.head(), c === 34/*'\"'*/)) {\n      input.step();\n      s = 2;\n    }\n    else if (!input.isEmpty()) return new StringIteratee.Error({expected: '\\'\"\\'', found: c});\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  while (!input.isEmpty() || input.isDone()) {\n    if (s === 2) {\n      text = text || new StringBuilder();\n      while (!input.isEmpty() && (c = input.head(), c !== 34/*'\"'*/ && c !== 92/*'\\\\'*/)) {\n        input.step();\n        text.append(c);\n      }\n      if (!input.isEmpty()) {\n        if (c === 34/*'\"'*/) {\n          input.step();\n          return new StringIteratee.Done(text.state());\n        }\n        else if (c === 92/*'\\\\'*/) {\n          input.step();\n          s = 3;\n        }\n      }\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n    if (s === 3) {\n      if (!input.isEmpty()) {\n        c = input.head();\n        if (c === 34/*'\"'*/ ||\n            c === 47/*'/'*/ ||\n            c === 64/*'@'*/ ||\n            c === 91/*'['*/ ||\n            c === 92/*'\\\\'*/ ||\n            c === 93/*']'*/ ||\n            c === 123/*'{'*/ ||\n            c === 125/*'}'*/) {\n          input.step();\n          text.append(c);\n          s = 2;\n        }\n        else if (c === 98/*'b'*/) {\n          input.step();\n          text.append(8/*'\\b'*/);\n          s = 2;\n        }\n        else if (c === 102/*'f'*/) {\n          input.step();\n          text.append(12/*'\\f'*/);\n          s = 2;\n        }\n        else if (c === 110/*'n'*/) {\n          input.step();\n          text.append(10/*'\\n'*/);\n          s = 2;\n        }\n        else if (c === 114/*'r'*/) {\n          input.step();\n          text.append(13/*'\\r'*/);\n          s = 2;\n        }\n        else if (c === 116/*'t'*/) {\n          input.step();\n          text.append(9/*'\\t'*/);\n          s = 2;\n        }\n        else return new StringIteratee.Error({expected: 'escape character', found: c});\n      }\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n  }\n  return new StringParser(text, s);\n};\n\n\nfunction DataParser(data, s) {\n  StringIteratee.call(this);\n  this.data = data || null;\n  this.s = s || 1;\n}\nDataParser.prototype = Object.create(StringIteratee.prototype);\nDataParser.prototype.constructor = DataParser;\nDataParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var data = this.data || new DataBuilder();\n  if (s === 1) {\n    if (!input.isEmpty() && (c = input.head(), c === 37/*'%'*/)) {\n      input.step();\n      s = 2;\n    }\n    else if (!input.isEmpty()) return new StringIteratee.Error({expected: '\\'%\\'', found: c});\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  while (!input.isEmpty() || input.isDone()) {\n    if (s === 2) {\n      if (!input.isEmpty() && (c = input.head(), isBase64Char(c))) {\n        input.step();\n        data.appendBase64Char(c);\n        s = 3;\n      }\n      else if (!input.isEmpty() || input.isDone()) return new StringIteratee.Done(data.state());\n    }\n    if (s === 3) {\n      if (!input.isEmpty() && (c = input.head(), isBase64Char(c))) {\n        input.step();\n        data.appendBase64Char(c);\n        s = 4;\n      }\n      else if (!input.isEmpty()) return new StringIteratee.Error({expected: 'base64 digit', found: c});\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n    if (s === 4) {\n      if (!input.isEmpty() && (c = input.head(), isBase64Char(c) || c === 61/*'='*/)) {\n        input.step();\n        data.appendBase64Char(c);\n        if (c !== 61/*'='*/) s = 5;\n        else s = 6;\n      }\n      else if (!input.isEmpty()) return new StringIteratee.Error({expected: 'base64 digit', found: c});\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n    if (s === 5) {\n      if (!input.isEmpty() && (c = input.head(), isBase64Char(c) || c === 61/*'='*/)) {\n        input.step();\n        data.appendBase64Char(c);\n        if (c !== 61/*'='*/) s = 2;\n        else return new StringIteratee.Done(data.state());\n      }\n      else if (!input.isEmpty()) return new StringIteratee.Error({expected: 'base64 digit', found: c});\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n    else if (s === 6) {\n      if (!input.isEmpty() && (c = input.head(), c === 61/*'='*/)) {\n        input.step();\n        data.appendBase64Char(c);\n        return new StringIteratee.Done(data.state());\n      }\n      else if (!input.isEmpty()) return new StringIteratee.Error({expected: '\\'=\\'', found: c});\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n  }\n  return new DataParser(data, s);\n};\n\n\nfunction NumberParser(builder, s) {\n  StringIteratee.call(this);\n  this.builder = builder || null;\n  this.s = s || 1;\n}\nNumberParser.prototype = Object.create(StringIteratee.prototype);\nNumberParser.prototype.constructor = NumberParser;\nNumberParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var builder = this.builder || new StringBuilder();\n  if (s === 1) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c === 45/*'-'*/) {\n        input.step();\n        builder.append(c);\n      }\n      s = 2;\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  if (s === 2) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c === 48/*'0'*/) {\n        input.step();\n        builder.append(c);\n        s = 4;\n      }\n      else if (c >= 49/*'1'*/ && c <= 57/*'9'*/) {\n        input.step();\n        builder.append(c);\n        s = 3;\n      }\n      else return new StringIteratee.Error({expected: 'digit', found: c});\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  if (s === 3) {\n    while (!input.isEmpty() && (c = input.head(), c >= 48/*'0'*/ && c <= 57/*'9'*/)) {\n      input.step();\n      builder.append(c);\n    }\n    if (!input.isEmpty()) s = 4;\n    else if (input.isDone()) return new StringIteratee.Done(Number(builder.state()));\n  }\n  if (s === 4) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c === 46/*'.'*/) {\n        input.step();\n        builder.append(c);\n        s = 5;\n      }\n      else if (c === 69/*'E'*/ || c === 101/*'e'*/) {\n        input.step();\n        builder.append(c);\n        s = 8;\n      }\n      else return new StringIteratee.Done(Number(builder.state()));\n    }\n    else if (input.isDone()) return new StringIteratee.Done(Number(builder.state()));\n  }\n  if (s === 5) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c >= 48/*'0'*/ && c <= 57/*'9'*/) {\n        input.step();\n        builder.append(c);\n        s = 6;\n      }\n      else return new StringIteratee.Error({expected: 'digit', found: c});\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  if (s === 6) {\n    while (!input.isEmpty() && (c = input.head(), c >= 48/*'0'*/ && c <= 57/*'9'*/)) {\n      input.step();\n      builder.append(c);\n    }\n    if (!input.isEmpty()) s = 7;\n    else if (input.isDone()) return new StringIteratee.Done(Number(builder.state()));\n  }\n  if (s === 7) {\n    c = input.head();\n    if (c === 69/*'E'*/ || c === 101/*'e'*/) {\n      input.step();\n      builder.append(c);\n      s = 8;\n    }\n    else return new StringIteratee.Done(Number(builder.state()));\n  }\n  if (s === 8) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c === 43/*'+'*/ || c === 45/*'-'*/) {\n        input.step();\n        builder.append(c);\n      }\n      s = 9;\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  if (s === 9) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c >= 48/*'0'*/ && c <= 57/*'9'*/) {\n        input.step();\n        builder.append(c);\n        s = 10;\n      }\n      else return new StringIteratee.Error({expected: 'digit', found: c});\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  if (s === 10) {\n    while (!input.isEmpty() && (c = input.head(), c >= 48/*'0'*/ && c <= 57/*'9'*/)) {\n      input.step();\n      builder.append(c);\n    }\n    if (!input.isEmpty() || input.isDone()) return new StringIteratee.Done(Number(builder.state()));\n  }\n  return new NumberParser(builder, s);\n};\n\nfunction IdentParser(builder, s) {\n  StringIteratee.call(this);\n  this.builder = builder || null;\n  this.s = s || 1;\n}\nIdentParser.prototype = Object.create(StringIteratee.prototype);\nIdentParser.prototype.constructor = IdentParser;\nIdentParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var builder = this.builder;\n  if (s === 1) {\n    if (!input.isEmpty() && (c = input.head(), isNameStartChar(c))) {\n      builder = builder || new StringBuilder();\n      input.step();\n      builder.append(c);\n      s = 2;\n    }\n    else if (!input.isEmpty()) return new StringIteratee.Error({expected: 'identitifer', found: c});\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  if (s === 2) {\n    while (!input.isEmpty() && (c = input.head(), isNameChar(c))) {\n      input.step();\n      builder.append(c);\n    }\n    if (!input.isEmpty() || input.isDone()) {\n      var value = builder.state();\n      if (value === 'true') value = true;\n      else if (value === 'false') value = false;\n      return new StringIteratee.Done(value);\n    }\n  }\n  return new IdentParser(builder, s);\n};\n\n\nfunction ReconWriter(builder) {\n  Object.defineProperty(this, 'builder', {value: builder || new StringBuilder()});\n}\nReconWriter.prototype.writeValue = function (value, inMarkup) {\n  if (value.isRecord) this.writeRecord(value, inMarkup);\n  else if (typeof value === 'string') this.writeText(value, inMarkup);\n  else if (typeof value === 'number') this.writeNumber(value);\n  else if (typeof value === 'boolean') this.writeBool(value);\n  else if (value instanceof Uint8Array) this.writeData(value);\n};\nReconWriter.prototype.writeAttr = function(attr) {\n  this.builder.append(64/*'@'*/);\n  this.writeIdent(attr.key);\n  if (!attr.value.isExtant) {\n    this.builder.append(40/*'('*/);\n    this.writeBlock(attr.value);\n    this.builder.append(41/*')'*/);\n  }\n};\nReconWriter.prototype.writeItem = function(item) {\n  if (item.isField) {\n    this.writeValue(item.key);\n    this.builder.append(58/*':'*/);\n    if (!item.value.isExtant) this.writeValue(item.value);\n  }\n  else this.writeValue(item);\n};\nReconWriter.prototype.writeBlock = function (value) {\n  if (!value.isRecord) this.writeValue(value);\n  else if (value.isMarkup()) this.writeMarkup(value);\n  else if (value.hasAttrs()) this.writeRecord(value);\n  else {\n    var items = value.iterator();\n    if (!items.isEmpty()) {\n      this.writeItem(items.next());\n      while (!items.isEmpty()) {\n        this.builder.append(44/*','*/);\n        this.writeItem(items.next());\n      }\n    }\n  }\n};\nReconWriter.prototype.writeRecord = function (record, inMarkup) {\n  if (record.isMarkup()) this.writeMarkup(record);\n  else {\n    var items = record.iterator();\n    var item;\n    var hasAttrs = false;\n    while (!items.isEmpty() && (item = items.head(), item.isAttr)) {\n      this.writeAttr(item);\n      items.step();\n      hasAttrs = true;\n    }\n    if (!items.isEmpty()) {\n      items.step();\n      if (hasAttrs && items.isEmpty()) {\n        if (inMarkup) {\n          if (item.isRecord || typeof item === 'string') this.writeValue(item, inMarkup);\n          else {\n            this.builder.append(123/*'{'*/);\n            this.writeItem(item);\n            this.builder.append(125/*'}'*/);\n          }\n        }\n        else if (item.isRecord || item.isSlot) {\n          this.builder.append(123/*'{'*/);\n          this.writeItem(item);\n          this.builder.append(125/*'}'*/);\n        }\n        else {\n          this.builder.append(32/*' '*/);\n          this.writeValue(item);\n        }\n      }\n      else if (!items.isEmpty() && items.isAllAttrs()) {\n        if (item.isRecord || item.isSlot) {\n          this.builder.append(123/*'{'*/);\n          this.writeItem(item);\n          this.builder.append(125/*'}'*/);\n        }\n        else {\n          if (hasAttrs) this.builder.append(32/*' '*/);\n          this.writeValue(item);\n        }\n      }\n      else {\n        this.builder.append(123/*'{'*/);\n        this.writeItem(item);\n        while (!items.isEmpty() && ((item = items.head(), !item.isAttr) || !items.isAllAttrs)) {\n          this.builder.append(44/*','*/);\n          this.writeItem(item);\n          items.step();\n        }\n        this.builder.append(125/*'}'*/);\n      }\n      while (!items.isEmpty()) this.writeAttr(items.next());\n    }\n    else if (!hasAttrs) {\n      this.builder.append(123/*'{'*/);\n      this.builder.append(125/*'}'*/);\n    }\n  }\n};\nReconWriter.prototype.writeMarkup = function (record) {\n  var items = record.iterator();\n  var item;\n  var hasAttrs = false;\n  while (!items.isEmpty() && (item = items.head(), item.isAttr)) {\n    this.writeAttr(item);\n    items.step();\n    hasAttrs = true;\n  }\n  this.builder.append(91/*'['*/);\n  while (!items.isEmpty()) {\n    item = items.head();\n    if (typeof item === 'string') {\n      var cs = new StringIterator(item);\n      while (!cs.isEmpty()) {\n        var c = cs.head();\n        switch (c) {\n          case 64/*'@'*/:\n          case 91/*'['*/:\n          case 92/*'\\\\'*/:\n          case 93/*']'*/:\n          case 123/*'{'*/:\n          case 125/*'}'*/: this.builder.append(92/*'\\\\'*/); this.builder.append(c); break;\n          default: this.builder.append(c);\n        }\n        cs.step();\n      }\n    }\n    else if (item.isRecord) this.writeRecord(item, true);\n    else {\n      this.builder.append(123/*'{'*/);\n      this.writeItem(item);\n      this.builder.append(125/*'}'*/);\n    }\n    items.step();\n  }\n  this.builder.append(93/*']'*/);\n};\nReconWriter.prototype.writeText = function (text, inMarkup) {\n  function isIdent() {\n    var cs = new StringIterator(text);\n    if (cs.isEmpty() || !isNameStartChar(cs.head())) return false;\n    cs.step();\n    while (!cs.isEmpty() && isNameChar(cs.head())) cs.step();\n    return cs.isEmpty();\n  }\n  if (inMarkup) this.writeTextMarkup(text);\n  else if (isIdent()) this.writeIdent(text);\n  else this.writeString(text);\n};\nReconWriter.prototype.writeString = function (string) {\n  var cs = new StringIterator(string);\n  this.builder.append(34/*'\"'*/);\n  while (!cs.isEmpty()) {\n    var c = cs.head();\n    switch (c) {\n      case 34/*'\"'*/:\n      case 92/*'\\\\'*/: this.builder.append(92/*'\\\\'*/); this.builder.append(c); break;\n      case 8/*'\\b'*/: this.builder.append(92/*'\\\\'*/); this.builder.append(98/*'b'*/); break;\n      case 12/*'\\f'*/: this.builder.append(92/*'\\\\'*/); this.builder.append(102/*'f'*/); break;\n      case 10/*'\\n'*/: this.builder.append(92/*'\\\\'*/); this.builder.append(110/*'n'*/); break;\n      case 13/*'\\r'*/: this.builder.append(92/*'\\\\'*/); this.builder.append(114/*'r'*/); break;\n      case 9/*'\\t'*/: this.builder.append(92/*'\\\\'*/); this.builder.append(116/*'t'*/); break;\n      default: this.builder.append(c);\n    }\n    cs.step();\n  }\n  this.builder.append(34/*'\"'*/);\n};\nReconWriter.prototype.writeIdent = function (ident) {\n  this.builder.appendString(ident);\n};\nReconWriter.prototype.writeTextMarkup = function (text) {\n  var cs = new StringIterator(text);\n  this.builder.append(91/*'['*/);\n  while (!cs.isEmpty()) {\n    var c = cs.head();\n    switch (c) {\n      case 64/*'@'*/:\n      case 91/*'['*/:\n      case 92/*'\\\\'*/:\n      case 93/*']'*/:\n      case 123/*'{'*/:\n      case 125/*'}'*/: this.builder.append(92/*'\\\\'*/); this.builder.append(c); break;\n      default: this.builder.append(c);\n    }\n    cs.step();\n  }\n  this.builder.append(93/*']'*/);\n};\nReconWriter.prototype.writeNumber = function (number) {\n  this.builder.appendString(number.toString());\n};\nReconWriter.prototype.writeBool = function (bool) {\n  this.builder.appendString(bool.toString());\n};\nReconWriter.prototype.writeData = function (data) {\n  function encodeBase64Digit(x) {\n    if      (x >=  0 && x < 26) return x + 65/*'A'*/;\n    else if (x >= 26 && x < 52) return x + 71/*('a' - 26)*/;\n    else if (x >= 52 && x < 62) return x - 4/*-('0' - 52)*/;\n    else if (x === 62) return 43/*'+'*/;\n    else if (x === 63) return 47/*'/'*/;\n  }\n  this.builder.append(37/*'%'*/);\n  var i = 0;\n  var n = data.length;\n  var x, y, z;\n  while (i + 2 < n) {\n    x = data[i];\n    y = data[i + 1];\n    z = data[i + 2];\n    this.builder.append(encodeBase64Digit(x >>> 2));\n    this.builder.append(encodeBase64Digit(((x << 4) | (y >>> 4)) & 0x3F));\n    this.builder.append(encodeBase64Digit(((y << 2) | (z >>> 6)) & 0x3F));\n    this.builder.append(encodeBase64Digit(z & 0x3F));\n    i += 3;\n  }\n  if (i + 1 < n) {\n    x = data[i];\n    y = data[i + 1];\n    this.builder.append(encodeBase64Digit(x >>> 2));\n    this.builder.append(encodeBase64Digit(((x << 4) | (y >>> 4)) & 0x3F));\n    this.builder.append(encodeBase64Digit((y << 2) & 0x3F));\n    this.builder.append(61/*'='*/);\n    i += 2;\n  }\n  else if (i < n) {\n    x = data[i];\n    this.builder.append(encodeBase64Digit(x >>> 2));\n    this.builder.append(encodeBase64Digit((x << 4) & 0x3F));\n    this.builder.append(61/*'='*/);\n    this.builder.append(61/*'='*/);\n    i += 1;\n  }\n};\nReconWriter.prototype.state = function () {\n  return this.builder.state();\n};\n\n\nmodule.exports = function () {\n  return coerce.apply(null, arguments);\n};\nexports = module.exports;\nexports.parse = parse;\nexports.stringify = stringify;\nexports.objectify = objectify;\nexports.Record = Record;\nexports.Field = Field;\nexports.Attr = Attr;\nexports.Slot = Slot;\nexports.attr = attr;\nexports.slot = slot;\nexports.base64 = base64;\nexports.extant = Extant;\nexports.absent = Absent;\nexports.empty = empty;\nexports.builder = builder;\nexports.compare = compare;\n\n},{}],3:[function(require,module,exports){\n'use strict';\n\nvar recon = require('recon-js');\n\nfunction decode(record) {\n  if (record.isRecord) {\n    var heading = record.head();\n    if (heading.isField) switch (heading.key) {\n      case 'event': return EventMessage.decode(record);\n      case 'command': return CommandMessage.decode(record);\n      case 'get': return GetRequest.decode(record);\n      case 'put': return PutRequest.decode(record);\n      case 'state': return StateResponse.decode(record);\n      case 'link': return LinkRequest.decode(record);\n      case 'linked': return LinkedResponse.decode(record);\n      case 'unlink': return UnlinkRequest.decode(record);\n      case 'unlinked': return UnlinkedResponse.decode(record);\n    }\n  }\n}\n\nfunction encode(envelope) {\n  return envelope.encode();\n}\n\nfunction parse(string) {\n  return decode(recon.parse(string));\n}\n\nfunction stringify(envelope) {\n  return recon.stringify(encode(envelope));\n}\n\n\nfunction Envelope() {}\nObject.defineProperty(Envelope.prototype, 'isRequest', {value: false});\nObject.defineProperty(Envelope.prototype, 'isResponse', {value: false});\nObject.defineProperty(Envelope.prototype, 'isMessage', {value: false});\nObject.defineProperty(Envelope.prototype, 'isEventMessage', {value: false});\nObject.defineProperty(Envelope.prototype, 'isCommandMessage', {value: false});\nObject.defineProperty(Envelope.prototype, 'isGetRequest', {value: false});\nObject.defineProperty(Envelope.prototype, 'isPutRequest', {value: false});\nObject.defineProperty(Envelope.prototype, 'isStateResponse', {value: false});\nObject.defineProperty(Envelope.prototype, 'isLinkRequest', {value: false});\nObject.defineProperty(Envelope.prototype, 'isLinkedResponse', {value: false});\nObject.defineProperty(Envelope.prototype, 'isUnlinkRequest', {value: false});\nObject.defineProperty(Envelope.prototype, 'isUnlinkedResponse', {value: false});\n\n\nfunction RequestEnvelope() {\n  Envelope.call(this);\n}\nRequestEnvelope.prototype = Object.create(Envelope.prototype);\nRequestEnvelope.prototype.constructor = RequestEnvelope;\nObject.defineProperty(RequestEnvelope.prototype, 'isRequest', {value: true});\n\n\nfunction ResponseEnvelope() {\n  Envelope.call(this);\n}\nResponseEnvelope.prototype = Object.create(Envelope.prototype);\nResponseEnvelope.prototype.constructor = ResponseEnvelope;\nObject.defineProperty(RequestEnvelope.prototype, 'isResponse', {value: true});\n\n\nfunction MessageEnvelope() {\n  Envelope.call(this);\n}\nMessageEnvelope.prototype = Object.create(Envelope.prototype);\nMessageEnvelope.prototype.constructor = MessageEnvelope;\nObject.defineProperty(RequestEnvelope.prototype, 'isMessage', {value: true});\n\n\nfunction EventMessage(node, lane, via, body) {\n  MessageEnvelope.call(this);\n  Object.defineProperty(this, 'node', {enumerable: true, value: node});\n  Object.defineProperty(this, 'lane', {enumerable: true, value: lane});\n  Object.defineProperty(this, 'via', {enumerable: true, value: via || recon.absent});\n  Object.defineProperty(this, 'body', {enumerable: true, value: body || recon.empty()});\n}\nEventMessage.prototype = Object.create(MessageEnvelope.prototype);\nEventMessage.prototype.constructor = EventMessage;\nObject.defineProperty(EventMessage.prototype, 'isEventMessage', {value: true});\nEventMessage.prototype.encode = function () {\n  var builder = recon.builder();\n  var heading = recon.builder();\n  heading.slot('node', this.node);\n  heading.slot('lane', this.lane);\n  if (!this.via.isAbsent) heading.slot('via', this.via);\n  builder.attr('event', heading.state());\n  builder.appendRecord(this.body);\n  return builder.state();\n};\nEventMessage.decode = function (record) {\n  var node = '';\n  var lane = '';\n  var via = recon.absent;\n  var body = record.tail();\n  var heading = record.head();\n  if (heading.value.isRecord) {\n    var headers = heading.value.iterator();\n    var i = 0;\n    while (!headers.isEmpty()) {\n      var header = headers.next();\n      if (header.isField) switch (header.key) {\n        case 'node': node = header.value; break;\n        case 'lane': lane = header.value; break;\n        case 'via': via = header.value; break;\n      }\n      else switch (i) {\n        case 0: node = header; break;\n        case 1: lane = header; break;\n        case 2: via = header; break;\n      }\n      i += 1;\n    }\n  }\n  return new EventMessage(node, lane, via, body);\n};\n\n\nfunction CommandMessage(node, lane, via, body) {\n  MessageEnvelope.call(this);\n  Object.defineProperty(this, 'node', {enumerable: true, value: node});\n  Object.defineProperty(this, 'lane', {enumerable: true, value: lane});\n  Object.defineProperty(this, 'via', {enumerable: true, value: via || recon.absent});\n  Object.defineProperty(this, 'body', {enumerable: true, value: body || recon.empty()});\n}\nCommandMessage.prototype = Object.create(MessageEnvelope.prototype);\nCommandMessage.prototype.constructor = CommandMessage;\nObject.defineProperty(CommandMessage.prototype, 'isCommandMessage', {value: true});\nCommandMessage.prototype.encode = function () {\n  var builder = recon.builder();\n  var heading = recon.builder();\n  heading.slot('node', this.node);\n  heading.slot('lane', this.lane);\n  if (!this.via.isAbsent) heading.slot('via', this.via);\n  builder.attr('command', heading.state());\n  builder.appendRecord(this.body);\n  return builder.state();\n};\nCommandMessage.decode = function (record) {\n  var node = '';\n  var lane = '';\n  var via = recon.absent;\n  var body = record.tail();\n  var heading = record.head();\n  if (heading.value.isRecord) {\n    var headers = heading.value.iterator();\n    var i = 0;\n    while (!headers.isEmpty()) {\n      var header = headers.next();\n      if (header.isField) switch (header.key) {\n        case 'node': node = header.value; break;\n        case 'lane': lane = header.value; break;\n        case 'via': via = header.value; break;\n      }\n      else switch (i) {\n        case 0: node = header; break;\n        case 1: lane = header; break;\n        case 2: via = header; break;\n      }\n      i += 1;\n    }\n  }\n  return new CommandMessage(node, lane, via, body);\n};\n\n\nfunction GetRequest(node) {\n  RequestEnvelope.call(this);\n  Object.defineProperty(this, 'node', {enumerable: true, value: node});\n}\nGetRequest.prototype = Object.create(RequestEnvelope.prototype);\nGetRequest.prototype.constructor = GetRequest;\nObject.defineProperty(GetRequest.prototype, 'isGetRequest', {value: true});\nGetRequest.prototype.encode = function () {\n  return recon(\n    recon.attr('get', recon(\n      recon.slot('node', this.node))));\n};\nGetRequest.decode = function (record) {\n  var node = '';\n  var heading = record.head();\n  if (heading.value.isRecord) {\n    var headers = heading.value.iterator();\n    var i = 0;\n    while (!headers.isEmpty()) {\n      var header = headers.next();\n      if (header.isField) switch (header.key) {\n        case 'node': node = header.value; break;\n      }\n      else switch (i) {\n        case 0: node = header; break;\n      }\n      i += 1;\n    }\n  }\n  else if (!heading.value.isExtant) node = heading.value;\n  return new GetRequest(node);\n};\n\n\nfunction PutRequest(node, body) {\n  RequestEnvelope.call(this);\n  Object.defineProperty(this, 'node', {enumerable: true, value: node});\n  Object.defineProperty(this, 'body', {enumerable: true, value: body || recon.empty()});\n}\nPutRequest.prototype = Object.create(RequestEnvelope.prototype);\nPutRequest.prototype.constructor = PutRequest;\nObject.defineProperty(PutRequest.prototype, 'isPutRequest', {value: true});\nPutRequest.prototype.encode = function () {\n  var builder = recon.builder();\n  builder.attr('put', recon(\n    recon.slot('node', this.node)));\n  builder.appendRecord(this.body);\n  return builder.state();\n};\nPutRequest.decode = function (record) {\n  var node = '';\n  var body = record.tail();\n  var heading = record.head();\n  if (heading.value.isRecord) {\n    var headers = heading.value.iterator();\n    var i = 0;\n    while (!headers.isEmpty()) {\n      var header = headers.next();\n      if (header.isField) switch (header.key) {\n        case 'node': node = header.value; break;\n      }\n      else switch (i) {\n        case 0: node = header; break;\n      }\n      i += 1;\n    }\n  }\n  else if (!heading.value.isExtant) node = heading.value;\n  return new PutRequest(node, body);\n};\n\n\nfunction StateResponse(node, body) {\n  ResponseEnvelope.call(this);\n  Object.defineProperty(this, 'node', {enumerable: true, value: node});\n  Object.defineProperty(this, 'body', {enumerable: true, value: body || recon.empty()});\n}\nStateResponse.prototype = Object.create(ResponseEnvelope.prototype);\nStateResponse.prototype.constructor = StateResponse;\nObject.defineProperty(StateResponse.prototype, 'isStateResponse', {value: true});\nStateResponse.prototype.encode = function () {\n  var builder = recon.builder();\n  builder.attr('state', recon(\n    recon.slot('node', this.node)));\n  builder.appendRecord(this.body);\n  return builder.state();\n};\nStateResponse.decode = function (record) {\n  var node = '';\n  var body = record.tail();\n  var heading = record.head();\n  if (heading.value.isRecord) {\n    var headers = heading.value.iterator();\n    var i = 0;\n    while (!headers.isEmpty()) {\n      var header = headers.next();\n      if (header.isField) switch (header.key) {\n        case 'node': node = header.value; break;\n      }\n      else switch (i) {\n        case 0: node = header; break;\n      }\n      i += 1;\n    }\n  }\n  else if (!heading.value.isExtant) node = heading.value;\n  return new StateResponse(node, body);\n};\n\n\nfunction LinkRequest(node, lane) {\n  RequestEnvelope.call(this);\n  Object.defineProperty(this, 'node', {enumerable: true, value: node});\n  Object.defineProperty(this, 'lane', {enumerable: true, value: lane});\n}\nLinkRequest.prototype = Object.create(RequestEnvelope.prototype);\nLinkRequest.prototype.constructor = LinkRequest;\nObject.defineProperty(LinkRequest.prototype, 'isLinkRequest', {value: true});\nLinkRequest.prototype.encode = function () {\n  return recon(\n    recon.attr('link', recon(\n      recon.slot('node', this.node),\n      recon.slot('lane', this.lane))));\n};\nLinkRequest.decode = function (record) {\n  var node = '';\n  var lane = '';\n  var heading = record.head();\n  if (heading.value.isRecord) {\n    var headers = heading.value.iterator();\n    var i = 0;\n    while (!headers.isEmpty()) {\n      var header = headers.next();\n      if (header.isField) switch (header.key) {\n        case 'node': node = header.value; break;\n        case 'lane': lane = header.value; break;\n      }\n      else switch (i) {\n        case 0: node = header; break;\n        case 1: lane = header; break;\n      }\n      i += 1;\n    }\n  }\n  return new LinkRequest(node, lane);\n};\n\n\nfunction LinkedResponse(node, lane) {\n  ResponseEnvelope.call(this);\n  Object.defineProperty(this, 'node', {enumerable: true, value: node});\n  Object.defineProperty(this, 'lane', {enumerable: true, value: lane});\n}\nLinkedResponse.prototype = Object.create(ResponseEnvelope.prototype);\nLinkedResponse.prototype.constructor = LinkedResponse;\nObject.defineProperty(LinkedResponse.prototype, 'isLinkedResponse', {value: true});\nLinkedResponse.prototype.encode = function () {\n  return recon(\n    recon.attr('linked', recon(\n      recon.slot('node', this.node),\n      recon.slot('lane', this.lane))));\n};\nLinkedResponse.decode = function (record) {\n  var node = '';\n  var lane = '';\n  var heading = record.head();\n  if (heading.value.isRecord) {\n    var headers = heading.value.iterator();\n    var i = 0;\n    while (!headers.isEmpty()) {\n      var header = headers.next();\n      if (header.isField) switch (header.key) {\n        case 'node': node = header.value; break;\n        case 'lane': lane = header.value; break;\n      }\n      else switch (i) {\n        case 0: node = header; break;\n        case 1: lane = header; break;\n      }\n      i += 1;\n    }\n  }\n  return new LinkedResponse(node, lane);\n};\n\n\nfunction UnlinkRequest(node, lane) {\n  RequestEnvelope.call(this);\n  Object.defineProperty(this, 'node', {enumerable: true, value: node});\n  Object.defineProperty(this, 'lane', {enumerable: true, value: lane});\n}\nUnlinkRequest.prototype = Object.create(RequestEnvelope.prototype);\nUnlinkRequest.prototype.constructor = UnlinkRequest;\nObject.defineProperty(UnlinkRequest.prototype, 'isUnlinkRequest', {value: true});\nUnlinkRequest.prototype.encode = function () {\n  return recon(\n    recon.attr('unlink', recon(\n      recon.slot('node', this.node),\n      recon.slot('lane', this.lane))));\n};\nUnlinkRequest.decode = function (record) {\n  var node = '';\n  var lane = '';\n  var heading = record.head();\n  if (heading.value.isRecord) {\n    var headers = heading.value.iterator();\n    var i = 0;\n    while (!headers.isEmpty()) {\n      var header = headers.next();\n      if (header.isField) switch (header.key) {\n        case 'node': node = header.value; break;\n        case 'lane': lane = header.value; break;\n      }\n      else switch (i) {\n        case 0: node = header; break;\n        case 1: lane = header; break;\n      }\n      i += 1;\n    }\n  }\n  return new UnlinkRequest(node, lane);\n};\n\n\nfunction UnlinkedResponse(node, lane) {\n  ResponseEnvelope.call(this);\n  Object.defineProperty(this, 'node', {enumerable: true, value: node});\n  Object.defineProperty(this, 'lane', {enumerable: true, value: lane});\n}\nUnlinkedResponse.prototype = Object.create(ResponseEnvelope.prototype);\nUnlinkedResponse.prototype.constructor = UnlinkedResponse;\nObject.defineProperty(UnlinkedResponse.prototype, 'isUnlinkedResponse', {value: true});\nUnlinkedResponse.prototype.encode = function () {\n  return recon(\n    recon.attr('unlinked', recon(\n      recon.slot('node', this.node),\n      recon.slot('lane', this.lane))));\n};\nUnlinkedResponse.decode = function (record) {\n  var node = '';\n  var lane = '';\n  var heading = record.head();\n  if (heading.value.isRecord) {\n    var headers = heading.value.iterator();\n    var i = 0;\n    while (!headers.isEmpty()) {\n      var header = headers.next();\n      if (header.isField) switch (header.key) {\n        case 'node': node = header.value; break;\n        case 'lane': lane = header.value; break;\n      }\n      else switch (i) {\n        case 0: node = header; break;\n        case 1: lane = header; break;\n      }\n      i += 1;\n    }\n  }\n  return new UnlinkedResponse(node, lane);\n};\n\n\nexports.decode = decode;\nexports.encode = encode;\nexports.parse = parse;\nexports.stringify = stringify;\nexports.Envelope = Envelope;\nexports.RequestEnvelope = RequestEnvelope;\nexports.ResponseEnvelope = ResponseEnvelope;\nexports.MessageEnvelope = MessageEnvelope;\nexports.EventMessage = EventMessage;\nexports.CommandMessage = CommandMessage;\nexports.GetRequest = GetRequest;\nexports.PutRequest = PutRequest;\nexports.StateResponse = StateResponse;\nexports.LinkRequest = LinkRequest;\nexports.LinkedResponse = LinkedResponse;\nexports.UnlinkRequest = UnlinkRequest;\nexports.UnlinkedResponse = UnlinkedResponse;\n\n},{\"recon-js\":2}],4:[function(require,module,exports){\nrequire(\"./schemes/http\");\r\nrequire(\"./schemes/urn\");\n},{\"./schemes/http\":5,\"./schemes/urn\":6}],5:[function(require,module,exports){\n(function () {\r\n\tvar URI = require(\"../uri\").URI;\r\n\t\r\n\t//RFC 2616\r\n\tURI.SCHEMES[\"http\"] = {\r\n\t\tserialize : function (components, options) {\r\n\t\t\t//normalize the default port\r\n\t\t\tif (components.port === 80 || components.port === \"\") {\r\n\t\t\t\tcomponents.port = undefined;\r\n\t\t\t}\r\n\t\t\t//normalize the empty path\r\n\t\t\tif (!components.path) {\r\n\t\t\t\tcomponents.path = \"/\";\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//NOTE: We do not parse query strings for HTTP URIs\r\n\t\t\t//as WWW Form Url Encoded query strings are part of the HTML4+ spec,\r\n\t\t\t//and not the HTTP spec. \r\n\t\t\t\r\n\t\t\treturn components;\r\n\t\t}\r\n\t};\r\n}());\n},{\"../uri\":7}],6:[function(require,module,exports){\n(function () {\r\n\tvar URI_NS = require(\"../uri\"),\r\n\t\tURI = URI_NS.URI,\r\n\t\tpctEncChar = URI_NS.pctEncChar,\r\n\t\tNID$ = \"(?:[0-9A-Za-z][0-9A-Za-z\\\\-]{1,31})\",\r\n\t\tPCT_ENCODED$ = \"(?:\\\\%[0-9A-Fa-f]{2})\",\r\n\t\tTRANS$$ = \"[0-9A-Za-z\\\\(\\\\)\\\\+\\\\,\\\\-\\\\.\\\\:\\\\=\\\\@\\\\;\\\\$\\\\_\\\\!\\\\*\\\\'\\\\/\\\\?\\\\#]\",\r\n\t\tNSS$ = \"(?:(?:\" + PCT_ENCODED$ + \"|\" + TRANS$$ + \")+)\",\r\n\t\tURN_SCHEME = new RegExp(\"^urn\\\\:(\" + NID$ + \")$\"),\r\n\t\tURN_PATH = new RegExp(\"^(\" + NID$ + \")\\\\:(\" + NSS$ + \")$\"),\r\n\t\tURN_PARSE = /^([^\\:]+)\\:(.*)/,\r\n\t\tURN_EXCLUDED = /[\\x00-\\x20\\\\\\\"\\&\\<\\>\\[\\]\\^\\`\\{\\|\\}\\~\\x7F-\\xFF]/g,\r\n\t\tUUID = /^[0-9A-Fa-f]{8}(?:\\-[0-9A-Fa-f]{4}){3}\\-[0-9A-Fa-f]{12}$/;\r\n\t\r\n\t//RFC 2141\r\n\tURI.SCHEMES[\"urn\"] = {\r\n\t\tparse : function (components, options) {\r\n\t\t\tvar matches = components.path.match(URN_PATH),\r\n\t\t\t\tscheme, schemeHandler;\r\n\t\t\t\r\n\t\t\tif (!matches) {\r\n\t\t\t\tif (!options.tolerant) {\r\n\t\t\t\t\tcomponents.errors.push(\"URN is not strictly valid.\");\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tmatches = components.path.match(URN_PARSE);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (matches) {\r\n\t\t\t\tscheme = \"urn:\" + matches[1].toLowerCase();\r\n\t\t\t\tschemeHandler = URI.SCHEMES[scheme];\r\n\t\t\t\t\r\n\t\t\t\t//in order to serialize properly, \r\n\t\t\t\t//every URN must have a serializer that calls the URN serializer \r\n\t\t\t\tif (!schemeHandler) {\r\n\t\t\t\t\tschemeHandler = URI.SCHEMES[scheme] = {};\r\n\t\t\t\t}\r\n\t\t\t\tif (!schemeHandler.serialize) {\r\n\t\t\t\t\tschemeHandler.serialize = URI.SCHEMES[\"urn\"].serialize;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tcomponents.scheme = scheme;\r\n\t\t\t\tcomponents.path = matches[2];\r\n\t\t\t\t\r\n\t\t\t\tif (schemeHandler.parse) {\r\n\t\t\t\t\tschemeHandler.parse(components, options);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tcomponents.errors.push(\"URN can not be parsed.\");\r\n\t\t\t}\r\n\t\r\n\t\t\treturn components;\r\n\t\t},\r\n\t\t\r\n\t\tserialize : function (components, options) {\r\n\t\t\tvar scheme = components.scheme || options.scheme,\r\n\t\t\t\tmatches;\r\n\t\t\t\r\n\t\t\tif (scheme && scheme !== \"urn\") {\r\n\t\t\t\tvar matches = scheme.match(URN_SCHEME);\r\n\t\t\t\t\r\n\t\t\t\tif (!matches) {\r\n\t\t\t\t\tmatches = [\"urn:\" + scheme, scheme];\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tcomponents.scheme = \"urn\";\r\n\t\t\t\tcomponents.path = matches[1] + \":\" + (components.path ? components.path.replace(URN_EXCLUDED, pctEncChar) : \"\");\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn components;\r\n\t\t}\r\n\t};\r\n\t\r\n\t//RFC 4122\r\n\tURI.SCHEMES[\"urn:uuid\"] = {\r\n\t\tparse : function (components, options) {\r\n\t\t\tif (!options.tolerant && (!components.path || !components.path.match(UUID))) {\r\n\t\t\t\tcomponents.errors.push(\"UUID is not valid.\");\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tserialize : function (components, options) {\r\n\t\t\t//ensure UUID is valid\r\n\t\t\tif (!options.tolerant && (!components.path || !components.path.match(UUID))) {\r\n\t\t\t\t//invalid UUIDs can not have this scheme\r\n\t\t\t\tcomponents.scheme = undefined;\r\n\t\t\t} else {\r\n\t\t\t\t//normalize UUID\r\n\t\t\t\tcomponents.path = (components.path || \"\").toLowerCase();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn URI.SCHEMES[\"urn\"].serialize(components, options);\r\n\t\t}\r\n\t};\r\n}());\n},{\"../uri\":7}],7:[function(require,module,exports){\n/**\r\n * URI.js\r\n * \r\n * @fileoverview An RFC 3986 compliant, scheme extendable URI parsing/validating/resolving library for JavaScript.\r\n * @author <a href=\"mailto:gary.court@gmail.com\">Gary Court</a>\r\n * @version 1.4.2\r\n * @see http://github.com/garycourt/uri-js\r\n * @license URI.js v1.4.2 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js\r\n */\r\n\r\n/**\r\n * Copyright 2011 Gary Court. All rights reserved.\r\n * \r\n * Redistribution and use in source and binary forms, with or without modification, are\r\n * permitted provided that the following conditions are met:\r\n * \r\n *    1. Redistributions of source code must retain the above copyright notice, this list of\r\n *       conditions and the following disclaimer.\r\n * \r\n *    2. Redistributions in binary form must reproduce the above copyright notice, this list\r\n *       of conditions and the following disclaimer in the documentation and/or other materials\r\n *       provided with the distribution.\r\n * \r\n * THIS SOFTWARE IS PROVIDED BY GARY COURT ``AS IS'' AND ANY EXPRESS OR IMPLIED\r\n * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\r\n * FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL GARY COURT OR\r\n * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\r\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\r\n * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\r\n * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\r\n * ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n * \r\n * The views and conclusions contained in the software and documentation are those of the\r\n * authors and should not be interpreted as representing official policies, either expressed\r\n * or implied, of Gary Court.\r\n */\r\n\r\n/*jslint white: true, sub: true, undef: true, newcap: true, plusplus: true, bitwise: true, regexp: true, nomen: true, indent: 4 */\r\n/*global exports:true, require:true, URI:true */\r\n\r\nif (typeof exports === \"undefined\") {\r\n\texports = {}; \r\n}\r\nif (typeof require !== \"function\") {\r\n\trequire = function (id) {\r\n\t\t\"use strict\";\r\n\t\treturn exports;\r\n\t};\r\n}\r\nURI = (function () {\r\n\t\"use strict\";\r\n\t\r\n\tvar\t\r\n\t\t/**\r\n\t\t * @param {...string} sets\r\n\t\t * @return {string}\r\n\t\t */\r\n\t\tmergeSet = function (sets) {\r\n\t\t\tvar set = sets,\r\n\t\t\t\tx = 1,\r\n\t\t\t\tnextSet = arguments[x];\r\n\t\t\t\r\n\t\t\twhile (nextSet) {\r\n\t\t\t\tset = set.slice(0, -1) + nextSet.slice(1);\r\n\t\t\t\tnextSet = arguments[++x];\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn set;\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * @param {string} str\r\n\t\t * @return {string}\r\n\t\t */\r\n\t\tsubexp = function (str) {\r\n\t\t\treturn \"(?:\" + str + \")\";\r\n\t\t},\r\n\t\r\n\t\tALPHA$$ = \"[A-Za-z]\",\r\n\t\tCR$ = \"[\\\\x0D]\",\r\n\t\tDIGIT$$ = \"[0-9]\",\r\n\t\tDQUOTE$$ = \"[\\\\x22]\",\r\n\t\tHEXDIG$$ = mergeSet(DIGIT$$, \"[A-Fa-f]\"),  //case-insensitive\r\n\t\tLF$$ = \"[\\\\x0A]\",\r\n\t\tSP$$ = \"[\\\\x20]\",\r\n\t\tPCT_ENCODED$ = subexp(\"%\" + HEXDIG$$ + HEXDIG$$),\r\n\t\tGEN_DELIMS$$ = \"[\\\\:\\\\/\\\\?\\\\#\\\\[\\\\]\\\\@]\",\r\n\t\tSUB_DELIMS$$ = \"[\\\\!\\\\$\\\\&\\\\'\\\\(\\\\)\\\\*\\\\+\\\\,\\\\;\\\\=]\",\r\n\t\tRESERVED$$ = mergeSet(GEN_DELIMS$$, SUB_DELIMS$$),\r\n\t\tUNRESERVED$$ = mergeSet(ALPHA$$, DIGIT$$, \"[\\\\-\\\\.\\\\_\\\\~]\"),\r\n\t\tSCHEME$ = subexp(ALPHA$$ + mergeSet(ALPHA$$, DIGIT$$, \"[\\\\+\\\\-\\\\.]\") + \"*\"),\r\n\t\tUSERINFO$ = subexp(subexp(PCT_ENCODED$ + \"|\" + mergeSet(UNRESERVED$$, SUB_DELIMS$$, \"[\\\\:]\")) + \"*\"),\r\n\t\tDEC_OCTET$ = subexp(subexp(\"25[0-5]\") + \"|\" + subexp(\"2[0-4]\" + DIGIT$$) + \"|\" + subexp(\"1\" + DIGIT$$ + DIGIT$$) + \"|\" + subexp(\"[1-9]\" + DIGIT$$) + \"|\" + DIGIT$$),\r\n\t\tIPV4ADDRESS$ = subexp(DEC_OCTET$ + \"\\\\.\" + DEC_OCTET$ + \"\\\\.\" + DEC_OCTET$ + \"\\\\.\" + DEC_OCTET$),\r\n\t\tH16$ = subexp(HEXDIG$$ + \"{1,4}\"),\r\n\t\tLS32$ = subexp(subexp(H16$ + \"\\\\:\" + H16$) + \"|\" + IPV4ADDRESS$),\r\n\t\tIPV6ADDRESS$ = subexp(mergeSet(UNRESERVED$$, SUB_DELIMS$$, \"[\\\\:]\") + \"+\"),  //FIXME\r\n\t\tIPVFUTURE$ = subexp(\"v\" + HEXDIG$$ + \"+\\\\.\" + mergeSet(UNRESERVED$$, SUB_DELIMS$$, \"[\\\\:]\") + \"+\"),\r\n\t\tIP_LITERAL$ = subexp(\"\\\\[\" + subexp(IPV6ADDRESS$ + \"|\" + IPVFUTURE$) + \"\\\\]\"),\r\n\t\tREG_NAME$ = subexp(subexp(PCT_ENCODED$ + \"|\" + mergeSet(UNRESERVED$$, SUB_DELIMS$$)) + \"*\"),\r\n\t\tHOST$ = subexp(IP_LITERAL$ + \"|\" + IPV4ADDRESS$ + \"|\" + REG_NAME$),\r\n\t\tPORT$ = subexp(DIGIT$$ + \"*\"),\r\n\t\tAUTHORITY$ = subexp(subexp(USERINFO$ + \"@\") + \"?\" + HOST$ + subexp(\"\\\\:\" + PORT$) + \"?\"),\r\n\t\tPCHAR$ = subexp(PCT_ENCODED$ + \"|\" + mergeSet(UNRESERVED$$, SUB_DELIMS$$, \"[\\\\:\\\\@]\")),\r\n\t\tSEGMENT$ = subexp(PCHAR$ + \"*\"),\r\n\t\tSEGMENT_NZ$ = subexp(PCHAR$ + \"+\"),\r\n\t\tSEGMENT_NZ_NC$ = subexp(subexp(PCT_ENCODED$ + \"|\" + mergeSet(UNRESERVED$$, SUB_DELIMS$$, \"[\\\\@]\")) + \"+\"),\r\n\t\tPATH_ABEMPTY$ = subexp(subexp(\"\\\\/\" + SEGMENT$) + \"*\"),\r\n\t\tPATH_ABSOLUTE$ = subexp(\"\\\\/\" + subexp(SEGMENT_NZ$ + PATH_ABEMPTY$) + \"?\"),  //simplified\r\n\t\tPATH_NOSCHEME$ = subexp(SEGMENT_NZ_NC$ + PATH_ABEMPTY$),  //simplified\r\n\t\tPATH_ROOTLESS$ = subexp(SEGMENT_NZ$ + PATH_ABEMPTY$),  //simplified\r\n\t\tPATH_EMPTY$ = subexp(\"\"),  //simplified\r\n\t\tPATH$ = subexp(PATH_ABEMPTY$ + \"|\" + PATH_ABSOLUTE$ + \"|\" + PATH_NOSCHEME$ + \"|\" + PATH_ROOTLESS$ + \"|\" + PATH_EMPTY$),\r\n\t\tQUERY$ = subexp(subexp(PCHAR$ + \"|[\\\\/\\\\?]\") + \"*\"),\r\n\t\tFRAGMENT$ = subexp(subexp(PCHAR$ + \"|[\\\\/\\\\?]\") + \"*\"),\r\n\t\tHIER_PART$ = subexp(subexp(\"\\\\/\\\\/\" + AUTHORITY$ + PATH_ABEMPTY$) + \"|\" + PATH_ABSOLUTE$ + \"|\" + PATH_ROOTLESS$ + \"|\" + PATH_EMPTY$),\r\n\t\tURI$ = subexp(SCHEME$ + \"\\\\:\" + HIER_PART$ + subexp(\"\\\\?\" + QUERY$) + \"?\" + subexp(\"\\\\#\" + FRAGMENT$) + \"?\"),\r\n\t\tRELATIVE_PART$ = subexp(subexp(\"\\\\/\\\\/\" + AUTHORITY$ + PATH_ABEMPTY$) + \"|\" + PATH_ABSOLUTE$ + \"|\" + PATH_NOSCHEME$ + \"|\" + PATH_EMPTY$),\r\n\t\tRELATIVE$ = subexp(RELATIVE_PART$ + subexp(\"\\\\?\" + QUERY$) + \"?\" + subexp(\"\\\\#\" + FRAGMENT$) + \"?\"),\r\n\t\tURI_REFERENCE$ = subexp(URI$ + \"|\" + RELATIVE$),\r\n\t\tABSOLUTE_URI$ = subexp(SCHEME$ + \"\\\\:\" + HIER_PART$ + subexp(\"\\\\?\" + QUERY$) + \"?\"),\r\n\t\t\r\n\t\tGENERIC_REF$ = \"^(\" + SCHEME$ + \")\\\\:\" + subexp(subexp(\"\\\\/\\\\/(\" + subexp(\"(\" + USERINFO$ + \")@\") + \"?(\" + HOST$ + \")\" + subexp(\"\\\\:(\" + PORT$ + \")\") + \"?)\") + \"?(\" + PATH_ABEMPTY$ + \"|\" + PATH_ABSOLUTE$ + \"|\" + PATH_ROOTLESS$ + \"|\" + PATH_EMPTY$ + \")\") + subexp(\"\\\\?(\" + QUERY$ + \")\") + \"?\" + subexp(\"\\\\#(\" + FRAGMENT$ + \")\") + \"?$\",\r\n\t\tRELATIVE_REF$ = \"^(){0}\" + subexp(subexp(\"\\\\/\\\\/(\" + subexp(\"(\" + USERINFO$ + \")@\") + \"?(\" + HOST$ + \")\" + subexp(\"\\\\:(\" + PORT$ + \")\") + \"?)\") + \"?(\" + PATH_ABEMPTY$ + \"|\" + PATH_ABSOLUTE$ + \"|\" + PATH_NOSCHEME$ + \"|\" + PATH_EMPTY$ + \")\") + subexp(\"\\\\?(\" + QUERY$ + \")\") + \"?\" + subexp(\"\\\\#(\" + FRAGMENT$ + \")\") + \"?$\",\r\n\t\tABSOLUTE_REF$ = \"^(\" + SCHEME$ + \")\\\\:\" + subexp(subexp(\"\\\\/\\\\/(\" + subexp(\"(\" + USERINFO$ + \")@\") + \"?(\" + HOST$ + \")\" + subexp(\"\\\\:(\" + PORT$ + \")\") + \"?)\") + \"?(\" + PATH_ABEMPTY$ + \"|\" + PATH_ABSOLUTE$ + \"|\" + PATH_ROOTLESS$ + \"|\" + PATH_EMPTY$ + \")\") + subexp(\"\\\\?(\" + QUERY$ + \")\") + \"?$\",\r\n\t\tSAMEDOC_REF$ = \"^\" + subexp(\"\\\\#(\" + FRAGMENT$ + \")\") + \"?$\",\r\n\t\tAUTHORITY_REF$ = \"^\" + subexp(\"(\" + USERINFO$ + \")@\") + \"?(\" + HOST$ + \")\" + subexp(\"\\\\:(\" + PORT$ + \")\") + \"?$\",\r\n\t\t\r\n\t\tURI_REF = new RegExp(\"(\" + GENERIC_REF$ + \")|(\" + RELATIVE_REF$ + \")\"),\r\n\t\tNOT_SCHEME = new RegExp(mergeSet(\"[^]\", ALPHA$$, DIGIT$$, \"[\\\\+\\\\-\\\\.]\"), \"g\"),\r\n\t\tNOT_USERINFO = new RegExp(mergeSet(\"[^\\\\%\\\\:]\", UNRESERVED$$, SUB_DELIMS$$), \"g\"),\r\n\t\tNOT_HOST = new RegExp(mergeSet(\"[^\\\\%]\", UNRESERVED$$, SUB_DELIMS$$), \"g\"),\r\n\t\tNOT_PATH = new RegExp(mergeSet(\"[^\\\\%\\\\/\\\\:\\\\@]\", UNRESERVED$$, SUB_DELIMS$$), \"g\"),\r\n\t\tNOT_PATH_NOSCHEME = new RegExp(mergeSet(\"[^\\\\%\\\\/\\\\@]\", UNRESERVED$$, SUB_DELIMS$$), \"g\"),\r\n\t\tNOT_QUERY = new RegExp(mergeSet(\"[^\\\\%]\", UNRESERVED$$, SUB_DELIMS$$, \"[\\\\:\\\\@\\\\/\\\\?]\"), \"g\"),\r\n\t\tNOT_FRAGMENT = NOT_QUERY,\r\n\t\tESCAPE = new RegExp(mergeSet(\"[^]\", UNRESERVED$$, SUB_DELIMS$$), \"g\"),\r\n\t\tUNRESERVED = new RegExp(UNRESERVED$$, \"g\"),\r\n\t\tOTHER_CHARS = new RegExp(mergeSet(\"[^\\\\%]\", UNRESERVED$$, RESERVED$$), \"g\"),\r\n\t\tPCT_ENCODEDS = new RegExp(PCT_ENCODED$ + \"+\", \"g\"),\r\n\t\tURI_PARSE = /^(?:([^:\\/?#]+):)?(?:\\/\\/((?:([^\\/?#@]*)@)?([^\\/?#:]*)(?:\\:(\\d*))?))?([^?#]*)(?:\\?([^#]*))?(?:#((?:.|\\n)*))?/i,\r\n\t\tRDS1 = /^\\.\\.?\\//,\r\n\t\tRDS2 = /^\\/\\.(\\/|$)/,\r\n\t\tRDS3 = /^\\/\\.\\.(\\/|$)/,\r\n\t\tRDS4 = /^\\.\\.?$/,\r\n\t\tRDS5 = /^\\/?(?:.|\\n)*?(?=\\/|$)/,\r\n\t\tNO_MATCH_IS_UNDEFINED = (\"\").match(/(){0}/)[1] === undefined,\r\n\t\t\r\n\t\t/**\r\n\t\t * @param {string} chr\r\n\t\t * @return {string}\r\n\t\t */\r\n\t\tpctEncChar = function (chr) {\r\n\t\t\tvar c = chr.charCodeAt(0), e;\r\n \r\n\t\t\tif (c < 16) {\r\n\t\t\t\te = \"%0\" + c.toString(16).toUpperCase();\r\n\t\t\t}\r\n\t\t\telse if (c < 128) {\r\n\t\t\t\te = \"%\" + c.toString(16).toUpperCase();\r\n\t\t\t}\r\n\t\t\telse if (c < 2048) {\r\n\t\t\t\te = \"%\" + ((c >> 6) | 192).toString(16).toUpperCase() + \"%\" + ((c & 63) | 128).toString(16).toUpperCase();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\te = \"%\" + ((c >> 12) | 224).toString(16).toUpperCase() + \"%\" + (((c >> 6) & 63) | 128).toString(16).toUpperCase() + \"%\" + ((c & 63) | 128).toString(16).toUpperCase();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn e;\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * @param {string} str\r\n\t\t * @return {string}\r\n\t\t */\r\n\t\tpctDecUnreserved = function (str) {\r\n\t\t\tvar newStr = \"\", \r\n\t\t\t\ti = 0,\r\n\t\t\t\tc, s;\r\n\t \r\n\t\t\twhile (i < str.length) {\r\n\t\t\t\tc = parseInt(str.substr(i + 1, 2), 16);\r\n\t \r\n\t\t\t\tif (c < 128) {\r\n\t\t\t\t\ts = String.fromCharCode(c);\r\n\t\t\t\t\tif (s.match(UNRESERVED)) {\r\n\t\t\t\t\t\tnewStr += s;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tnewStr += str.substr(i, 3);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ti += 3;\r\n\t\t\t\t}\r\n\t\t\t\telse if ((c > 191) && (c < 224)) {\r\n\t\t\t\t\tnewStr += str.substr(i, 6);\r\n\t\t\t\t\ti += 6;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tnewStr += str.substr(i, 9);\r\n\t\t\t\t\ti += 9;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t \r\n\t\t\treturn newStr;\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * @param {string} str\r\n\t\t * @return {string}\r\n\t\t */\r\n\t\tpctDecChars = function (str) {\r\n\t\t\tvar newStr = \"\", \r\n\t\t\t\ti = 0,\r\n\t\t\t\tc, c2, c3;\r\n\t \r\n\t\t\twhile (i < str.length) {\r\n\t\t\t\tc = parseInt(str.substr(i + 1, 2), 16);\r\n\t \r\n\t\t\t\tif (c < 128) {\r\n\t\t\t\t\tnewStr += String.fromCharCode(c);\r\n\t\t\t\t\ti += 3;\r\n\t\t\t\t}\r\n\t\t\t\telse if ((c > 191) && (c < 224)) {\r\n\t\t\t\t\tc2 = parseInt(str.substr(i + 4, 2), 16);\r\n\t\t\t\t\tnewStr += String.fromCharCode(((c & 31) << 6) | (c2 & 63));\r\n\t\t\t\t\ti += 6;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tc2 = parseInt(str.substr(i + 4, 2), 16);\r\n\t\t\t\t\tc3 = parseInt(str.substr(i + 7, 2), 16);\r\n\t\t\t\t\tnewStr += String.fromCharCode(((c & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));\r\n\t\t\t\t\ti += 9;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t \r\n\t\t\treturn newStr;\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * @return {string}\r\n\t\t */\r\n\t\ttypeOf = function (o) {\r\n\t\t\treturn o === undefined ? \"undefined\" : (o === null ? \"null\" : Object.prototype.toString.call(o).split(\" \").pop().split(\"]\").shift().toLowerCase());\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * @constructor\r\n\t\t * @implements URIComponents\r\n\t\t */\r\n\t\tComponents = function () {\r\n\t\t\tthis.errors = [];\r\n\t\t}, \r\n\t\t\r\n\t\t/** @namespace */ \r\n\t\tURI = exports;\r\n\t\r\n\t/**\r\n\t * Components\r\n\t */\r\n\t\r\n\tComponents.prototype = {\r\n\t\t/**\r\n\t\t * @type String\r\n\t\t */\r\n\t\t\r\n\t\tscheme : undefined,\r\n\t\t\r\n\t\t/**\r\n\t\t * @type String\r\n\t\t */\r\n\t\t\r\n\t\tuserinfo : undefined,\r\n\t\t\r\n\t\t/**\r\n\t\t * @type String\r\n\t\t */\r\n\t\t\r\n\t\thost : undefined,\r\n\t\t\r\n\t\t/**\r\n\t\t * @type number\r\n\t\t */\r\n\t\t\r\n\t\tport : undefined,\r\n\t\t\r\n\t\t/**\r\n\t\t * @type string\r\n\t\t */\r\n\t\t\r\n\t\tpath : undefined,\r\n\t\t\r\n\t\t/**\r\n\t\t * @type string\r\n\t\t */\r\n\t\t\r\n\t\tquery : undefined,\r\n\t\t\r\n\t\t/**\r\n\t\t * @type string\r\n\t\t */\r\n\t\t\r\n\t\tfragment : undefined,\r\n\t\t\r\n\t\t/**\r\n\t\t * @type string\r\n\t\t * @values \"uri\", \"absolute\", \"relative\", \"same-document\"\r\n\t\t */\r\n\t\t\r\n\t\treference : undefined,\r\n\t\t\r\n\t\t/**\r\n\t\t * @type Array\r\n\t\t */\r\n\t\t\r\n\t\terrors : undefined\r\n\t};\r\n\t\r\n\t/**\r\n\t * URI\r\n\t */\r\n\t\r\n\t/**\r\n\t * @namespace\r\n\t */\r\n\t\r\n\tURI.SCHEMES = {};\r\n\t\r\n\t/**\r\n\t * @param {string} uriString\r\n\t * @param {Options} [options]\r\n\t * @returns {URIComponents}\r\n\t */\r\n\t\r\n\tURI.parse = function (uriString, options) {\r\n\t\tvar matches, \r\n\t\t\tcomponents = new Components(),\r\n\t\t\tschemeHandler;\r\n\t\t\r\n\t\turiString = uriString ? uriString.toString() : \"\";\r\n\t\toptions = options || {};\r\n\t\t\r\n\t\tif (options.reference === \"suffix\") {\r\n\t\t\turiString = (options.scheme ? options.scheme + \":\" : \"\") + \"//\" + uriString;\r\n\t\t}\r\n\t\t\r\n\t\tmatches = uriString.match(URI_REF);\r\n\t\t\r\n\t\tif (matches) {\r\n\t\t\tif (matches[1]) {\r\n\t\t\t\t//generic URI\r\n\t\t\t\tmatches = matches.slice(1, 10);\r\n\t\t\t} else {\r\n\t\t\t\t//relative URI\r\n\t\t\t\tmatches = matches.slice(10, 19);\r\n\t\t\t}\r\n\t\t} \r\n\t\t\r\n\t\tif (!matches) {\r\n\t\t\tif (!options.tolerant) {\r\n\t\t\t\tcomponents.errors.push(\"URI is not strictly valid.\");\r\n\t\t\t}\r\n\t\t\tmatches = uriString.match(URI_PARSE);\r\n\t\t}\r\n\t\t\r\n\t\tif (matches) {\r\n\t\t\tif (NO_MATCH_IS_UNDEFINED) {\r\n\t\t\t\t//store each component\r\n\t\t\t\tcomponents.scheme = matches[1];\r\n\t\t\t\t//components.authority = matches[2];\r\n\t\t\t\tcomponents.userinfo = matches[3];\r\n\t\t\t\tcomponents.host = matches[4];\r\n\t\t\t\tcomponents.port = parseInt(matches[5], 10);\r\n\t\t\t\tcomponents.path = matches[6] || \"\";\r\n\t\t\t\tcomponents.query = matches[7];\r\n\t\t\t\tcomponents.fragment = matches[8];\r\n\t\t\t\t\r\n\t\t\t\t//fix port number\r\n\t\t\t\tif (isNaN(components.port)) {\r\n\t\t\t\t\tcomponents.port = matches[5];\r\n\t\t\t\t}\r\n\t\t\t} else {  //IE FIX for improper RegExp matching\r\n\t\t\t\t//store each component\r\n\t\t\t\tcomponents.scheme = matches[1] || undefined;\r\n\t\t\t\t//components.authority = (uriString.indexOf(\"//\") !== -1 ? matches[2] : undefined);\r\n\t\t\t\tcomponents.userinfo = (uriString.indexOf(\"@\") !== -1 ? matches[3] : undefined);\r\n\t\t\t\tcomponents.host = (uriString.indexOf(\"//\") !== -1 ? matches[4] : undefined);\r\n\t\t\t\tcomponents.port = parseInt(matches[5], 10);\r\n\t\t\t\tcomponents.path = matches[6] || \"\";\r\n\t\t\t\tcomponents.query = (uriString.indexOf(\"?\") !== -1 ? matches[7] : undefined);\r\n\t\t\t\tcomponents.fragment = (uriString.indexOf(\"#\") !== -1 ? matches[8] : undefined);\r\n\t\t\t\t\r\n\t\t\t\t//fix port number\r\n\t\t\t\tif (isNaN(components.port)) {\r\n\t\t\t\t\tcomponents.port = (uriString.match(/\\/\\/(?:.|\\n)*\\:(?:\\/|\\?|\\#|$)/) ? matches[4] : undefined);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//determine reference type\r\n\t\t\tif (components.scheme === undefined && components.userinfo === undefined && components.host === undefined && components.port === undefined && components.path === undefined && components.query === undefined) {\r\n\t\t\t\tcomponents.reference = \"same-document\";\r\n\t\t\t} else if (components.scheme === undefined) {\r\n\t\t\t\tcomponents.reference = \"relative\";\r\n\t\t\t} else if (components.fragment === undefined) {\r\n\t\t\t\tcomponents.reference = \"absolute\";\r\n\t\t\t} else {\r\n\t\t\t\tcomponents.reference = \"uri\";\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//check for reference errors\r\n\t\t\tif (options.reference && options.reference !== \"suffix\" && options.reference !== components.reference) {\r\n\t\t\t\tcomponents.errors.push(\"URI is not a \" + options.reference + \" reference.\");\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//check if a handler for the scheme exists\r\n\t\t\tschemeHandler = URI.SCHEMES[(options.scheme || components.scheme || \"\").toLowerCase()];\r\n\t\t\tif (schemeHandler && schemeHandler.parse) {\r\n\t\t\t\t//perform extra parsing\r\n\t\t\t\tschemeHandler.parse(components, options);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tcomponents.errors.push(\"URI can not be parsed.\");\r\n\t\t}\r\n\t\t\r\n\t\treturn components;\r\n\t};\r\n\t\r\n\t/**\r\n\t * @private\r\n\t * @param {URIComponents} components\r\n\t * @returns {string|undefined}\r\n\t */\r\n\t\r\n\tURI._recomposeAuthority = function (components) {\r\n\t\tvar uriTokens = [];\r\n\t\t\r\n\t\tif (components.userinfo !== undefined) {\r\n\t\t\turiTokens.push(components.userinfo.toString().replace(NOT_USERINFO, pctEncChar));\r\n\t\t\turiTokens.push(\"@\");\r\n\t\t}\r\n\t\tif (components.host !== undefined) {\r\n\t\t\turiTokens.push(components.host.toString().toLowerCase().replace(NOT_HOST, pctEncChar));\r\n\t\t}\r\n\t\tif (typeof components.port === \"number\") {\r\n\t\t\turiTokens.push(\":\");\r\n\t\t\turiTokens.push(components.port.toString(10));\r\n\t\t}\r\n\t\t\r\n\t\treturn uriTokens.length ? uriTokens.join(\"\") : undefined;\r\n\t};\r\n\t\r\n\t/**\r\n\t * @param {string} input\r\n\t * @returns {string}\r\n\t */\r\n\t\r\n\tURI.removeDotSegments = function (input) {\r\n\t\tvar output = [], s;\r\n\t\t\r\n\t\twhile (input.length) {\r\n\t\t\tif (input.match(RDS1)) {\r\n\t\t\t\tinput = input.replace(RDS1, \"\");\r\n\t\t\t} else if (input.match(RDS2)) {\r\n\t\t\t\tinput = input.replace(RDS2, \"/\");\r\n\t\t\t} else if (input.match(RDS3)) {\r\n\t\t\t\tinput = input.replace(RDS3, \"/\");\r\n\t\t\t\toutput.pop();\r\n\t\t\t} else if (input === \".\" || input === \"..\") {\r\n\t\t\t\tinput = \"\";\r\n\t\t\t} else {\r\n\t\t\t\ts = input.match(RDS5)[0];\r\n\t\t\t\tinput = input.slice(s.length);\r\n\t\t\t\toutput.push(s);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn output.join(\"\");\r\n\t};\r\n\t\r\n\t/**\r\n\t * @param {URIComponents} components\r\n\t * @param {Options} [options]\r\n\t * @returns {string}\r\n\t */\r\n\t\r\n\tURI.serialize = function (components, options) {\r\n\t\tvar uriTokens = [], \r\n\t\t\tschemeHandler,\r\n\t\t\tauthority,\r\n\t\t\ts;\r\n\t\toptions = options || {};\r\n\t\t\r\n\t\t//check if a handler for the scheme exists\r\n\t\tschemeHandler = URI.SCHEMES[(options.scheme || components.scheme || \"\").toLowerCase()];\r\n\t\tif (schemeHandler && schemeHandler.serialize) {\r\n\t\t\t//perform extra serialization\r\n\t\t\tschemeHandler.serialize(components, options);\r\n\t\t}\r\n\t\t\r\n\t\tif (options.reference !== \"suffix\" && components.scheme) {\r\n\t\t\turiTokens.push(components.scheme.toString().toLowerCase().replace(NOT_SCHEME, \"\"));\r\n\t\t\turiTokens.push(\":\");\r\n\t\t}\r\n\t\t\r\n\t\tauthority = URI._recomposeAuthority(components);\r\n\t\tif (authority !== undefined) {\r\n\t\t\tif (options.reference !== \"suffix\") {\r\n\t\t\t\turiTokens.push(\"//\");\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\turiTokens.push(authority);\r\n\t\t\t\r\n\t\t\tif (components.path && components.path.charAt(0) !== \"/\") {\r\n\t\t\t\turiTokens.push(\"/\");\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif (components.path !== undefined) {\r\n\t\t\ts = URI.removeDotSegments(components.path.toString().replace(/%2E/ig, \".\"));\r\n\t\t\t\r\n\t\t\tif (components.scheme) {\r\n\t\t\t\ts = s.replace(NOT_PATH, pctEncChar);\r\n\t\t\t} else {\r\n\t\t\t\ts = s.replace(NOT_PATH_NOSCHEME, pctEncChar);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (authority === undefined) {\r\n\t\t\t\ts = s.replace(/^\\/\\//, \"/%2F\");  //don't allow the path to start with \"//\"\r\n\t\t\t}\r\n\t\t\turiTokens.push(s);\r\n\t\t}\r\n\t\t\r\n\t\tif (components.query !== undefined) {\r\n\t\t\turiTokens.push(\"?\");\r\n\t\t\turiTokens.push(components.query.toString().replace(NOT_QUERY, pctEncChar));\r\n\t\t}\r\n\t\t\r\n\t\tif (components.fragment !== undefined) {\r\n\t\t\turiTokens.push(\"#\");\r\n\t\t\turiTokens.push(components.fragment.toString().replace(NOT_FRAGMENT, pctEncChar));\r\n\t\t}\r\n\t\t\r\n\t\treturn uriTokens\r\n\t\t\t.join('')  //merge tokens into a string\r\n\t\t\t.replace(PCT_ENCODEDS, pctDecUnreserved)  //undecode unreserved characters\r\n\t\t\t//.replace(OTHER_CHARS, pctEncChar)  //replace non-URI characters\r\n\t\t\t.replace(/%[0-9A-Fa-f]{2}/g, function (str) {  //uppercase percent encoded characters\r\n\t\t\t\treturn str.toUpperCase();\r\n\t\t\t})\r\n\t\t;\r\n\t};\r\n\t\r\n\t/**\r\n\t * @param {URIComponents} base\r\n\t * @param {URIComponents} relative\r\n\t * @param {Options} [options]\r\n\t * @param {boolean} [skipNormalization]\r\n\t * @returns {URIComponents}\r\n\t */\r\n\t\r\n\tURI.resolveComponents = function (base, relative, options, skipNormalization) {\r\n\t\tvar target = new Components();\r\n\t\t\r\n\t\tif (!skipNormalization) {\r\n\t\t\tbase = URI.parse(URI.serialize(base, options), options);  //normalize base components\r\n\t\t\trelative = URI.parse(URI.serialize(relative, options), options);  //normalize relative components\r\n\t\t}\r\n\t\toptions = options || {};\r\n\t\t\r\n\t\tif (!options.tolerant && relative.scheme) {\r\n\t\t\ttarget.scheme = relative.scheme;\r\n\t\t\t//target.authority = relative.authority;\r\n\t\t\ttarget.userinfo = relative.userinfo;\r\n\t\t\ttarget.host = relative.host;\r\n\t\t\ttarget.port = relative.port;\r\n\t\t\ttarget.path = URI.removeDotSegments(relative.path);\r\n\t\t\ttarget.query = relative.query;\r\n\t\t} else {\r\n\t\t\tif (relative.userinfo !== undefined || relative.host !== undefined || relative.port !== undefined) {\r\n\t\t\t\t//target.authority = relative.authority;\r\n\t\t\t\ttarget.userinfo = relative.userinfo;\r\n\t\t\t\ttarget.host = relative.host;\r\n\t\t\t\ttarget.port = relative.port;\r\n\t\t\t\ttarget.path = URI.removeDotSegments(relative.path);\r\n\t\t\t\ttarget.query = relative.query;\r\n\t\t\t} else {\r\n\t\t\t\tif (!relative.path) {\r\n\t\t\t\t\ttarget.path = base.path;\r\n\t\t\t\t\tif (relative.query !== undefined) {\r\n\t\t\t\t\t\ttarget.query = relative.query;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttarget.query = base.query;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (relative.path.charAt(0) === \"/\") {\r\n\t\t\t\t\t\ttarget.path = URI.removeDotSegments(relative.path);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif ((base.userinfo !== undefined || base.host !== undefined || base.port !== undefined) && !base.path) {\r\n\t\t\t\t\t\t\ttarget.path = \"/\" + relative.path;\r\n\t\t\t\t\t\t} else if (!base.path) {\r\n\t\t\t\t\t\t\ttarget.path = relative.path;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttarget.path = base.path.slice(0, base.path.lastIndexOf(\"/\") + 1) + relative.path;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttarget.path = URI.removeDotSegments(target.path);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttarget.query = relative.query;\r\n\t\t\t\t}\r\n\t\t\t\t//target.authority = base.authority;\r\n\t\t\t\ttarget.userinfo = base.userinfo;\r\n\t\t\t\ttarget.host = base.host;\r\n\t\t\t\ttarget.port = base.port;\r\n\t\t\t}\r\n\t\t\ttarget.scheme = base.scheme;\r\n\t\t}\r\n\t\t\r\n\t\ttarget.fragment = relative.fragment;\r\n\t\t\r\n\t\treturn target;\r\n\t};\r\n\t\r\n\t/**\r\n\t * @param {string} baseURI\r\n\t * @param {string} relativeURI\r\n\t * @param {Options} [options]\r\n\t * @returns {string}\r\n\t */\r\n\t\r\n\tURI.resolve = function (baseURI, relativeURI, options) {\r\n\t\treturn URI.serialize(URI.resolveComponents(URI.parse(baseURI, options), URI.parse(relativeURI, options), options, true), options);\r\n\t};\r\n\t\r\n\t/**\r\n\t * @param {string|URIComponents} uri\r\n\t * @param {Options} options\r\n\t * @returns {string|URIComponents}\r\n\t */\r\n\t\r\n\tURI.normalize = function (uri, options) {\r\n\t\tif (typeof uri === \"string\") {\r\n\t\t\turi = URI.serialize(URI.parse(uri, options), options);\r\n\t\t} else if (typeOf(uri) === \"object\") {\r\n\t\t\turi = URI.parse(URI.serialize(uri, options), options);\r\n\t\t}\r\n\t\t\r\n\t\treturn uri;\r\n\t};\r\n\t\r\n\t/**\r\n\t * @param {string|URIComponents} uriA\r\n\t * @param {string|URIComponents} uriB\r\n\t * @param {Options} options\r\n\t */\r\n\t\r\n\tURI.equal = function (uriA, uriB, options) {\r\n\t\tif (typeof uriA === \"string\") {\r\n\t\t\turiA = URI.serialize(URI.parse(uriA, options), options);\r\n\t\t} else if (typeOf(uriA) === \"object\") {\r\n\t\t\turiA = URI.serialize(uriA, options);\r\n\t\t}\r\n\t\t\r\n\t\tif (typeof uriB === \"string\") {\r\n\t\t\turiB = URI.serialize(URI.parse(uriB, options), options);\r\n\t\t} else if (typeOf(uriB) === \"object\") {\r\n\t\t\turiB = URI.serialize(uriB, options);\r\n\t\t}\r\n\t\t\r\n\t\treturn uriA === uriB;\r\n\t};\r\n\t\r\n\t/**\r\n\t * @param {string} str\r\n\t * @returns {string}\r\n\t */\r\n\t\r\n\tURI.escapeComponent = function (str) {\r\n\t\treturn str && str.toString().replace(ESCAPE, pctEncChar);\r\n\t};\r\n\t\r\n\t/**\r\n\t * @param {string} str\r\n\t * @returns {string}\r\n\t */\r\n\t\r\n\tURI.unescapeComponent = function (str) {\r\n\t\treturn str && str.toString().replace(PCT_ENCODEDS, pctDecChars);\r\n\t};\r\n\t\r\n\t//export API\r\n\texports.pctEncChar = pctEncChar;\r\n\texports.pctDecChars = pctDecChars;\r\n\texports.Components = Components;\r\n\texports.URI = URI;\r\n\t\r\n\t//name-safe export API\r\n\texports[\"pctEncChar\"] = pctEncChar;\r\n\texports[\"pctDecChars\"] = pctDecChars;\r\n\texports[\"Components\"] = Components;\r\n\texports[\"URI\"] = {\r\n\t\t\"SCHEMES\" : URI.SCHEMES,\r\n\t\t\"parse\" : URI.parse,\r\n\t\t\"removeDotSegments\" : URI.removeDotSegments,\r\n\t\t\"serialize\" : URI.serialize,\r\n\t\t\"resolveComponents\" : URI.resolveComponents,\r\n\t\t\"resolve\" : URI.resolve,\r\n\t\t\"normalize\" : URI.normalize,\r\n\t\t\"equal\" : URI.equal,\r\n\t\t\"escapeComponent\" : URI.escapeComponent,\r\n\t\t\"unescapeComponent\" : URI.unescapeComponent\r\n\t};\r\n\t\r\n\t//load all schemes\r\n\trequire(\"./schemes\");\r\n\t\r\n\treturn URI;\r\n}());\n},{\"./schemes\":4}],8:[function(require,module,exports){\nvar _global = (function() { return this; })();\nvar nativeWebSocket = _global.WebSocket || _global.MozWebSocket;\n\n\n/**\n * Expose a W3C WebSocket class with just one or two arguments.\n */\nfunction W3CWebSocket(uri, protocols) {\n\tvar native_instance;\n\n\tif (protocols) {\n\t\tnative_instance = new nativeWebSocket(uri, protocols);\n\t}\n\telse {\n\t\tnative_instance = new nativeWebSocket(uri);\n\t}\n\n\t/**\n\t * 'native_instance' is an instance of nativeWebSocket (the browser's WebSocket\n\t * class). Since it is an Object it will be returned as it is when creating an\n\t * instance of W3CWebSocket via 'new W3CWebSocket()'.\n\t *\n\t * ECMAScript 5: http://bclary.com/2004/11/07/#a-13.2.2\n\t */\n\treturn native_instance;\n}\n\n\n/**\n * Module exports.\n */\nmodule.exports = {\n    'w3cwebsocket' : nativeWebSocket ? W3CWebSocket : null,\n    'version'      : require('./version')\n};\n\n},{\"./version\":9}],9:[function(require,module,exports){\nmodule.exports = require('../package.json').version;\n\n},{\"../package.json\":10}],10:[function(require,module,exports){\nmodule.exports={\n  \"name\": \"websocket\",\n  \"description\": \"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.\",\n  \"keywords\": [\n    \"websocket\",\n    \"websockets\",\n    \"socket\",\n    \"networking\",\n    \"comet\",\n    \"push\",\n    \"RFC-6455\",\n    \"realtime\",\n    \"server\",\n    \"client\"\n  ],\n  \"author\": {\n    \"name\": \"Brian McKelvey\",\n    \"email\": \"brian@worlize.com\",\n    \"url\": \"https://www.worlize.com/\"\n  },\n  \"version\": \"1.0.18\",\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"https://github.com/theturtle32/WebSocket-Node.git\"\n  },\n  \"homepage\": \"https://github.com/theturtle32/WebSocket-Node\",\n  \"engines\": {\n    \"node\": \">=0.8.0\"\n  },\n  \"dependencies\": {\n    \"debug\": \"~2.1.0\",\n    \"nan\": \"~1.0.0\",\n    \"typedarray-to-buffer\": \"~3.0.0\"\n  },\n  \"devDependencies\": {\n    \"buffer-equal\": \"0.0.1\",\n    \"faucet\": \"0.0.1\",\n    \"gulp\": \"git+https://github.com/gulpjs/gulp.git#4.0\",\n    \"gulp-jshint\": \"^1.9.0\",\n    \"jshint-stylish\": \"^1.0.0\",\n    \"tape\": \"^3.0.0\"\n  },\n  \"config\": {\n    \"verbose\": false\n  },\n  \"scripts\": {\n    \"install\": \"(node-gyp rebuild 2> builderror.log) || (exit 0)\",\n    \"test\": \"faucet test/unit\",\n    \"gulp\": \"gulp\"\n  },\n  \"main\": \"index\",\n  \"directories\": {\n    \"lib\": \"./lib\"\n  },\n  \"browser\": \"lib/browser.js\",\n  \"gitHead\": \"2888a6d8c6ea0211b429000d43ed5da76124733f\",\n  \"bugs\": {\n    \"url\": \"https://github.com/theturtle32/WebSocket-Node/issues\"\n  },\n  \"_id\": \"websocket@1.0.18\",\n  \"_shasum\": \"140280dcc90ed42caa7a701e182a8c9e2dec75ef\",\n  \"_from\": \"websocket@>=1.0.18 <2.0.0\",\n  \"_npmVersion\": \"2.6.1\",\n  \"_nodeVersion\": \"1.4.3\",\n  \"_npmUser\": {\n    \"name\": \"theturtle32\",\n    \"email\": \"brian@worlize.com\"\n  },\n  \"maintainers\": [\n    {\n      \"name\": \"theturtle32\",\n      \"email\": \"brian@worlize.com\"\n    }\n  ],\n  \"dist\": {\n    \"shasum\": \"140280dcc90ed42caa7a701e182a8c9e2dec75ef\",\n    \"tarball\": \"http://registry.npmjs.org/websocket/-/websocket-1.0.18.tgz\"\n  },\n  \"_resolved\": \"https://registry.npmjs.org/websocket/-/websocket-1.0.18.tgz\",\n  \"readme\": \"ERROR: No README data found!\"\n}\n\n},{}]},{},[1])(1)\n});"],"sourceRoot":"/source/"}