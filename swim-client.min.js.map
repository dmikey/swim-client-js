{"version":3,"sources":["swim-client.min.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","swim","client","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length",1,"coerce","arguments","item","undefined","Absent","Extant","isAttr","isSlot","builder","RecordBuilder","appendField","state","coerceItem","coerceArray","isRecord","Uint8Array","Array","isArray","toRecon","coerceObject","array","value","isField","appendValue","object","prop","key","attrs","isAbsent","Attr","Slot","parse","string","input","StringIterator","result","DocumentParser","run","stringify","writer","ReconWriter","writeBlock","apply","objectify","isExtant","objectifyArray","objectifyObject","record","items","iterator","isEmpty","head","push","step","base64","data","DataBuilder","cs","appendBase64Char","attr","slot","empty","Record","compare","x","y","equals","index","__proto__","prototype","Object","defineProperty","Field","enumerable","RecordIterator","writable","ValueBuilder","StringIteratee","StringBuilder","isSpace","c","isNewline","isWhitespace","isNameStartChar","isNameChar","isBase64Char","BlockParser","AttrParser","ident","IdentParser","BlockValueParser","field","InlineValueParser","RecordParser","MarkupParser","text","StringParser","NumberParser","DataParser","create","Function","constructor","get","getOwnPropertyNames","isBlockSafe","next","isMarkupSafe","contains","tail","slice","body","foot","target","these","concat","appendRecord","that","forEach","those","toString","writeRecord","writeAttr","writeItem","dup","toRecord","isDone","c1","charCodeAt","c2","Done","isCont","isError","feed","error","unexpectedEOF","append","String","fromCharCode","appendString","prepare","size","expand","base","Math","max","aliased","buffer","set","appendByte","offset","decodeBase64Digit","decodeBase64Quantum","p","q","z","w","subarray","found","expected","Number","writeValue","writeText","writeNumber","writeBool","writeData","writeIdent","writeItems","inBlock","inMarkup","inBraces","inBrackets","first","writeMarkupText","isIdent","writeString","number","bool","encodeBase64Digit","extant","absent",2,"decode","heading","EventMessage","CommandMessage","SyncRequest","SyncedResponse","LinkRequest","LinkedResponse","UnlinkRequest","UnlinkedResponse","GetRequest","PutRequest","StateResponse","encode","envelope","recon","Envelope","RequestEnvelope","ResponseEnvelope","MessageEnvelope","node","lane","via","headers","header","recon-js",3,"punycode","type","RangeError","errors","map","fn","mapDomain","parts","split","replace","regexSeparators","labels","encoded","join","ucs2decode","extra","output","counter","ucs2encode","stringFromCharCode","basicToDigit","codePoint","digitToBasic","digit","flag","adapt","delta","numPoints","firstTime","k","floor","damp","baseMinusTMin","tMax","skew","out","basic","j","oldi","baseMinusT","inputLength","initialN","bias","initialBias","lastIndexOf","delimiter","maxInt","tMin","splice","handledCPCount","basicLength","m","currentValue","handledCPCountPlusOne","qMinusT","toUnicode","regexPunycode","test","toLowerCase","toASCII","regexNonASCII","overflow","not-basic","invalid-input","version","ucs2","COMPILED",4,"./schemes/http","./schemes/mailto","./schemes/urn",5,"URI","SCHEMES","domainHost","components","options","host","serialize","port","scheme","path","../uri",6,"merge","sets","_i","xl","subexp","str","toUpperCase","decodeUnreserved","decStr","pctDecChars","match","UNRESERVED","toArray","obj","callee","setInterval","O","isIRI","IRI_SUPPORT","UNRESERVED$$","HEXDIG$$","PCT_ENCODED$","ATEXT$$","QTEXT$$","VCHAR$$","DOT_ATOM_TEXT$","QUOTED_PAIR$","QCONTENT$","QUOTED_STRING$","DTEXT_NO_OBS$$","SOME_DELIMS$$","QCHAR$","DOMAIN$","LOCAL_PART$","ADDR_SPEC$","TO$","HFNAME$","HFVALUE$","HFIELD$","HFIELDS2$","HFIELDS$","VALIDATE_SUPPORT","RegExp","PCT_ENCODED","NOT_LOCAL_PART","NOT_DOMAIN","NOT_HFNAME","NOT_HFVALUE","TO","HFIELDS","query","to","unknownHeaders","hfields","hfield","toAddrs","x_1","xl_1","subject","unescapeComponent","addr","unicodeSupport","toAddr","atIdx","localPart","domain","pctEncChar","iri","fields","name_1","../punycode",7,"NID$","TRANS$$","NSS$","URN_SCHEME","URN_PATH","URN_PARSE","URN_EXCLUDED","UUID","schemeHandler","matches","tolerant",8,"URI__IRI_SUPPORT","URI__VALIDATE_SUPPORT","buildExps","ALPHA$$","DIGIT$$","GEN_DELIMS$$","SUB_DELIMS$$","RESERVED$$","UCSCHAR$$","IPRIVATE$$","SCHEME$","USERINFO$","DEC_OCTET$","IPV4ADDRESS$","H16$","IPV6ADDRESS$","IPVFUTURE$","IP_LITERAL$","REG_NAME$","HOST$","PORT$","AUTHORITY$","PCHAR$","SEGMENT$","SEGMENT_NZ$","SEGMENT_NZ_NC$","PATH_ABEMPTY$","PATH_ABSOLUTE$","PATH_NOSCHEME$","PATH_ROOTLESS$","PATH_EMPTY$","QUERY$","FRAGMENT$","HIER_PART$","URI$","RELATIVE_PART$","RELATIVE$","GENERIC_REF$","RELATIVE_REF$","URI_REF","NOT_SCHEME","NOT_USERINFO","NOT_HOST","NOT_PATH","NOT_PATH_NOSCHEME","NOT_QUERY","NOT_FRAGMENT","ESCAPE","OTHER_CHARS","chr","c3","newStr","il","parseInt","substr","typeOf","pop","shift","_normalizeComponentEncoding","protocol","userinfo","fragment","uriString","IRI_PROTOCOL","URI_PROTOCOL","parseError","reference","URI_PARSE","NO_MATCH_IS_UNDEFINED","isNaN","indexOf","_recomposeAuthority","uriTokens","removeDotSegments","RDS1","RDS2","RDS3","RDS5","authority","charAt","absolutePath","resolveComponents","relative","skipNormalization","resolve","baseURI","relativeURI","normalize","uri","equal","uriA","uriB","escapeComponent","./punycode","./schemes",9,"W3CWebSocket","protocols","native_instance","nativeWebSocket","_global","WebSocket","MozWebSocket","w3cwebsocket","./version",10,"../package.json",11,"name","description","keywords","author","email","url","repository","homepage","engines","dependencies","debug","nan","typedarray-to-buffer","devDependencies","buffer-equal","faucet","gulp","gulp-jshint","jshint-stylish","tape","config","verbose","scripts","install","main","directories","lib","browser","license","gitHead","bugs","_id","_shasum","_from","_npmVersion","_nodeVersion","_npmUser","maintainers","dist","shasum","tarball","_resolved","readme",12,"nop","link","handle","Channel","unlink","sendEvent","sendCommand","put","reset","endpoint","bridge","channel","sendBuffer","unlinkAll","close","linkCount","linkHandles","stateHandles","reconnectTimeout","reconnectTime","closed","open","proto","WS","SEND_BUFFER_SIZE","LINK_FAILED","LINK_BROKEN","LINK_WANTED","LINK_ACTIVE","socket","onopen","onOpen","bind","onclose","onClose","onmessage","onFrame","onerror","send","readyState","OPEN","isLinkRequest","isUnlinkRequest","clearTimeout","nodeHandles","unresolve","laneHandles","__state__","status","onBroken","setTimeout","min","frame","payload","onReceive","onEvent","onCommand","onLinked","onUnlinked","onUnbroken","onFailed","unlinked","request","keys","message","onState","handles","isEventMessage","onMessage","isCommandMessage","isStateResponse","isLinkedResponse","isUnlinkedResponse","parentLane","substring","swim-proto-js","uri-js","websocket"],"mappings":"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","file":"swim-client.min.js","sourcesContent":["(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}(g.swim || (g.swim = {})).client = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nfunction coerce() {\n  if (arguments.length === 1) {\n    var item = arguments[0];\n    if (item === undefined) return Absent;\n    else if (item === null) return Extant;\n    else if (item.isAttr || item.isSlot) {\n      var builder = new RecordBuilder();\n      builder.appendField(item);\n      return builder.state();\n    }\n    else return coerceItem(item);\n  }\n  else if (arguments.length > 1) return coerceArray(arguments);\n  else return Absent;\n}\nfunction coerceItem(item) {\n  if (item === null) return Extant;\n  else if (item.isRecord ||\n           item.isAttr ||\n           item.isSlot ||\n           typeof item === 'string' ||\n           typeof item === 'number' ||\n           typeof item === 'boolean' ||\n           item instanceof Uint8Array ||\n           item === Extant ||\n           item === Absent) return item;\n  else if (Array.isArray(item)) return coerceArray(item);\n  else if (typeof item === 'object') {\n    if (item.toRecon && typeof item.toRecon === 'function') return item.toRecon();\n    else return coerceObject(item);\n  }\n  else return Absent;\n}\nfunction coerceArray(array) {\n  var builder = new RecordBuilder();\n  var n = array.length;\n  var i = 0;\n  while (i < n) {\n    var value = coerceItem(array[i]);\n    if (value.isField) builder.appendField(value);\n    else builder.appendValue(value);\n    i += 1;\n  }\n  return builder.state();\n}\nfunction coerceObject(object) {\n  var builder = new RecordBuilder();\n  var prop, key, value;\n  var attrs = object['@'];\n  for (prop in attrs) {\n    key = coerce(prop);\n    if (typeof key === 'string') {\n      value = coerce(attrs[prop]);\n      if (!value.isAbsent) builder.appendField(new Attr(key, value));\n    }\n  }\n  for (prop in object) {\n    if (prop !== '@') {\n      key = coerce(prop);\n      if (!key.isAbsent) {\n        value = coerce(object[prop]);\n        if (!value.isAbsent) builder.appendField(new Slot(key, value));\n      }\n    }\n  }\n  return builder.state();\n}\n\nfunction parse(string) {\n  var input = new StringIterator(string);\n  var result = new DocumentParser().run(input);\n  return result.state();\n}\n\nfunction stringify() {\n  var writer = new ReconWriter();\n  writer.writeBlock(coerce.apply(null, arguments));\n  return writer.state();\n}\n\nfunction objectify(value) {\n  if (value === undefined || value === null || value.isExtant) return null;\n  else if (value.isAbsent) return undefined;\n  else if (value.isRecord) {\n    if (value.isArray()) return objectifyArray(value);\n    else return objectifyObject(value);\n  }\n  else return value;\n}\nfunction objectifyArray(record) {\n  var array = [];\n  var items = record.iterator();\n  while (!items.isEmpty()) {\n    var value = objectify(items.head());\n    array.push(value);\n    items.step();\n  }\n  return array;\n}\nfunction objectifyObject(record) {\n  var items = record.iterator();\n  var key, value;\n  var object = {};\n  var attrs = null;\n  var i = 0;\n  while (!items.isEmpty()) {\n    var item = items.head();\n    if (item.isField) {\n      key = objectify(item.key);\n      value = objectify(item.value);\n      if (item.isAttr) {\n        if (attrs === null) attrs = {};\n        attrs[key] = value;\n      }\n      else object[key] = value;\n    }\n    else {\n      value = objectify(item);\n      object[i] = value;\n    }\n    items.step();\n    i += 1;\n  }\n  if (attrs !== null) object['@'] = attrs;\n  return object;\n}\n\nfunction base64(string) {\n  if (string === undefined) return new Uint8Array(0);\n  var data = new DataBuilder();\n  var cs = new StringIterator(string);\n  while (!cs.isEmpty()) {\n    data.appendBase64Char(cs.head());\n    cs.step();\n  }\n  return data.state();\n}\n\nfunction attr(key, value) {\n  if (value === undefined) value = Extant;\n  return new Attr(coerce(key), coerce(value));\n}\n\nfunction slot(key, value) {\n  if (value === undefined) value = Extant;\n  return new Slot(coerce(key), coerce(value));\n}\n\nfunction empty() {\n  return new Record([], {});\n}\n\nfunction builder() {\n  return new RecordBuilder();\n}\n\nfunction compare(x, y) {\n  if (x === y) return true;\n  if (x.isRecord && y.isRecord) return x.equals(y);\n  if (x.isField && y.isField) return x.equals(y);\n  if (x instanceof Uint8Array && y instanceof Uint8Array && x.length === y.length) {\n    var i = 0;\n    var n = x.length;\n    while (i < n && x[i] === y[i]) i += 1;\n    if (i === n) return true;\n  }\n  return false;\n}\n\n\nfunction Record(items, index) {\n  if (index === undefined) {\n    index = {};\n    var i = 0;\n    var n = items.length;\n    while (i < n) {\n      var item = items[i];\n      if (item.isField) index[item.key] = item.value;\n      i += 1;\n    }\n  }\n  var record = function (key) {\n    var value = index[key];\n    if (value === undefined && typeof key === 'number') value = items[key];\n    return value;\n  };\n  record.__proto__ = Record.prototype;\n  Object.defineProperty(record, 'items', {value: items});\n  Object.defineProperty(record, 'index', {value: index});\n  return record;\n}\nRecord.prototype = Object.create(Function.prototype);\nRecord.prototype.constructor = Record;\nObject.defineProperty(Record.prototype, 'isRecord', {enumerable: true, value: true});\nObject.defineProperty(Record.prototype, 'size', {\n  enumerable: true,\n  get: function () {\n    return this.items.length;\n  }\n});\nRecord.prototype.isEmpty = function () {\n  return this.items.length === 0;\n};\nRecord.prototype.isArray = function () {\n  return this.items.length >= 0 && Object.getOwnPropertyNames(this.index).length === 0;\n};\nRecord.prototype.isBlockSafe = function () {\n  var items = this.iterator();\n  while (!items.isEmpty()) {\n    if (items.next().isAttr) return false;\n  }\n  return true;\n};\nRecord.prototype.isMarkupSafe = function () {\n  var items = this.iterator();\n  if (items.isEmpty() || !items.next().isAttr) return false;\n  while (!items.isEmpty()) {\n    if (items.next().isAttr) return false;\n  }\n  return true;\n};\nRecord.prototype.contains = function (key) {\n  return this(key) !== undefined;\n};\nRecord.prototype.head = function () {\n  return this.items.length > 0 ? this.items[0] : Absent;\n};\nRecord.prototype.tail = function () {\n  return new Record(this.items.slice(1));\n};\nRecord.prototype.body = function () {\n  return new Record(this.items.slice(0, -1));\n};\nRecord.prototype.foot = function () {\n  return this.items.length > 0 ? this.items[this.items.length - 1] : Absent;\n};\nRecord.prototype.target = function () {\n  var these = this.iterator();\n  while (!these.isEmpty()) {\n    var item = these.next();\n    if (!item.isField) return item;\n  }\n  return Absent;\n};\nRecord.prototype.concat = function () {\n  var builder = new RecordBuilder();\n  builder.appendRecord(this);\n  var that = coerce.apply(null, arguments);\n  if (that.isRecord) builder.appendRecord(that);\n  else builder.appendValue(that);\n  return builder.state();\n};\nRecord.prototype.iterator = function () {\n  return new RecordIterator(this.items);\n};\nRecord.prototype.forEach = function (f) {\n  var these = this.iterator();\n  while (!these.isEmpty()) f(these.next());\n};\nRecord.prototype.equals = function (that) {\n  var these = this.iterator();\n  var those = that.iterator();\n  while (!these.isEmpty() && !those.isEmpty()) {\n    if (!compare(these.next(), those.next())) return false;\n  }\n  return these.isEmpty() && those.isEmpty();\n};\nRecord.prototype.toString = function () {\n  var writer = new ReconWriter();\n  writer.writeRecord(this);\n  return writer.state();\n};\n\n\nfunction Field() {}\nObject.defineProperty(Field.prototype, 'isField', {enumerable: true, value: true});\nObject.defineProperty(Field.prototype, 'isAttr', {enumerable: true, value: false});\nObject.defineProperty(Field.prototype, 'isSlot', {enumerable: true, value: false});\n\nfunction Attr(key, value) {\n  Field.call(this);\n  Object.defineProperty(this, 'key', {enumerable: true, value: key});\n  if (value === undefined) value = Extant;\n  Object.defineProperty(this, 'value', {enumerable: true, value: value});\n}\nAttr.prototype = Object.create(Field.prototype);\nAttr.prototype.constructor = Attr;\nObject.defineProperty(Attr.prototype, 'isAttr', {enumerable: true, value: true});\nAttr.prototype.equals = function (that) {\n  return that.isAttr && compare(this.key, that.key) && compare(this.value, that.value);\n};\nAttr.prototype.toString = function () {\n  var writer = new ReconWriter();\n  writer.writeAttr(this);\n  return writer.state();\n};\n\nfunction Slot(key, value) {\n  Field.call(this);\n  Object.defineProperty(this, 'key', {enumerable: true, value: key});\n  if (value === undefined) value = Extant;\n  Object.defineProperty(this, 'value', {enumerable: true, value: value});\n}\nSlot.prototype = Object.create(Field.prototype);\nSlot.prototype.constructor = Slot;\nObject.defineProperty(Slot.prototype, 'isSlot', {enumerable: true, value: true});\nSlot.prototype.equals = function (that) {\n  return that.isSlot && compare(this.key, that.key) && compare(this.value, that.value);\n};\nSlot.prototype.toString = function () {\n  var writer = new ReconWriter();\n  writer.writeItem(this);\n  return writer.state();\n};\n\n\nvar Extant = {};\nObject.defineProperty(Extant, 'isExtant', {enumerable: true, value: true});\n\nvar Absent = {};\nObject.defineProperty(Absent, 'isAbsent', {enumerable: true, value: true});\n\n\nfunction RecordIterator(items, index) {\n  Object.defineProperty(this, 'items', {value: items});\n  Object.defineProperty(this, 'index', {value: index || 0, writable: true});\n}\nRecordIterator.prototype.isEmpty = function () {\n  return this.index >= this.items.length;\n};\nRecordIterator.prototype.head = function () {\n  if (this.index >= this.items.length) throw 'head of empty iterator';\n  return this.items[this.index];\n};\nRecordIterator.prototype.step = function () {\n  if (this.index >= this.items.length) throw 'empty iterator step';\n  this.index += 1;\n};\nRecordIterator.prototype.next = function () {\n  if (this.index >= this.items.length) return null;\n  var item = this.items[this.index];\n  this.index += 1;\n  return item;\n};\nRecordIterator.prototype.dup = function () {\n  return new RecordIterator(this.items, this.index);\n};\nRecordIterator.prototype.toRecord = function () {\n  return new Record(this.items.slice(this.index));\n};\n\n\nfunction RecordBuilder() {\n  Object.defineProperty(this, 'items', {value: []});\n  Object.defineProperty(this, 'index', {value: {}});\n}\nRecordBuilder.prototype.appendField = function (field) {\n  this.items.push(field);\n  this.index[field.key] = field.value;\n};\nRecordBuilder.prototype.appendValue = function (value) {\n  this.items.push(value);\n};\nRecordBuilder.prototype.appendRecord = function (record) {\n  var items = record.iterator();\n  while (!items.isEmpty()) {\n    var item = items.next();\n    if (item.isField) this.appendField(item);\n    else this.appendValue(item);\n  }\n};\nRecordBuilder.prototype.attr = function (key, value) {\n  this.appendField(attr(key, value));\n  return this;\n};\nRecordBuilder.prototype.slot = function (key, value) {\n  this.appendField(slot(key, value));\n  return this;\n};\nRecordBuilder.prototype.item = function (value) {\n  this.appendValue(coerceItem(value));\n  return this;\n};\nRecordBuilder.prototype.state = function () {\n  return new Record(this.items, this.index);\n};\n\n\nfunction ValueBuilder() {\n  Object.defineProperty(this, 'items', {value: null, writable: true});\n  Object.defineProperty(this, 'index', {value: null, writable: true});\n  Object.defineProperty(this, 'value', {value: null, writable: true});\n}\nValueBuilder.prototype.appendField = function (field) {\n  if (this.items === null) {\n    this.items = [];\n    this.index = {};\n    if (this.value !== null) {\n      this.items.push(this.value);\n      this.value = null;\n    }\n  }\n  this.items.push(field);\n  this.index[field.key] = field.value;\n};\nValueBuilder.prototype.appendValue = function (value) {\n  if (this.items !== null) this.items.push(value);\n  else if (this.value === null) this.value = value;\n  else {\n    this.items = [];\n    this.index = {};\n    this.items.push(this.value);\n    this.value = null;\n    this.items.push(value);\n  }\n};\nValueBuilder.prototype.state = function () {\n  if (this.value !== null) return this.value;\n  else if (this.items !== null) return new Record(this.items, this.index);\n  else return Absent;\n};\n\n\nfunction StringIterator(string, index) {\n  Object.defineProperty(this, 'string', {value: string || ''});\n  Object.defineProperty(this, 'index', {value: index || 0, writable: true});\n}\nStringIterator.prototype.isDone = function () {\n  return false;\n};\nStringIterator.prototype.isEmpty = function () {\n  return this.index >= this.string.length;\n};\nStringIterator.prototype.head = function () {\n  var c1 = this.string.charCodeAt(this.index);\n  if (c1 <= 0xD7FF || c1 >= 0xE000) return c1; // U+0000..U+D7FF | U+E000..U+FFFF\n  else if (c1 <= 0xDBFF && this.index + 1 < this.string.length) { // c1 >= 0xD800\n    var c2 = this.string.charCodeAt(this.index + 1);\n    if (c2 >= 0xDC00 && c2 <= 0xDFFF) // U+10000..U+10FFFF\n      return (((c1 & 0x3FF) << 10) | (c2 & 0x3FF)) + 0x10000;\n    else return 0xFFFD;\n  }\n  else return 0xFFFD;\n};\nStringIterator.prototype.step = function () {\n  var c1 = this.string.charCodeAt(this.index);\n  if (c1 <= 0xD7FF || c1 >= 0xE000) // U+0000..U+D7FF | U+E000..U+FFFF\n    this.index += 1;\n  else if (c1 <= 0xDBFF && this.index + 1 < this.string.length) { // c1 >= 0xD800\n    var c2 = this.string.charCodeAt(this.index + 1);\n    if (c2 >= 0xDC00 && c2 <= 0xDFFF) // U+10000..U+10FFFF\n      this.index += 2;\n    else this.index += 1;\n  }\n  else this.index += 1;\n};\n\nStringIterator.Done = {\n  isDone: function () {\n    return true;\n  },\n  isEmpty: function () {\n    return true;\n  },\n  head: function () {\n    throw 'head of empty iterator';\n  },\n  step: function () {\n    throw 'empty iterator step';\n  }\n};\nStringIterator.Done.prototype = Object.create(StringIterator.prototype);\n\n\nfunction StringIteratee() {}\nStringIteratee.prototype.isCont = function () {\n  return true;\n};\nStringIteratee.prototype.isDone = function () {\n  return false;\n};\nStringIteratee.prototype.isError = function () {\n  return false;\n};\nStringIteratee.prototype.feed = function (input) {\n  return this;\n};\nStringIteratee.prototype.run = function (input) {\n  var next = this;\n  while (!input.isEmpty() && next.isCont()) next = next.feed(input);\n  if (input.isEmpty() && !input.isDone() && next.isCont()) next = next.feed(StringIterator.Done);\n  return next;\n};\n\nStringIteratee.Done = function (value) {\n  StringIteratee.call(this);\n  this.value = value;\n};\nStringIteratee.Done.prototype = Object.create(StringIteratee.prototype);\nStringIteratee.Done.prototype.constructor = StringIteratee.Done;\nStringIteratee.Done.prototype.isCont = function () {\n  return false;\n};\nStringIteratee.Done.prototype.isDone = function () {\n  return true;\n};\nStringIteratee.Done.prototype.feed = function (input) {\n  return this;\n};\nStringIteratee.Done.prototype.state = function () {\n  return this.value;\n};\n\nStringIteratee.Error = function (error) {\n  StringIteratee.call(this);\n  this.error = error;\n};\nStringIteratee.Error.prototype = Object.create(StringIteratee.prototype);\nStringIteratee.Error.prototype.constructor = StringIteratee.Error;\nStringIteratee.Error.prototype.isCont = function () {\n  return false;\n};\nStringIteratee.Error.prototype.isError = function () {\n  return true;\n};\nStringIteratee.Error.prototype.feed = function (input) {\n  return this;\n};\nStringIteratee.Error.prototype.state = function () {\n  throw this.error;\n};\n\nStringIteratee.unexpectedEOF = new StringIteratee.Error('unexpected end of input');\n\n\nfunction StringBuilder() {\n  Object.defineProperty(this, 'string', {value: '', writable: true});\n}\nStringBuilder.prototype.append = function (c) {\n  if ((c >= 0x0000 && c <= 0xD7FF) ||\n      (c >= 0xE000 && c <= 0xFFFF)) { // U+0000..U+D7FF | U+E000..U+FFFF\n    this.string += String.fromCharCode(c);\n  }\n  else if (c >= 0x10000 && c <= 0x10FFFF) { // U+10000..U+10FFFF\n    var u = c - 0x10000;\n    this.string += String.fromCharCode(0xD800 | (u >>> 10), 0xDC00 | (u & 0x3FF));\n  }\n  else { // invalid code point\n    this.string += String.fromCharCode(0xFFFD);\n  }\n};\nStringBuilder.prototype.appendString = function (s) {\n  var cs = new StringIterator(s);\n  while (!cs.isEmpty()) {\n    this.append(cs.head());\n    cs.step();\n  }\n};\nStringBuilder.prototype.state = function () {\n  return this.string;\n};\n\n\nfunction DataBuilder() {\n  Object.defineProperty(this, 'buffer', {value: null, writable: true});\n  Object.defineProperty(this, 'offset', {value: 0, writable: true});\n  Object.defineProperty(this, 'aliased', {value: true, writable: true});\n  Object.defineProperty(this, 'p', {value: 0, writable: true});\n  Object.defineProperty(this, 'q', {value: 0, writable: true});\n  Object.defineProperty(this, 'r', {value: 0, writable: true});\n  Object.defineProperty(this, 's', {value: 0, writable: true});\n}\nDataBuilder.prototype.prepare = function (size) {\n  function expand(base, size) {\n    var n = Math.max(base, size) - 1;\n    n |= n >> 1; n |= n >> 2; n |= n >> 4; n |= n >> 8;\n    return n + 1;\n  }\n  if (this.aliased || size > this.buffer.length) {\n    var array = new Uint8Array(expand(256, size));\n    if (this.buffer) array.set(this.buffer);\n    this.buffer = array;\n    this.aliased = false;\n  }\n};\nDataBuilder.prototype.appendByte = function (value) {\n  this.prepare(this.offset + 1);\n  this.buffer[this.offset] = value;\n  this.offset += 1;\n};\nDataBuilder.prototype.decodeBase64Digit = function (c) {\n  if (c >= 65/*'A'*/ && c <= 90/*'Z'*/) return c - 65/*'A'*/;\n  else if (c >= 97/*'a'*/ && c <= 122/*'z'*/) return c - 71/*'a' - 26*/;\n  else if (c >= 48/*'0'*/ && c <= 57/*'9'*/) return c + 4/*52 - '0'*/;\n  else if (c === 43/*'+'*/ || c === 45/*'-'*/) return 62;\n  else if (c === 47/*'/'*/ || c === 95/*'_'*/) return 63;\n};\nDataBuilder.prototype.decodeBase64Quantum = function () {\n  var x = this.decodeBase64Digit(this.p);\n  var y = this.decodeBase64Digit(this.q);\n  if (this.r !== 61/*'='*/) {\n    var z = this.decodeBase64Digit(this.r);\n    if (this.s !== 61/*'='*/) {\n      var w = this.decodeBase64Digit(this.s);\n      this.appendByte((x << 2) | (y >>> 4));\n      this.appendByte((y << 4) | (z >>> 2));\n      this.appendByte((z << 6) | w);\n    }\n    else {\n      this.appendByte((x << 2) | (y >>> 4));\n      this.appendByte((y << 4) | (z >>> 2));\n    }\n  }\n  else {\n    if (this.s !== 61/*'='*/) throw 'incomplete base64 quantum';\n    this.appendByte((x << 2) | (y >>> 4));\n  }\n};\nDataBuilder.prototype.appendBase64Char = function (c) {\n  if (this.p === 0) this.p = c;\n  else if (this.q === 0) this.q = c;\n  else if (this.r === 0) this.r = c;\n  else {\n    this.s = c;\n    this.decodeBase64Quantum();\n    this.s = 0;\n    this.r = 0;\n    this.q = 0;\n    this.p = 0;\n  }\n};\nDataBuilder.prototype.state = function (value) {\n  if (!this.buffer) this.buffer = new Uint8Array(0);\n  else if (this.buffer.length !== this.offset) {\n    var array = new Uint8Array(this.offset);\n    array.set(this.buffer.subarray(0, this.offset));\n    this.buffer = array;\n  }\n  this.aliased = true;\n  return this.buffer;\n};\n\n\nfunction isSpace(c) {\n  return c === 0x20 || c === 0x9;\n}\nfunction isNewline(c) {\n  return c === 0xA || c === 0xD;\n}\nfunction isWhitespace(c) {\n  return isSpace(c) || isNewline(c);\n}\nfunction isNameStartChar(c) {\n  return (\n    c >= 65/*'A'*/ && c <= 90/*'Z'*/ ||\n    c === 95/*'_'*/ ||\n    c >= 97/*'a'*/ && c <= 122/*'z'*/ ||\n    c >= 0xC0 && c <= 0xD6 ||\n    c >= 0xD8 && c <= 0xF6 ||\n    c >= 0xF8 && c <= 0x2FF ||\n    c >= 0x370 && c <= 0x37D ||\n    c >= 0x37F && c <= 0x1FFF ||\n    c >= 0x200C && c <= 0x200D ||\n    c >= 0x2070 && c <= 0x218F ||\n    c >= 0x2C00 && c <= 0x2FEF ||\n    c >= 0x3001 && c <= 0xD7FF ||\n    c >= 0xF900 && c <= 0xFDCF ||\n    c >= 0xFDF0 && c <= 0xFFFD ||\n    c >= 0x10000 && c <= 0xEFFFF);\n}\nfunction isNameChar(c) {\n  return (\n    c === 45/*'-'*/ ||\n    c >= 48/*'0'*/ && c <= 57/*'9'*/ ||\n    c >= 65/*'A'*/ && c <= 90/*'Z'*/ ||\n    c === 95/*'_'*/ ||\n    c >= 97/*'a'*/ && c <= 122/*'z'*/ ||\n    c === 0xB7 ||\n    c >= 0xC0 && c <= 0xD6 ||\n    c >= 0xD8 && c <= 0xF6 ||\n    c >= 0xF8 && c <= 0x37D ||\n    c >= 0x37F && c <= 0x1FFF ||\n    c >= 0x200C && c <= 0x200D ||\n    c >= 0x203F && c <= 0x2040 ||\n    c >= 0x2070 && c <= 0x218F ||\n    c >= 0x2C00 && c <= 0x2FEF ||\n    c >= 0x3001 && c <= 0xD7FF ||\n    c >= 0xF900 && c <= 0xFDCF ||\n    c >= 0xFDF0 && c <= 0xFFFD ||\n    c >= 0x10000 && c <= 0xEFFFF);\n}\nfunction isBase64Char(c) {\n  return (\n    c >= 48/*'0'*/ && c <= 57/*'9'*/ ||\n    c >= 65/*'A'*/ && c <= 90/*'Z'*/ ||\n    c >= 97/*'a'*/ && c <= 122/*'z'*/ ||\n    c === 43/*'+'*/ || c === 45/*'-'*/ ||\n    c === 47/*'/'*/ || c === 95/*'_'*/);\n}\n\n\nfunction DocumentParser(value) {\n  StringIteratee.call(this);\n  this.value = value || new BlockParser();\n}\nDocumentParser.prototype = Object.create(StringIteratee.prototype);\nDocumentParser.prototype.constructor = DocumentParser;\nDocumentParser.prototype.feed = function (input) {\n  var value = this.value;\n  while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n  if (value.isError()) return value;\n  if (value.isDone()) {\n    if (!input.isEmpty()) return new StringIteratee.Error({found: input.head()});\n    else if (input.isDone()) return value;\n  }\n  return new DocumentParser(value);\n};\n\n\nfunction BlockParser(builder, key, value, s) {\n  StringIteratee.call(this);\n  this.builder = builder || null;\n  this.key = key || null;\n  this.value = value || null;\n  this.s = s || 1;\n}\nBlockParser.prototype = Object.create(StringIteratee.prototype);\nBlockParser.prototype.constructor = BlockParser;\nBlockParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var value = this.value;\n  var key = this.key;\n  var builder = this.builder || new ValueBuilder();\n  while (!input.isEmpty() || input.isDone()) {\n    if (s === 1) {\n      while (!input.isEmpty() && (c = input.head(), isWhitespace(c))) input.step();\n      if (!input.isEmpty()) {\n        if (c === 64/*'@'*/ || c === 123/*'{'*/ || c === 91/*'['*/ || isNameStartChar(c) ||\n            c === 34/*'\"'*/ || c === 45/*'-'*/ || c >= 48/*'0'*/ && c <= 57/*'9'*/ || c === 37/*'%'*/)\n          s = 2;\n        else return new StringIteratee.Error({expected: 'block value', found: c});\n      }\n      else if (input.isDone()) return new StringIteratee.Done(builder.state());\n    }\n    if (s === 2) {\n      key = key || new BlockValueParser();\n      while ((!input.isEmpty() || input.isDone()) && key.isCont()) key = key.feed(input);\n      if (key.isDone()) s = 3;\n      else if (key.isError()) return key;\n    }\n    if (s === 3) {\n      while (!input.isEmpty() && (c = input.head(), isSpace(c))) input.step();\n      if (!input.isEmpty()) {\n        if (c === 58/*':'*/) {\n          input.step();\n          s = 4;\n        }\n        else {\n          builder.appendValue(key.state());\n          key = null;\n          s = 6;\n        }\n      }\n      else if (input.isDone()) {\n        builder.appendValue(key.state());\n        return new StringIteratee.Done(builder.state());\n      }\n    }\n    if (s === 4) {\n      while (!input.isEmpty() && isSpace(input.head())) input.step();\n      if (!input.isEmpty()) s = 5;\n      else if (input.isDone()) {\n        builder.appendField(new Slot(key.state()));\n        return new StringIteratee.Done(builder.state());\n      }\n    }\n    if (s === 5) {\n      value = value || new BlockValueParser();\n      while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n      if (value.isDone()) {\n        builder.appendField(new Slot(key.state(), value.state()));\n        key = null;\n        value = null;\n        s = 6;\n      }\n      else if (value.isError()) return value;\n    }\n    if (s === 6) {\n      while (!input.isEmpty() && (c = input.head(), isSpace(c))) input.step();\n      if (!input.isEmpty()) {\n        if (c === 44/*','*/ || c === 59/*';'*/ || isNewline(c)) {\n          input.step();\n          s = 1;\n        }\n        else return new StringIteratee.Done(builder.state());\n      }\n      else if (input.isDone()) return new StringIteratee.Done(builder.state());\n    }\n  }\n  return new BlockParser(builder, key, value, s);\n};\n\n\nfunction AttrParser(ident, value, s) {\n  StringIteratee.call(this);\n  this.ident = ident || new IdentParser();\n  this.value = value || new BlockParser();\n  this.s = s || 1;\n}\nAttrParser.prototype = Object.create(StringIteratee.prototype);\nAttrParser.prototype.constructor = AttrParser;\nAttrParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var value = this.value;\n  var ident = this.ident;\n  if (s === 1) {\n    if (!input.isEmpty() && (c = input.head(), c === 64/*'@'*/)) {\n      input.step();\n      s = 2;\n    }\n    else if (!input.isEmpty()) return new StringIteratee.Error({expected: '\\'@\\'', found: c});\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  if (s === 2) {\n    ident = ident.feed(input);\n    if (ident.isDone()) s = 3;\n    else if (ident.isError()) return ident;\n  }\n  if (s === 3) {\n    if (!input.isEmpty() && input.head() === 40/*'('*/) {\n      input.step();\n      s = 4;\n    }\n    else if (!input.isEmpty() || input.isDone()) return new StringIteratee.Done(new Attr(ident.state()));\n  }\n  if (s === 4) {\n    while (!input.isEmpty() && (c = input.head(), isWhitespace(c))) input.step();\n    if (!input.isEmpty()) {\n      if (c === 41/*')'*/) {\n        input.step();\n        return new StringIteratee.Done(new Attr(ident.state()));\n      }\n      else s = 5;\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  if (s === 5) {\n    while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n    if (value.isDone()) s = 6;\n    else if (value.isError()) return value;\n  }\n  if (s === 6) {\n    while (!input.isEmpty() && (c = input.head(), isWhitespace(c))) input.step();\n    if (!input.isEmpty()) {\n      if (c === 41/*')'*/) {\n        input.step();\n        return new StringIteratee.Done(new Attr(ident.state(), value.state()));\n      }\n      else return new StringIteratee.Error({expected: '\\')\\'', found: c});\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  return new AttrParser(ident, value, s);\n};\n\n\nfunction BlockValueParser(builder, field, value, s) {\n  StringIteratee.call(this);\n  this.builder = builder || null;\n  this.field = field || null;\n  this.value = value || null;\n  this.s = s || 1;\n}\nBlockValueParser.prototype = Object.create(StringIteratee.prototype);\nBlockValueParser.prototype.constructor = BlockValueParser;\nBlockValueParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var value = this.value;\n  var field = this.field;\n  var builder = this.builder;\n  while (!input.isEmpty() || input.isDone()) {\n    if (s === 1) {\n      if (!input.isEmpty()) {\n        c = input.head();\n        if (c === 64/*'@'*/) {\n          field = new AttrParser();\n          s = 2;\n        }\n        else if (c === 123/*'{'*/) {\n          builder = builder || new RecordBuilder();\n          value = new RecordParser(builder);\n          s = 5;\n        }\n        else if (c === 91/*'['*/) {\n          builder = builder || new RecordBuilder();\n          value = new MarkupParser(builder);\n          s = 5;\n        }\n        else if (isNameStartChar(c)) {\n          value = new IdentParser();\n          s = 4;\n        }\n        else if (c === 34/*'\"'*/) {\n          value = new StringParser();\n          s = 4;\n        }\n        else if (c === 45/*'-'*/ || c >= 48/*'0'*/ && c <= 57/*'9'*/) {\n          value = new NumberParser();\n          s = 4;\n        }\n        else if (c === 37/*'%'*/) {\n          value = new DataParser();\n          s = 4;\n        }\n        else if (!builder) return new StringIteratee.Done(Absent);\n        else return new StringIteratee.Done(builder.state());\n      }\n      else if (input.isDone()) {\n        if (!builder) return new StringIteratee.Done(Absent);\n        else return new StringIteratee.Done(builder.state());\n      }\n    }\n    if (s === 2) {\n      while ((!input.isEmpty() || input.isDone()) && field.isCont()) field = field.feed(input);\n      if (field.isDone()) {\n        builder = builder || new ValueBuilder();\n        builder.appendField(field.state());\n        field = null;\n        s = 3;\n      }\n      else if (field.isError()) return field;\n    }\n    if (s === 3) {\n      while (!input.isEmpty() && isSpace(input.head())) input.step();\n      if (!input.isEmpty()) s = 1;\n      else if (input.isDone()) return new StringIteratee.Done(builder.state());\n    }\n    if (s === 4) {\n      while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n      if (value.isDone()) {\n        builder = builder || new ValueBuilder();\n        builder.appendValue(value.state());\n        value = null;\n        s = 6;\n      }\n      else if (value.isError()) return value;\n    }\n    if (s === 5) {\n      while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n      if (value.isDone()) {\n        value = null;\n        s = 6;\n      }\n      else if (value.isError()) return value;\n    }\n    if (s === 6) {\n      while (!input.isEmpty() && isSpace(input.head())) input.step();\n      if (!input.isEmpty() && input.head() === 64/*'@'*/) s = 1;\n      else return new StringIteratee.Done(builder.state());\n    }\n  }\n  return new BlockValueParser(builder, field, value, s);\n};\n\n\nfunction InlineValueParser(builder, field, value, s) {\n  StringIteratee.call(this);\n  this.builder = builder || null;\n  this.field = field || null;\n  this.value = value || null;\n  this.s = s || 1;\n}\nInlineValueParser.prototype = Object.create(StringIteratee.prototype);\nInlineValueParser.prototype.constructor = InlineValueParser;\nInlineValueParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var value = this.value;\n  var field = this.field;\n  var builder = this.builder;\n  if (s === 1) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c === 64/*'@'*/) {\n        field = new AttrParser();\n        s = 2;\n      }\n      else if (c === 123/*'{'*/) {\n        if (builder) {\n          value = new RecordParser(builder);\n          s = 5;\n        }\n        else {\n          value = new RecordParser();\n          s = 4;\n        }\n      }\n      else if (c === 91/*'['*/) {\n        if (builder) {\n          value = new MarkupParser(builder);\n          s = 5;\n        }\n        else {\n          value = new MarkupParser();\n          s = 4;\n        }\n      }\n      else if (!builder) return new StringIteratee.Done(Extant);\n      else return new StringIteratee.Done(builder.state());\n    }\n    else if (input.isDone()) {\n      if (!builder) return new StringIteratee.Done(Extant);\n      else return new StringIteratee.Done(builder.state());\n    }\n  }\n  if (s === 2) {\n    while ((!input.isEmpty() || input.isDone()) && field.isCont()) field = field.feed(input);\n    if (field.isDone()) {\n      builder = builder || new ValueBuilder();\n      builder.appendField(field.state());\n      field = null;\n      s = 3;\n    }\n    else if (field.isError()) return field;\n  }\n  if (s === 3) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c === 123/*'{'*/) {\n        value = new RecordParser(builder);\n        s = 5;\n      }\n      else if (c === 91/*'['*/) {\n        value = new MarkupParser(builder);\n        s = 5;\n      }\n      else return new StringIteratee.Done(builder.state());\n    }\n    else if (input.isDone()) return new StringIteratee.Done(builder.state());\n  }\n  if (s === 4) {\n    while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n    if (value.isDone()) {\n      builder = builder || new ValueBuilder();\n      builder.appendValue(value.state());\n      return new StringIteratee.Done(builder.state());\n    }\n    else if (value.isError()) return value;\n  }\n  if (s === 5) {\n    while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n    if (value.isDone()) return new StringIteratee.Done(builder.state());\n    else if (value.isError()) return value;\n  }\n  return new InlineValueParser(builder, field, value, s);\n};\n\n\nfunction RecordParser(builder, key, value, s) {\n  StringIteratee.call(this);\n  this.builder = builder || null;\n  this.key = key || null;\n  this.value = value || null;\n  this.s = s || 1;\n}\nRecordParser.prototype = Object.create(StringIteratee.prototype);\nRecordParser.prototype.constructor = RecordParser;\nRecordParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var value = this.value;\n  var key = this.key;\n  var builder = this.builder || new RecordBuilder();\n  if (s === 1) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c === 123/*'{'*/) {\n        input.step();\n        s = 2;\n      }\n      else return new StringIteratee.Error({expected: '\\'{\\'', found: c});\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  while (!input.isEmpty() || input.isDone()) {\n    if (s === 2) {\n      while (!input.isEmpty() && (c = input.head(), isWhitespace(c))) input.step();\n      if (!input.isEmpty()) {\n        if (c === 125/*'}'*/) {\n          input.step();\n          return new StringIteratee.Done(builder.state());\n        }\n        else s = 3;\n      }\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n    if (s === 3) {\n      key = key || new BlockValueParser();\n      while ((!input.isEmpty() || input.isDone()) && key.isCont()) key = key.feed(input);\n      if (key.isDone()) s = 4;\n      else if (key.isError()) return key;\n    }\n    if (s === 4) {\n      while (!input.isEmpty() && (c = input.head(), isSpace(c))) input.step();\n      if (!input.isEmpty()) {\n        if (c === 58/*':'*/) {\n          input.step();\n          s = 5;\n        }\n        else {\n          builder.appendValue(key.state());\n          key = null;\n          s = 7;\n        }\n      }\n      else if (input.isDone()) {\n        builder.appendValue(key.state());\n        return new StringIteratee.Done(builder.state());\n      }\n    }\n    if (s === 5) {\n      while (!input.isEmpty() && isSpace(input.head())) input.step();\n      if (!input.isEmpty()) s = 6;\n      else if (input.isDone()) {\n        builder.appendField(new Slot(key.state()));\n        return new StringIteratee.Done(builder.state());\n      }\n    }\n    if (s === 6) {\n      value = value || new BlockValueParser();\n      while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n      if (value.isDone()) {\n        builder.appendField(new Slot(key.state(), value.state()));\n        key = null;\n        value = null;\n        s = 7;\n      }\n      else if (value.isError()) return value;\n    }\n    if (s === 7) {\n      while (!input.isEmpty() && (c = input.head(), isSpace(c))) input.step();\n      if (!input.isEmpty()) {\n        if (c === 44/*','*/ || c === 59/*';'*/ || isNewline(c)) {\n          input.step();\n          s = 2;\n        }\n        else if (c === 125/*'}'*/) {\n          input.step();\n          return new StringIteratee.Done(builder.state());\n        }\n       else return new StringIteratee.Error({expected: '\\'}\\', \\';\\', \\',\\', or newline', found: c});\n      }\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n  }\n  return new RecordParser(builder, key, value, s);\n};\n\n\nfunction MarkupParser(builder, text, value, s) {\n  StringIteratee.call(this);\n  this.builder = builder || null;\n  this.text = text || null;\n  this.value = value || null;\n  this.s = s || 1;\n}\nMarkupParser.prototype = Object.create(StringIteratee.prototype);\nMarkupParser.prototype.constructor = MarkupParser;\nMarkupParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var value = this.value;\n  var text = this.text;\n  var builder = this.builder;\n  if (s === 1) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c === 91/*'['*/) {\n        input.step();\n        s = 2;\n      }\n      else return new StringIteratee.Error({expected: '\\'[\\'', found: c});\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  while (!input.isEmpty() || input.isDone()) {\n    if (s === 2) {\n      while (!input.isEmpty() && (c = input.head(),\n          c !== 64/*'@'*/ &&\n          c !== 91/*'['*/ &&\n          c !== 92/*'\\\\'*/ &&\n          c !== 93/*']'*/ &&\n          c !== 123/*'{'*/ &&\n          c !== 125/*'}'*/)) {\n        input.step();\n        text = text || new StringBuilder();\n        text.append(c);\n      }\n      if (!input.isEmpty()) {\n        if (c === 93/*']'*/) {\n          input.step();\n          builder = builder || new RecordBuilder();\n          if (text) builder.appendValue(text.state());\n          return new StringIteratee.Done(builder.state());\n        }\n        else if (c === 64/*'@'*/) {\n          builder = builder || new RecordBuilder();\n          if (text) {\n            builder.appendValue(text.state());\n            text = null;\n          }\n          value = new InlineValueParser();\n          s = 3;\n        }\n        else if (c === 123/*'{'*/) {\n          builder = builder || new RecordBuilder();\n          if (text) {\n            builder.appendValue(text.state());\n            text = null;\n          }\n          value = new RecordParser(builder);\n          s = 4;\n        }\n        else if (c === 91/*'['*/) {\n          builder = builder || new RecordBuilder();\n          if (text) {\n            builder.appendValue(text.state());\n            text = null;\n          }\n          value = new MarkupParser(builder);\n          s = 4;\n        }\n        else if (c === 92/*'\\\\'*/) {\n          input.step();\n          s = 5;\n        }\n        else new StringIteratee.Error({found: c});\n      }\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n    if (s === 3) {\n      while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n      if (value.isDone()) {\n        builder.appendValue(value.state());\n        value = null;\n        s = 2;\n      }\n      else if (value.isError()) return value;\n    }\n    if (s === 4) {\n      while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n      if (value.isDone()) {\n        value = null;\n        s = 2;\n      }\n      else if (value.isError()) return value;\n    }\n    if (s === 5) {\n      if (!input.isEmpty()) {\n        c = input.head();\n        text = text || new StringBuilder();\n        if (c === 34/*'\"'*/ ||\n            c === 47/*'/'*/ ||\n            c === 64/*'@'*/ ||\n            c === 91/*'['*/ ||\n            c === 92/*'\\\\'*/ ||\n            c === 93/*']'*/ ||\n            c === 123/*'{'*/ ||\n            c === 125/*'}'*/) {\n          input.step();\n          text.append(c);\n          s = 2;\n        }\n        else if (c === 98/*'b'*/) {\n          input.step();\n          text.append(8/*'\\b'*/);\n          s = 2;\n        }\n        else if (c === 102/*'f'*/) {\n          input.step();\n          text.append(12/*'\\f'*/);\n          s = 2;\n        }\n        else if (c === 110/*'n'*/) {\n          input.step();\n          text.append(10/*'\\n'*/);\n          s = 2;\n        }\n        else if (c === 114/*'r'*/) {\n          input.step();\n          text.append(13/*'\\r'*/);\n          s = 2;\n        }\n        else if (c === 116/*'t'*/) {\n          input.step();\n          text.append(9/*'\\t'*/);\n          s = 2;\n        }\n        else return new StringIteratee.Error({expected: 'escape character', found: c});\n      }\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n  }\n  return new MarkupParser(builder, text, value, s);\n};\n\n\nfunction IdentParser(builder, s) {\n  StringIteratee.call(this);\n  this.builder = builder || null;\n  this.s = s || 1;\n}\nIdentParser.prototype = Object.create(StringIteratee.prototype);\nIdentParser.prototype.constructor = IdentParser;\nIdentParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var builder = this.builder;\n  if (s === 1) {\n    if (!input.isEmpty() && (c = input.head(), isNameStartChar(c))) {\n      builder = builder || new StringBuilder();\n      input.step();\n      builder.append(c);\n      s = 2;\n    }\n    else if (!input.isEmpty()) return new StringIteratee.Error({expected: 'identitifer', found: c});\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  if (s === 2) {\n    while (!input.isEmpty() && (c = input.head(), isNameChar(c))) {\n      input.step();\n      builder.append(c);\n    }\n    if (!input.isEmpty() || input.isDone()) {\n      var value = builder.state();\n      if (value === 'true') value = true;\n      else if (value === 'false') value = false;\n      return new StringIteratee.Done(value);\n    }\n  }\n  return new IdentParser(builder, s);\n};\n\n\nfunction StringParser(text, s) {\n  StringIteratee.call(this);\n  this.text = text || null;\n  this.s = s || 1;\n}\nStringParser.prototype = Object.create(StringIteratee.prototype);\nStringParser.prototype.constructor = StringParser;\nStringParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var text = this.text;\n  if (s === 1) {\n    if (!input.isEmpty() && (c = input.head(), c === 34/*'\"'*/)) {\n      input.step();\n      s = 2;\n    }\n    else if (!input.isEmpty()) return new StringIteratee.Error({expected: '\\'\"\\'', found: c});\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  while (!input.isEmpty() || input.isDone()) {\n    if (s === 2) {\n      text = text || new StringBuilder();\n      while (!input.isEmpty() && (c = input.head(), c !== 34/*'\"'*/ && c !== 92/*'\\\\'*/)) {\n        input.step();\n        text.append(c);\n      }\n      if (!input.isEmpty()) {\n        if (c === 34/*'\"'*/) {\n          input.step();\n          return new StringIteratee.Done(text.state());\n        }\n        else if (c === 92/*'\\\\'*/) {\n          input.step();\n          s = 3;\n        }\n      }\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n    if (s === 3) {\n      if (!input.isEmpty()) {\n        c = input.head();\n        if (c === 34/*'\"'*/ ||\n            c === 47/*'/'*/ ||\n            c === 64/*'@'*/ ||\n            c === 91/*'['*/ ||\n            c === 92/*'\\\\'*/ ||\n            c === 93/*']'*/ ||\n            c === 123/*'{'*/ ||\n            c === 125/*'}'*/) {\n          input.step();\n          text.append(c);\n          s = 2;\n        }\n        else if (c === 98/*'b'*/) {\n          input.step();\n          text.append(8/*'\\b'*/);\n          s = 2;\n        }\n        else if (c === 102/*'f'*/) {\n          input.step();\n          text.append(12/*'\\f'*/);\n          s = 2;\n        }\n        else if (c === 110/*'n'*/) {\n          input.step();\n          text.append(10/*'\\n'*/);\n          s = 2;\n        }\n        else if (c === 114/*'r'*/) {\n          input.step();\n          text.append(13/*'\\r'*/);\n          s = 2;\n        }\n        else if (c === 116/*'t'*/) {\n          input.step();\n          text.append(9/*'\\t'*/);\n          s = 2;\n        }\n        else return new StringIteratee.Error({expected: 'escape character', found: c});\n      }\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n  }\n  return new StringParser(text, s);\n};\n\n\nfunction NumberParser(builder, s) {\n  StringIteratee.call(this);\n  this.builder = builder || null;\n  this.s = s || 1;\n}\nNumberParser.prototype = Object.create(StringIteratee.prototype);\nNumberParser.prototype.constructor = NumberParser;\nNumberParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var builder = this.builder || new StringBuilder();\n  if (s === 1) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c === 45/*'-'*/) {\n        input.step();\n        builder.append(c);\n      }\n      s = 2;\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  if (s === 2) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c === 48/*'0'*/) {\n        input.step();\n        builder.append(c);\n        s = 4;\n      }\n      else if (c >= 49/*'1'*/ && c <= 57/*'9'*/) {\n        input.step();\n        builder.append(c);\n        s = 3;\n      }\n      else return new StringIteratee.Error({expected: 'digit', found: c});\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  if (s === 3) {\n    while (!input.isEmpty() && (c = input.head(), c >= 48/*'0'*/ && c <= 57/*'9'*/)) {\n      input.step();\n      builder.append(c);\n    }\n    if (!input.isEmpty()) s = 4;\n    else if (input.isDone()) return new StringIteratee.Done(Number(builder.state()));\n  }\n  if (s === 4) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c === 46/*'.'*/) {\n        input.step();\n        builder.append(c);\n        s = 5;\n      }\n      else if (c === 69/*'E'*/ || c === 101/*'e'*/) {\n        input.step();\n        builder.append(c);\n        s = 8;\n      }\n      else return new StringIteratee.Done(Number(builder.state()));\n    }\n    else if (input.isDone()) return new StringIteratee.Done(Number(builder.state()));\n  }\n  if (s === 5) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c >= 48/*'0'*/ && c <= 57/*'9'*/) {\n        input.step();\n        builder.append(c);\n        s = 6;\n      }\n      else return new StringIteratee.Error({expected: 'digit', found: c});\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  if (s === 6) {\n    while (!input.isEmpty() && (c = input.head(), c >= 48/*'0'*/ && c <= 57/*'9'*/)) {\n      input.step();\n      builder.append(c);\n    }\n    if (!input.isEmpty()) s = 7;\n    else if (input.isDone()) return new StringIteratee.Done(Number(builder.state()));\n  }\n  if (s === 7) {\n    c = input.head();\n    if (c === 69/*'E'*/ || c === 101/*'e'*/) {\n      input.step();\n      builder.append(c);\n      s = 8;\n    }\n    else return new StringIteratee.Done(Number(builder.state()));\n  }\n  if (s === 8) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c === 43/*'+'*/ || c === 45/*'-'*/) {\n        input.step();\n        builder.append(c);\n      }\n      s = 9;\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  if (s === 9) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c >= 48/*'0'*/ && c <= 57/*'9'*/) {\n        input.step();\n        builder.append(c);\n        s = 10;\n      }\n      else return new StringIteratee.Error({expected: 'digit', found: c});\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  if (s === 10) {\n    while (!input.isEmpty() && (c = input.head(), c >= 48/*'0'*/ && c <= 57/*'9'*/)) {\n      input.step();\n      builder.append(c);\n    }\n    if (!input.isEmpty() || input.isDone()) return new StringIteratee.Done(Number(builder.state()));\n  }\n  return new NumberParser(builder, s);\n};\n\n\nfunction DataParser(data, s) {\n  StringIteratee.call(this);\n  this.data = data || null;\n  this.s = s || 1;\n}\nDataParser.prototype = Object.create(StringIteratee.prototype);\nDataParser.prototype.constructor = DataParser;\nDataParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var data = this.data || new DataBuilder();\n  if (s === 1) {\n    if (!input.isEmpty() && (c = input.head(), c === 37/*'%'*/)) {\n      input.step();\n      s = 2;\n    }\n    else if (!input.isEmpty()) return new StringIteratee.Error({expected: '\\'%\\'', found: c});\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  while (!input.isEmpty() || input.isDone()) {\n    if (s === 2) {\n      if (!input.isEmpty() && (c = input.head(), isBase64Char(c))) {\n        input.step();\n        data.appendBase64Char(c);\n        s = 3;\n      }\n      else if (!input.isEmpty() || input.isDone()) return new StringIteratee.Done(data.state());\n    }\n    if (s === 3) {\n      if (!input.isEmpty() && (c = input.head(), isBase64Char(c))) {\n        input.step();\n        data.appendBase64Char(c);\n        s = 4;\n      }\n      else if (!input.isEmpty()) return new StringIteratee.Error({expected: 'base64 digit', found: c});\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n    if (s === 4) {\n      if (!input.isEmpty() && (c = input.head(), isBase64Char(c) || c === 61/*'='*/)) {\n        input.step();\n        data.appendBase64Char(c);\n        if (c !== 61/*'='*/) s = 5;\n        else s = 6;\n      }\n      else if (!input.isEmpty()) return new StringIteratee.Error({expected: 'base64 digit', found: c});\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n    if (s === 5) {\n      if (!input.isEmpty() && (c = input.head(), isBase64Char(c) || c === 61/*'='*/)) {\n        input.step();\n        data.appendBase64Char(c);\n        if (c !== 61/*'='*/) s = 2;\n        else return new StringIteratee.Done(data.state());\n      }\n      else if (!input.isEmpty()) return new StringIteratee.Error({expected: 'base64 digit', found: c});\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n    else if (s === 6) {\n      if (!input.isEmpty() && (c = input.head(), c === 61/*'='*/)) {\n        input.step();\n        data.appendBase64Char(c);\n        return new StringIteratee.Done(data.state());\n      }\n      else if (!input.isEmpty()) return new StringIteratee.Error({expected: '\\'=\\'', found: c});\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n  }\n  return new DataParser(data, s);\n};\n\n\nfunction ReconWriter(builder) {\n  Object.defineProperty(this, 'builder', {value: builder || new StringBuilder()});\n}\nReconWriter.prototype.writeValue = function (value) {\n  if (value.isRecord) this.writeRecord(value);\n  else if (typeof value === 'string') this.writeText(value);\n  else if (typeof value === 'number') this.writeNumber(value);\n  else if (typeof value === 'boolean') this.writeBool(value);\n  else if (value instanceof Uint8Array) this.writeData(value);\n};\nReconWriter.prototype.writeAttr = function (attr) {\n  this.builder.append(64/*'@'*/);\n  this.writeIdent(attr.key);\n  if (!attr.value.isExtant) {\n    this.builder.append(40/*'('*/);\n    this.writeBlock(attr.value);\n    this.builder.append(41/*')'*/);\n  }\n};\nReconWriter.prototype.writeItem = function (item) {\n  if (item.isField) {\n    this.writeValue(item.key);\n    this.builder.append(58/*':'*/);\n    if (!item.value.isExtant) this.writeValue(item.value);\n  }\n  else this.writeValue(item);\n};\nReconWriter.prototype.writeBlock = function (value) {\n  if (!value.isRecord) this.writeValue(value);\n  else if (!value.isEmpty()) this.writeItems(value, value.isBlockSafe(), false);\n  else {\n    this.builder.append(123/*'{'*/);\n    this.builder.append(125/*'}'*/);\n  }\n};\nReconWriter.prototype.writeRecord = function (record) {\n  if (!record.isEmpty()) this.writeItems(record, false, false);\n  else {\n    this.builder.append(123/*'{'*/);\n    this.builder.append(125/*'}'*/);\n  }\n};\nReconWriter.prototype.writeItems = function (record, inBlock, inMarkup) {\n  var items = record.iterator();\n  var inBraces = false;\n  var inBrackets = false;\n  var first = true;\n  while (!items.isEmpty()) {\n    var item = items.head();\n    items.step();\n    if (inBrackets && item.isAttr) {\n      if (inBraces) {\n        this.builder.append(125/*'}'*/);\n        inBraces = false;\n      }\n      this.builder.append(93/*']'*/);\n      inBrackets = false;\n    }\n    if (item.isAttr) {\n      if (inBraces) {\n        this.builder.append(125/*'}'*/);\n        inBraces = false;\n      }\n      else if (inBrackets) {\n        this.builder.append(93/*']'*/);\n        inBrackets = false;\n      }\n      this.writeAttr(item);\n      first = false;\n    }\n    else if (inBrackets && typeof item === 'string') {\n      if (inBraces) {\n        this.builder.append(125/*'}'*/);\n        inBraces = false;\n      }\n      this.writeMarkupText(item);\n    }\n    else if (inBraces) {\n      if (!first) this.builder.append(44/*','*/);\n      else first = false;\n      this.writeItem(item);\n    }\n    else if (inBrackets) {\n      if (item.isRecord && item.isMarkupSafe()) {\n        this.writeItems(item, false, true);\n        if (!items.isEmpty() && typeof items.head() === 'string') {\n          this.writeMarkupText(items.head());\n          items.step();\n        }\n        else if (!items.isEmpty() && !items.head().isAttr) {\n          this.builder.append(123/*'{'*/);\n          inBraces = true;\n          first = true;\n        }\n        else {\n          this.builder.append(93/*']'*/);\n          inBrackets = false;\n        }\n      }\n      else {\n        this.builder.append(123/*'{'*/);\n        this.writeItem(item);\n        inBraces = true;\n        first = false;\n      }\n    }\n    else if (typeof item === 'string' &&\n        !items.isEmpty() && !items.head().isField &&\n        typeof items.head() !== 'string' && typeof items.head() !== 'boolean') {\n      this.builder.append(91/*'['*/);\n      this.writeMarkupText(item);\n      inBrackets = true;\n    }\n    else if (inBlock && !inBraces) {\n      if (!first) this.builder.append(44/*','*/);\n      else first = false;\n      this.writeItem(item);\n    }\n    else if (inMarkup && typeof item === 'string' && items.isEmpty()) {\n      this.builder.append(91/*'['*/);\n      this.writeMarkupText(item);\n      this.builder.append(93/*']'*/);\n    }\n    else if (!inMarkup && !item.isField && !item.isRecord &&\n            (!first && items.isEmpty() || !items.isEmpty() && items.head().isAttr)) {\n      if (!first && (typeof item === 'string' && this.isIdent(item) ||\n                     typeof item === 'number' ||\n                     typeof item === 'boolean'))\n        this.builder.append(32/*' '*/);\n      this.writeValue(item);\n    }\n    else {\n      this.builder.append(123/*'{'*/);\n      this.writeItem(item);\n      inBraces = true;\n      first = false;\n    }\n  }\n  if (inBraces) this.builder.append(125/*'}'*/);\n  else if (inBrackets) this.builder.append(93/*']'*/);\n};\nReconWriter.prototype.isIdent = function (text) {\n  var cs = new StringIterator(text);\n  if (cs.isEmpty() || !isNameStartChar(cs.head())) return false;\n  cs.step();\n  while (!cs.isEmpty() && isNameChar(cs.head())) cs.step();\n  return cs.isEmpty();\n};\nReconWriter.prototype.writeText = function (text) {\n  if (this.isIdent(text)) this.writeIdent(text);\n  else this.writeString(text);\n};\nReconWriter.prototype.writeIdent = function (ident) {\n  this.builder.appendString(ident);\n};\nReconWriter.prototype.writeString = function (string) {\n  var cs = new StringIterator(string);\n  this.builder.append(34/*'\"'*/);\n  while (!cs.isEmpty()) {\n    var c = cs.head();\n    switch (c) {\n      case 34/*'\"'*/:\n      case 92/*'\\\\'*/: this.builder.append(92/*'\\\\'*/); this.builder.append(c); break;\n      case 8/*'\\b'*/: this.builder.append(92/*'\\\\'*/); this.builder.append(98/*'b'*/); break;\n      case 12/*'\\f'*/: this.builder.append(92/*'\\\\'*/); this.builder.append(102/*'f'*/); break;\n      case 10/*'\\n'*/: this.builder.append(92/*'\\\\'*/); this.builder.append(110/*'n'*/); break;\n      case 13/*'\\r'*/: this.builder.append(92/*'\\\\'*/); this.builder.append(114/*'r'*/); break;\n      case 9/*'\\t'*/: this.builder.append(92/*'\\\\'*/); this.builder.append(116/*'t'*/); break;\n      default: this.builder.append(c);\n    }\n    cs.step();\n  }\n  this.builder.append(34/*'\"'*/);\n};\nReconWriter.prototype.writeMarkupText = function (text) {\n  var cs = new StringIterator(text);\n  while (!cs.isEmpty()) {\n    var c = cs.head();\n    switch (c) {\n      case 64/*'@'*/:\n      case 91/*'['*/:\n      case 92/*'\\\\'*/:\n      case 93/*']'*/:\n      case 123/*'{'*/:\n      case 125/*'}'*/: this.builder.append(92/*'\\\\'*/); this.builder.append(c); break;\n      default: this.builder.append(c);\n    }\n    cs.step();\n  }\n};\nReconWriter.prototype.writeNumber = function (number) {\n  this.builder.appendString(number.toString());\n};\nReconWriter.prototype.writeBool = function (bool) {\n  this.builder.appendString(bool.toString());\n};\nReconWriter.prototype.writeData = function (data) {\n  function encodeBase64Digit(x) {\n    if (x >= 0 && x < 26) return x + 65/*'A'*/;\n    else if (x >= 26 && x < 52) return x + 71/*('a' - 26)*/;\n    else if (x >= 52 && x < 62) return x - 4/*-('0' - 52)*/;\n    else if (x === 62) return 43/*'+'*/;\n    else if (x === 63) return 47/*'/'*/;\n  }\n  this.builder.append(37/*'%'*/);\n  var i = 0;\n  var n = data.length;\n  var x, y, z;\n  while (i + 2 < n) {\n    x = data[i];\n    y = data[i + 1];\n    z = data[i + 2];\n    this.builder.append(encodeBase64Digit(x >>> 2));\n    this.builder.append(encodeBase64Digit(((x << 4) | (y >>> 4)) & 0x3F));\n    this.builder.append(encodeBase64Digit(((y << 2) | (z >>> 6)) & 0x3F));\n    this.builder.append(encodeBase64Digit(z & 0x3F));\n    i += 3;\n  }\n  if (i + 1 < n) {\n    x = data[i];\n    y = data[i + 1];\n    this.builder.append(encodeBase64Digit(x >>> 2));\n    this.builder.append(encodeBase64Digit(((x << 4) | (y >>> 4)) & 0x3F));\n    this.builder.append(encodeBase64Digit((y << 2) & 0x3F));\n    this.builder.append(61/*'='*/);\n    i += 2;\n  }\n  else if (i < n) {\n    x = data[i];\n    this.builder.append(encodeBase64Digit(x >>> 2));\n    this.builder.append(encodeBase64Digit((x << 4) & 0x3F));\n    this.builder.append(61/*'='*/);\n    this.builder.append(61/*'='*/);\n    i += 1;\n  }\n};\nReconWriter.prototype.state = function () {\n  return this.builder.state();\n};\n\n\nmodule.exports = function () {\n  return coerce.apply(null, arguments);\n};\nexports = module.exports;\nexports.parse = parse;\nexports.stringify = stringify;\nexports.objectify = objectify;\nexports.Record = Record;\nexports.Field = Field;\nexports.Attr = Attr;\nexports.Slot = Slot;\nexports.attr = attr;\nexports.slot = slot;\nexports.base64 = base64;\nexports.extant = Extant;\nexports.absent = Absent;\nexports.empty = empty;\nexports.builder = builder;\nexports.compare = compare;\n\n},{}],2:[function(require,module,exports){\n'use strict';\n\nvar recon = require('recon-js');\n\nfunction decode(record) {\n  if (record.isRecord) {\n    var heading = record.head();\n    if (heading.isField) switch (heading.key) {\n      case 'event': return EventMessage.decode(record);\n      case 'command': return CommandMessage.decode(record);\n      case 'sync': return SyncRequest.decode(record);\n      case 'synced': return SyncedResponse.decode(record);\n      case 'link': return LinkRequest.decode(record);\n      case 'linked': return LinkedResponse.decode(record);\n      case 'unlink': return UnlinkRequest.decode(record);\n      case 'unlinked': return UnlinkedResponse.decode(record);\n      case 'get': return GetRequest.decode(record);\n      case 'put': return PutRequest.decode(record);\n      case 'state': return StateResponse.decode(record);\n    }\n  }\n}\n\nfunction encode(envelope) {\n  return envelope.encode();\n}\n\nfunction parse(string) {\n  return decode(recon.parse(string));\n}\n\nfunction stringify(envelope) {\n  return recon.stringify(encode(envelope));\n}\n\n\nfunction Envelope() {}\nObject.defineProperty(Envelope.prototype, 'isRequest', {value: false});\nObject.defineProperty(Envelope.prototype, 'isResponse', {value: false});\nObject.defineProperty(Envelope.prototype, 'isMessage', {value: false});\nObject.defineProperty(Envelope.prototype, 'isEventMessage', {value: false});\nObject.defineProperty(Envelope.prototype, 'isCommandMessage', {value: false});\nObject.defineProperty(Envelope.prototype, 'isSyncRequest', {value: false});\nObject.defineProperty(Envelope.prototype, 'isSyncedResponse', {value: false});\nObject.defineProperty(Envelope.prototype, 'isLinkRequest', {value: false});\nObject.defineProperty(Envelope.prototype, 'isLinkedResponse', {value: false});\nObject.defineProperty(Envelope.prototype, 'isUnlinkRequest', {value: false});\nObject.defineProperty(Envelope.prototype, 'isUnlinkedResponse', {value: false});\nObject.defineProperty(Envelope.prototype, 'isGetRequest', {value: false});\nObject.defineProperty(Envelope.prototype, 'isPutRequest', {value: false});\nObject.defineProperty(Envelope.prototype, 'isStateResponse', {value: false});\n\n\nfunction RequestEnvelope() {\n  Envelope.call(this);\n}\nRequestEnvelope.prototype = Object.create(Envelope.prototype);\nRequestEnvelope.prototype.constructor = RequestEnvelope;\nObject.defineProperty(RequestEnvelope.prototype, 'isRequest', {value: true});\n\n\nfunction ResponseEnvelope() {\n  Envelope.call(this);\n}\nResponseEnvelope.prototype = Object.create(Envelope.prototype);\nResponseEnvelope.prototype.constructor = ResponseEnvelope;\nObject.defineProperty(RequestEnvelope.prototype, 'isResponse', {value: true});\n\n\nfunction MessageEnvelope() {\n  Envelope.call(this);\n}\nMessageEnvelope.prototype = Object.create(Envelope.prototype);\nMessageEnvelope.prototype.constructor = MessageEnvelope;\nObject.defineProperty(RequestEnvelope.prototype, 'isMessage', {value: true});\n\n\nfunction EventMessage(node, lane, via, body) {\n  MessageEnvelope.call(this);\n  Object.defineProperty(this, 'node', {enumerable: true, value: node});\n  Object.defineProperty(this, 'lane', {enumerable: true, value: lane});\n  Object.defineProperty(this, 'via', {enumerable: true, value: via || recon.absent});\n  Object.defineProperty(this, 'body', {enumerable: true, value: body || recon.empty()});\n}\nEventMessage.prototype = Object.create(MessageEnvelope.prototype);\nEventMessage.prototype.constructor = EventMessage;\nObject.defineProperty(EventMessage.prototype, 'isEventMessage', {value: true});\nEventMessage.prototype.encode = function () {\n  var builder = recon.builder();\n  var heading = recon.builder();\n  heading.slot('node', this.node);\n  heading.slot('lane', this.lane);\n  if (!this.via.isAbsent) heading.slot('via', this.via);\n  builder.attr('event', heading.state());\n  builder.appendRecord(this.body);\n  return builder.state();\n};\nEventMessage.decode = function (record) {\n  var node = '';\n  var lane = '';\n  var via = recon.absent;\n  var body = record.tail();\n  var heading = record.head();\n  if (heading.value.isRecord) {\n    var headers = heading.value.iterator();\n    var i = 0;\n    while (!headers.isEmpty()) {\n      var header = headers.next();\n      if (header.isField) switch (header.key) {\n        case 'node': node = header.value; break;\n        case 'lane': lane = header.value; break;\n        case 'via': via = header.value; break;\n      }\n      else switch (i) {\n        case 0: node = header; break;\n        case 1: lane = header; break;\n        case 2: via = header; break;\n      }\n      i += 1;\n    }\n  }\n  return new EventMessage(node, lane, via, body);\n};\n\n\nfunction CommandMessage(node, lane, via, body) {\n  MessageEnvelope.call(this);\n  Object.defineProperty(this, 'node', {enumerable: true, value: node});\n  Object.defineProperty(this, 'lane', {enumerable: true, value: lane});\n  Object.defineProperty(this, 'via', {enumerable: true, value: via || recon.absent});\n  Object.defineProperty(this, 'body', {enumerable: true, value: body || recon.empty()});\n}\nCommandMessage.prototype = Object.create(MessageEnvelope.prototype);\nCommandMessage.prototype.constructor = CommandMessage;\nObject.defineProperty(CommandMessage.prototype, 'isCommandMessage', {value: true});\nCommandMessage.prototype.encode = function () {\n  var builder = recon.builder();\n  var heading = recon.builder();\n  heading.slot('node', this.node);\n  heading.slot('lane', this.lane);\n  if (!this.via.isAbsent) heading.slot('via', this.via);\n  builder.attr('command', heading.state());\n  builder.appendRecord(this.body);\n  return builder.state();\n};\nCommandMessage.decode = function (record) {\n  var node = '';\n  var lane = '';\n  var via = recon.absent;\n  var body = record.tail();\n  var heading = record.head();\n  if (heading.value.isRecord) {\n    var headers = heading.value.iterator();\n    var i = 0;\n    while (!headers.isEmpty()) {\n      var header = headers.next();\n      if (header.isField) switch (header.key) {\n        case 'node': node = header.value; break;\n        case 'lane': lane = header.value; break;\n        case 'via': via = header.value; break;\n      }\n      else switch (i) {\n        case 0: node = header; break;\n        case 1: lane = header; break;\n        case 2: via = header; break;\n      }\n      i += 1;\n    }\n  }\n  return new CommandMessage(node, lane, via, body);\n};\n\n\nfunction SyncRequest(node, lane) {\n  RequestEnvelope.call(this);\n  Object.defineProperty(this, 'node', {enumerable: true, value: node});\n  Object.defineProperty(this, 'lane', {enumerable: true, value: lane});\n}\nSyncRequest.prototype = Object.create(RequestEnvelope.prototype);\nSyncRequest.prototype.constructor = SyncRequest;\nObject.defineProperty(SyncRequest.prototype, 'isSyncRequest', {value: true});\nSyncRequest.prototype.encode = function () {\n  return recon(\n    recon.attr('sync', recon(\n      recon.slot('node', this.node),\n      recon.slot('lane', this.lane))));\n};\nSyncRequest.decode = function (record) {\n  var node = '';\n  var lane = '';\n  var heading = record.head();\n  if (heading.value.isRecord) {\n    var headers = heading.value.iterator();\n    var i = 0;\n    while (!headers.isEmpty()) {\n      var header = headers.next();\n      if (header.isField) switch (header.key) {\n        case 'node': node = header.value; break;\n        case 'lane': lane = header.value; break;\n      }\n      else switch (i) {\n        case 0: node = header; break;\n        case 1: lane = header; break;\n      }\n      i += 1;\n    }\n  }\n  return new SyncRequest(node, lane);\n};\n\n\nfunction SyncedResponse(node, lane) {\n  ResponseEnvelope.call(this);\n  Object.defineProperty(this, 'node', {enumerable: true, value: node});\n  Object.defineProperty(this, 'lane', {enumerable: true, value: lane});\n}\nSyncedResponse.prototype = Object.create(ResponseEnvelope.prototype);\nSyncedResponse.prototype.constructor = SyncedResponse;\nObject.defineProperty(SyncedResponse.prototype, 'isSyncedResponse', {value: true});\nSyncedResponse.prototype.encode = function () {\n  return recon(\n    recon.attr('synced', recon(\n      recon.slot('node', this.node),\n      recon.slot('lane', this.lane))));\n};\nSyncedResponse.decode = function (record) {\n  var node = '';\n  var lane = '';\n  var heading = record.head();\n  if (heading.value.isRecord) {\n    var headers = heading.value.iterator();\n    var i = 0;\n    while (!headers.isEmpty()) {\n      var header = headers.next();\n      if (header.isField) switch (header.key) {\n        case 'node': node = header.value; break;\n        case 'lane': lane = header.value; break;\n      }\n      else switch (i) {\n        case 0: node = header; break;\n        case 1: lane = header; break;\n      }\n      i += 1;\n    }\n  }\n  return new SyncedResponse(node, lane);\n};\n\n\nfunction LinkRequest(node, lane) {\n  RequestEnvelope.call(this);\n  Object.defineProperty(this, 'node', {enumerable: true, value: node});\n  Object.defineProperty(this, 'lane', {enumerable: true, value: lane});\n}\nLinkRequest.prototype = Object.create(RequestEnvelope.prototype);\nLinkRequest.prototype.constructor = LinkRequest;\nObject.defineProperty(LinkRequest.prototype, 'isLinkRequest', {value: true});\nLinkRequest.prototype.encode = function () {\n  return recon(\n    recon.attr('link', recon(\n      recon.slot('node', this.node),\n      recon.slot('lane', this.lane))));\n};\nLinkRequest.decode = function (record) {\n  var node = '';\n  var lane = '';\n  var heading = record.head();\n  if (heading.value.isRecord) {\n    var headers = heading.value.iterator();\n    var i = 0;\n    while (!headers.isEmpty()) {\n      var header = headers.next();\n      if (header.isField) switch (header.key) {\n        case 'node': node = header.value; break;\n        case 'lane': lane = header.value; break;\n      }\n      else switch (i) {\n        case 0: node = header; break;\n        case 1: lane = header; break;\n      }\n      i += 1;\n    }\n  }\n  return new LinkRequest(node, lane);\n};\n\n\nfunction LinkedResponse(node, lane) {\n  ResponseEnvelope.call(this);\n  Object.defineProperty(this, 'node', {enumerable: true, value: node});\n  Object.defineProperty(this, 'lane', {enumerable: true, value: lane});\n}\nLinkedResponse.prototype = Object.create(ResponseEnvelope.prototype);\nLinkedResponse.prototype.constructor = LinkedResponse;\nObject.defineProperty(LinkedResponse.prototype, 'isLinkedResponse', {value: true});\nLinkedResponse.prototype.encode = function () {\n  return recon(\n    recon.attr('linked', recon(\n      recon.slot('node', this.node),\n      recon.slot('lane', this.lane))));\n};\nLinkedResponse.decode = function (record) {\n  var node = '';\n  var lane = '';\n  var heading = record.head();\n  if (heading.value.isRecord) {\n    var headers = heading.value.iterator();\n    var i = 0;\n    while (!headers.isEmpty()) {\n      var header = headers.next();\n      if (header.isField) switch (header.key) {\n        case 'node': node = header.value; break;\n        case 'lane': lane = header.value; break;\n      }\n      else switch (i) {\n        case 0: node = header; break;\n        case 1: lane = header; break;\n      }\n      i += 1;\n    }\n  }\n  return new LinkedResponse(node, lane);\n};\n\n\nfunction UnlinkRequest(node, lane) {\n  RequestEnvelope.call(this);\n  Object.defineProperty(this, 'node', {enumerable: true, value: node});\n  Object.defineProperty(this, 'lane', {enumerable: true, value: lane});\n}\nUnlinkRequest.prototype = Object.create(RequestEnvelope.prototype);\nUnlinkRequest.prototype.constructor = UnlinkRequest;\nObject.defineProperty(UnlinkRequest.prototype, 'isUnlinkRequest', {value: true});\nUnlinkRequest.prototype.encode = function () {\n  return recon(\n    recon.attr('unlink', recon(\n      recon.slot('node', this.node),\n      recon.slot('lane', this.lane))));\n};\nUnlinkRequest.decode = function (record) {\n  var node = '';\n  var lane = '';\n  var heading = record.head();\n  if (heading.value.isRecord) {\n    var headers = heading.value.iterator();\n    var i = 0;\n    while (!headers.isEmpty()) {\n      var header = headers.next();\n      if (header.isField) switch (header.key) {\n        case 'node': node = header.value; break;\n        case 'lane': lane = header.value; break;\n      }\n      else switch (i) {\n        case 0: node = header; break;\n        case 1: lane = header; break;\n      }\n      i += 1;\n    }\n  }\n  return new UnlinkRequest(node, lane);\n};\n\n\nfunction UnlinkedResponse(node, lane) {\n  ResponseEnvelope.call(this);\n  Object.defineProperty(this, 'node', {enumerable: true, value: node});\n  Object.defineProperty(this, 'lane', {enumerable: true, value: lane});\n}\nUnlinkedResponse.prototype = Object.create(ResponseEnvelope.prototype);\nUnlinkedResponse.prototype.constructor = UnlinkedResponse;\nObject.defineProperty(UnlinkedResponse.prototype, 'isUnlinkedResponse', {value: true});\nUnlinkedResponse.prototype.encode = function () {\n  return recon(\n    recon.attr('unlinked', recon(\n      recon.slot('node', this.node),\n      recon.slot('lane', this.lane))));\n};\nUnlinkedResponse.decode = function (record) {\n  var node = '';\n  var lane = '';\n  var heading = record.head();\n  if (heading.value.isRecord) {\n    var headers = heading.value.iterator();\n    var i = 0;\n    while (!headers.isEmpty()) {\n      var header = headers.next();\n      if (header.isField) switch (header.key) {\n        case 'node': node = header.value; break;\n        case 'lane': lane = header.value; break;\n      }\n      else switch (i) {\n        case 0: node = header; break;\n        case 1: lane = header; break;\n      }\n      i += 1;\n    }\n  }\n  return new UnlinkedResponse(node, lane);\n};\n\n\nfunction GetRequest(node) {\n  RequestEnvelope.call(this);\n  Object.defineProperty(this, 'node', {enumerable: true, value: node});\n}\nGetRequest.prototype = Object.create(RequestEnvelope.prototype);\nGetRequest.prototype.constructor = GetRequest;\nObject.defineProperty(GetRequest.prototype, 'isGetRequest', {value: true});\nGetRequest.prototype.encode = function () {\n  return recon(\n    recon.attr('get', recon(\n      recon.slot('node', this.node))));\n};\nGetRequest.decode = function (record) {\n  var node = '';\n  var heading = record.head();\n  if (heading.value.isRecord) {\n    var headers = heading.value.iterator();\n    var i = 0;\n    while (!headers.isEmpty()) {\n      var header = headers.next();\n      if (header.isField) switch (header.key) {\n        case 'node': node = header.value; break;\n      }\n      else switch (i) {\n        case 0: node = header; break;\n      }\n      i += 1;\n    }\n  }\n  else if (!heading.value.isExtant) node = heading.value;\n  return new GetRequest(node);\n};\n\n\nfunction PutRequest(node, body) {\n  RequestEnvelope.call(this);\n  Object.defineProperty(this, 'node', {enumerable: true, value: node});\n  Object.defineProperty(this, 'body', {enumerable: true, value: body || recon.empty()});\n}\nPutRequest.prototype = Object.create(RequestEnvelope.prototype);\nPutRequest.prototype.constructor = PutRequest;\nObject.defineProperty(PutRequest.prototype, 'isPutRequest', {value: true});\nPutRequest.prototype.encode = function () {\n  var builder = recon.builder();\n  builder.attr('put', recon(\n    recon.slot('node', this.node)));\n  builder.appendRecord(this.body);\n  return builder.state();\n};\nPutRequest.decode = function (record) {\n  var node = '';\n  var body = record.tail();\n  var heading = record.head();\n  if (heading.value.isRecord) {\n    var headers = heading.value.iterator();\n    var i = 0;\n    while (!headers.isEmpty()) {\n      var header = headers.next();\n      if (header.isField) switch (header.key) {\n        case 'node': node = header.value; break;\n      }\n      else switch (i) {\n        case 0: node = header; break;\n      }\n      i += 1;\n    }\n  }\n  else if (!heading.value.isExtant) node = heading.value;\n  return new PutRequest(node, body);\n};\n\n\nfunction StateResponse(node, body) {\n  ResponseEnvelope.call(this);\n  Object.defineProperty(this, 'node', {enumerable: true, value: node});\n  Object.defineProperty(this, 'body', {enumerable: true, value: body || recon.empty()});\n}\nStateResponse.prototype = Object.create(ResponseEnvelope.prototype);\nStateResponse.prototype.constructor = StateResponse;\nObject.defineProperty(StateResponse.prototype, 'isStateResponse', {value: true});\nStateResponse.prototype.encode = function () {\n  var builder = recon.builder();\n  builder.attr('state', recon(\n    recon.slot('node', this.node)));\n  builder.appendRecord(this.body);\n  return builder.state();\n};\nStateResponse.decode = function (record) {\n  var node = '';\n  var body = record.tail();\n  var heading = record.head();\n  if (heading.value.isRecord) {\n    var headers = heading.value.iterator();\n    var i = 0;\n    while (!headers.isEmpty()) {\n      var header = headers.next();\n      if (header.isField) switch (header.key) {\n        case 'node': node = header.value; break;\n      }\n      else switch (i) {\n        case 0: node = header; break;\n      }\n      i += 1;\n    }\n  }\n  else if (!heading.value.isExtant) node = heading.value;\n  return new StateResponse(node, body);\n};\n\n\nexports.decode = decode;\nexports.encode = encode;\nexports.parse = parse;\nexports.stringify = stringify;\nexports.Envelope = Envelope;\nexports.RequestEnvelope = RequestEnvelope;\nexports.ResponseEnvelope = ResponseEnvelope;\nexports.MessageEnvelope = MessageEnvelope;\nexports.EventMessage = EventMessage;\nexports.CommandMessage = CommandMessage;\nexports.SyncRequest = SyncRequest;\nexports.SyncedResponse = SyncedResponse;\nexports.LinkRequest = LinkRequest;\nexports.LinkedResponse = LinkedResponse;\nexports.UnlinkRequest = UnlinkRequest;\nexports.UnlinkedResponse = UnlinkedResponse;\nexports.GetRequest = GetRequest;\nexports.PutRequest = PutRequest;\nexports.StateResponse = StateResponse;\n\n},{\"recon-js\":1}],3:[function(require,module,exports){\n/*! https://mths.be/punycode v1.3.2 by @mathias, modified for URI.js */\r\n\r\nvar punycode = (function () {\r\n\r\n\t/**\r\n\t * The `punycode` object.\r\n\t * @name punycode\r\n\t * @type Object\r\n\t */\r\n\tvar punycode,\r\n\r\n\t/** Highest positive signed 32-bit float value */\r\n\tmaxInt = 2147483647, // aka. 0x7FFFFFFF or 2^31-1\r\n\r\n\t/** Bootstring parameters */\r\n\tbase = 36,\r\n\ttMin = 1,\r\n\ttMax = 26,\r\n\tskew = 38,\r\n\tdamp = 700,\r\n\tinitialBias = 72,\r\n\tinitialN = 128, // 0x80\r\n\tdelimiter = '-', // '\\x2D'\r\n\r\n\t/** Regular expressions */\r\n\tregexPunycode = /^xn--/,\r\n\tregexNonASCII = /[^\\x20-\\x7E]/, // unprintable ASCII chars + non-ASCII chars\r\n\tregexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g, // RFC 3490 separators\r\n\r\n\t/** Error messages */\r\n\terrors = {\r\n\t\t'overflow': 'Overflow: input needs wider integers to process',\r\n\t\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\r\n\t\t'invalid-input': 'Invalid input'\r\n\t},\r\n\r\n\t/** Convenience shortcuts */\r\n\tbaseMinusTMin = base - tMin,\r\n\tfloor = Math.floor,\r\n\tstringFromCharCode = String.fromCharCode,\r\n\r\n\t/** Temporary variable */\r\n\tkey;\r\n\r\n\t/*--------------------------------------------------------------------------*/\r\n\r\n\t/**\r\n\t * A generic error utility function.\r\n\t * @private\r\n\t * @param {String} type The error type.\r\n\t * @returns {Error} Throws a `RangeError` with the applicable error message.\r\n\t */\r\n\tfunction error(type) {\r\n\t\tthrow new RangeError(errors[type]);\r\n\t}\r\n\r\n\t/**\r\n\t * A generic `Array#map` utility function.\r\n\t * @private\r\n\t * @param {Array} array The array to iterate over.\r\n\t * @param {Function} callback The function that gets called for every array\r\n\t * item.\r\n\t * @returns {Array} A new array of values returned by the callback function.\r\n\t */\r\n\tfunction map(array, fn) {\r\n\t\tvar length = array.length;\r\n\t\tvar result = [];\r\n\t\twhile (length--) {\r\n\t\t\tresult[length] = fn(array[length]);\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\t/**\r\n\t * A simple `Array#map`-like wrapper to work with domain name strings or email\r\n\t * addresses.\r\n\t * @private\r\n\t * @param {String} domain The domain name or email address.\r\n\t * @param {Function} callback The function that gets called for every\r\n\t * character.\r\n\t * @returns {Array} A new string of characters returned by the callback\r\n\t * function.\r\n\t */\r\n\tfunction mapDomain(string, fn) {\r\n\t\tvar parts = string.split('@');\r\n\t\tvar result = '';\r\n\t\tif (parts.length > 1) {\r\n\t\t\t// In email addresses, only the domain name should be punycoded. Leave\r\n\t\t\t// the local part (i.e. everything up to `@`) intact.\r\n\t\t\tresult = parts[0] + '@';\r\n\t\t\tstring = parts[1];\r\n\t\t}\r\n\t\t// Avoid `split(regex)` for IE8 compatibility. See #17.\r\n\t\tstring = string.replace(regexSeparators, '\\x2E');\r\n\t\tvar labels = string.split('.');\r\n\t\tvar encoded = map(labels, fn).join('.');\r\n\t\treturn result + encoded;\r\n\t}\r\n\r\n\t/**\r\n\t * Creates an array containing the numeric code points of each Unicode\r\n\t * character in the string. While JavaScript uses UCS-2 internally,\r\n\t * this function will convert a pair of surrogate halves (each of which\r\n\t * UCS-2 exposes as separate characters) into a single code point,\r\n\t * matching UTF-16.\r\n\t * @see `punycode.ucs2.encode`\r\n\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\r\n\t * @memberOf punycode.ucs2\r\n\t * @name decode\r\n\t * @param {String} string The Unicode input string (UCS-2).\r\n\t * @returns {Array} The new array of code points.\r\n\t */\r\n\tfunction ucs2decode(string) {\r\n\t\tvar output = [],\r\n\t\t    counter = 0,\r\n\t\t    length = string.length,\r\n\t\t    value,\r\n\t\t    extra;\r\n\t\twhile (counter < length) {\r\n\t\t\tvalue = string.charCodeAt(counter++);\r\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\r\n\t\t\t\t// high surrogate, and there is a next character\r\n\t\t\t\textra = string.charCodeAt(counter++);\r\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\r\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\r\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\r\n\t\t\t\t\toutput.push(value);\r\n\t\t\t\t\tcounter--;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\toutput.push(value);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn output;\r\n\t}\r\n\r\n\t/**\r\n\t * Creates a string based on an array of numeric code points.\r\n\t * @see `punycode.ucs2.decode`\r\n\t * @memberOf punycode.ucs2\r\n\t * @name encode\r\n\t * @param {Array} codePoints The array of numeric code points.\r\n\t * @returns {String} The new Unicode string (UCS-2).\r\n\t */\r\n\tfunction ucs2encode(array) {\r\n\t\treturn map(array, function(value) {\r\n\t\t\tvar output = '';\r\n\t\t\tif (value > 0xFFFF) {\r\n\t\t\t\tvalue -= 0x10000;\r\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\r\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\r\n\t\t\t}\r\n\t\t\toutput += stringFromCharCode(value);\r\n\t\t\treturn output;\r\n\t\t}).join('');\r\n\t}\r\n\r\n\t/**\r\n\t * Converts a basic code point into a digit/integer.\r\n\t * @see `digitToBasic()`\r\n\t * @private\r\n\t * @param {Number} codePoint The basic numeric code point value.\r\n\t * @returns {Number} The numeric value of a basic code point (for use in\r\n\t * representing integers) in the range `0` to `base - 1`, or `base` if\r\n\t * the code point does not represent a value.\r\n\t */\r\n\tfunction basicToDigit(codePoint) {\r\n\t\tif (codePoint - 48 < 10) {\r\n\t\t\treturn codePoint - 22;\r\n\t\t}\r\n\t\tif (codePoint - 65 < 26) {\r\n\t\t\treturn codePoint - 65;\r\n\t\t}\r\n\t\tif (codePoint - 97 < 26) {\r\n\t\t\treturn codePoint - 97;\r\n\t\t}\r\n\t\treturn base;\r\n\t}\r\n\r\n\t/**\r\n\t * Converts a digit/integer into a basic code point.\r\n\t * @see `basicToDigit()`\r\n\t * @private\r\n\t * @param {Number} digit The numeric value of a basic code point.\r\n\t * @returns {Number} The basic code point whose value (when used for\r\n\t * representing integers) is `digit`, which needs to be in the range\r\n\t * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\r\n\t * used; else, the lowercase form is used. The behavior is undefined\r\n\t * if `flag` is non-zero and `digit` has no uppercase form.\r\n\t */\r\n\tfunction digitToBasic(digit, flag) {\r\n\t\t//  0..25 map to ASCII a..z or A..Z\r\n\t\t// 26..35 map to ASCII 0..9\r\n\t\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\r\n\t}\r\n\r\n\t/**\r\n\t * Bias adaptation function as per section 3.4 of RFC 3492.\r\n\t * https://tools.ietf.org/html/rfc3492#section-3.4\r\n\t * @private\r\n\t */\r\n\tfunction adapt(delta, numPoints, firstTime) {\r\n\t\tvar k = 0;\r\n\t\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\r\n\t\tdelta += floor(delta / numPoints);\r\n\t\tfor (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {\r\n\t\t\tdelta = floor(delta / baseMinusTMin);\r\n\t\t}\r\n\t\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\r\n\t}\r\n\r\n\t/**\r\n\t * Converts a Punycode string of ASCII-only symbols to a string of Unicode\r\n\t * symbols.\r\n\t * @memberOf punycode\r\n\t * @param {String} input The Punycode string of ASCII-only symbols.\r\n\t * @returns {String} The resulting string of Unicode symbols.\r\n\t */\r\n\tfunction decode(input) {\r\n\t\t// Don't use UCS-2\r\n\t\tvar output = [],\r\n\t\t    inputLength = input.length,\r\n\t\t    out,\r\n\t\t    i = 0,\r\n\t\t    n = initialN,\r\n\t\t    bias = initialBias,\r\n\t\t    basic,\r\n\t\t    j,\r\n\t\t    index,\r\n\t\t    oldi,\r\n\t\t    w,\r\n\t\t    k,\r\n\t\t    digit,\r\n\t\t    t,\r\n\t\t    /** Cached calculation results */\r\n\t\t    baseMinusT;\r\n\r\n\t\t// Handle the basic code points: let `basic` be the number of input code\r\n\t\t// points before the last delimiter, or `0` if there is none, then copy\r\n\t\t// the first basic code points to the output.\r\n\r\n\t\tbasic = input.lastIndexOf(delimiter);\r\n\t\tif (basic < 0) {\r\n\t\t\tbasic = 0;\r\n\t\t}\r\n\r\n\t\tfor (j = 0; j < basic; ++j) {\r\n\t\t\t// if it's not a basic code point\r\n\t\t\tif (input.charCodeAt(j) >= 0x80) {\r\n\t\t\t\terror('not-basic');\r\n\t\t\t}\r\n\t\t\toutput.push(input.charCodeAt(j));\r\n\t\t}\r\n\r\n\t\t// Main decoding loop: start just after the last delimiter if any basic code\r\n\t\t// points were copied; start at the beginning otherwise.\r\n\r\n\t\tfor (index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {\r\n\r\n\t\t\t// `index` is the index of the next character to be consumed.\r\n\t\t\t// Decode a generalized variable-length integer into `delta`,\r\n\t\t\t// which gets added to `i`. The overflow checking is easier\r\n\t\t\t// if we increase `i` as we go, then subtract off its starting\r\n\t\t\t// value at the end to obtain `delta`.\r\n\t\t\tfor (oldi = i, w = 1, k = base; /* no condition */; k += base) {\r\n\r\n\t\t\t\tif (index >= inputLength) {\r\n\t\t\t\t\terror('invalid-input');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdigit = basicToDigit(input.charCodeAt(index++));\r\n\r\n\t\t\t\tif (digit >= base || digit > floor((maxInt - i) / w)) {\r\n\t\t\t\t\terror('overflow');\r\n\t\t\t\t}\r\n\r\n\t\t\t\ti += digit * w;\r\n\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\r\n\r\n\t\t\t\tif (digit < t) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbaseMinusT = base - t;\r\n\t\t\t\tif (w > floor(maxInt / baseMinusT)) {\r\n\t\t\t\t\terror('overflow');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tw *= baseMinusT;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tout = output.length + 1;\r\n\t\t\tbias = adapt(i - oldi, out, oldi == 0);\r\n\r\n\t\t\t// `i` was supposed to wrap around from `out` to `0`,\r\n\t\t\t// incrementing `n` each time, so we'll fix that now:\r\n\t\t\tif (floor(i / out) > maxInt - n) {\r\n\t\t\t\terror('overflow');\r\n\t\t\t}\r\n\r\n\t\t\tn += floor(i / out);\r\n\t\t\ti %= out;\r\n\r\n\t\t\t// Insert `n` at position `i` of the output\r\n\t\t\toutput.splice(i++, 0, n);\r\n\r\n\t\t}\r\n\r\n\t\treturn ucs2encode(output);\r\n\t}\r\n\r\n\t/**\r\n\t * Converts a string of Unicode symbols (e.g. a domain name label) to a\r\n\t * Punycode string of ASCII-only symbols.\r\n\t * @memberOf punycode\r\n\t * @param {String} input The string of Unicode symbols.\r\n\t * @returns {String} The resulting Punycode string of ASCII-only symbols.\r\n\t */\r\n\tfunction encode(input) {\r\n\t\tvar n,\r\n\t\t    delta,\r\n\t\t    handledCPCount,\r\n\t\t    basicLength,\r\n\t\t    bias,\r\n\t\t    j,\r\n\t\t    m,\r\n\t\t    q,\r\n\t\t    k,\r\n\t\t    t,\r\n\t\t    currentValue,\r\n\t\t    output = [],\r\n\t\t    /** `inputLength` will hold the number of code points in `input`. */\r\n\t\t    inputLength,\r\n\t\t    /** Cached calculation results */\r\n\t\t    handledCPCountPlusOne,\r\n\t\t    baseMinusT,\r\n\t\t    qMinusT;\r\n\r\n\t\t// Convert the input in UCS-2 to Unicode\r\n\t\tinput = ucs2decode(input);\r\n\r\n\t\t// Cache the length\r\n\t\tinputLength = input.length;\r\n\r\n\t\t// Initialize the state\r\n\t\tn = initialN;\r\n\t\tdelta = 0;\r\n\t\tbias = initialBias;\r\n\r\n\t\t// Handle the basic code points\r\n\t\tfor (j = 0; j < inputLength; ++j) {\r\n\t\t\tcurrentValue = input[j];\r\n\t\t\tif (currentValue < 0x80) {\r\n\t\t\t\toutput.push(stringFromCharCode(currentValue));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\thandledCPCount = basicLength = output.length;\r\n\r\n\t\t// `handledCPCount` is the number of code points that have been handled;\r\n\t\t// `basicLength` is the number of basic code points.\r\n\r\n\t\t// Finish the basic string - if it is not empty - with a delimiter\r\n\t\tif (basicLength) {\r\n\t\t\toutput.push(delimiter);\r\n\t\t}\r\n\r\n\t\t// Main encoding loop:\r\n\t\twhile (handledCPCount < inputLength) {\r\n\r\n\t\t\t// All non-basic code points < n have been handled already. Find the next\r\n\t\t\t// larger one:\r\n\t\t\tfor (m = maxInt, j = 0; j < inputLength; ++j) {\r\n\t\t\t\tcurrentValue = input[j];\r\n\t\t\t\tif (currentValue >= n && currentValue < m) {\r\n\t\t\t\t\tm = currentValue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\r\n\t\t\t// but guard against overflow\r\n\t\t\thandledCPCountPlusOne = handledCPCount + 1;\r\n\t\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\r\n\t\t\t\terror('overflow');\r\n\t\t\t}\r\n\r\n\t\t\tdelta += (m - n) * handledCPCountPlusOne;\r\n\t\t\tn = m;\r\n\r\n\t\t\tfor (j = 0; j < inputLength; ++j) {\r\n\t\t\t\tcurrentValue = input[j];\r\n\r\n\t\t\t\tif (currentValue < n && ++delta > maxInt) {\r\n\t\t\t\t\terror('overflow');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (currentValue == n) {\r\n\t\t\t\t\t// Represent delta as a generalized variable-length integer\r\n\t\t\t\t\tfor (q = delta, k = base; /* no condition */; k += base) {\r\n\t\t\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\r\n\t\t\t\t\t\tif (q < t) {\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tqMinusT = q - t;\r\n\t\t\t\t\t\tbaseMinusT = base - t;\r\n\t\t\t\t\t\toutput.push(\r\n\t\t\t\t\t\t\tstringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tq = floor(qMinusT / baseMinusT);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\r\n\t\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\r\n\t\t\t\t\tdelta = 0;\r\n\t\t\t\t\t++handledCPCount;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t++delta;\r\n\t\t\t++n;\r\n\r\n\t\t}\r\n\t\treturn output.join('');\r\n\t}\r\n\r\n\t/**\r\n\t * Converts a Punycode string representing a domain name or an email address\r\n\t * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\r\n\t * it doesn't matter if you call it on a string that has already been\r\n\t * converted to Unicode.\r\n\t * @memberOf punycode\r\n\t * @param {String} input The Punycoded domain name or email address to\r\n\t * convert to Unicode.\r\n\t * @returns {String} The Unicode representation of the given Punycode\r\n\t * string.\r\n\t */\r\n\tfunction toUnicode(input) {\r\n\t\treturn mapDomain(input, function(string) {\r\n\t\t\treturn regexPunycode.test(string)\r\n\t\t\t\t? decode(string.slice(4).toLowerCase())\r\n\t\t\t\t: string;\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Converts a Unicode string representing a domain name or an email address to\r\n\t * Punycode. Only the non-ASCII parts of the domain name will be converted,\r\n\t * i.e. it doesn't matter if you call it with a domain that's already in\r\n\t * ASCII.\r\n\t * @memberOf punycode\r\n\t * @param {String} input The domain name or email address to convert, as a\r\n\t * Unicode string.\r\n\t * @returns {String} The Punycode representation of the given domain name or\r\n\t * email address.\r\n\t */\r\n\tfunction toASCII(input) {\r\n\t\treturn mapDomain(input, function(string) {\r\n\t\t\treturn regexNonASCII.test(string)\r\n\t\t\t\t? 'xn--' + encode(string)\r\n\t\t\t\t: string;\r\n\t\t});\r\n\t}\r\n\r\n\t/*--------------------------------------------------------------------------*/\r\n\r\n\t/** Define the public API */\r\n\tpunycode = {\r\n\t\t/**\r\n\t\t * A string representing the current Punycode.js version number.\r\n\t\t * @memberOf punycode\r\n\t\t * @type String\r\n\t\t */\r\n\t\tversion: '1.3.2',\r\n\t\t/**\r\n\t\t * An object of methods to convert from JavaScript's internal character\r\n\t\t * representation (UCS-2) to Unicode code points, and back.\r\n\t\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\r\n\t\t * @memberOf punycode\r\n\t\t * @type Object\r\n\t\t */\r\n\t\tucs2: {\r\n\t\t\tdecode: ucs2decode,\r\n\t\t\tencode: ucs2encode\r\n\t\t},\r\n\t\tdecode: decode,\r\n\t\tencode: encode,\r\n\t\ttoASCII: toASCII,\r\n\t\ttoUnicode: toUnicode\r\n\t};\r\n\r\n\treturn punycode;\r\n}());\r\n\r\nif (typeof COMPILED === \"undefined\" && typeof module !== \"undefined\") module.exports = punycode;\n},{}],4:[function(require,module,exports){\n///<reference path=\"commonjs.d.ts\"/>\r\nrequire(\"./schemes/http\");\r\nrequire(\"./schemes/urn\");\r\nrequire(\"./schemes/mailto\");\r\n\n},{\"./schemes/http\":5,\"./schemes/mailto\":6,\"./schemes/urn\":7}],5:[function(require,module,exports){\n///<reference path=\"../uri.ts\"/>\r\nif (typeof COMPILED === \"undefined\" && typeof URI === \"undefined\" && typeof require === \"function\")\r\n    var URI = require(\"../uri\");\r\nURI.SCHEMES[\"http\"] = URI.SCHEMES[\"https\"] = {\r\n    domainHost: true,\r\n    parse: function (components, options) {\r\n        //report missing host\r\n        if (!components.host) {\r\n            components.error = components.error || \"HTTP URIs must have a host.\";\r\n        }\r\n        return components;\r\n    },\r\n    serialize: function (components, options) {\r\n        //normalize the default port\r\n        if (components.port === (String(components.scheme).toLowerCase() !== \"https\" ? 80 : 443) || components.port === \"\") {\r\n            components.port = undefined;\r\n        }\r\n        //normalize the empty path\r\n        if (!components.path) {\r\n            components.path = \"/\";\r\n        }\r\n        //NOTE: We do not parse query strings for HTTP URIs\r\n        //as WWW Form Url Encoded query strings are part of the HTML4+ spec,\r\n        //and not the HTTP spec. \r\n        return components;\r\n    }\r\n};\r\n\n},{\"../uri\":8}],6:[function(require,module,exports){\n///<reference path=\"../uri.ts\"/>\r\nif (typeof COMPILED === \"undefined\" && typeof URI === \"undefined\" && typeof require === \"function\") {\r\n    var URI = require(\"../uri\"), punycode = require(\"../punycode\");\r\n}\r\n(function () {\r\n    function merge() {\r\n        var sets = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            sets[_i - 0] = arguments[_i];\r\n        }\r\n        if (sets.length > 1) {\r\n            sets[0] = sets[0].slice(0, -1);\r\n            var xl = sets.length - 1;\r\n            for (var x = 1; x < xl; ++x) {\r\n                sets[x] = sets[x].slice(1, -1);\r\n            }\r\n            sets[xl] = sets[xl].slice(1);\r\n            return sets.join('');\r\n        }\r\n        else {\r\n            return sets[0];\r\n        }\r\n    }\r\n    function subexp(str) {\r\n        return \"(?:\" + str + \")\";\r\n    }\r\n    var O = {}, isIRI = URI.IRI_SUPPORT, \r\n    //RFC 3986\r\n    UNRESERVED$$ = \"[A-Za-z0-9\\\\-\\\\.\\\\_\\\\~\" + (isIRI ? \"\\\\xA0-\\\\u200D\\\\u2010-\\\\u2029\\\\u202F-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFEF\" : \"\") + \"]\", HEXDIG$$ = \"[0-9A-Fa-f]\", PCT_ENCODED$ = subexp(subexp(\"%[EFef]\" + HEXDIG$$ + \"%\" + HEXDIG$$ + HEXDIG$$ + \"%\" + HEXDIG$$ + HEXDIG$$) + \"|\" + subexp(\"%[89A-Fa-f]\" + HEXDIG$$ + \"%\" + HEXDIG$$ + HEXDIG$$) + \"|\" + subexp(\"%\" + HEXDIG$$ + HEXDIG$$)), \r\n    //RFC 5322, except these symbols as per RFC 6068: @ : / ? # [ ] & ; = \r\n    //ATEXT$$ = \"[A-Za-z0-9\\\\!\\\\#\\\\$\\\\%\\\\&\\\\'\\\\*\\\\+\\\\-\\\\/\\\\=\\\\?\\\\^\\\\_\\\\`\\\\{\\\\|\\\\}\\\\~]\",\r\n    //WSP$$ = \"[\\\\x20\\\\x09]\",\r\n    //OBS_QTEXT$$ = \"[\\\\x01-\\\\x08\\\\x0B\\\\x0C\\\\x0E-\\\\x1F\\\\x7F]\",  //(%d1-8 / %d11-12 / %d14-31 / %d127)\r\n    //QTEXT$$ = merge(\"[\\\\x21\\\\x23-\\\\x5B\\\\x5D-\\\\x7E]\", OBS_QTEXT$$),  //%d33 / %d35-91 / %d93-126 / obs-qtext\r\n    //VCHAR$$ = \"[\\\\x21-\\\\x7E]\",\r\n    //WSP$$ = \"[\\\\x20\\\\x09]\",\r\n    //OBS_QP$ = subexp(\"\\\\\\\\\" + merge(\"[\\\\x00\\\\x0D\\\\x0A]\", OBS_QTEXT$$)),  //%d0 / CR / LF / obs-qtext\r\n    //FWS$ = subexp(subexp(WSP$$ + \"*\" + \"\\\\x0D\\\\x0A\") + \"?\" + WSP$$ + \"+\"),\r\n    //QUOTED_PAIR$ = subexp(subexp(\"\\\\\\\\\" + subexp(VCHAR$$ + \"|\" + WSP$$)) + \"|\" + OBS_QP$),\r\n    //QUOTED_STRING$ = subexp('\\\\\"' + subexp(FWS$ + \"?\" + QCONTENT$) + \"*\" + FWS$ + \"?\" + '\\\\\"'),\r\n    ATEXT$$ = \"[A-Za-z0-9\\\\!\\\\$\\\\%\\\\'\\\\*\\\\+\\\\-\\\\^\\\\_\\\\`\\\\{\\\\|\\\\}\\\\~]\", QTEXT$$ = \"[\\\\!\\\\$\\\\%\\\\'\\\\(\\\\)\\\\*\\\\+\\\\,\\\\-\\\\.0-9\\\\<\\\\>A-Z\\\\x5E-\\\\x7E]\", VCHAR$$ = merge(QTEXT$$, \"[\\\\\\\"\\\\\\\\]\"), DOT_ATOM_TEXT$ = subexp(ATEXT$$ + \"+\" + subexp(\"\\\\.\" + ATEXT$$ + \"+\") + \"*\"), QUOTED_PAIR$ = subexp(\"\\\\\\\\\" + VCHAR$$), QCONTENT$ = subexp(QTEXT$$ + \"|\" + QUOTED_PAIR$), QUOTED_STRING$ = subexp('\\\\\"' + QCONTENT$ + \"*\" + '\\\\\"'), \r\n    //RFC 6068\r\n    DTEXT_NO_OBS$$ = \"[\\\\x21-\\\\x5A\\\\x5E-\\\\x7E]\", SOME_DELIMS$$ = \"[\\\\!\\\\$\\\\'\\\\(\\\\)\\\\*\\\\+\\\\,\\\\;\\\\:\\\\@]\", QCHAR$ = subexp(UNRESERVED$$ + \"|\" + PCT_ENCODED$ + \"|\" + SOME_DELIMS$$), DOMAIN$ = subexp(DOT_ATOM_TEXT$ + \"|\" + \"\\\\[\" + DTEXT_NO_OBS$$ + \"*\" + \"\\\\]\"), LOCAL_PART$ = subexp(DOT_ATOM_TEXT$ + \"|\" + QUOTED_STRING$), ADDR_SPEC$ = subexp(LOCAL_PART$ + \"\\\\@\" + DOMAIN$), TO$ = subexp(ADDR_SPEC$ + subexp(\"\\\\,\" + ADDR_SPEC$) + \"*\"), HFNAME$ = subexp(QCHAR$ + \"*\"), HFVALUE$ = HFNAME$, HFIELD$ = subexp(HFNAME$ + \"\\\\=\" + HFVALUE$), HFIELDS2$ = subexp(HFIELD$ + subexp(\"\\\\&\" + HFIELD$) + \"*\"), HFIELDS$ = subexp(\"\\\\?\" + HFIELDS2$), MAILTO_URI = URI.VALIDATE_SUPPORT && new RegExp(\"^mailto\\\\:\" + TO$ + \"?\" + HFIELDS$ + \"?$\"), UNRESERVED = new RegExp(UNRESERVED$$, \"g\"), PCT_ENCODED = new RegExp(PCT_ENCODED$, \"g\"), NOT_LOCAL_PART = new RegExp(merge(\"[^]\", ATEXT$$, \"[\\\\.]\", '[\\\\\"]', VCHAR$$), \"g\"), NOT_DOMAIN = new RegExp(merge(\"[^]\", ATEXT$$, \"[\\\\.]\", \"[\\\\[]\", DTEXT_NO_OBS$$, \"[\\\\]]\"), \"g\"), NOT_HFNAME = new RegExp(merge(\"[^]\", UNRESERVED$$, SOME_DELIMS$$), \"g\"), NOT_HFVALUE = NOT_HFNAME, TO = URI.VALIDATE_SUPPORT && new RegExp(\"^\" + TO$ + \"$\"), HFIELDS = URI.VALIDATE_SUPPORT && new RegExp(\"^\" + HFIELDS2$ + \"$\");\r\n    function toUpperCase(str) {\r\n        return str.toUpperCase();\r\n    }\r\n    function decodeUnreserved(str) {\r\n        var decStr = URI.pctDecChars(str);\r\n        return (!decStr.match(UNRESERVED) ? str : decStr);\r\n    }\r\n    function toArray(obj) {\r\n        return obj !== undefined && obj !== null ? (obj instanceof Array && !obj.callee ? obj : (typeof obj.length !== \"number\" || obj.split || obj.setInterval || obj.call ? [obj] : Array.prototype.slice.call(obj))) : [];\r\n    }\r\n    URI.SCHEMES[\"mailto\"] = {\r\n        parse: function (components, options) {\r\n            if (URI.VALIDATE_SUPPORT && !components.error) {\r\n                if (components.path && !TO.test(components.path)) {\r\n                    components.error = \"Email address is not valid\";\r\n                }\r\n                else if (components.query && !HFIELDS.test(components.query)) {\r\n                    components.error = \"Header fields are invalid\";\r\n                }\r\n            }\r\n            var to = components.to = (components.path ? components.path.split(\",\") : []);\r\n            components.path = undefined;\r\n            if (components.query) {\r\n                var unknownHeaders = false, headers = {};\r\n                var hfields = components.query.split(\"&\");\r\n                for (var x = 0, xl = hfields.length; x < xl; ++x) {\r\n                    var hfield = hfields[x].split(\"=\");\r\n                    switch (hfield[0]) {\r\n                        case \"to\":\r\n                            var toAddrs = hfield[1].split(\",\");\r\n                            for (var x_1 = 0, xl_1 = toAddrs.length; x_1 < xl_1; ++x_1) {\r\n                                to.push(toAddrs[x_1]);\r\n                            }\r\n                            break;\r\n                        case \"subject\":\r\n                            components.subject = URI.unescapeComponent(hfield[1], options);\r\n                            break;\r\n                        case \"body\":\r\n                            components.body = URI.unescapeComponent(hfield[1], options);\r\n                            break;\r\n                        default:\r\n                            unknownHeaders = true;\r\n                            headers[URI.unescapeComponent(hfield[0], options)] = URI.unescapeComponent(hfield[1], options);\r\n                            break;\r\n                    }\r\n                }\r\n                if (unknownHeaders)\r\n                    components.headers = headers;\r\n            }\r\n            components.query = undefined;\r\n            for (var x = 0, xl = to.length; x < xl; ++x) {\r\n                var addr = to[x].split(\"@\");\r\n                addr[0] = URI.unescapeComponent(addr[0]);\r\n                if (typeof punycode !== \"undefined\" && !options.unicodeSupport) {\r\n                    //convert Unicode IDN -> ASCII IDN\r\n                    try {\r\n                        addr[1] = punycode.toASCII(URI.unescapeComponent(addr[1], options).toLowerCase());\r\n                    }\r\n                    catch (e) {\r\n                        components.error = components.error || \"Email address's domain name can not be converted to ASCII via punycode: \" + e;\r\n                    }\r\n                }\r\n                else {\r\n                    addr[1] = URI.unescapeComponent(addr[1], options).toLowerCase();\r\n                }\r\n                to[x] = addr.join(\"@\");\r\n            }\r\n            return components;\r\n        },\r\n        serialize: function (components, options) {\r\n            var to = toArray(components.to);\r\n            if (to) {\r\n                for (var x = 0, xl = to.length; x < xl; ++x) {\r\n                    var toAddr = String(to[x]);\r\n                    var atIdx = toAddr.lastIndexOf(\"@\");\r\n                    var localPart = toAddr.slice(0, atIdx);\r\n                    var domain = toAddr.slice(atIdx + 1);\r\n                    localPart = localPart.replace(PCT_ENCODED, decodeUnreserved).replace(PCT_ENCODED, toUpperCase).replace(NOT_LOCAL_PART, URI.pctEncChar);\r\n                    if (typeof punycode !== \"undefined\") {\r\n                        //convert IDN via punycode\r\n                        try {\r\n                            domain = (!options.iri ? punycode.toASCII(URI.unescapeComponent(domain, options).toLowerCase()) : punycode.toUnicode(domain));\r\n                        }\r\n                        catch (e) {\r\n                            components.error = components.error || \"Email address's domain name can not be converted to \" + (!options.iri ? \"ASCII\" : \"Unicode\") + \" via punycode: \" + e;\r\n                        }\r\n                    }\r\n                    else {\r\n                        domain = domain.replace(PCT_ENCODED, decodeUnreserved).toLowerCase().replace(PCT_ENCODED, toUpperCase).replace(NOT_DOMAIN, URI.pctEncChar);\r\n                    }\r\n                    to[x] = localPart + \"@\" + domain;\r\n                }\r\n                components.path = to.join(\",\");\r\n            }\r\n            var headers = components.headers = components.headers || {};\r\n            if (components.subject)\r\n                headers[\"subject\"] = components.subject;\r\n            if (components.body)\r\n                headers[\"body\"] = components.body;\r\n            var fields = [];\r\n            for (var name_1 in headers) {\r\n                if (headers[name_1] !== O[name_1]) {\r\n                    fields.push(name_1.replace(PCT_ENCODED, decodeUnreserved).replace(PCT_ENCODED, toUpperCase).replace(NOT_HFNAME, URI.pctEncChar) +\r\n                        \"=\" +\r\n                        headers[name_1].replace(PCT_ENCODED, decodeUnreserved).replace(PCT_ENCODED, toUpperCase).replace(NOT_HFVALUE, URI.pctEncChar));\r\n                }\r\n            }\r\n            if (fields.length) {\r\n                components.query = fields.join(\"&\");\r\n            }\r\n            return components;\r\n        }\r\n    };\r\n})();\r\n\n},{\"../punycode\":3,\"../uri\":8}],7:[function(require,module,exports){\n///<reference path=\"../uri.ts\"/>\r\nif (typeof COMPILED === \"undefined\" && typeof URI === \"undefined\" && typeof require === \"function\")\r\n    var URI = require(\"../uri\");\r\n(function () {\r\n    var pctEncChar = URI.pctEncChar, NID$ = \"(?:[0-9A-Za-z][0-9A-Za-z\\\\-]{1,31})\", PCT_ENCODED$ = \"(?:\\\\%[0-9A-Fa-f]{2})\", TRANS$$ = \"[0-9A-Za-z\\\\(\\\\)\\\\+\\\\,\\\\-\\\\.\\\\:\\\\=\\\\@\\\\;\\\\$\\\\_\\\\!\\\\*\\\\'\\\\/\\\\?\\\\#]\", NSS$ = \"(?:(?:\" + PCT_ENCODED$ + \"|\" + TRANS$$ + \")+)\", URN_SCHEME = new RegExp(\"^urn\\\\:(\" + NID$ + \")$\"), URN_PATH = new RegExp(\"^(\" + NID$ + \")\\\\:(\" + NSS$ + \")$\"), URN_PARSE = /^([^\\:]+)\\:(.*)/, URN_EXCLUDED = /[\\x00-\\x20\\\\\\\"\\&\\<\\>\\[\\]\\^\\`\\{\\|\\}\\~\\x7F-\\xFF]/g, UUID = /^[0-9A-Fa-f]{8}(?:\\-[0-9A-Fa-f]{4}){3}\\-[0-9A-Fa-f]{12}$/;\r\n    //RFC 2141\r\n    URI.SCHEMES[\"urn\"] = {\r\n        parse: function (components, options) {\r\n            var matches = components.path.match(URN_PATH), scheme, schemeHandler;\r\n            if (!matches) {\r\n                if (!options.tolerant) {\r\n                    components.error = components.error || \"URN is not strictly valid.\";\r\n                }\r\n                matches = components.path.match(URN_PARSE);\r\n            }\r\n            if (matches) {\r\n                scheme = \"urn:\" + matches[1].toLowerCase();\r\n                schemeHandler = URI.SCHEMES[scheme];\r\n                //in order to serialize properly, \r\n                //every URN must have a serializer that calls the URN serializer \r\n                if (!schemeHandler) {\r\n                    //create fake scheme handler\r\n                    schemeHandler = URI.SCHEMES[scheme] = {\r\n                        parse: function (components, options) {\r\n                            return components;\r\n                        },\r\n                        serialize: URI.SCHEMES[\"urn\"].serialize\r\n                    };\r\n                }\r\n                components.scheme = scheme;\r\n                components.path = matches[2];\r\n                components = schemeHandler.parse(components, options);\r\n            }\r\n            else {\r\n                components.error = components.error || \"URN can not be parsed.\";\r\n            }\r\n            return components;\r\n        },\r\n        serialize: function (components, options) {\r\n            var scheme = components.scheme || options.scheme, matches;\r\n            if (scheme && scheme !== \"urn\") {\r\n                var matches = scheme.match(URN_SCHEME);\r\n                if (!matches) {\r\n                    matches = [\"urn:\" + scheme, scheme];\r\n                }\r\n                components.scheme = \"urn\";\r\n                components.path = matches[1] + \":\" + (components.path ? components.path.replace(URN_EXCLUDED, pctEncChar) : \"\");\r\n            }\r\n            return components;\r\n        }\r\n    };\r\n    //RFC 4122\r\n    URI.SCHEMES[\"urn:uuid\"] = {\r\n        parse: function (components, options) {\r\n            if (!options.tolerant && (!components.path || !components.path.match(UUID))) {\r\n                components.error = components.error || \"UUID is not valid.\";\r\n            }\r\n            return components;\r\n        },\r\n        serialize: function (components, options) {\r\n            //ensure UUID is valid\r\n            if (!options.tolerant && (!components.path || !components.path.match(UUID))) {\r\n                //invalid UUIDs can not have this scheme\r\n                components.scheme = undefined;\r\n            }\r\n            else {\r\n                //normalize UUID\r\n                components.path = (components.path || \"\").toLowerCase();\r\n            }\r\n            return URI.SCHEMES[\"urn\"].serialize(components, options);\r\n        }\r\n    };\r\n}());\r\n\n},{\"../uri\":8}],8:[function(require,module,exports){\n/**\r\n * URI.js\r\n *\r\n * @fileoverview An RFC 3986 compliant, scheme extendable URI parsing/validating/resolving library for JavaScript.\r\n * @author <a href=\"mailto:gary.court@gmail.com\">Gary Court</a>\r\n * @version 2.0.0\r\n * @see http://github.com/garycourt/uri-js\r\n * @license URI.js v2.0.0 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js\r\n */\r\n/**\r\n * Copyright 2011 Gary Court. All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without modification, are\r\n * permitted provided that the following conditions are met:\r\n *\r\n *    1. Redistributions of source code must retain the above copyright notice, this list of\r\n *       conditions and the following disclaimer.\r\n *\r\n *    2. Redistributions in binary form must reproduce the above copyright notice, this list\r\n *       of conditions and the following disclaimer in the documentation and/or other materials\r\n *       provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY GARY COURT ``AS IS'' AND ANY EXPRESS OR IMPLIED\r\n * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\r\n * FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL GARY COURT OR\r\n * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\r\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\r\n * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\r\n * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\r\n * ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * The views and conclusions contained in the software and documentation are those of the\r\n * authors and should not be interpreted as representing official policies, either expressed\r\n * or implied, of Gary Court.\r\n */\r\n///<reference path=\"punycode.d.ts\"/>\r\n///<reference path=\"commonjs.d.ts\"/>\r\n/**\r\n * Compiler switch for indicating code is compiled\r\n * @define {boolean}\r\n */\r\nvar COMPILED = false;\r\n/**\r\n * Compiler switch for supporting IRI URIs\r\n * @define {boolean}\r\n */\r\nvar URI__IRI_SUPPORT = true;\r\n/**\r\n * Compiler switch for supporting URI validation\r\n * @define {boolean}\r\n */\r\nvar URI__VALIDATE_SUPPORT = true;\r\nvar URI = (function () {\r\n    function merge() {\r\n        var sets = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            sets[_i - 0] = arguments[_i];\r\n        }\r\n        if (sets.length > 1) {\r\n            sets[0] = sets[0].slice(0, -1);\r\n            var xl = sets.length - 1;\r\n            for (var x = 1; x < xl; ++x) {\r\n                sets[x] = sets[x].slice(1, -1);\r\n            }\r\n            sets[xl] = sets[xl].slice(1);\r\n            return sets.join('');\r\n        }\r\n        else {\r\n            return sets[0];\r\n        }\r\n    }\r\n    function subexp(str) {\r\n        return \"(?:\" + str + \")\";\r\n    }\r\n    function buildExps(isIRI) {\r\n        var ALPHA$$ = \"[A-Za-z]\", CR$ = \"[\\\\x0D]\", DIGIT$$ = \"[0-9]\", DQUOTE$$ = \"[\\\\x22]\", HEXDIG$$ = merge(DIGIT$$, \"[A-Fa-f]\"), LF$$ = \"[\\\\x0A]\", SP$$ = \"[\\\\x20]\", PCT_ENCODED$ = subexp(subexp(\"%[EFef]\" + HEXDIG$$ + \"%\" + HEXDIG$$ + HEXDIG$$ + \"%\" + HEXDIG$$ + HEXDIG$$) + \"|\" + subexp(\"%[89A-Fa-f]\" + HEXDIG$$ + \"%\" + HEXDIG$$ + HEXDIG$$) + \"|\" + subexp(\"%\" + HEXDIG$$ + HEXDIG$$)), GEN_DELIMS$$ = \"[\\\\:\\\\/\\\\?\\\\#\\\\[\\\\]\\\\@]\", SUB_DELIMS$$ = \"[\\\\!\\\\$\\\\&\\\\'\\\\(\\\\)\\\\*\\\\+\\\\,\\\\;\\\\=]\", RESERVED$$ = merge(GEN_DELIMS$$, SUB_DELIMS$$), UCSCHAR$$ = isIRI ? \"[\\\\xA0-\\\\u200D\\\\u2010-\\\\u2029\\\\u202F-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFEF]\" : \"[]\", IPRIVATE$$ = isIRI ? \"[\\\\uE000-\\\\uF8FF]\" : \"[]\", UNRESERVED$$ = merge(ALPHA$$, DIGIT$$, \"[\\\\-\\\\.\\\\_\\\\~]\", UCSCHAR$$), SCHEME$ = subexp(ALPHA$$ + merge(ALPHA$$, DIGIT$$, \"[\\\\+\\\\-\\\\.]\") + \"*\"), USERINFO$ = subexp(subexp(PCT_ENCODED$ + \"|\" + merge(UNRESERVED$$, SUB_DELIMS$$, \"[\\\\:]\")) + \"*\"), DEC_OCTET$ = subexp(subexp(\"25[0-5]\") + \"|\" + subexp(\"2[0-4]\" + DIGIT$$) + \"|\" + subexp(\"1\" + DIGIT$$ + DIGIT$$) + \"|\" + subexp(\"[1-9]\" + DIGIT$$) + \"|\" + DIGIT$$), IPV4ADDRESS$ = subexp(DEC_OCTET$ + \"\\\\.\" + DEC_OCTET$ + \"\\\\.\" + DEC_OCTET$ + \"\\\\.\" + DEC_OCTET$), H16$ = subexp(HEXDIG$$ + \"{1,4}\"), LS32$ = subexp(subexp(H16$ + \"\\\\:\" + H16$) + \"|\" + IPV4ADDRESS$), IPV6ADDRESS$ = subexp(merge(UNRESERVED$$, SUB_DELIMS$$, \"[\\\\:]\") + \"+\"), IPVFUTURE$ = subexp(\"v\" + HEXDIG$$ + \"+\\\\.\" + merge(UNRESERVED$$, SUB_DELIMS$$, \"[\\\\:]\") + \"+\"), IP_LITERAL$ = subexp(\"\\\\[\" + subexp(IPV6ADDRESS$ + \"|\" + IPVFUTURE$) + \"\\\\]\"), REG_NAME$ = subexp(subexp(PCT_ENCODED$ + \"|\" + merge(UNRESERVED$$, SUB_DELIMS$$)) + \"*\"), HOST$ = subexp(IP_LITERAL$ + \"|\" + IPV4ADDRESS$ + \"(?!\" + REG_NAME$ + \")\" + \"|\" + REG_NAME$), PORT$ = subexp(DIGIT$$ + \"*\"), AUTHORITY$ = subexp(subexp(USERINFO$ + \"@\") + \"?\" + HOST$ + subexp(\"\\\\:\" + PORT$) + \"?\"), PCHAR$ = subexp(PCT_ENCODED$ + \"|\" + merge(UNRESERVED$$, SUB_DELIMS$$, \"[\\\\:\\\\@]\")), SEGMENT$ = subexp(PCHAR$ + \"*\"), SEGMENT_NZ$ = subexp(PCHAR$ + \"+\"), SEGMENT_NZ_NC$ = subexp(subexp(PCT_ENCODED$ + \"|\" + merge(UNRESERVED$$, SUB_DELIMS$$, \"[\\\\@]\")) + \"+\"), PATH_ABEMPTY$ = subexp(subexp(\"\\\\/\" + SEGMENT$) + \"*\"), PATH_ABSOLUTE$ = subexp(\"\\\\/\" + subexp(SEGMENT_NZ$ + PATH_ABEMPTY$) + \"?\"), PATH_NOSCHEME$ = subexp(SEGMENT_NZ_NC$ + PATH_ABEMPTY$), PATH_ROOTLESS$ = subexp(SEGMENT_NZ$ + PATH_ABEMPTY$), PATH_EMPTY$ = \"(?!\" + PCHAR$ + \")\", PATH$ = subexp(PATH_ABEMPTY$ + \"|\" + PATH_ABSOLUTE$ + \"|\" + PATH_NOSCHEME$ + \"|\" + PATH_ROOTLESS$ + \"|\" + PATH_EMPTY$), QUERY$ = subexp(subexp(PCHAR$ + \"|\" + merge(\"[\\\\/\\\\?]\", IPRIVATE$$)) + \"*\"), FRAGMENT$ = subexp(subexp(PCHAR$ + \"|[\\\\/\\\\?]\") + \"*\"), HIER_PART$ = subexp(subexp(\"\\\\/\\\\/\" + AUTHORITY$ + PATH_ABEMPTY$) + \"|\" + PATH_ABSOLUTE$ + \"|\" + PATH_ROOTLESS$ + \"|\" + PATH_EMPTY$), URI$ = subexp(SCHEME$ + \"\\\\:\" + HIER_PART$ + subexp(\"\\\\?\" + QUERY$) + \"?\" + subexp(\"\\\\#\" + FRAGMENT$) + \"?\"), RELATIVE_PART$ = subexp(subexp(\"\\\\/\\\\/\" + AUTHORITY$ + PATH_ABEMPTY$) + \"|\" + PATH_ABSOLUTE$ + \"|\" + PATH_NOSCHEME$ + \"|\" + PATH_EMPTY$), RELATIVE$ = subexp(RELATIVE_PART$ + subexp(\"\\\\?\" + QUERY$) + \"?\" + subexp(\"\\\\#\" + FRAGMENT$) + \"?\"), URI_REFERENCE$ = subexp(URI$ + \"|\" + RELATIVE$), ABSOLUTE_URI$ = subexp(SCHEME$ + \"\\\\:\" + HIER_PART$ + subexp(\"\\\\?\" + QUERY$) + \"?\"), GENERIC_REF$ = \"^(\" + SCHEME$ + \")\\\\:\" + subexp(subexp(\"\\\\/\\\\/(\" + subexp(\"(\" + USERINFO$ + \")@\") + \"?(\" + HOST$ + \")\" + subexp(\"\\\\:(\" + PORT$ + \")\") + \"?)\") + \"?(\" + PATH_ABEMPTY$ + \"|\" + PATH_ABSOLUTE$ + \"|\" + PATH_ROOTLESS$ + \"|\" + PATH_EMPTY$ + \")\") + subexp(\"\\\\?(\" + QUERY$ + \")\") + \"?\" + subexp(\"\\\\#(\" + FRAGMENT$ + \")\") + \"?$\", RELATIVE_REF$ = \"^(){0}\" + subexp(subexp(\"\\\\/\\\\/(\" + subexp(\"(\" + USERINFO$ + \")@\") + \"?(\" + HOST$ + \")\" + subexp(\"\\\\:(\" + PORT$ + \")\") + \"?)\") + \"?(\" + PATH_ABEMPTY$ + \"|\" + PATH_ABSOLUTE$ + \"|\" + PATH_NOSCHEME$ + \"|\" + PATH_EMPTY$ + \")\") + subexp(\"\\\\?(\" + QUERY$ + \")\") + \"?\" + subexp(\"\\\\#(\" + FRAGMENT$ + \")\") + \"?$\", ABSOLUTE_REF$ = \"^(\" + SCHEME$ + \")\\\\:\" + subexp(subexp(\"\\\\/\\\\/(\" + subexp(\"(\" + USERINFO$ + \")@\") + \"?(\" + HOST$ + \")\" + subexp(\"\\\\:(\" + PORT$ + \")\") + \"?)\") + \"?(\" + PATH_ABEMPTY$ + \"|\" + PATH_ABSOLUTE$ + \"|\" + PATH_ROOTLESS$ + \"|\" + PATH_EMPTY$ + \")\") + subexp(\"\\\\?(\" + QUERY$ + \")\") + \"?$\", SAMEDOC_REF$ = \"^\" + subexp(\"\\\\#(\" + FRAGMENT$ + \")\") + \"?$\", AUTHORITY_REF$ = \"^\" + subexp(\"(\" + USERINFO$ + \")@\") + \"?(\" + HOST$ + \")\" + subexp(\"\\\\:(\" + PORT$ + \")\") + \"?$\";\r\n        return {\r\n            URI_REF: URI__VALIDATE_SUPPORT && new RegExp(\"(\" + GENERIC_REF$ + \")|(\" + RELATIVE_REF$ + \")\"),\r\n            NOT_SCHEME: new RegExp(merge(\"[^]\", ALPHA$$, DIGIT$$, \"[\\\\+\\\\-\\\\.]\"), \"g\"),\r\n            NOT_USERINFO: new RegExp(merge(\"[^\\\\%\\\\:]\", UNRESERVED$$, SUB_DELIMS$$), \"g\"),\r\n            NOT_HOST: new RegExp(merge(\"[^\\\\%]\", UNRESERVED$$, SUB_DELIMS$$), \"g\"),\r\n            NOT_PATH: new RegExp(merge(\"[^\\\\%\\\\/\\\\:\\\\@]\", UNRESERVED$$, SUB_DELIMS$$), \"g\"),\r\n            NOT_PATH_NOSCHEME: new RegExp(merge(\"[^\\\\%\\\\/\\\\@]\", UNRESERVED$$, SUB_DELIMS$$), \"g\"),\r\n            NOT_QUERY: new RegExp(merge(\"[^\\\\%]\", UNRESERVED$$, SUB_DELIMS$$, \"[\\\\:\\\\@\\\\/\\\\?]\", IPRIVATE$$), \"g\"),\r\n            NOT_FRAGMENT: new RegExp(merge(\"[^\\\\%]\", UNRESERVED$$, SUB_DELIMS$$, \"[\\\\:\\\\@\\\\/\\\\?]\"), \"g\"),\r\n            ESCAPE: new RegExp(merge(\"[^]\", UNRESERVED$$, SUB_DELIMS$$), \"g\"),\r\n            UNRESERVED: new RegExp(UNRESERVED$$, \"g\"),\r\n            OTHER_CHARS: new RegExp(merge(\"[^\\\\%]\", UNRESERVED$$, RESERVED$$), \"g\"),\r\n            PCT_ENCODED: new RegExp(PCT_ENCODED$, \"g\")\r\n        };\r\n    }\r\n    var URI_PROTOCOL = buildExps(false), IRI_PROTOCOL = URI__IRI_SUPPORT ? buildExps(true) : undefined, URI_PARSE = /^(?:([^:\\/?#]+):)?(?:\\/\\/((?:([^\\/?#@]*)@)?([^\\/?#:]*)(?:\\:(\\d*))?))?([^?#]*)(?:\\?([^#]*))?(?:#((?:.|\\n)*))?/i, RDS1 = /^\\.\\.?\\//, RDS2 = /^\\/\\.(\\/|$)/, RDS3 = /^\\/\\.\\.(\\/|$)/, RDS4 = /^\\.\\.?$/, RDS5 = /^\\/?(?:.|\\n)*?(?=\\/|$)/, NO_MATCH_IS_UNDEFINED = (\"\").match(/(){0}/)[1] === undefined;\r\n    function pctEncChar(chr) {\r\n        var c = chr.charCodeAt(0), e;\r\n        if (c < 16)\r\n            e = \"%0\" + c.toString(16).toUpperCase();\r\n        else if (c < 128)\r\n            e = \"%\" + c.toString(16).toUpperCase();\r\n        else if (c < 2048)\r\n            e = \"%\" + ((c >> 6) | 192).toString(16).toUpperCase() + \"%\" + ((c & 63) | 128).toString(16).toUpperCase();\r\n        else\r\n            e = \"%\" + ((c >> 12) | 224).toString(16).toUpperCase() + \"%\" + (((c >> 6) & 63) | 128).toString(16).toUpperCase() + \"%\" + ((c & 63) | 128).toString(16).toUpperCase();\r\n        return e;\r\n    }\r\n    function pctDecChars(str) {\r\n        var newStr = \"\", i = 0, il = str.length, c, c2, c3;\r\n        while (i < il) {\r\n            c = parseInt(str.substr(i + 1, 2), 16);\r\n            if (c < 128) {\r\n                newStr += String.fromCharCode(c);\r\n                i += 3;\r\n            }\r\n            else if (c >= 194 && c < 224) {\r\n                if ((il - i) >= 6) {\r\n                    c2 = parseInt(str.substr(i + 4, 2), 16);\r\n                    newStr += String.fromCharCode(((c & 31) << 6) | (c2 & 63));\r\n                }\r\n                else {\r\n                    newStr += str.substr(i, 6);\r\n                }\r\n                i += 6;\r\n            }\r\n            else if (c >= 224) {\r\n                if ((il - i) >= 9) {\r\n                    c2 = parseInt(str.substr(i + 4, 2), 16);\r\n                    c3 = parseInt(str.substr(i + 7, 2), 16);\r\n                    newStr += String.fromCharCode(((c & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));\r\n                }\r\n                else {\r\n                    newStr += str.substr(i, 9);\r\n                }\r\n                i += 9;\r\n            }\r\n            else {\r\n                newStr += str.substr(i, 3);\r\n                i += 3;\r\n            }\r\n        }\r\n        return newStr;\r\n    }\r\n    function typeOf(o) {\r\n        return o === undefined ? \"undefined\" : (o === null ? \"null\" : Object.prototype.toString.call(o).split(\" \").pop().split(\"]\").shift().toLowerCase());\r\n    }\r\n    function toUpperCase(str) {\r\n        return str.toUpperCase();\r\n    }\r\n    var SCHEMES = {};\r\n    function _normalizeComponentEncoding(components, protocol) {\r\n        function decodeUnreserved(str) {\r\n            var decStr = pctDecChars(str);\r\n            return (!decStr.match(protocol.UNRESERVED) ? str : decStr);\r\n        }\r\n        if (components.scheme)\r\n            components.scheme = String(components.scheme).replace(protocol.PCT_ENCODED, decodeUnreserved).toLowerCase().replace(protocol.NOT_SCHEME, \"\");\r\n        if (components.userinfo !== undefined)\r\n            components.userinfo = String(components.userinfo).replace(protocol.PCT_ENCODED, decodeUnreserved).replace(protocol.NOT_USERINFO, pctEncChar).replace(protocol.PCT_ENCODED, toUpperCase);\r\n        if (components.host !== undefined)\r\n            components.host = String(components.host).replace(protocol.PCT_ENCODED, decodeUnreserved).toLowerCase().replace(protocol.NOT_HOST, pctEncChar).replace(protocol.PCT_ENCODED, toUpperCase);\r\n        if (components.path !== undefined)\r\n            components.path = String(components.path).replace(protocol.PCT_ENCODED, decodeUnreserved).replace((components.scheme ? protocol.NOT_PATH : protocol.NOT_PATH_NOSCHEME), pctEncChar).replace(protocol.PCT_ENCODED, toUpperCase);\r\n        if (components.query !== undefined)\r\n            components.query = String(components.query).replace(protocol.PCT_ENCODED, decodeUnreserved).replace(protocol.NOT_QUERY, pctEncChar).replace(protocol.PCT_ENCODED, toUpperCase);\r\n        if (components.fragment !== undefined)\r\n            components.fragment = String(components.fragment).replace(protocol.PCT_ENCODED, decodeUnreserved).replace(protocol.NOT_FRAGMENT, pctEncChar).replace(protocol.PCT_ENCODED, toUpperCase);\r\n        return components;\r\n    }\r\n    ;\r\n    function parse(uriString, options) {\r\n        if (options === void 0) { options = {}; }\r\n        var protocol = (URI__IRI_SUPPORT && options.iri !== false ? IRI_PROTOCOL : URI_PROTOCOL), matches, parseError = false, components = {}, schemeHandler;\r\n        if (options.reference === \"suffix\")\r\n            uriString = (options.scheme ? options.scheme + \":\" : \"\") + \"//\" + uriString;\r\n        if (URI__VALIDATE_SUPPORT) {\r\n            matches = uriString.match(protocol.URI_REF);\r\n            if (matches) {\r\n                if (matches[1]) {\r\n                    //generic URI\r\n                    matches = matches.slice(1, 10);\r\n                }\r\n                else {\r\n                    //relative URI\r\n                    matches = matches.slice(10, 19);\r\n                }\r\n            }\r\n            if (!matches) {\r\n                parseError = true;\r\n                if (!options.tolerant)\r\n                    components.error = components.error || \"URI is not strictly valid.\";\r\n                matches = uriString.match(URI_PARSE);\r\n            }\r\n        }\r\n        else {\r\n            matches = uriString.match(URI_PARSE);\r\n        }\r\n        if (matches) {\r\n            if (NO_MATCH_IS_UNDEFINED) {\r\n                //store each component\r\n                components.scheme = matches[1];\r\n                //components.authority = matches[2];\r\n                components.userinfo = matches[3];\r\n                components.host = matches[4];\r\n                components.port = parseInt(matches[5], 10);\r\n                components.path = matches[6] || \"\";\r\n                components.query = matches[7];\r\n                components.fragment = matches[8];\r\n                //fix port number\r\n                if (isNaN(components.port)) {\r\n                    components.port = matches[5];\r\n                }\r\n            }\r\n            else {\r\n                //store each component\r\n                components.scheme = matches[1] || undefined;\r\n                //components.authority = (uriString.indexOf(\"//\") !== -1 ? matches[2] : undefined);\r\n                components.userinfo = (uriString.indexOf(\"@\") !== -1 ? matches[3] : undefined);\r\n                components.host = (uriString.indexOf(\"//\") !== -1 ? matches[4] : undefined);\r\n                components.port = parseInt(matches[5], 10);\r\n                components.path = matches[6] || \"\";\r\n                components.query = (uriString.indexOf(\"?\") !== -1 ? matches[7] : undefined);\r\n                components.fragment = (uriString.indexOf(\"#\") !== -1 ? matches[8] : undefined);\r\n                //fix port number\r\n                if (isNaN(components.port)) {\r\n                    components.port = (uriString.match(/\\/\\/(?:.|\\n)*\\:(?:\\/|\\?|\\#|$)/) ? matches[4] : undefined);\r\n                }\r\n            }\r\n            //determine reference type\r\n            if (components.scheme === undefined && components.userinfo === undefined && components.host === undefined && components.port === undefined && !components.path && components.query === undefined) {\r\n                components.reference = \"same-document\";\r\n            }\r\n            else if (components.scheme === undefined) {\r\n                components.reference = \"relative\";\r\n            }\r\n            else if (components.fragment === undefined) {\r\n                components.reference = \"absolute\";\r\n            }\r\n            else {\r\n                components.reference = \"uri\";\r\n            }\r\n            //check for reference errors\r\n            if (options.reference && options.reference !== \"suffix\" && options.reference !== components.reference) {\r\n                components.error = components.error || \"URI is not a \" + options.reference + \" reference.\";\r\n            }\r\n            //find scheme handler\r\n            schemeHandler = SCHEMES[(options.scheme || components.scheme || \"\").toLowerCase()];\r\n            //check if scheme can't handle IRIs\r\n            if (URI__IRI_SUPPORT && typeof punycode !== \"undefined\" && !options.unicodeSupport && (!schemeHandler || !schemeHandler.unicodeSupport)) {\r\n                //if host component is a domain name\r\n                if (components.host && (options.domainHost || (schemeHandler && schemeHandler.domainHost))) {\r\n                    //convert Unicode IDN -> ASCII IDN\r\n                    try {\r\n                        components.host = punycode.toASCII(components.host.replace(protocol.PCT_ENCODED, pctDecChars).toLowerCase());\r\n                    }\r\n                    catch (e) {\r\n                        components.error = components.error || \"Host's domain name can not be converted to ASCII via punycode: \" + e;\r\n                    }\r\n                }\r\n                //convert IRI -> URI\r\n                _normalizeComponentEncoding(components, URI_PROTOCOL);\r\n            }\r\n            else {\r\n                //normalize encodings\r\n                _normalizeComponentEncoding(components, protocol);\r\n            }\r\n            //perform scheme specific parsing\r\n            if (schemeHandler && schemeHandler.parse) {\r\n                schemeHandler.parse(components, options);\r\n            }\r\n        }\r\n        else {\r\n            parseError = true;\r\n            components.error = components.error || \"URI can not be parsed.\";\r\n        }\r\n        return components;\r\n    }\r\n    ;\r\n    function _recomposeAuthority(components, options) {\r\n        var uriTokens = [];\r\n        if (components.userinfo !== undefined) {\r\n            uriTokens.push(components.userinfo);\r\n            uriTokens.push(\"@\");\r\n        }\r\n        if (components.host !== undefined) {\r\n            uriTokens.push(components.host);\r\n        }\r\n        if (typeof components.port === \"number\") {\r\n            uriTokens.push(\":\");\r\n            uriTokens.push(components.port.toString(10));\r\n        }\r\n        return uriTokens.length ? uriTokens.join(\"\") : undefined;\r\n    }\r\n    ;\r\n    function removeDotSegments(input) {\r\n        var output = [], s;\r\n        while (input.length) {\r\n            if (input.match(RDS1)) {\r\n                input = input.replace(RDS1, \"\");\r\n            }\r\n            else if (input.match(RDS2)) {\r\n                input = input.replace(RDS2, \"/\");\r\n            }\r\n            else if (input.match(RDS3)) {\r\n                input = input.replace(RDS3, \"/\");\r\n                output.pop();\r\n            }\r\n            else if (input === \".\" || input === \"..\") {\r\n                input = \"\";\r\n            }\r\n            else {\r\n                s = input.match(RDS5)[0];\r\n                input = input.slice(s.length);\r\n                output.push(s);\r\n            }\r\n        }\r\n        return output.join(\"\");\r\n    }\r\n    ;\r\n    function serialize(components, options) {\r\n        if (options === void 0) { options = {}; }\r\n        var protocol = (URI__IRI_SUPPORT && options.iri ? IRI_PROTOCOL : URI_PROTOCOL), uriTokens = [], schemeHandler, authority, s;\r\n        //find scheme handler\r\n        schemeHandler = SCHEMES[(options.scheme || components.scheme || \"\").toLowerCase()];\r\n        //perform scheme specific serialization\r\n        if (schemeHandler && schemeHandler.serialize)\r\n            schemeHandler.serialize(components, options);\r\n        //if host component is a domain name\r\n        if (URI__IRI_SUPPORT && typeof punycode !== \"undefined\" && components.host && (options.domainHost || (schemeHandler && schemeHandler.domainHost))) {\r\n            //convert IDN via punycode\r\n            try {\r\n                components.host = (!options.iri ? punycode.toASCII(components.host.replace(protocol.PCT_ENCODED, pctDecChars).toLowerCase()) : punycode.toUnicode(components.host));\r\n            }\r\n            catch (e) {\r\n                components.error = components.error || \"Host's domain name can not be converted to \" + (!options.iri ? \"ASCII\" : \"Unicode\") + \" via punycode: \" + e;\r\n            }\r\n        }\r\n        //normalize encoding\r\n        _normalizeComponentEncoding(components, protocol);\r\n        if (options.reference !== \"suffix\" && components.scheme) {\r\n            uriTokens.push(components.scheme);\r\n            uriTokens.push(\":\");\r\n        }\r\n        authority = _recomposeAuthority(components, options);\r\n        if (authority !== undefined) {\r\n            if (options.reference !== \"suffix\") {\r\n                uriTokens.push(\"//\");\r\n            }\r\n            uriTokens.push(authority);\r\n            if (components.path && components.path.charAt(0) !== \"/\") {\r\n                uriTokens.push(\"/\");\r\n            }\r\n        }\r\n        if (components.path !== undefined) {\r\n            s = components.path;\r\n            if (!options.absolutePath && (!schemeHandler || !schemeHandler.absolutePath)) {\r\n                s = removeDotSegments(s);\r\n            }\r\n            if (authority === undefined) {\r\n                s = s.replace(/^\\/\\//, \"/%2F\"); //don't allow the path to start with \"//\"\r\n            }\r\n            uriTokens.push(s);\r\n        }\r\n        if (components.query !== undefined) {\r\n            uriTokens.push(\"?\");\r\n            uriTokens.push(components.query);\r\n        }\r\n        if (components.fragment !== undefined) {\r\n            uriTokens.push(\"#\");\r\n            uriTokens.push(components.fragment);\r\n        }\r\n        return uriTokens.join(''); //merge tokens into a string\r\n    }\r\n    ;\r\n    function resolveComponents(base, relative, options, skipNormalization) {\r\n        if (options === void 0) { options = {}; }\r\n        var target = {};\r\n        if (!skipNormalization) {\r\n            base = parse(serialize(base, options), options); //normalize base components\r\n            relative = parse(serialize(relative, options), options); //normalize relative components\r\n        }\r\n        options = options || {};\r\n        if (!options.tolerant && relative.scheme) {\r\n            target.scheme = relative.scheme;\r\n            //target.authority = relative.authority;\r\n            target.userinfo = relative.userinfo;\r\n            target.host = relative.host;\r\n            target.port = relative.port;\r\n            target.path = removeDotSegments(relative.path);\r\n            target.query = relative.query;\r\n        }\r\n        else {\r\n            if (relative.userinfo !== undefined || relative.host !== undefined || relative.port !== undefined) {\r\n                //target.authority = relative.authority;\r\n                target.userinfo = relative.userinfo;\r\n                target.host = relative.host;\r\n                target.port = relative.port;\r\n                target.path = removeDotSegments(relative.path);\r\n                target.query = relative.query;\r\n            }\r\n            else {\r\n                if (!relative.path) {\r\n                    target.path = base.path;\r\n                    if (relative.query !== undefined) {\r\n                        target.query = relative.query;\r\n                    }\r\n                    else {\r\n                        target.query = base.query;\r\n                    }\r\n                }\r\n                else {\r\n                    if (relative.path.charAt(0) === \"/\") {\r\n                        target.path = removeDotSegments(relative.path);\r\n                    }\r\n                    else {\r\n                        if ((base.userinfo !== undefined || base.host !== undefined || base.port !== undefined) && !base.path) {\r\n                            target.path = \"/\" + relative.path;\r\n                        }\r\n                        else if (!base.path) {\r\n                            target.path = relative.path;\r\n                        }\r\n                        else {\r\n                            target.path = base.path.slice(0, base.path.lastIndexOf(\"/\") + 1) + relative.path;\r\n                        }\r\n                        target.path = removeDotSegments(target.path);\r\n                    }\r\n                    target.query = relative.query;\r\n                }\r\n                //target.authority = base.authority;\r\n                target.userinfo = base.userinfo;\r\n                target.host = base.host;\r\n                target.port = base.port;\r\n            }\r\n            target.scheme = base.scheme;\r\n        }\r\n        target.fragment = relative.fragment;\r\n        return target;\r\n    }\r\n    ;\r\n    function resolve(baseURI, relativeURI, options) {\r\n        return serialize(resolveComponents(parse(baseURI, options), parse(relativeURI, options), options, true), options);\r\n    }\r\n    ;\r\n    function normalize(uri, options) {\r\n        if (typeof uri === \"string\") {\r\n            uri = serialize(parse(uri, options), options);\r\n        }\r\n        else if (typeOf(uri) === \"object\") {\r\n            uri = parse(serialize(uri, options), options);\r\n        }\r\n        return uri;\r\n    }\r\n    ;\r\n    function equal(uriA, uriB, options) {\r\n        if (typeof uriA === \"string\") {\r\n            uriA = serialize(parse(uriA, options), options);\r\n        }\r\n        else if (typeOf(uriA) === \"object\") {\r\n            uriA = serialize(uriA, options);\r\n        }\r\n        if (typeof uriB === \"string\") {\r\n            uriB = serialize(parse(uriB, options), options);\r\n        }\r\n        else if (typeOf(uriB) === \"object\") {\r\n            uriB = serialize(uriB, options);\r\n        }\r\n        return uriA === uriB;\r\n    }\r\n    ;\r\n    function escapeComponent(str, options) {\r\n        return str && str.toString().replace((!URI__IRI_SUPPORT || !options || !options.iri ? URI_PROTOCOL.ESCAPE : IRI_PROTOCOL.ESCAPE), pctEncChar);\r\n    }\r\n    ;\r\n    function unescapeComponent(str, options) {\r\n        return str && str.toString().replace((!URI__IRI_SUPPORT || !options || !options.iri ? URI_PROTOCOL.PCT_ENCODED : IRI_PROTOCOL.PCT_ENCODED), pctDecChars);\r\n    }\r\n    ;\r\n    return {\r\n        IRI_SUPPORT: URI__IRI_SUPPORT,\r\n        VALIDATE_SUPPORT: URI__VALIDATE_SUPPORT,\r\n        pctEncChar: pctEncChar,\r\n        pctDecChars: pctDecChars,\r\n        SCHEMES: SCHEMES,\r\n        parse: parse,\r\n        _recomposeAuthority: _recomposeAuthority,\r\n        removeDotSegments: removeDotSegments,\r\n        serialize: serialize,\r\n        resolveComponents: resolveComponents,\r\n        resolve: resolve,\r\n        normalize: normalize,\r\n        equal: equal,\r\n        escapeComponent: escapeComponent,\r\n        unescapeComponent: unescapeComponent\r\n    };\r\n})();\r\nif (!COMPILED && typeof module !== \"undefined\" && typeof require === \"function\") {\r\n    var punycode = require(\"./punycode\");\r\n    module.exports = URI;\r\n    require(\"./schemes\");\r\n}\r\n\n},{\"./punycode\":3,\"./schemes\":4}],9:[function(require,module,exports){\nvar _global = (function() { return this; })();\nvar nativeWebSocket = _global.WebSocket || _global.MozWebSocket;\n\n\n/**\n * Expose a W3C WebSocket class with just one or two arguments.\n */\nfunction W3CWebSocket(uri, protocols) {\n\tvar native_instance;\n\n\tif (protocols) {\n\t\tnative_instance = new nativeWebSocket(uri, protocols);\n\t}\n\telse {\n\t\tnative_instance = new nativeWebSocket(uri);\n\t}\n\n\t/**\n\t * 'native_instance' is an instance of nativeWebSocket (the browser's WebSocket\n\t * class). Since it is an Object it will be returned as it is when creating an\n\t * instance of W3CWebSocket via 'new W3CWebSocket()'.\n\t *\n\t * ECMAScript 5: http://bclary.com/2004/11/07/#a-13.2.2\n\t */\n\treturn native_instance;\n}\n\n\n/**\n * Module exports.\n */\nmodule.exports = {\n    'w3cwebsocket' : nativeWebSocket ? W3CWebSocket : null,\n    'version'      : require('./version')\n};\n\n},{\"./version\":10}],10:[function(require,module,exports){\nmodule.exports = require('../package.json').version;\n\n},{\"../package.json\":11}],11:[function(require,module,exports){\nmodule.exports={\n  \"name\": \"websocket\",\n  \"description\": \"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.\",\n  \"keywords\": [\n    \"websocket\",\n    \"websockets\",\n    \"socket\",\n    \"networking\",\n    \"comet\",\n    \"push\",\n    \"RFC-6455\",\n    \"realtime\",\n    \"server\",\n    \"client\"\n  ],\n  \"author\": {\n    \"name\": \"Brian McKelvey\",\n    \"email\": \"brian@worlize.com\",\n    \"url\": \"https://www.worlize.com/\"\n  },\n  \"version\": \"1.0.19\",\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git+https://github.com/theturtle32/WebSocket-Node.git\"\n  },\n  \"homepage\": \"https://github.com/theturtle32/WebSocket-Node\",\n  \"engines\": {\n    \"node\": \">=0.8.0\"\n  },\n  \"dependencies\": {\n    \"debug\": \"~2.1.0\",\n    \"nan\": \"1.8.x\",\n    \"typedarray-to-buffer\": \"~3.0.0\"\n  },\n  \"devDependencies\": {\n    \"buffer-equal\": \"0.0.1\",\n    \"faucet\": \"0.0.1\",\n    \"gulp\": \"git+https://github.com/gulpjs/gulp.git#4.0\",\n    \"gulp-jshint\": \"^1.9.0\",\n    \"jshint-stylish\": \"^1.0.0\",\n    \"tape\": \"^3.0.0\"\n  },\n  \"config\": {\n    \"verbose\": false\n  },\n  \"scripts\": {\n    \"install\": \"(node-gyp rebuild 2> builderror.log) || (exit 0)\",\n    \"test\": \"faucet test/unit\",\n    \"gulp\": \"gulp\"\n  },\n  \"main\": \"index\",\n  \"directories\": {\n    \"lib\": \"./lib\"\n  },\n  \"browser\": \"lib/browser.js\",\n  \"license\": \"Apache-2.0\",\n  \"gitHead\": \"da3bd5b04e9442c84881b2e9c13432cdbbae1f16\",\n  \"bugs\": {\n    \"url\": \"https://github.com/theturtle32/WebSocket-Node/issues\"\n  },\n  \"_id\": \"websocket@1.0.19\",\n  \"_shasum\": \"e62dbf1a3c5e0767425db7187cfa38f921dfb42c\",\n  \"_from\": \"websocket@>=1.0.19 <2.0.0\",\n  \"_npmVersion\": \"2.10.1\",\n  \"_nodeVersion\": \"0.12.4\",\n  \"_npmUser\": {\n    \"name\": \"theturtle32\",\n    \"email\": \"brian@worlize.com\"\n  },\n  \"maintainers\": [\n    {\n      \"name\": \"theturtle32\",\n      \"email\": \"brian@worlize.com\"\n    }\n  ],\n  \"dist\": {\n    \"shasum\": \"e62dbf1a3c5e0767425db7187cfa38f921dfb42c\",\n    \"tarball\": \"https://repo.webaware.com/sinopia/websocket/-/websocket-1.0.19.tgz\"\n  },\n  \"_resolved\": \"https://repo.webaware.com/sinopia/websocket/-/websocket-1.0.19.tgz\",\n  \"readme\": \"ERROR: No README data found!\"\n}\n\n},{}],12:[function(require,module,exports){\n'use strict';\n\nvar proto = require('swim-proto-js');\nvar URI = require('uri-js');\nvar WS = require('websocket').w3cwebsocket;\n\nvar options = {\n  SEND_BUFFER_SIZE: 1024\n};\n\nvar LINK_FAILED = -2;\nvar LINK_BROKEN = -1;\nvar LINK_WANTED = 0;\nvar LINK_ACTIVE = 1;\n\nfunction nop() {}\n\nfunction link(node, lane, handle) {\n  Channel.get(node).link(node, lane, handle);\n}\n\nfunction unlink(node, lane, handle) {\n  Channel.get(node).unlink(node, lane, handle);\n}\n\nfunction sendEvent(node, lane, body) {\n  Channel.get(node).sendEvent(node, lane, body);\n}\n\nfunction sendCommand(node, lane, body) {\n  Channel.get(node).sendCommand(node, lane, body);\n}\n\nfunction get(node, handle) {\n  Channel.get(node).get(node, handle);\n}\n\nfunction put(node, body, handle) {\n  Channel.get(node).put(node, body, handle);\n}\n\nfunction reset() {\n  for (var endpoint in Channel.bridge) {\n    var channel = Channel.bridge[endpoint];\n    channel.sendBuffer = [];\n    channel.unlinkAll();\n    channel.close();\n  }\n  Channel.bridge = {};\n}\n\n\nfunction Channel(node) {\n  Channel.bridge[node] = this;\n  this.node = node;\n  this.linkCount = 0;\n  this.linkHandles = {};\n  this.stateHandles = {};\n  this.sendBuffer = [];\n  this.reconnectTimeout = null;\n  this.reconnectTime = 1000;\n  this.closed = false;\n  this.open();\n}\nChannel.prototype.open = function () {\n  this.socket = new WS(this.node, 'swim-0.0');\n  this.socket.onopen = this.onOpen.bind(this);\n  this.socket.onclose = this.onClose.bind(this);\n  this.socket.onmessage = this.onFrame.bind(this);\n  this.socket.onerror = this.onClose.bind(this);\n};\nChannel.prototype.close = function () {\n  this.closed = true;\n  this.socket.close();\n};\nChannel.prototype.send = function (envelope) {\n  if (this.socket.readyState !== this.socket.OPEN) this.buffer(envelope);\n  else this.socket.send(proto.stringify(envelope));\n};\nChannel.prototype.buffer = function (envelope) {\n  if (envelope.isLinkRequest || envelope.isUnlinkRequest) return;\n  if (this.sendBuffer.length > options.SEND_BUFFER_SIZE) return; // TODO: Notify\n  this.sendBuffer.push(envelope);\n};\nChannel.prototype.onOpen = function () {\n  clearTimeout(this.reconnectTimeout);\n  this.reconnectTime = 1000;\n\n  var envelope;\n  for (var node in this.linkHandles) {\n    var nodeHandles = this.linkHandles[node];\n    for (var lane in nodeHandles) {\n      envelope = new proto.LinkRequest(this.unresolve(node), lane);\n      this.send(envelope);\n    }\n  }\n\n  while ((envelope = this.sendBuffer.shift())) this.send(envelope);\n};\nChannel.prototype.onClose = function () {\n  if (this.linkCount === 0 && this.sendBuffer.length === 0) {\n    delete Channel.bridge[this.node];\n    return;\n  }\n\n  for (var node in this.linkHandles) {\n    var nodeHandles = this.linkHandles[node];\n    for (var lane in nodeHandles) {\n      var laneHandles = nodeHandles[lane];\n      for (var i = 0, n = laneHandles.length; i < n; i += 1) {\n        var handle = laneHandles[i];\n        var state = handle.__state__;\n        if (state.status === LINK_ACTIVE) {\n          handle.onBroken(node, lane);\n          state.status = LINK_BROKEN;\n        }\n      }\n    }\n  }\n\n  if (!this.closed) {\n    this.reconnectTimeout = setTimeout(this.open.bind(this), this.reconnectTime);\n    this.reconnectTime = Math.min(2 * this.reconnectTime, 30000);\n  }\n};\nChannel.prototype.onFrame = function (frame) {\n  var payload = frame.data;\n  if (typeof payload === 'string') {\n    var envelope = proto.parse(payload);\n    if (envelope) this.onReceive(envelope);\n  }\n};\nChannel.prototype.link = function (node, lane, handle) {\n  if (typeof handle === 'function') handle = {\n    onEvent: handle,\n    onCommand: handle\n  };\n  if (!handle.onEvent) handle.onEvent = nop;\n  if (!handle.onCommand) handle.onCommand = nop;\n  if (!handle.onLinked) handle.onLinked = nop;\n  if (!handle.onUnlinked) handle.onUnlinked = nop;\n  if (!handle.onBroken) handle.onBroken = nop;\n  if (!handle.onUnbroken) handle.onUnbroken = nop;\n  if (!handle.onFailed) handle.onFailed = nop;\n  var state = {\n    status: LINK_WANTED\n  };\n  handle.__state__ = state;\n\n  var unlinked = false;\n  var nodeHandles = this.linkHandles[node];\n  if (nodeHandles === undefined) {\n    nodeHandles = {};\n    this.linkHandles[node] = nodeHandles;\n  }\n  var laneHandles = nodeHandles[lane];\n  if (laneHandles === undefined) {\n    unlinked = true;\n    laneHandles = [];\n    nodeHandles[lane] = laneHandles;\n  }\n  laneHandles.push(handle);\n\n  if (unlinked) {\n    var request = new proto.LinkRequest(this.unresolve(node), lane);\n    this.send(request);\n    this.linkCount += 1;\n  }\n  else if (this.socket.readyState === this.socket.OPEN) {\n    handle.onLinked(node, lane);\n    state.status = LINK_ACTIVE;\n  }\n};\nChannel.prototype.unlink = function (node, lane, handle) {\n  var nodeHandles = this.linkHandles[node];\n  if (nodeHandles === undefined) return;\n  var laneHandles = nodeHandles[lane];\n  if (laneHandles === undefined) return;\n  var index = -1;\n  if (handle instanceof Function) for (var i = 0, n = laneHandles.length; i < n; i += 1) {\n    if (laneHandles[i].onEvent === handle) { index = i; break; }\n  }\n  else index = laneHandles.indexOf(handle);\n  if (index < 0) return;\n  laneHandles.splice(index, 1);\n  if (laneHandles.length === 0) {\n    delete nodeHandles[lane];\n    if (Object.keys(nodeHandles).length === 0) delete this.linkHandles[node];\n\n    var request = new proto.UnlinkRequest(this.unresolve(node), lane);\n    this.send(request);\n    this.linkCount -= 1;\n  }\n};\nChannel.prototype.unlinkAll = function () {\n  for (var node in this.linkHandles) {\n    var nodeHandles = this.linkHandles[node];\n    for (var lane in nodeHandles) {\n      var laneHandles = nodeHandles[lane];\n      for (var i = 0, n = laneHandles.length; i < n; i += 1) {\n        var handle = laneHandles[i];\n        var state = handle.__state__;\n        handle.onFailed(node, lane);\n        state.status = LINK_FAILED;\n      }\n    }\n  }\n  this.linkCount = 0;\n  this.linkHandles = {};\n};\nChannel.prototype.sendEvent = function (node, lane, body) {\n  var message = new proto.EventMessage(this.unresolve(node), lane, undefined, body);\n  this.send(message);\n};\nChannel.prototype.sendCommand = function (node, lane, body) {\n  var message = new proto.CommandMessage(this.unresolve(node), lane, undefined, body);\n  this.send(message);\n};\nChannel.prototype.get = function (node, handle) {\n  if (typeof handle === 'function') handle = {onState: handle};\n\n  var handles = this.stateHandles[node];\n  if (handles === undefined) {\n    handles = [];\n    this.stateHandles[node] = handles;\n  }\n  handles.push(handle);\n\n  var request = new proto.GetRequest(this.unresolve(node));\n  this.send(request);\n};\nChannel.prototype.put = function (node, body, handle) {\n  if (handle === undefined) handle = nop;\n  if (typeof handle === 'function') handle = {onState: handle};\n\n  var handles = this.stateHandles[node];\n  if (handles === undefined) {\n    handles = [];\n    this.stateHandles[node] = handles;\n  }\n  handles.push(handle);\n\n  var request = new proto.PutRequest(this.unresolve(node), body);\n  this.send(request);\n};\nChannel.prototype.onReceive = function (envelope) {\n  if (envelope.isEventMessage) this.onMessage(envelope);\n  else if (envelope.isCommandMessage) this.onMessage(envelope);\n  else if (envelope.isStateResponse) this.onState(envelope);\n  else if (envelope.isLinkedResponse) this.onLinked(envelope);\n  else if (envelope.isUnlinkedResponse) this.onUnlinked(envelope);\n};\nChannel.prototype.onMessage = function (envelope) {\n  var node = URI.resolve(this.node, envelope.node);\n  var nodeHandles = this.linkHandles[node];\n  if (nodeHandles === undefined) return;\n\n  var lane = envelope.lane;\n  while (lane) {\n    var laneHandles = nodeHandles[lane];\n    if (laneHandles) for (var i = 0, n = laneHandles.length; i < n; i += 1) {\n      var handle = laneHandles[i];\n      if (envelope.isEventMessage) handle.onEvent(envelope);\n      else handle.onCommand(envelope);\n    }\n    lane = Channel.parentLane(lane);\n  }\n};\nChannel.prototype.onState = function (envelope) {\n  var node = URI.resolve(this.node, envelope.node);\n  var handles = this.stateHandles[node] || [];\n  var handle;\n  while ((handle = handles.shift())) {\n    handle.onState(envelope);\n  }\n  delete this.stateHandles[node];\n};\nChannel.prototype.onLinked = function (envelope) {\n  var node = URI.resolve(this.node, envelope.node);\n  var lane = envelope.lane;\n  var nodeHandles = this.linkHandles[node];\n  if (nodeHandles === undefined) return;\n  var laneHandles = nodeHandles[lane];\n  if (laneHandles === undefined) return;\n  for (var i = 0, n = laneHandles.length; i < n; i += 1) {\n    var handle = laneHandles[i];\n    var state = handle.__state__;\n    if (state.status === LINK_BROKEN) handle.onUnbroken(node, lane);\n    else handle.onLinked(node, lane);\n    state.status = LINK_ACTIVE;\n  }\n};\nChannel.prototype.onUnlinked = function (envelope) {\n  var node = URI.resolve(this.node, envelope.node);\n  var lane = envelope.lane;\n  var nodeHandles = this.linkHandles[node];\n  if (nodeHandles === undefined) return;\n  var laneHandles = nodeHandles[lane];\n  if (laneHandles === undefined) return;\n  for (var i = 0, n = laneHandles.length; i < n; i += 1) {\n    var handle = laneHandles[i];\n    var state = handle.__state__;\n    if (state.status === LINK_ACTIVE) {\n      handle.onUnlinked(node, lane);\n      state.status = LINK_WANTED;\n    }\n    else {\n      handle.onFailed(node, lane);\n      state.status = LINK_FAILED;\n    }\n  }\n  delete nodeHandles[lane];\n  if (Object.keys(nodeHandles).length === 0) delete this.linkHandles[node];\n  this.linkCount -= 1;\n};\nChannel.prototype.unresolve = function (node) {\n  var components = URI.parse(node);\n  return URI.serialize({\n    path: components.path,\n    query: components.query,\n    fragment: components.fragment\n  });\n};\nChannel.bridge = {};\nChannel.get = function (node) {\n  var endpoint = Channel.endpoint(node);\n  var channel = Channel.bridge[endpoint];\n  if (channel === undefined) channel = new Channel(endpoint);\n  return channel;\n};\nChannel.endpoint = function (node) {\n  var components = URI.parse(node);\n  var scheme = components.scheme;\n  if (scheme === 'swim') scheme = 'http';\n  else if (scheme === 'swims') scheme = 'https';\n  return URI.serialize({\n    scheme: scheme,\n    userinfo: components.userinfo,\n    host: components.host,\n    port: components.port\n  });\n};\nChannel.parentLane = function (lane) {\n  var components = URI.parse(lane);\n  var path = components.path;\n  if (components.query && components.fragment) return URI.serialize({\n    path: path,\n    query: components.query\n  });\n  else if (components.query) return URI.serialize({path: path});\n  else if (path.length > 0) {\n    if (path.charCodeAt(path.length - 1) === 47 /*'/'*/) {\n      path = path.substring(0, path.length - 1);\n      return URI.serialize({path: path});\n    }\n    else {\n      var i = path.lastIndexOf('/');\n      if (i > 0) {\n        path = path.substring(0, i + 1);\n        return URI.serialize({path: path});\n      }\n    }\n  }\n};\n\n\nexports.link = link;\nexports.unlink = unlink;\nexports.sendEvent = sendEvent;\nexports.sendCommand = sendCommand;\nexports.get = get;\nexports.put = put;\nexports.reset = reset;\nexports.options = options;\n\n},{\"swim-proto-js\":2,\"uri-js\":8,\"websocket\":9}]},{},[12])(12)\n});"],"sourceRoot":"/source/"}