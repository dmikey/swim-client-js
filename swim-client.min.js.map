{"version":3,"sources":["swim-client.min.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","swim","client","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length",1,"reset","endpoint","Channel","bridge","channel","close","getHandlers","linkHandlers","link","uri","lane","handler","done","unlinked","nodeHandlers","undefined","laneHandlers","push","get","request","proto","LinkRequest","relative","send","unlink","index","Function","indexOf","splice","UnlinkRequest","handleMessage","envelope","URI","resolve","node","sendEvent","body","message","SendEventMessage","sendCommand","SendCommandMessage","handlers","GetRequest","put","PutRequest","handleState","shift","socket","WS","buffer","that","onopen","onclose","onmessage","frame","payload","data","parse","receive","w3cwebsocket","prototype","readyState","OPEN","stringify","isEventMessage","isCommandMessage","isStateResponse","CLOSED","CLOSING","components","serialize","path","query","fragment","scheme","userinfo","host","port","swim-proto-js","uri-js","websocket",2,"coerce","arguments","item","Extant","Absent","Attr","Slot","builder","RecordBuilder","appendField","state","coerceItem","coerceArray","Record","Uint8Array","Array","isArray","toRecon","coerceObject","array","value","isField","appendValue","object","prop","key","attrs","isAbsent","string","input","StringIterator","result","DocumentParser","run","writer","ReconWriter","writeBlock","apply","objectify","isExtant","objectifyArray","objectifyObject","record","items","iterator","isEmpty","head","step","isAttr","base64","DataBuilder","cs","appendBase64Char","attr","slot","empty","compare","x","y","equals","__proto__","Object","defineProperty","Field","enumerable","RecordIterator","writable","ValueBuilder","StringIteratee","StringBuilder","isSpace","c","isNewline","isWhitespace","isNameStartChar","isNameChar","isBase64Char","BlockParser","AttrParser","ident","IdentParser","BlockValueParser","field","InlineValueParser","RecordParser","MarkupParser","text","StringParser","DataParser","NumberParser","create","constructor","getOwnPropertyNames","isMarkup","isBlank","afterNonText","hasNonText","sections","hasAttrs","hasPrefixAttrs","hasPostfixAttrs","contains","tail","slice","foot","target","these","next","concat","appendRecord","forEach","those","toString","writeRecord","writeAttr","isSlot","writeItem","dup","toRecord","isAllAttrs","isDone","c1","charCodeAt","c2","Done","isCont","isError","feed","error","unexpectedEOF","append","String","fromCharCode","appendString","prepare","size","expand","base","Math","max","aliased","set","appendByte","offset","decodeBase64Digit","decodeBase64Quantum","p","q","z","w","subarray","found","expected","Number","writeValue","inMarkup","writeText","writeNumber","writeBool","writeData","writeIdent","writeMarkup","isIdent","writeTextMarkup","writeString","number","bool","encodeBase64Digit","extant","absent",3,"decode","recon","heading","EventMessage","CommandMessage","SendMessage","StateResponse","LinkedResponse","UnlinkedResponse","encode","Envelope","RequestEnvelope","ResponseEnvelope","MessageEnvelope","via","headers","header","recon-js",4,"./schemes/http","./schemes/urn",5,"SCHEMES","../uri",6,"URI_NS","pctEncChar","NID$","PCT_ENCODED$","TRANS$$","NSS$","URN_SCHEME","RegExp","URN_PATH","URN_PARSE","URN_EXCLUDED","UUID","options","schemeHandler","matches","match","tolerant","errors","toLowerCase","replace",7,"mergeSet","sets","nextSet","subexp","str","ALPHA$$","DIGIT$$","HEXDIG$$","GEN_DELIMS$$","SUB_DELIMS$$","RESERVED$$","UNRESERVED$$","SCHEME$","USERINFO$","DEC_OCTET$","IPV4ADDRESS$","H16$","IPV6ADDRESS$","IPVFUTURE$","IP_LITERAL$","REG_NAME$","HOST$","PORT$","AUTHORITY$","PCHAR$","SEGMENT$","SEGMENT_NZ$","SEGMENT_NZ_NC$","PATH_ABEMPTY$","PATH_ABSOLUTE$","PATH_NOSCHEME$","PATH_ROOTLESS$","PATH_EMPTY$","QUERY$","FRAGMENT$","HIER_PART$","URI$","RELATIVE_PART$","RELATIVE$","GENERIC_REF$","RELATIVE_REF$","URI_REF","NOT_SCHEME","NOT_USERINFO","NOT_HOST","NOT_PATH","NOT_PATH_NOSCHEME","NOT_QUERY","NOT_FRAGMENT","ESCAPE","UNRESERVED","PCT_ENCODEDS","URI_PARSE","RDS1","RDS2","RDS3","RDS5","NO_MATCH_IS_UNDEFINED","chr","toUpperCase","pctDecUnreserved","newStr","parseInt","substr","pctDecChars","c3","typeOf","split","pop","Components","reference","uriString","isNaN","_recomposeAuthority","uriTokens","join","removeDotSegments","output","authority","charAt","resolveComponents","skipNormalization","lastIndexOf","baseURI","relativeURI","normalize","equal","uriA","uriB","escapeComponent","unescapeComponent","./schemes",8,"W3CWebSocket","protocols","native_instance","nativeWebSocket","_global","WebSocket","MozWebSocket","version","./version",9,"../package.json",10,"name","description","keywords","author","email","url","repository","type","homepage","engines","dependencies","debug","nan","typedarray-to-buffer","devDependencies","buffer-equal","faucet","gulp","gulp-jshint","jshint-stylish","tape","config","verbose","scripts","install","test","main","directories","lib","browser","gitHead","bugs","_id","_shasum","_from","_npmVersion","_npmUser","maintainers","dist","shasum","tarball","_resolved","readme"],"mappings":"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","file":"swim-client.min.js","sourcesContent":["(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}(g.swim || (g.swim = {})).client = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nvar proto = require('swim-proto-js');\nvar URI = require('uri-js');\nvar WS = require('websocket').w3cwebsocket;\n\nvar getHandlers = {};\nvar linkHandlers = {};\n\nfunction reset() {\n  for (var endpoint in Channel.bridge) {\n    var channel = Channel.bridge[endpoint];\n    if (channel instanceof Channel) channel.close();\n  }\n  Channel.bridge = {};\n  getHandlers = {};\n  linkHandlers = {};\n}\n\n\nfunction link(uri, lane, handler) {\n  if (typeof handler === 'function') handler = {done: handler};\n\n  var unlinked = false;\n  var nodeHandlers = linkHandlers[uri];\n  if (nodeHandlers === undefined) {\n    nodeHandlers = {};\n    linkHandlers[uri] = nodeHandlers;\n  }\n  var laneHandlers = nodeHandlers[lane];\n  if (laneHandlers === undefined) {\n    unlinked = true;\n    laneHandlers = [];\n    nodeHandlers[lane] = laneHandlers;\n  }\n  laneHandlers.push(handler);\n\n  if (unlinked) {\n    var channel = Channel.get(uri);\n    var request = new proto.LinkRequest(channel.relative(uri), lane);\n    channel.send(request);\n  }\n}\n\nfunction unlink(uri, lane, handler) {\n  var nodeHandlers = linkHandlers[uri];\n  if (nodeHandlers === undefined) return;\n  var laneHandlers = nodeHandlers[lane];\n  if (laneHandlers === undefined) return;\n  var index = -1;\n  if (handler instanceof Function) {\n    var i = 0;\n    var n = laneHandlers.length;\n    while (i < n && index < 0) {\n      if (laneHandlers[i].done === handler) index = i;\n      else i += 1;\n    } \n  }\n  else index = laneHandlers.indexOf(handler);\n  if (index < 0) return;\n  laneHandlers.splice(index, 1);\n  if (laneHandlers.length === 0) {\n    delete nodeHandlers[lane];\n    if (nodeHandlers.length === 0) delete linkHandlers[uri];\n\n    var channel = Channel.get(uri);\n    var request = new proto.UnlinkRequest(channel.relative(uri), lane);\n    channel.send(request);\n  }\n}\n\nfunction handleMessage(endpoint, envelope) {\n  var uri = URI.resolve(endpoint, envelope.node);\n  var nodeHandlers = linkHandlers[uri];\n  if (nodeHandlers === undefined) return;\n  var laneHandlers = nodeHandlers[envelope.lane];\n  if (laneHandlers === undefined) return;\n  var i = 0;\n  var n = laneHandlers.length;\n  while (i < n) {\n    var handler = laneHandlers[i];\n    handler.done(envelope);\n    i += 1;\n  }\n}\n\n\nfunction sendEvent(uri, lane, body) {\n  var channel = Channel.get(uri);\n  var message = new proto.SendEventMessage(channel.relative(uri), lane, body);\n  channel.send(message);\n}\n\nfunction sendCommand(uri, lane, body) {\n  var channel = Channel.get(uri);\n  var message = new proto.SendCommandMessage(channel.relative(uri), lane, body);\n  channel.send(message);\n}\n\n\nfunction get(uri, handler) {\n  if (typeof handler === 'function') handler = {done: handler};\n\n  var handlers = getHandlers[uri];\n  if (handlers === undefined) {\n    handlers = [];\n    getHandlers[uri] = handlers;\n  }\n  handlers.push(handler);\n\n  var channel = Channel.get(uri);\n  var request = new proto.GetRequest(channel.relative(uri));\n  channel.send(request);\n}\n\nfunction put(uri, body, handler) {\n  if (typeof handler === 'function') handler = {done: handler};\n\n  var handlers = getHandlers[uri];\n  if (handlers === undefined) {\n    handlers = [];\n    getHandlers[uri] = handlers;\n  }\n  handlers.push(handler);\n\n  var channel = Channel.get(uri);\n  var request = new proto.PutRequest(channel.relative(uri), body);\n  channel.send(request);\n}\n\nfunction handleState(endpoint, envelope) {\n  var uri = URI.resolve(endpoint, envelope.node);\n  var handlers = getHandlers[uri] || [];\n  var handler;\n  while ((handler = handlers.shift())) {\n    handler.done(envelope);\n  }\n  delete getHandlers[uri];\n}\n\n\nfunction Channel(uri) {\n  this.uri = uri;\n  this.socket = new WS(uri, 'swim-0.0');\n  this.buffer = [];\n  Channel.bridge[uri] = this;\n  var that = this;\n  this.socket.onopen = function () {\n    var envelope;\n    while ((envelope = that.buffer.shift())) that.send(envelope);\n  };\n  this.socket.onclose = function () {\n    delete Channel.bridge[that.uri];\n  };\n  this.socket.onmessage = function (frame) {\n    var payload = frame.data;\n    if (typeof payload === 'string') {\n      var envelope = proto.parse(payload);\n      if (envelope) that.receive(envelope);\n    }\n  };\n}\nChannel.prototype.send = function (envelope) {\n  if (this.socket.readyState !== this.socket.OPEN) this.buffer.push(envelope);\n  else this.socket.send(proto.stringify(envelope));\n};\nChannel.prototype.receive = function (envelope) {\n  if (envelope.isEventMessage) handleMessage(this.uri, envelope);\n  else if (envelope.isCommandMessage) handleMessage(this.uri, envelope);\n  else if (envelope.isStateResponse) handleState(this.uri, envelope);\n};\nChannel.prototype.close = function () {\n  if (this.socket.readyState !== this.socket.CLOSED ||\n      this.socket.readyState !== this.socket.CLOSING)\n    this.socket.close();\n  else delete Channel.bridge[this.uri];\n};\nChannel.prototype.relative = function (uri) {\n  var components = URI.parse(uri);\n  return URI.serialize({\n    path: components.path,\n    query: components.query,\n    fragment: components.fragment\n  });\n};\nChannel.bridge = {};\nChannel.endpoint = function (uri) {\n  var components = URI.parse(uri);\n  var scheme = components.scheme;\n  if (scheme === 'swim') scheme = 'http';\n  else if (scheme === 'swims') scheme = 'https';\n  return URI.serialize({\n    scheme: scheme,\n    userinfo: components.userinfo,\n    host: components.host,\n    port: components.port\n  });\n};\nChannel.get = function (uri) {\n  var endpoint = Channel.endpoint(uri);\n  var channel = Channel.bridge[endpoint];\n  if (channel === undefined) channel = new Channel(endpoint);\n  return channel;\n};\n\n\nexports.reset = reset;\nexports.link = link;\nexports.unlink = unlink;\nexports.sendEvent = sendEvent;\nexports.sendCommand = sendCommand;\nexports.get = get;\nexports.put = put;\n\n},{\"swim-proto-js\":3,\"uri-js\":7,\"websocket\":8}],2:[function(require,module,exports){\n'use strict';\n\nfunction coerce() {\n  if (arguments.length === 1) {\n    var item = arguments[0];\n    if (item === null) return Extant;\n    else if (typeof item === 'undefined') return Absent;\n    else if (item instanceof Attr || item instanceof Slot) {\n      var builder = new RecordBuilder();\n      builder.appendField(item);\n      return builder.state();\n    }\n    else return coerceItem(item);\n  }\n  else if (arguments.length > 1) return coerceArray(arguments);\n  else return Absent;\n}\nfunction coerceItem(item) {\n  if (item === null) return Extant;\n  else if (item instanceof Record ||\n           item instanceof Attr ||\n           item instanceof Slot ||\n           typeof item === 'string' ||\n           typeof item === 'number' ||\n           typeof item === 'boolean' ||\n           item instanceof Uint8Array ||\n           item === Extant ||\n           item === Absent) return item;\n  else if (Array.isArray(item)) return coerceArray(item);\n  else if (typeof item === 'object') {\n    if (item.toRecon && typeof item.toRecon === 'function') return item.toRecon();\n    else return coerceObject(item);\n  }\n  else return Absent;\n}\nfunction coerceArray(array) {\n  var builder = new RecordBuilder();\n  var n = array.length;\n  var i = 0;\n  while (i < n) {\n    var value = coerceItem(array[i]);\n    if (value.isField) builder.appendField(value);\n    else builder.appendValue(value);\n    i += 1;\n  }\n  return builder.state();\n}\nfunction coerceObject(object) {\n  var builder = new RecordBuilder();\n  var prop, key, value;\n  var attrs = object['@'];\n  for (prop in attrs) {\n    key = coerce(prop);\n    if (typeof key === 'string') {\n      value = coerce(attrs[prop]);\n      if (!value.isAbsent) builder.appendField(new Attr(key, value));\n    }\n  }\n  for (prop in object) {\n    if (prop !== '@') {\n      key = coerce(prop);\n      if (!key.isAbsent) {\n        value = coerce(object[prop]);\n        if (!value.isAbsent) builder.appendField(new Slot(key, value));\n      }\n    }\n  }\n  return builder.state();\n}\n\nfunction parse(string) {\n  var input = new StringIterator(string);\n  var result = new DocumentParser().run(input);\n  return result.state();\n}\n\nfunction stringify() {\n  var writer = new ReconWriter();\n  writer.writeBlock(coerce.apply(null, arguments));\n  return writer.state();\n}\n\nfunction objectify(value) {\n  if (value === null || typeof value === 'undefined' || value.isExtant) return null;\n  else if (value.isAbsent) return undefined;\n  else if (value instanceof Record) {\n    if (value.isArray()) return objectifyArray(value);\n    else return objectifyObject(value);\n  }\n  else return value;\n}\nfunction objectifyArray(record) {\n  var array = [];\n  var items = record.iterator();\n  while (!items.isEmpty()) {\n    var value = objectify(items.head());\n    array.push(value);\n    items.step();\n  }\n  return array;\n}\nfunction objectifyObject(record) {\n  var items = record.iterator();\n  var key, value;\n  var object = {};\n  var attrs = null;\n  var i = 0;\n  while (!items.isEmpty()) {\n    var item = items.head();\n    if (item.isField) {\n      key = objectify(item.key);\n      value = objectify(item.value);\n      if (item.isAttr) {\n        if (attrs === null) attrs = {};\n        attrs[key] = value;\n      }\n      else object[key] = value;\n    }\n    else {\n      value = objectify(item);\n      object[i] = value;\n    }\n    items.step();\n    i += 1;\n  }\n  if (attrs !== null) object['@'] = attrs;\n  return object;\n}\n\nfunction base64(string) {\n  if (typeof string === 'undefined') return new Uint8Array(0);\n  var data = new DataBuilder();\n  var cs = new StringIterator(string);\n  while (!cs.isEmpty()) {\n    data.appendBase64Char(cs.head());\n    cs.step();\n  }\n  return data.state();\n}\n\nfunction attr(key, value) {\n  if (typeof value === 'undefined') value = Extant;\n  return new Attr(coerce(key), coerce(value));\n}\n\nfunction slot(key, value) {\n  if (typeof value === 'undefined') value = Extant;\n  return new Slot(coerce(key), coerce(value));\n}\n\nfunction empty() {\n  return new Record([], {});\n}\n\nfunction builder() {\n  return new RecordBuilder();\n}\n\nfunction compare(x, y) {\n  if (x === y) return true;\n  if (x instanceof Record && y instanceof Record) return x.equals(y);\n  if (x.isField && y.isField) return x.equals(y);\n  if (x instanceof Uint8Array && y instanceof Uint8Array && x.length === y.length) {\n    var i = 0;\n    var n = x.length;\n    while (i < n && x[i] === y[i]) i += 1;\n    if (i === n) return true;\n  }\n  return false;\n}\n\n\nfunction Record(items, index) {\n  if (typeof index === 'undefined') {\n    index = {};\n    var i = 0;\n    var n = items.length;\n    while (i < n) {\n      var item = items[i];\n      if (item.isField) index[item.key] = item.value;\n      i += 1;\n    }\n  }\n  var record = function(key) {\n    var value = index[key];\n    if (typeof value === 'undefined' && typeof key === 'number') value = items[key];\n    return value;\n  };\n  record.__proto__ = Record.prototype;\n  Object.defineProperty(record, 'items', {value: items});\n  Object.defineProperty(record, 'index', {value: index});\n  return record;\n}\nRecord.prototype = Object.create(Function.prototype);\nRecord.prototype.constructor = Record;\nObject.defineProperty(Record.prototype, 'size', {\n  enumerable: true,\n  get: function () {\n    return this.items.length;\n  }\n});\nRecord.prototype.isEmpty = function () {\n  return this.items.length === 0;\n};\nRecord.prototype.isArray = function () {\n  return this.items.length >= 0 && Object.getOwnPropertyNames(this.index).length === 0;\n};\nRecord.prototype.isMarkup = function () {\n  function isBlank(string) {\n    var cs = new StringIterator(string);\n    while (!cs.isEmpty() && isSpace(cs.head())) cs.step();\n    return cs.isEmpty();\n  }\n  var items = this.iterator();\n  var afterNonText = false;\n  var hasNonText = false;\n  var sections = 0;\n  while (!items.isEmpty()) {\n    var item = items.head();\n    if (typeof item !== 'string') {\n      if (afterNonText) return false;\n      afterNonText = true;\n      hasNonText = true;\n    }\n    else if (afterNonText && !isBlank(item)) {\n      afterNonText = false;\n      sections += 1;\n    }\n    else if (sections === 0) sections = 1;\n    items.step();\n  }\n  return hasNonText && sections >= 2;\n};\nRecord.prototype.hasAttrs = function() {\n  return this.items.length > 0 && (this.items[0].isAttr || this.items[this.items.length - 1].isAttr);\n};\nRecord.prototype.hasPrefixAttrs = function () {\n  return this.items.length > 0 && this.items[0].isAttr;\n};\nRecord.prototype.hasPostfixAttrs = function () {\n  return this.items.length > 0 && this.items[this.items.length - 1].isAttr;\n};\nRecord.prototype.contains = function (key) {\n  return typeof this(key) !== 'undefined';\n};\nRecord.prototype.head = function () {\n  return this.items.length > 0 ? this.items[0] : Absent;\n};\nRecord.prototype.tail = function () {\n  return new Record(this.items.slice(1));\n};\nRecord.prototype.body = function () {\n  return new Record(this.items.slice(0, -1));\n};\nRecord.prototype.foot = function () {\n  return this.items.length > 0 ? this.items[this.items.length - 1] : Absent;\n};\nRecord.prototype.target = function () {\n  var these = this.iterator();\n  while (!these.isEmpty()) {\n    var item = these.next();\n    if (!item.isField) return item;\n  }\n  return Absent;\n};\nRecord.prototype.concat = function () {\n  var builder = new RecordBuilder();\n  builder.appendRecord(this);\n  var that = coerce.apply(null, arguments);\n  if (that instanceof Record) builder.appendRecord(that);\n  else builder.appendValue(that);\n  return builder.state();\n};\nRecord.prototype.iterator = function () {\n  return new RecordIterator(this.items);\n};\nRecord.prototype.forEach = function (f) {\n  var these = this.iterator();\n  while (!these.isEmpty()) f(these.next());\n};\nRecord.prototype.equals = function (that) {\n  var these = this.iterator();\n  var those = that.iterator();\n  while (!these.isEmpty() && !those.isEmpty()) {\n    if (!compare(these.next(), those.next())) return false;\n  }\n  return these.isEmpty() && those.isEmpty();\n};\nRecord.prototype.toString = function () {\n  var writer = new ReconWriter();\n  writer.writeRecord(this);\n  return writer.state();\n};\n\n\nfunction Field() {}\nObject.defineProperty(Field.prototype, 'isField', {enumerable: true, value: true});\nObject.defineProperty(Field.prototype, 'isAttr', {enumerable: true, value: false});\nObject.defineProperty(Field.prototype, 'isSlot', {enumerable: true, value: false});\n\nfunction Attr(key, value) {\n  Field.call(this);\n  Object.defineProperty(this, 'key', {enumerable: true, value: key});\n  if (typeof value === 'undefined') value = Extant;\n  Object.defineProperty(this, 'value', {enumerable: true, value: value});\n}\nAttr.prototype = Object.create(Field.prototype);\nAttr.prototype.constructor = Attr;\nObject.defineProperty(Attr.prototype, 'isAttr', {enumerable: true, value: true});\nAttr.prototype.equals = function (that) {\n  return that.isAttr && compare(this.key, that.key) && compare(this.value, that.value);\n};\nAttr.prototype.toString = function () {\n  var writer = new ReconWriter();\n  writer.writeAttr(this);\n  return writer.state();\n};\n\nfunction Slot(key, value) {\n  Field.call(this);\n  Object.defineProperty(this, 'key', {enumerable: true, value: key});\n  if (typeof value === 'undefined') value = Extant;\n  Object.defineProperty(this, 'value', {enumerable: true, value: value});\n}\nSlot.prototype = Object.create(Field.prototype);\nSlot.prototype.constructor = Slot;\nObject.defineProperty(Slot.prototype, 'isSlot', {enumerable: true, value: true});\nSlot.prototype.equals = function (that) {\n  return that.isSlot && compare(this.key, that.key) && compare(this.value, that.value);\n};\nSlot.prototype.toString = function () {\n  var writer = new ReconWriter();\n  writer.writeItem(this);\n  return writer.state();\n};\n\n\nvar Extant = {};\nObject.defineProperty(Extant, 'isExtant', {enumerable: true, value: true});\n\nvar Absent = {};\nObject.defineProperty(Absent, 'isAbsent', {enumerable: true, value: true});\n\n\nfunction RecordIterator(items, index) {\n  Object.defineProperty(this, 'items', {value: items});\n  Object.defineProperty(this, 'index', {value: index || 0, writable: true});\n}\nRecordIterator.prototype.isEmpty = function () {\n  return this.index >= this.items.length;\n};\nRecordIterator.prototype.head = function () {\n  if (this.index >= this.items.length) throw 'head of empty iterator';\n  return this.items[this.index];\n};\nRecordIterator.prototype.step = function () {\n  if (this.index >= this.items.length) throw 'empty iterator step';\n  this.index += 1;\n};\nRecordIterator.prototype.next = function () {\n  if (this.index >= this.items.length) return null;\n  var item = this.items[this.index];\n  this.index += 1;\n  return item;\n};\nRecordIterator.prototype.dup = function () {\n  return new RecordIterator(this.items, this.index);\n};\nRecordIterator.prototype.toRecord = function () {\n  return new Record(this.items.slice(this.index));\n};\nRecordIterator.prototype.isAllAttrs = function () {\n  var items = this.dup();\n  while (!items.isEmpty()) {\n    if (!items.next().isAttr) return false;\n  }\n  return true;\n};\n\n\nfunction RecordBuilder() {\n  Object.defineProperty(this, 'items', {value: []});\n  Object.defineProperty(this, 'index', {value: {}});\n}\nRecordBuilder.prototype.appendField = function (field) {\n  this.items.push(field);\n  this.index[field.key] = field.value;\n};\nRecordBuilder.prototype.appendValue = function (value) {\n  this.items.push(value);\n};\nRecordBuilder.prototype.appendRecord = function (record) {\n  var items = record.iterator();\n  while (!items.isEmpty()) {\n    var item = items.next();\n    if (item.isField) this.appendField(item);\n    else this.appendValue(item);\n  }\n};\nRecordBuilder.prototype.attr = function (key, value) {\n  this.appendField(attr(key, value));\n  return this;\n};\nRecordBuilder.prototype.slot = function (key, value) {\n  this.appendField(slot(key, value));\n  return this;\n};\nRecordBuilder.prototype.item = function (value) {\n  this.appendValue(coerceItem(value));\n  return this;\n};\nRecordBuilder.prototype.state = function () {\n  return new Record(this.items, this.index);\n};\n\n\nfunction ValueBuilder() {\n  Object.defineProperty(this, 'items', {value: null, writable: true});\n  Object.defineProperty(this, 'index', {value: null, writable: true});\n  Object.defineProperty(this, 'value', {value: null, writable: true});\n}\nValueBuilder.prototype.appendField = function (field) {\n  if (this.items === null) {\n    this.items = [];\n    this.index = {};\n    if (this.value !== null) {\n      this.items.push(this.value);\n      this.value = null;\n    }\n  }\n  this.items.push(field);\n  this.index[field.key] = field.value;\n};\nValueBuilder.prototype.appendValue = function (value) {\n  if (this.items !== null) this.items.push(value);\n  else if (this.value === null) this.value = value;\n  else {\n    this.items = [];\n    this.index = {};\n    this.items.push(this.value);\n    this.value = null;\n    this.items.push(value);\n  }\n};\nValueBuilder.prototype.state = function () {\n  if (this.value !== null) return this.value;\n  else if (this.items !== null) return new Record(this.items, this.index);\n  else return Absent;\n};\n\n\nfunction StringIterator(string, index) {\n  Object.defineProperty(this, 'string', {value: string || ''});\n  Object.defineProperty(this, 'index', {value: index || 0, writable: true});\n}\nStringIterator.prototype.isDone = function () {\n  return false;\n};\nStringIterator.prototype.isEmpty = function () {\n  return this.index >= this.string.length;\n};\nStringIterator.prototype.head = function () {\n  var c1 = this.string.charCodeAt(this.index);\n  if (c1 <= 0xD7FF || c1 >= 0xE000) return c1; // U+0000..U+D7FF | U+E000..U+FFFF\n  else if (c1 <= 0xDBFF && this.index + 1 < this.string.length) { // c1 >= 0xD800\n    var c2 = this.string.charCodeAt(this.index + 1);\n    if (c2 >= 0xDC00 && c2 <= 0xDFFF) // U+10000..U+10FFFF\n      return (((c1 & 0x3FF) << 10) | (c2 & 0x3FF)) + 0x10000;\n    else return 0xFFFD;\n  }\n  else return 0xFFFD;\n};\nStringIterator.prototype.step = function () {\n  var c1 = this.string.charCodeAt(this.index);\n  if (c1 <= 0xD7FF || c1 >= 0xE000) // U+0000..U+D7FF | U+E000..U+FFFF\n    this.index += 1;\n  else if (c1 <= 0xDBFF && this.index + 1 < this.string.length) { // c1 >= 0xD800\n    var c2 = this.string.charCodeAt(this.index + 1);\n    if (c2 >= 0xDC00 && c2 <= 0xDFFF) // U+10000..U+10FFFF\n      this.index += 2;\n    else this.index += 1;\n  }\n  else this.index += 1;\n};\n\nStringIterator.Done = {\n  isDone: function () {\n    return true;\n  },\n  isEmpty: function () {\n    return true;\n  },\n  head: function () {\n    throw 'head of empty iterator';\n  },\n  step: function () {\n    throw 'empty iterator step';\n  }\n};\nStringIterator.Done.prototype = Object.create(StringIterator.prototype);\n\n\nfunction StringIteratee() {}\nStringIteratee.prototype.isCont = function () {\n  return true;\n};\nStringIteratee.prototype.isDone = function () {\n  return false;\n};\nStringIteratee.prototype.isError = function () {\n  return false;\n};\nStringIteratee.prototype.feed = function (input) {\n  return this;\n};\nStringIteratee.prototype.run = function (input) {\n  var next = this;\n  while (!input.isEmpty() && next.isCont()) next = next.feed(input);\n  if (input.isEmpty() && !input.isDone() && next.isCont()) next = next.feed(StringIterator.Done);\n  return next;\n};\n\nStringIteratee.Done = function (value) {\n  StringIteratee.call(this);\n  this.value = value;\n};\nStringIteratee.Done.prototype = Object.create(StringIteratee.prototype);\nStringIteratee.Done.prototype.constructor = StringIteratee.Done;\nStringIteratee.Done.prototype.isCont = function () {\n  return false;\n};\nStringIteratee.Done.prototype.isDone = function () {\n  return true;\n};\nStringIteratee.Done.prototype.feed = function (input) {\n  return this;\n};\nStringIteratee.Done.prototype.state = function () {\n  return this.value;\n};\n\nStringIteratee.Error = function (error) {\n  StringIteratee.call(this);\n  this.error = error;\n};\nStringIteratee.Error.prototype = Object.create(StringIteratee.prototype);\nStringIteratee.Error.prototype.constructor = StringIteratee.Error;\nStringIteratee.Error.prototype.isCont = function () {\n  return false;\n};\nStringIteratee.Error.prototype.isError = function () {\n  return true;\n};\nStringIteratee.Error.prototype.feed = function (input) {\n  return this;\n};\nStringIteratee.Error.prototype.state = function () {\n  throw this.error;\n};\n\nStringIteratee.unexpectedEOF = new StringIteratee.Error('unexpected end of input');\n\n\nfunction StringBuilder() {\n  Object.defineProperty(this, 'string', {value: '', writable: true});\n}\nStringBuilder.prototype.append = function (c) {\n  if ((c >= 0x0000 && c <= 0xD7FF) ||\n      (c >= 0xE000 && c <= 0xFFFF)) { // U+0000..U+D7FF | U+E000..U+FFFF\n    this.string += String.fromCharCode(c);\n  }\n  else if (c >= 0x10000 && c <= 0x10FFFF) { // U+10000..U+10FFFF\n    var u = c - 0x10000;\n    this.string += String.fromCharCode(0xD800 | (u >>> 10), 0xDC00 | (u & 0x3FF));\n  }\n  else { // invalid code point\n    this.string += String.fromCharCode(0xFFFD);\n  }\n};\nStringBuilder.prototype.appendString = function (s) {\n  var cs = new StringIterator(s);\n  while (!cs.isEmpty()) {\n    this.append(cs.head());\n    cs.step();\n  }\n};\nStringBuilder.prototype.state = function () {\n  return this.string;\n};\n\n\nfunction DataBuilder() {\n  Object.defineProperty(this, 'buffer', {value: null, writable: true});\n  Object.defineProperty(this, 'offset', {value: 0, writable: true});\n  Object.defineProperty(this, 'aliased', {value: true, writable: true});\n  Object.defineProperty(this, 'p', {value: 0, writable: true});\n  Object.defineProperty(this, 'q', {value: 0, writable: true});\n  Object.defineProperty(this, 'r', {value: 0, writable: true});\n  Object.defineProperty(this, 's', {value: 0, writable: true});\n}\nDataBuilder.prototype.prepare = function (size) {\n  function expand(base, size) {\n    var n = Math.max(base, size) - 1;\n    n |= n >> 1; n |= n >> 2; n |= n >> 4; n |= n >> 8;\n    return n + 1;\n  }\n  if (this.aliased || size > this.buffer.length) {\n    var array = new Uint8Array(expand(256, size));\n    if (this.buffer) array.set(this.buffer);\n    this.buffer = array;\n    this.aliased = false;\n  }\n};\nDataBuilder.prototype.appendByte = function (value) {\n  this.prepare(this.offset + 1);\n  this.buffer[this.offset] = value;\n  this.offset += 1;\n};\nDataBuilder.prototype.decodeBase64Digit = function (c) {\n  if (c >= 65/*'A'*/ && c <= 90/*'Z'*/) return c - 65/*'A'*/;\n  else if (c >= 97/*'a'*/ && c <= 122/*'z'*/) return c - 71/*'a' - 26*/;\n  else if (c >= 48/*'0'*/ && c <= 57/*'9'*/) return c + 4/*52 - '0'*/;\n  else if (c === 43/*'+'*/ || c === 45/*'-'*/) return 62;\n  else if (c === 47/*'/'*/ || c === 95/*'_'*/) return 63;\n};\nDataBuilder.prototype.decodeBase64Quantum = function () {\n  var x = this.decodeBase64Digit(this.p);\n  var y = this.decodeBase64Digit(this.q);\n  if (this.r !== 61/*'='*/) {\n    var z = this.decodeBase64Digit(this.r);\n    if (this.s !== 61/*'='*/) {\n      var w = this.decodeBase64Digit(this.s);\n      this.appendByte((x << 2) | (y >>> 4));\n      this.appendByte((y << 4) | (z >>> 2));\n      this.appendByte((z << 6) | w);\n    }\n    else {\n      this.appendByte((x << 2) | (y >>> 4));\n      this.appendByte((y << 4) | (z >>> 2));\n    }\n  }\n  else {\n    if (this.s !== 61/*'='*/) throw 'incomplete base64 quantum';\n    this.appendByte((x << 2) | (y >>> 4));\n  }\n};\nDataBuilder.prototype.appendBase64Char = function (c) {\n  if (this.p === 0) this.p = c;\n  else if (this.q === 0) this.q = c;\n  else if (this.r === 0) this.r = c;\n  else {\n    this.s = c;\n    this.decodeBase64Quantum();\n    this.s = 0;\n    this.r = 0;\n    this.q = 0;\n    this.p = 0;\n  }\n};\nDataBuilder.prototype.state = function (value) {\n  if (!this.buffer) this.buffer = new Uint8Array(0);\n  else if (this.buffer.length !== this.offset) {\n    var array = new Uint8Array(this.offset);\n    array.set(this.buffer.subarray(0, this.offset));\n    this.buffer = array;\n  }\n  this.aliased = true;\n  return this.buffer;\n};\n\n\nfunction isSpace(c) {\n  return c === 0x20 || c === 0x9;\n}\nfunction isNewline(c) {\n  return c === 0xA || c === 0xD;\n}\nfunction isWhitespace(c) {\n  return isSpace(c) || isNewline(c);\n}\nfunction isNameStartChar(c) {\n  return (\n    c >= 65/*'A'*/ && c <= 90/*'Z'*/ ||\n    c === 95/*'_'*/ ||\n    c >= 97/*'a'*/ && c <= 122/*'z'*/ ||\n    c >= 0xC0 && c <= 0xD6 ||\n    c >= 0xD8 && c <= 0xF6 ||\n    c >= 0xF8 && c <= 0x2FF ||\n    c >= 0x370 && c <= 0x37D ||\n    c >= 0x37F && c <= 0x1FFF ||\n    c >= 0x200C && c <= 0x200D ||\n    c >= 0x2070 && c <= 0x218F ||\n    c >= 0x2C00 && c <= 0x2FEF ||\n    c >= 0x3001 && c <= 0xD7FF ||\n    c >= 0xF900 && c <= 0xFDCF ||\n    c >= 0xFDF0 && c <= 0xFFFD ||\n    c >= 0x10000 && c <= 0xEFFFF);\n}\nfunction isNameChar(c) {\n  return (\n    c === 45/*'-'*/ ||\n    c >= 48/*'0'*/ && c <= 57/*'9'*/ ||\n    c >= 65/*'A'*/ && c <= 90/*'Z'*/ ||\n    c === 95/*'_'*/ ||\n    c >= 97/*'a'*/ && c <= 122/*'z'*/ ||\n    c === 0xB7 ||\n    c >= 0xC0 && c <= 0xD6 ||\n    c >= 0xD8 && c <= 0xF6 ||\n    c >= 0xF8 && c <= 0x37D ||\n    c >= 0x37F && c <= 0x1FFF ||\n    c >= 0x200C && c <= 0x200D ||\n    c >= 0x203F && c <= 0x2040 ||\n    c >= 0x2070 && c <= 0x218F ||\n    c >= 0x2C00 && c <= 0x2FEF ||\n    c >= 0x3001 && c <= 0xD7FF ||\n    c >= 0xF900 && c <= 0xFDCF ||\n    c >= 0xFDF0 && c <= 0xFFFD ||\n    c >= 0x10000 && c <= 0xEFFFF);\n}\nfunction isBase64Char(c) {\n  return (\n    c >= 48/*'0'*/ && c <= 57/*'9'*/ ||\n    c >= 65/*'A'*/ && c <= 90/*'Z'*/ ||\n    c >= 97/*'a'*/ && c <= 122/*'z'*/ ||\n    c === 43/*'+'*/ || c === 45/*'-'*/ ||\n    c === 47/*'/'*/ || c === 95/*'_'*/);\n}\n\n\nfunction DocumentParser(value) {\n  StringIteratee.call(this);\n  this.value = value || new BlockParser();\n}\nDocumentParser.prototype = Object.create(StringIteratee.prototype);\nDocumentParser.prototype.constructor = DocumentParser;\nDocumentParser.prototype.feed = function (input) {\n  var value = this.value;\n  while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n  if (value.isError()) return value;\n  if (value.isDone()) {\n    if (!input.isEmpty()) return new StringIteratee.Error({found: input.head()});\n    else if (input.isDone()) return value;\n  }\n  return new DocumentParser(value);\n};\n\n\nfunction BlockParser(builder, key, value, s) {\n  StringIteratee.call(this);\n  this.builder = builder || null;\n  this.key = key || null;\n  this.value = value || null;\n  this.s = s || 1;\n}\nBlockParser.prototype = Object.create(StringIteratee.prototype);\nBlockParser.prototype.constructor = BlockParser;\nBlockParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var value = this.value;\n  var key = this.key;\n  var builder = this.builder || new ValueBuilder();\n  while (!input.isEmpty() || input.isDone()) {\n    if (s === 1) {\n      while (!input.isEmpty() && (c = input.head(), isWhitespace(c))) input.step();\n      if (!input.isEmpty()) s = 2;\n      else if (input.isDone()) return new StringIteratee.Done(builder.state());\n    }\n    if (s === 2) {\n      key = key || new BlockValueParser();\n      while ((!input.isEmpty() || input.isDone()) && key.isCont()) key = key.feed(input);\n      if (key.isDone()) s = 3;\n      else if (key.isError()) return key;\n    }\n    if (s === 3) {\n      while (!input.isEmpty() && (c = input.head(), isSpace(c))) input.step();\n      if (!input.isEmpty()) {\n        if (c === 58/*':'*/) {\n          input.step();\n          s = 4;\n        }\n        else {\n          builder.appendValue(key.state());\n          key = null;\n          s = 6;\n        }\n      }\n      else if (input.isDone()) {\n        builder.appendValue(key.state());\n        return new StringIteratee.Done(builder.state());\n      }\n    }\n    if (s === 4) {\n      while (!input.isEmpty() && isSpace(input.head())) input.step();\n      if (!input.isEmpty()) s = 5;\n      else if (input.isDone()) {\n        builder.appendField(new Slot(key.state()));\n        return new StringIteratee.Done(builder.state());\n      }\n    }\n    if (s === 5) {\n      value = value || new BlockValueParser();\n      while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n      if (value.isDone()) {\n        builder.appendField(new Slot(key.state(), value.state()));\n        key = null;\n        value = null;\n        s = 6;\n      }\n      else if (value.isError()) return value;\n    }\n    if (s === 6) {\n      while (!input.isEmpty() && (c = input.head(), isSpace(c))) input.step();\n      if (!input.isEmpty()) {\n        if (c === 44/*','*/ || c === 59/*';'*/ || isNewline(c)) {\n          input.step();\n          s = 1;\n        }\n        else return new StringIteratee.Done(builder.state());\n      }\n      else if (input.isDone()) return new StringIteratee.Done(builder.state());\n    }\n  }\n  return new BlockParser(builder, key, value, s);\n};\n\n\nfunction AttrParser(ident, value, s) {\n  StringIteratee.call(this);\n  this.ident = ident || new IdentParser();\n  this.value = value || new BlockParser();\n  this.s = s || 1;\n}\nAttrParser.prototype = Object.create(StringIteratee.prototype);\nAttrParser.prototype.constructor = AttrParser;\nAttrParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var value = this.value;\n  var ident = this.ident;\n  if (s === 1) {\n    if (!input.isEmpty() && (c = input.head(), c === 64/*'@'*/)) {\n      input.step();\n      s = 2;\n    }\n    else if (!input.isEmpty()) return new StringIteratee.Error({expected: '\\'@\\'', found: c});\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  if (s === 2) {\n    ident = ident.feed(input);\n    if (ident.isDone()) s = 3;\n    else if (ident.isError()) return ident;\n  }\n  if (s === 3) {\n    if (!input.isEmpty() && input.head() === 40/*'('*/) {\n      input.step();\n      s = 4;\n    }\n    else if (!input.isEmpty() || input.isDone()) return new StringIteratee.Done(new Attr(ident.state()));\n  }\n  if (s === 4) {\n    while (!input.isEmpty() && (c = input.head(), isWhitespace(c))) input.step();\n    if (!input.isEmpty()) {\n      if (c === 41/*')'*/) {\n        input.step();\n        return new StringIteratee.Done(new Attr(ident.state()));\n      }\n      else s = 5;\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  if (s === 5) {\n    while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n    if (value.isDone()) s = 6;\n    else if (value.isError()) return value;\n  }\n  if (s === 6) {\n    while (!input.isEmpty() && (c = input.head(), isWhitespace(c))) input.step();\n    if (!input.isEmpty()) {\n      if (c === 41/*')'*/) {\n        input.step();\n        return new StringIteratee.Done(new Attr(ident.state(), value.state()));\n      }\n      else return new StringIteratee.Error({expected: '\\')\\'', found: c});\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  return new AttrParser(ident, value, s);\n};\n\n\nfunction BlockValueParser(builder, field, value, s) {\n  StringIteratee.call(this);\n  this.builder = builder || null;\n  this.field = field || null;\n  this.value = value || null;\n  this.s = s || 1;\n}\nBlockValueParser.prototype = Object.create(StringIteratee.prototype);\nBlockValueParser.prototype.constructor = BlockValueParser;\nBlockValueParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var value = this.value;\n  var field = this.field;\n  var builder = this.builder;\n  while (!input.isEmpty() || input.isDone()) {\n    if (s === 1) {\n      if (!input.isEmpty()) {\n        c = input.head();\n        if (c === 64/*'@'*/) {\n          field = new AttrParser();\n          s = 2;\n        }\n        else if (c === 123/*'{'*/) {\n          builder = builder || new RecordBuilder();\n          value = new RecordParser(builder);\n          s = 5;\n        }\n        else if (c === 91/*'['*/) {\n          builder = builder || new RecordBuilder();\n          value = new MarkupParser(builder);\n          s = 5;\n        }\n        else if (c === 34/*'\"'*/) {\n          value = new StringParser();\n          s = 4;\n        }\n        else if (c === 37/*'%'*/) {\n          value = new DataParser();\n          s = 4;\n        }\n        else if (c === 45/*'-'*/ || c >= 48/*'0'*/ && c <= 57/*'9'*/) {\n          value = new NumberParser();\n          s = 4;\n        }\n        else if (isNameStartChar(c)) {\n          value = new IdentParser();\n          s = 4;\n        }\n        else if (!builder) return new StringIteratee.Done(Absent);\n        else return new StringIteratee.Done(builder.state());\n      }\n      else if (input.isDone()) {\n        if (!builder) return new StringIteratee.Done(Absent);\n        else return new StringIteratee.Done(builder.state());\n      }\n    }\n    if (s === 2) {\n      while ((!input.isEmpty() || input.isDone()) && field.isCont()) field = field.feed(input);\n      if (field.isDone()) {\n        builder = builder || new ValueBuilder();\n        builder.appendField(field.state());\n        field = null;\n        s = 3;\n      }\n      else if (field.isError()) return field;\n    }\n    if (s === 3) {\n      while (!input.isEmpty() && isSpace(input.head())) input.step();\n      if (!input.isEmpty()) s = 1;\n      else if (input.isDone()) return new StringIteratee.Done(builder.state());\n    }\n    if (s === 4) {\n      while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n      if (value.isDone()) {\n        builder = builder || new ValueBuilder();\n        builder.appendValue(value.state());\n        value = null;\n        s = 6;\n      }\n      else if (value.isError()) return value;\n    }\n    if (s === 5) {\n      while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n      if (value.isDone()) {\n        value = null;\n        s = 6;\n      }\n      else if (value.isError()) return value;\n    }\n    if (s === 6) {\n      while (!input.isEmpty() && isSpace(input.head())) input.step();\n      if (!input.isEmpty()) {\n        if (input.head() === 64/*'@'*/) {\n          field = new AttrParser();\n          s = 7;\n        }\n        else return new StringIteratee.Done(builder.state());\n      }\n      else if (input.isDone()) return new StringIteratee.Done(builder.state());\n    }\n    if (s === 7) {\n      while ((!input.isEmpty() || input.isDone()) && field.isCont()) field = field.feed(input);\n      if (field.isDone()) {\n        builder = builder || new ValueBuilder();\n        builder.appendField(field.state());\n        field = null;\n        s = 6;\n      }\n      else if (field.isError()) return field;\n    }\n  }\n  return new BlockValueParser(builder, field, value, s);\n};\n\n\nfunction InlineValueParser(builder, field, value, s) {\n  StringIteratee.call(this);\n  this.builder = builder || null;\n  this.field = field || null;\n  this.value = value || null;\n  this.s = s || 1;\n}\nInlineValueParser.prototype = Object.create(StringIteratee.prototype);\nInlineValueParser.prototype.constructor = InlineValueParser;\nInlineValueParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var value = this.value;\n  var field = this.field;\n  var builder = this.builder;\n  while (!input.isEmpty() || input.isDone()) {\n    if (s === 1) {\n      if (!input.isEmpty()) {\n        c = input.head();\n        if (c === 64/*'@'*/) {\n          field = new AttrParser();\n          s = 2;\n        }\n        else if (c === 123/*'{'*/) {\n          if (builder) {\n            value = new RecordParser(builder);\n            s = 5;\n          }\n          else {\n            value = new RecordParser();\n            s = 4;\n          }\n        }\n        else if (c === 91/*'['*/) {\n          if (builder) {\n            value = new MarkupParser(builder);\n            s = 5;\n          }\n          else {\n            value = new MarkupParser();\n            s = 4;\n          }\n        }\n        else if (!builder) return new StringIteratee.Done(Absent);\n        else return new StringIteratee.Done(builder.state());\n      }\n      else if (input.isDone()) {\n        if (!builder) return new StringIteratee.Done(Absent);\n        else return new StringIteratee.Done(builder.state());\n      }\n    }\n    if (s === 2) {\n      while ((!input.isEmpty() || input.isDone()) && field.isCont()) field = field.feed(input);\n      if (field.isDone()) {\n        builder = builder || new ValueBuilder();\n        builder.appendField(field.state());\n        field = null;\n        s = 3;\n      }\n      else if (field.isError()) return field;\n    }\n    if (s === 3) {\n      while (!input.isEmpty() && isSpace(input.head())) input.step();\n      if (!input.isEmpty()) s = 1;\n      else if (input.isDone()) return new StringIteratee.Done(builder.state());\n    }\n    if (s === 4) {\n      while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n      if (value.isDone()) {\n        builder = builder || new ValueBuilder();\n        builder.appendValue(value.state());\n        return new StringIteratee.Done(builder.state());\n      }\n      else if (value.isError()) return value;\n    }\n    if (s === 5) {\n      while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n      if (value.isDone()) return new StringIteratee.Done(builder.state());\n      else if (value.isError()) return value;\n    }\n  }\n  return new InlineValueParser(builder, field, value, s);\n};\n\n\nfunction RecordParser(builder, key, value, s) {\n  StringIteratee.call(this);\n  this.builder = builder || null;\n  this.key = key || null;\n  this.value = value || null;\n  this.s = s || 1;\n}\nRecordParser.prototype = Object.create(StringIteratee.prototype);\nRecordParser.prototype.constructor = RecordParser;\nRecordParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var value = this.value;\n  var key = this.key;\n  var builder = this.builder || new RecordBuilder();\n  if (s === 1) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c === 123/*'{'*/) {\n        input.step();\n        s = 2;\n      }\n      else return new StringIteratee.Error({expected: '\\'{\\'', found: c});\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  while (!input.isEmpty() || input.isDone()) {\n    if (s === 2) {\n      while (!input.isEmpty() && (c = input.head(), isWhitespace(c))) input.step();\n      if (!input.isEmpty()) {\n        if (c === 125/*'}'*/) {\n          input.step();\n          return new StringIteratee.Done(builder.state());\n        }\n        else s = 3;\n      }\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n    if (s === 3) {\n      key = key || new BlockValueParser();\n      while ((!input.isEmpty() || input.isDone()) && key.isCont()) key = key.feed(input);\n      if (key.isDone()) s = 4;\n      else if (key.isError()) return key;\n    }\n    if (s === 4) {\n      while (!input.isEmpty() && (c = input.head(), isSpace(c))) input.step();\n      if (!input.isEmpty()) {\n        if (c === 58/*':'*/) {\n          input.step();\n          s = 5;\n        }\n        else {\n          builder.appendValue(key.state());\n          key = null;\n          s = 7;\n        }\n      }\n      else if (input.isDone()) {\n        builder.appendValue(key.state());\n        return new StringIteratee.Done(builder.state());\n      }\n    }\n    if (s === 5) {\n      while (!input.isEmpty() && isSpace(input.head())) input.step();\n      if (!input.isEmpty()) s = 6;\n      else if (input.isDone()) {\n        builder.appendField(new Slot(key.state()));\n        return new StringIteratee.Done(builder.state());\n      }\n    }\n    if (s === 6) {\n      value = value || new BlockValueParser();\n      while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n      if (value.isDone()) {\n        builder.appendField(new Slot(key.state(), value.state()));\n        key = null;\n        value = null;\n        s = 7;\n      }\n      else if (value.isError()) return value;\n    }\n    if (s === 7) {\n      while (!input.isEmpty() && (c = input.head(), isSpace(c))) input.step();\n      if (!input.isEmpty()) {\n        if (c === 44/*','*/ || c === 59/*';'*/ || isNewline(c)) {\n          input.step();\n          s = 2;\n        }\n        else if (c === 125/*'}'*/) {\n          input.step();\n          return new StringIteratee.Done(builder.state());\n        }\n       else return new StringIteratee.Error({expected: '\\'}\\', \\';\\', \\',\\', or newline', found: c});\n      }\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n  }\n  return new RecordParser(builder, key, value, s);\n};\n\n\nfunction MarkupParser(builder, text, value, s) {\n  StringIteratee.call(this);\n  this.builder = builder || null;\n  this.text = text || null;\n  this.value = value || null;\n  this.s = s || 1;\n}\nMarkupParser.prototype = Object.create(StringIteratee.prototype);\nMarkupParser.prototype.constructor = MarkupParser;\nMarkupParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var value = this.value;\n  var text = this.text;\n  var builder = this.builder;\n  if (s === 1) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c === 91/*'['*/) {\n        input.step();\n        s = 2;\n      }\n      else return new StringIteratee.Error({expected: '\\'[\\'', found: c});\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  while (!input.isEmpty() || input.isDone()) {\n    if (s === 2) {\n      while (!input.isEmpty() && (c = input.head(),\n          c !== 64/*'@'*/ &&\n          c !== 91/*'['*/ &&\n          c !== 92/*'\\\\'*/ &&\n          c !== 93/*']'*/ &&\n          c !== 123/*'{'*/ &&\n          c !== 125/*'}'*/)) {\n        input.step();\n        text = text || new StringBuilder();\n        text.append(c);\n      }\n      if (!input.isEmpty()) {\n        if (c === 93/*']'*/) {\n          input.step();\n          builder = builder || new RecordBuilder();\n          if (text) builder.appendValue(text.state());\n          return new StringIteratee.Done(builder.state());\n        }\n        else if (c === 64/*'@'*/) {\n          builder = builder || new RecordBuilder();\n          if (text) {\n            builder.appendValue(text.state());\n            text = null;\n          }\n          value = new InlineValueParser();\n          s = 3;\n        }\n        else if (c === 123/*'{'*/) {\n          builder = builder || new RecordBuilder();\n          if (text) {\n            builder.appendValue(text.state());\n            text = null;\n          }\n          value = new RecordParser(builder);\n          s = 4;\n        }\n        else if (c === 91/*'['*/) {\n          builder = builder || new RecordBuilder();\n          if (text) {\n            builder.appendValue(text.state());\n            text = null;\n          }\n          value = new MarkupParser(builder);\n          s = 4;\n        }\n        else if (c === 92/*'\\\\'*/) {\n          input.step();\n          s = 5;\n        }\n        else new StringIteratee.Error({found: c});\n      }\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n    if (s === 3) {\n      while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n      if (value.isDone()) {\n        builder.appendValue(value.state());\n        value = null;\n        s = 2;\n      }\n      else if (value.isError()) return value;\n    }\n    if (s === 4) {\n      while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n      if (value.isDone()) {\n        value = null;\n        s = 2;\n      }\n      else if (value.isError()) return value;\n    }\n    if (s === 5) {\n      if (!input.isEmpty()) {\n        c = input.head();\n        text = text || new StringBuilder();\n        if (c === 34/*'\"'*/ ||\n            c === 47/*'/'*/ ||\n            c === 64/*'@'*/ ||\n            c === 91/*'['*/ ||\n            c === 92/*'\\\\'*/ ||\n            c === 93/*']'*/ ||\n            c === 123/*'{'*/ ||\n            c === 125/*'}'*/) {\n          input.step();\n          text.append(c);\n          s = 2;\n        }\n        else if (c === 98/*'b'*/) {\n          input.step();\n          text.append(8/*'\\b'*/);\n          s = 2;\n        }\n        else if (c === 102/*'f'*/) {\n          input.step();\n          text.append(12/*'\\f'*/);\n          s = 2;\n        }\n        else if (c === 110/*'n'*/) {\n          input.step();\n          text.append(10/*'\\n'*/);\n          s = 2;\n        }\n        else if (c === 114/*'r'*/) {\n          input.step();\n          text.append(13/*'\\r'*/);\n          s = 2;\n        }\n        else if (c === 116/*'t'*/) {\n          input.step();\n          text.append(9/*'\\t'*/);\n          s = 2;\n        }\n        else return new StringIteratee.Error({expected: 'escape character', found: c});\n      }\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n  }\n  return new MarkupParser(builder, text, value, s);\n};\n\n\nfunction StringParser(text, s) {\n  StringIteratee.call(this);\n  this.text = text || null;\n  this.s = s || 1;\n}\nStringParser.prototype = Object.create(StringIteratee.prototype);\nStringParser.prototype.constructor = StringParser;\nStringParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var text = this.text;\n  if (s === 1) {\n    if (!input.isEmpty() && (c = input.head(), c === 34/*'\"'*/)) {\n      input.step();\n      s = 2;\n    }\n    else if (!input.isEmpty()) return new StringIteratee.Error({expected: '\\'\"\\'', found: c});\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  while (!input.isEmpty() || input.isDone()) {\n    if (s === 2) {\n      text = text || new StringBuilder();\n      while (!input.isEmpty() && (c = input.head(), c !== 34/*'\"'*/ && c !== 92/*'\\\\'*/)) {\n        input.step();\n        text.append(c);\n      }\n      if (!input.isEmpty()) {\n        if (c === 34/*'\"'*/) {\n          input.step();\n          return new StringIteratee.Done(text.state());\n        }\n        else if (c === 92/*'\\\\'*/) {\n          input.step();\n          s = 3;\n        }\n      }\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n    if (s === 3) {\n      if (!input.isEmpty()) {\n        c = input.head();\n        if (c === 34/*'\"'*/ ||\n            c === 47/*'/'*/ ||\n            c === 64/*'@'*/ ||\n            c === 91/*'['*/ ||\n            c === 92/*'\\\\'*/ ||\n            c === 93/*']'*/ ||\n            c === 123/*'{'*/ ||\n            c === 125/*'}'*/) {\n          input.step();\n          text.append(c);\n          s = 2;\n        }\n        else if (c === 98/*'b'*/) {\n          input.step();\n          text.append(8/*'\\b'*/);\n          s = 2;\n        }\n        else if (c === 102/*'f'*/) {\n          input.step();\n          text.append(12/*'\\f'*/);\n          s = 2;\n        }\n        else if (c === 110/*'n'*/) {\n          input.step();\n          text.append(10/*'\\n'*/);\n          s = 2;\n        }\n        else if (c === 114/*'r'*/) {\n          input.step();\n          text.append(13/*'\\r'*/);\n          s = 2;\n        }\n        else if (c === 116/*'t'*/) {\n          input.step();\n          text.append(9/*'\\t'*/);\n          s = 2;\n        }\n        else return new StringIteratee.Error({expected: 'escape character', found: c});\n      }\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n  }\n  return new StringParser(text, s);\n};\n\n\nfunction DataParser(data, s) {\n  StringIteratee.call(this);\n  this.data = data || null;\n  this.s = s || 1;\n}\nDataParser.prototype = Object.create(StringIteratee.prototype);\nDataParser.prototype.constructor = DataParser;\nDataParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var data = this.data || new DataBuilder();\n  if (s === 1) {\n    if (!input.isEmpty() && (c = input.head(), c === 37/*'%'*/)) {\n      input.step();\n      s = 2;\n    }\n    else if (!input.isEmpty()) return new StringIteratee.Error({expected: '\\'%\\'', found: c});\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  while (!input.isEmpty() || input.isDone()) {\n    if (s === 2) {\n      if (!input.isEmpty() && (c = input.head(), isBase64Char(c))) {\n        input.step();\n        data.appendBase64Char(c);\n        s = 3;\n      }\n      else if (!input.isEmpty() || input.isDone()) return new StringIteratee.Done(data.state());\n    }\n    if (s === 3) {\n      if (!input.isEmpty() && (c = input.head(), isBase64Char(c))) {\n        input.step();\n        data.appendBase64Char(c);\n        s = 4;\n      }\n      else if (!input.isEmpty()) return new StringIteratee.Error({expected: 'base64 digit', found: c});\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n    if (s === 4) {\n      if (!input.isEmpty() && (c = input.head(), isBase64Char(c) || c === 61/*'='*/)) {\n        input.step();\n        data.appendBase64Char(c);\n        if (c !== 61/*'='*/) s = 5;\n        else s = 6;\n      }\n      else if (!input.isEmpty()) return new StringIteratee.Error({expected: 'base64 digit', found: c});\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n    if (s === 5) {\n      if (!input.isEmpty() && (c = input.head(), isBase64Char(c) || c === 61/*'='*/)) {\n        input.step();\n        data.appendBase64Char(c);\n        if (c !== 61/*'='*/) s = 2;\n        else return new StringIteratee.Done(data.state());\n      }\n      else if (!input.isEmpty()) return new StringIteratee.Error({expected: 'base64 digit', found: c});\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n    else if (s === 6) {\n      if (!input.isEmpty() && (c = input.head(), c === 61/*'='*/)) {\n        input.step();\n        data.appendBase64Char(c);\n        return new StringIteratee.Done(data.state());\n      }\n      else if (!input.isEmpty()) return new StringIteratee.Error({expected: '\\'=\\'', found: c});\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n  }\n  return new DataParser(data, s);\n};\n\n\nfunction NumberParser(builder, s) {\n  StringIteratee.call(this);\n  this.builder = builder || null;\n  this.s = s || 1;\n}\nNumberParser.prototype = Object.create(StringIteratee.prototype);\nNumberParser.prototype.constructor = NumberParser;\nNumberParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var builder = this.builder || new StringBuilder();\n  if (s === 1) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c === 45/*'-'*/) {\n        input.step();\n        builder.append(c);\n      }\n      s = 2;\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  if (s === 2) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c === 48/*'0'*/) {\n        input.step();\n        builder.append(c);\n        s = 4;\n      }\n      else if (c >= 49/*'1'*/ && c <= 57/*'9'*/) {\n        input.step();\n        builder.append(c);\n        s = 3;\n      }\n      else return new StringIteratee.Error({expected: 'digit', found: c});\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  if (s === 3) {\n    while (!input.isEmpty() && (c = input.head(), c >= 48/*'0'*/ && c <= 57/*'9'*/)) {\n      input.step();\n      builder.append(c);\n    }\n    if (!input.isEmpty()) s = 4;\n    else if (input.isDone()) return new StringIteratee.Done(Number(builder.state()));\n  }\n  if (s === 4) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c === 46/*'.'*/) {\n        input.step();\n        builder.append(c);\n        s = 5;\n      }\n      else if (c === 69/*'E'*/ || c === 101/*'e'*/) {\n        input.step();\n        builder.append(c);\n        s = 8;\n      }\n      else return new StringIteratee.Done(Number(builder.state()));\n    }\n    else if (input.isDone()) return new StringIteratee.Done(Number(builder.state()));\n  }\n  if (s === 5) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c >= 48/*'0'*/ && c <= 57/*'9'*/) {\n        input.step();\n        builder.append(c);\n        s = 6;\n      }\n      else return new StringIteratee.Error({expected: 'digit', found: c});\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  if (s === 6) {\n    while (!input.isEmpty() && (c = input.head(), c >= 48/*'0'*/ && c <= 57/*'9'*/)) {\n      input.step();\n      builder.append(c);\n    }\n    if (!input.isEmpty()) s = 7;\n    else if (input.isDone()) return new StringIteratee.Done(Number(builder.state()));\n  }\n  if (s === 7) {\n    c = input.head();\n    if (c === 69/*'E'*/ || c === 101/*'e'*/) {\n      input.step();\n      builder.append(c);\n      s = 8;\n    }\n    else return new StringIteratee.Done(Number(builder.state()));\n  }\n  if (s === 8) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c === 43/*'+'*/ || c === 45/*'-'*/) {\n        input.step();\n        builder.append(c);\n      }\n      s = 9;\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  if (s === 9) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c >= 48/*'0'*/ && c <= 57/*'9'*/) {\n        input.step();\n        builder.append(c);\n        s = 10;\n      }\n      else return new StringIteratee.Error({expected: 'digit', found: c});\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  if (s === 10) {\n    while (!input.isEmpty() && (c = input.head(), c >= 48/*'0'*/ && c <= 57/*'9'*/)) {\n      input.step();\n      builder.append(c);\n    }\n    if (!input.isEmpty() || input.isDone()) return new StringIteratee.Done(Number(builder.state()));\n  }\n  return new NumberParser(builder, s);\n};\n\nfunction IdentParser(builder, s) {\n  StringIteratee.call(this);\n  this.builder = builder || null;\n  this.s = s || 1;\n}\nIdentParser.prototype = Object.create(StringIteratee.prototype);\nIdentParser.prototype.constructor = IdentParser;\nIdentParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var builder = this.builder;\n  if (s === 1) {\n    if (!input.isEmpty() && (c = input.head(), isNameStartChar(c))) {\n      builder = builder || new StringBuilder();\n      input.step();\n      builder.append(c);\n      s = 2;\n    }\n    else if (!input.isEmpty()) return new StringIteratee.Error({expected: 'identitifer', found: c});\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  if (s === 2) {\n    while (!input.isEmpty() && (c = input.head(), isNameChar(c))) {\n      input.step();\n      builder.append(c);\n    }\n    if (!input.isEmpty() || input.isDone()) {\n      var value = builder.state();\n      if (value === 'true') value = true;\n      else if (value === 'false') value = false;\n      return new StringIteratee.Done(value);\n    }\n  }\n  return new IdentParser(builder, s);\n};\n\n\nfunction ReconWriter(builder) {\n  Object.defineProperty(this, 'builder', {value: builder || new StringBuilder()});\n}\nReconWriter.prototype.writeValue = function (value, inMarkup) {\n  if (value instanceof Record) this.writeRecord(value, inMarkup);\n  else if (typeof value === 'string') this.writeText(value, inMarkup);\n  else if (typeof value === 'number') this.writeNumber(value);\n  else if (typeof value === 'boolean') this.writeBool(value);\n  else if (value instanceof Uint8Array) this.writeData(value);\n};\nReconWriter.prototype.writeAttr = function(attr) {\n  this.builder.append(64/*'@'*/);\n  this.writeIdent(attr.key);\n  if (!attr.value.isExtant) {\n    this.builder.append(40/*'('*/);\n    this.writeBlock(attr.value);\n    this.builder.append(41/*')'*/);\n  }\n};\nReconWriter.prototype.writeItem = function(item) {\n  if (item.isField) {\n    this.writeValue(item.key);\n    this.builder.append(58/*':'*/);\n    if (!item.value.isExtant) this.writeValue(item.value);\n  }\n  else this.writeValue(item);\n};\nReconWriter.prototype.writeBlock = function (value) {\n  if (!(value instanceof Record)) this.writeValue(value);\n  else if (value.isMarkup()) this.writeMarkup(value);\n  else if (value.hasAttrs()) this.writeRecord(value);\n  else {\n    var items = value.iterator();\n    if (!items.isEmpty()) {\n      this.writeItem(items.next());\n      while (!items.isEmpty()) {\n        this.builder.append(44/*','*/);\n        this.writeItem(items.next());\n      }\n    }\n  }\n};\nReconWriter.prototype.writeRecord = function (record, inMarkup) {\n  if (record.isMarkup()) this.writeMarkup(record);\n  else {\n    var items = record.iterator();\n    var item;\n    var hasAttrs = false;\n    while (!items.isEmpty() && (item = items.head(), item.isAttr)) {\n      this.writeAttr(item);\n      items.step();\n      hasAttrs = true;\n    }\n    if (!items.isEmpty()) {\n      items.step();\n      if (hasAttrs && items.isEmpty()) {\n        if (inMarkup) {\n          if (item instanceof Record || typeof item === 'string') this.writeValue(item, inMarkup);\n          else {\n            this.builder.append(123/*'{'*/);\n            this.writeItem(item);\n            this.builder.append(125/*'}'*/);\n          }\n        }\n        else if (item instanceof Record || item.isSlot) {\n          this.builder.append(123/*'{'*/);\n          this.writeItem(item);\n          this.builder.append(125/*'}'*/);\n        }\n        else {\n          this.builder.append(32/*' '*/);\n          this.writeValue(item);\n        }\n      }\n      else if (!items.isEmpty() && items.isAllAttrs()) {\n        if (item instanceof Record || item.isSlot) {\n          this.builder.append(123/*'{'*/);\n          this.writeItem(item);\n          this.builder.append(125/*'}'*/);\n        }\n        else {\n          if (hasAttrs) this.builder.append(32/*' '*/);\n          this.writeValue(item);\n        }\n      }\n      else {\n        this.builder.append(123/*'{'*/);\n        this.writeItem(item);\n        while (!items.isEmpty() && ((item = items.head(), !item.isAttr) || !items.isAllAttrs)) {\n          this.builder.append(44/*','*/);\n          this.writeItem(item);\n          items.step();\n        }\n        this.builder.append(125/*'}'*/);\n      }\n      while (!items.isEmpty()) this.writeAttr(items.next());\n    }\n    else if (!hasAttrs) {\n      this.builder.append(123/*'{'*/);\n      this.builder.append(125/*'}'*/);\n    }\n  }\n};\nReconWriter.prototype.writeMarkup = function (record) {\n  var items = record.iterator();\n  var item;\n  var hasAttrs = false;\n  while (!items.isEmpty() && (item = items.head(), item.isAttr)) {\n    this.writeAttr(item);\n    items.step();\n    hasAttrs = true;\n  }\n  this.builder.append(91/*'['*/);\n  while (!items.isEmpty()) {\n    item = items.head();\n    if (typeof item === 'string') {\n      var cs = new StringIterator(item);\n      while (!cs.isEmpty()) {\n        var c = cs.head();\n        switch (c) {\n          case 64/*'@'*/:\n          case 91/*'['*/:\n          case 92/*'\\\\'*/:\n          case 93/*']'*/:\n          case 123/*'{'*/:\n          case 125/*'}'*/: this.builder.append(92/*'\\\\'*/); this.builder.append(c); break;\n          default: this.builder.append(c);\n        }\n        cs.step();\n      }\n    }\n    else if (item instanceof Record) this.writeRecord(item, true);\n    else {\n      this.builder.append(123/*'{'*/);\n      this.writeItem(item);\n      this.builder.append(125/*'}'*/);\n    }\n    items.step();\n  }\n  this.builder.append(93/*']'*/);\n};\nReconWriter.prototype.writeText = function (text, inMarkup) {\n  function isIdent() {\n    var cs = new StringIterator(text);\n    if (cs.isEmpty() || !isNameStartChar(cs.head())) return false;\n    cs.step();\n    while (!cs.isEmpty() && isNameChar(cs.head())) cs.step();\n    return cs.isEmpty();\n  }\n  if (inMarkup) this.writeTextMarkup(text);\n  else if (isIdent()) this.writeIdent(text);\n  else this.writeString(text);\n};\nReconWriter.prototype.writeString = function (string) {\n  var cs = new StringIterator(string);\n  this.builder.append(34/*'\"'*/);\n  while (!cs.isEmpty()) {\n    var c = cs.head();\n    switch (c) {\n      case 34/*'\"'*/:\n      case 92/*'\\\\'*/: this.builder.append(92/*'\\\\'*/); this.builder.append(c); break;\n      case 8/*'\\b'*/: this.builder.append(92/*'\\\\'*/); this.builder.append(98/*'b'*/); break;\n      case 12/*'\\f'*/: this.builder.append(92/*'\\\\'*/); this.builder.append(102/*'f'*/); break;\n      case 10/*'\\n'*/: this.builder.append(92/*'\\\\'*/); this.builder.append(110/*'n'*/); break;\n      case 13/*'\\r'*/: this.builder.append(92/*'\\\\'*/); this.builder.append(114/*'r'*/); break;\n      case 9/*'\\t'*/: this.builder.append(92/*'\\\\'*/); this.builder.append(116/*'t'*/); break;\n      default: this.builder.append(c);\n    }\n    cs.step();\n  }\n  this.builder.append(34/*'\"'*/);\n};\nReconWriter.prototype.writeIdent = function (ident) {\n  this.builder.appendString(ident);\n};\nReconWriter.prototype.writeTextMarkup = function (text) {\n  var cs = new StringIterator(text);\n  this.builder.append(91/*'['*/);\n  while (!cs.isEmpty()) {\n    var c = cs.head();\n    switch (c) {\n      case 64/*'@'*/:\n      case 91/*'['*/:\n      case 92/*'\\\\'*/:\n      case 93/*']'*/:\n      case 123/*'{'*/:\n      case 125/*'}'*/: this.builder.append(92/*'\\\\'*/); this.builder.append(c); break;\n      default: this.builder.append(c);\n    }\n    cs.step();\n  }\n  this.builder.append(93/*']'*/);\n};\nReconWriter.prototype.writeNumber = function (number) {\n  this.builder.appendString(number.toString());\n};\nReconWriter.prototype.writeBool = function (bool) {\n  this.builder.appendString(bool.toString());\n};\nReconWriter.prototype.writeData = function (data) {\n  function encodeBase64Digit(x) {\n    if      (x >=  0 && x < 26) return x + 65/*'A'*/;\n    else if (x >= 26 && x < 52) return x + 71/*('a' - 26)*/;\n    else if (x >= 52 && x < 62) return x - 4/*-('0' - 52)*/;\n    else if (x === 62) return 43/*'+'*/;\n    else if (x === 63) return 47/*'/'*/;\n  }\n  this.builder.append(37/*'%'*/);\n  var i = 0;\n  var n = data.length;\n  var x, y, z;\n  while (i + 2 < n) {\n    x = data[i];\n    y = data[i + 1];\n    z = data[i + 2];\n    this.builder.append(encodeBase64Digit(x >>> 2));\n    this.builder.append(encodeBase64Digit(((x << 4) | (y >>> 4)) & 0x3F));\n    this.builder.append(encodeBase64Digit(((y << 2) | (z >>> 6)) & 0x3F));\n    this.builder.append(encodeBase64Digit(z & 0x3F));\n    i += 3;\n  }\n  if (i + 1 < n) {\n    x = data[i];\n    y = data[i + 1];\n    this.builder.append(encodeBase64Digit(x >>> 2));\n    this.builder.append(encodeBase64Digit(((x << 4) | (y >>> 4)) & 0x3F));\n    this.builder.append(encodeBase64Digit((y << 2) & 0x3F));\n    this.builder.append(61/*'='*/);\n    i += 2;\n  }\n  else if (i < n) {\n    x = data[i];\n    this.builder.append(encodeBase64Digit(x >>> 2));\n    this.builder.append(encodeBase64Digit((x << 4) & 0x3F));\n    this.builder.append(61/*'='*/);\n    this.builder.append(61/*'='*/);\n    i += 1;\n  }\n};\nReconWriter.prototype.state = function () {\n  return this.builder.state();\n};\n\n\nmodule.exports = function () {\n  return coerce.apply(null, arguments);\n};\nexports = module.exports;\nexports.parse = parse;\nexports.stringify = stringify;\nexports.objectify = objectify;\nexports.Record = Record;\nexports.Field = Field;\nexports.Attr = Attr;\nexports.Slot = Slot;\nexports.attr = attr;\nexports.slot = slot;\nexports.base64 = base64;\nexports.extant = Extant;\nexports.absent = Absent;\nexports.empty = empty;\nexports.builder = builder;\nexports.compare = compare;\n\n},{}],3:[function(require,module,exports){\n'use strict';\n\nvar recon = require('recon-js');\n\nfunction decode(record) {\n  if (record instanceof recon.Record) {\n    var heading = record.head();\n    if (heading.isField) switch (heading.key) {\n      case 'event': return EventMessage.decode(record);\n      case 'command': return CommandMessage.decode(record);\n      case 'send': return SendMessage.decode(record);\n      case 'get': return GetRequest.decode(record);\n      case 'put': return PutRequest.decode(record);\n      case 'state': return StateResponse.decode(record);\n      case 'link': return LinkRequest.decode(record);\n      case 'linked': return LinkedResponse.decode(record);\n      case 'unlink': return UnlinkRequest.decode(record);\n      case 'unlinked': return UnlinkedResponse.decode(record);\n    }\n  }\n}\n\nfunction encode(envelope) {\n  return envelope.encode();\n}\n\nfunction parse(string) {\n  return decode(recon.parse(string));\n}\n\nfunction stringify(envelope) {\n  return recon.stringify(encode(envelope));\n}\n\n\nfunction Envelope() {}\nObject.defineProperty(Envelope.prototype, 'isRequest', {value: false});\nObject.defineProperty(Envelope.prototype, 'isResponse', {value: false});\nObject.defineProperty(Envelope.prototype, 'isMessage', {value: false});\nObject.defineProperty(Envelope.prototype, 'isEventMessage', {value: false});\nObject.defineProperty(Envelope.prototype, 'isCommandMessage', {value: false});\nObject.defineProperty(Envelope.prototype, 'isSendMessage', {value: false});\nObject.defineProperty(Envelope.prototype, 'isSendEventMessage', {value: false});\nObject.defineProperty(Envelope.prototype, 'isSendCommandMessage', {value: false});\nObject.defineProperty(Envelope.prototype, 'isGetRequest', {value: false});\nObject.defineProperty(Envelope.prototype, 'isPutRequest', {value: false});\nObject.defineProperty(Envelope.prototype, 'isStateResponse', {value: false});\nObject.defineProperty(Envelope.prototype, 'isLinkRequest', {value: false});\nObject.defineProperty(Envelope.prototype, 'isLinkedResponse', {value: false});\nObject.defineProperty(Envelope.prototype, 'isUnlinkRequest', {value: false});\nObject.defineProperty(Envelope.prototype, 'isUnlinkedResponse', {value: false});\n\n\nfunction RequestEnvelope() {\n  Envelope.call(this);\n}\nRequestEnvelope.prototype = Object.create(Envelope.prototype);\nRequestEnvelope.prototype.constructor = RequestEnvelope;\nObject.defineProperty(RequestEnvelope.prototype, 'isRequest', {value: true});\n\n\nfunction ResponseEnvelope() {\n  Envelope.call(this);\n}\nResponseEnvelope.prototype = Object.create(Envelope.prototype);\nResponseEnvelope.prototype.constructor = ResponseEnvelope;\nObject.defineProperty(RequestEnvelope.prototype, 'isResponse', {value: true});\n\n\nfunction MessageEnvelope() {\n  Envelope.call(this);\n}\nMessageEnvelope.prototype = Object.create(Envelope.prototype);\nMessageEnvelope.prototype.constructor = MessageEnvelope;\nObject.defineProperty(RequestEnvelope.prototype, 'isMessage', {value: true});\n\n\nfunction EventMessage(node, lane, via, body) {\n  MessageEnvelope.call(this);\n  Object.defineProperty(this, 'node', {enumerable: true, value: node});\n  Object.defineProperty(this, 'lane', {enumerable: true, value: lane});\n  Object.defineProperty(this, 'via', {enumerable: true, value: via || recon.absent});\n  Object.defineProperty(this, 'body', {enumerable: true, value: body || recon.empty()});\n}\nEventMessage.prototype = Object.create(MessageEnvelope.prototype);\nEventMessage.prototype.constructor = EventMessage;\nObject.defineProperty(EventMessage.prototype, 'isEventMessage', {value: true});\nEventMessage.prototype.encode = function () {\n  var builder = recon.builder();\n  var heading = recon.builder();\n  heading.slot('node', this.node);\n  heading.slot('lane', this.lane);\n  if (!this.via.isAbsent) heading.slot('via', this.via);\n  builder.attr('event', heading.state());\n  builder.appendRecord(this.body);\n  return builder.state();\n};\nEventMessage.decode = function (record) {\n  var node = '';\n  var lane = '';\n  var via = recon.absent;\n  var body = record.tail();\n  var heading = record.head();\n  if (heading.value instanceof recon.Record) {\n    var headers = heading.value.iterator();\n    var i = 0;\n    while (!headers.isEmpty()) {\n      var header = headers.next();\n      if (header.isField) switch (header.key) {\n        case 'node': node = header.value; break;\n        case 'lane': lane = header.value; break;\n        case 'via': via = header.value; break;\n      }\n      else switch (i) {\n        case 0: node = header; break;\n        case 1: lane = header; break;\n        case 2: via = header; break;\n      }\n      i += 1;\n    }\n  }\n  return new EventMessage(node, lane, via, body);\n};\n\n\nfunction CommandMessage(node, lane, via, body) {\n  MessageEnvelope.call(this);\n  Object.defineProperty(this, 'node', {enumerable: true, value: node});\n  Object.defineProperty(this, 'lane', {enumerable: true, value: lane});\n  Object.defineProperty(this, 'via', {enumerable: true, value: via || recon.absent});\n  Object.defineProperty(this, 'body', {enumerable: true, value: body || recon.empty()});\n}\nCommandMessage.prototype = Object.create(MessageEnvelope.prototype);\nCommandMessage.prototype.constructor = CommandMessage;\nObject.defineProperty(CommandMessage.prototype, 'isCommandMessage', {value: true});\nCommandMessage.prototype.encode = function () {\n  var builder = recon.builder();\n  var heading = recon.builder();\n  heading.slot('node', this.node);\n  heading.slot('lane', this.lane);\n  if (!this.via.isAbsent) heading.slot('via', this.via);\n  builder.attr('command', heading.state());\n  builder.appendRecord(this.body);\n  return builder.state();\n};\nCommandMessage.decode = function (record) {\n  var node = '';\n  var lane = '';\n  var via = recon.absent;\n  var body = record.tail();\n  var heading = record.head();\n  if (heading.value instanceof recon.Record) {\n    var headers = heading.value.iterator();\n    var i = 0;\n    while (!headers.isEmpty()) {\n      var header = headers.next();\n      if (header.isField) switch (header.key) {\n        case 'node': node = header.value; break;\n        case 'lane': lane = header.value; break;\n        case 'via': via = header.value; break;\n      }\n      else switch (i) {\n        case 0: node = header; break;\n        case 1: lane = header; break;\n        case 2: via = header; break;\n      }\n      i += 1;\n    }\n  }\n  return new CommandMessage(node, lane, via, body);\n};\n\n\nfunction SendMessage() {\n  MessageEnvelope.call(this);\n}\nSendMessage.prototype = Object.create(MessageEnvelope.prototype);\nSendMessage.prototype.constructor = SendMessage;\nObject.defineProperty(SendMessage.prototype, 'isSendMessage', {value: true});\nSendMessage.decode = function (record) {\n  var heading = record(1);\n  switch (heading.key) {\n    case 'event': return SendEventMessage.decode(record);\n    case 'command': return SendCommandMessage.decode(record);\n  }\n};\n\n\nfunction SendEventMessage(node, lane, body) {\n  SendMessage.call(this);\n  Object.defineProperty(this, 'node', {enumerable: true, value: node});\n  Object.defineProperty(this, 'lane', {enumerable: true, value: lane});\n  Object.defineProperty(this, 'body', {enumerable: true, value: body || recon.empty()});\n}\nSendEventMessage.prototype = Object.create(SendMessage.prototype);\nSendEventMessage.prototype.constructor = SendEventMessage;\nObject.defineProperty(SendEventMessage.prototype, 'isSendEventMessage', {value: true});\nSendEventMessage.prototype.encode = function () {\n  var builder = recon.builder();\n  builder.attr('send');\n  builder.attr('event', recon(\n    recon.slot('node', this.node),\n    recon.slot('lane', this.lane)));\n  builder.appendRecord(this.body);\n  return builder.state();\n};\nSendEventMessage.decode = function (record) {\n  var node = '';\n  var lane = '';\n  var items = record.iterator();\n  items.step(); // @send\n  var heading = items.next();\n  if (heading.value instanceof recon.Record) {\n    var headers = heading.value.iterator();\n    var i = 0;\n    while (!headers.isEmpty()) {\n      var header = headers.next();\n      if (header.isField) switch (header.key) {\n        case 'node': node = header.value; break;\n        case 'lane': lane = header.value; break;\n      }\n      else switch (i) {\n        case 0: node = header; break;\n        case 1: lane = header; break;\n      }\n      i += 1;\n    }\n  }\n  var body = items.toRecord();\n  return new SendEventMessage(node, lane, body);\n};\n\n\nfunction SendCommandMessage(node, lane, body) {\n  SendMessage.call(this);\n  Object.defineProperty(this, 'node', {enumerable: true, value: node});\n  Object.defineProperty(this, 'lane', {enumerable: true, value: lane});\n  Object.defineProperty(this, 'body', {enumerable: true, value: body || recon.empty()});\n}\nSendCommandMessage.prototype = Object.create(SendMessage.prototype);\nSendCommandMessage.prototype.constructor = SendCommandMessage;\nObject.defineProperty(SendCommandMessage.prototype, 'isSendCommandMessage', {value: true});\nSendCommandMessage.prototype.encode = function () {\n  var builder = recon.builder();\n  builder.attr('send');\n  builder.attr('command', recon(\n    recon.slot('node', this.node),\n    recon.slot('lane', this.lane)));\n  builder.appendRecord(this.body);\n  return builder.state();\n};\nSendCommandMessage.decode = function (record) {\n  var node = '';\n  var lane = '';\n  var items = record.iterator();\n  items.step(); // @send\n  var heading = items.next();\n  if (heading.value instanceof recon.Record) {\n    var headers = heading.value.iterator();\n    var i = 0;\n    while (!headers.isEmpty()) {\n      var header = headers.next();\n      if (header.isField) switch (header.key) {\n        case 'node': node = header.value; break;\n        case 'lane': lane = header.value; break;\n      }\n      else switch (i) {\n        case 0: node = header; break;\n        case 1: lane = header; break;\n      }\n      i += 1;\n    }\n  }\n  var body = items.toRecord();\n  return new SendCommandMessage(node, lane, body);\n};\n\n\nfunction GetRequest(node) {\n  RequestEnvelope.call(this);\n  Object.defineProperty(this, 'node', {enumerable: true, value: node});\n}\nGetRequest.prototype = Object.create(RequestEnvelope.prototype);\nGetRequest.prototype.constructor = GetRequest;\nObject.defineProperty(GetRequest.prototype, 'isGetRequest', {value: true});\nGetRequest.prototype.encode = function () {\n  return recon(\n    recon.attr('get', recon(\n      recon.slot('node', this.node))));\n};\nGetRequest.decode = function (record) {\n  var node = '';\n  var heading = record.head();\n  if (heading.value instanceof recon.Record) {\n    var headers = heading.value.iterator();\n    var i = 0;\n    while (!headers.isEmpty()) {\n      var header = headers.next();\n      if (header.isField) switch (header.key) {\n        case 'node': node = header.value; break;\n      }\n      else switch (i) {\n        case 0: node = header; break;\n      }\n      i += 1;\n    }\n  }\n  else if (!heading.value.isExtant) node = heading.value;\n  return new GetRequest(node);\n};\n\n\nfunction PutRequest(node, body) {\n  RequestEnvelope.call(this);\n  Object.defineProperty(this, 'node', {enumerable: true, value: node});\n  Object.defineProperty(this, 'body', {enumerable: true, value: body || recon.empty()});\n}\nPutRequest.prototype = Object.create(RequestEnvelope.prototype);\nPutRequest.prototype.constructor = PutRequest;\nObject.defineProperty(PutRequest.prototype, 'isPutRequest', {value: true});\nPutRequest.prototype.encode = function () {\n  var builder = recon.builder();\n  builder.attr('put', recon(\n    recon.slot('node', this.node)));\n  builder.appendRecord(this.body);\n  return builder.state();\n};\nPutRequest.decode = function (record) {\n  var node = '';\n  var body = record.tail();\n  var heading = record.head();\n  if (heading.value instanceof recon.Record) {\n    var headers = heading.value.iterator();\n    var i = 0;\n    while (!headers.isEmpty()) {\n      var header = headers.next();\n      if (header.isField) switch (header.key) {\n        case 'node': node = header.value; break;\n      }\n      else switch (i) {\n        case 0: node = header; break;\n      }\n      i += 1;\n    }\n  }\n  else if (!heading.value.isExtant) node = heading.value;\n  return new PutRequest(node, body);\n};\n\n\nfunction StateResponse(node, body) {\n  ResponseEnvelope.call(this);\n  Object.defineProperty(this, 'node', {enumerable: true, value: node});\n  Object.defineProperty(this, 'body', {enumerable: true, value: body || recon.empty()});\n}\nStateResponse.prototype = Object.create(ResponseEnvelope.prototype);\nStateResponse.prototype.constructor = StateResponse;\nObject.defineProperty(StateResponse.prototype, 'isStateResponse', {value: true});\nStateResponse.prototype.encode = function () {\n  var builder = recon.builder();\n  builder.attr('state', recon(\n    recon.slot('node', this.node)));\n  builder.appendRecord(this.body);\n  return builder.state();\n};\nStateResponse.decode = function (record) {\n  var node = '';\n  var body = record.tail();\n  var heading = record.head();\n  if (heading.value instanceof recon.Record) {\n    var headers = heading.value.iterator();\n    var i = 0;\n    while (!headers.isEmpty()) {\n      var header = headers.next();\n      if (header.isField) switch (header.key) {\n        case 'node': node = header.value; break;\n      }\n      else switch (i) {\n        case 0: node = header; break;\n      }\n      i += 1;\n    }\n  }\n  else if (!heading.value.isExtant) node = heading.value;\n  return new StateResponse(node, body);\n};\n\n\nfunction LinkRequest(node, lane) {\n  RequestEnvelope.call(this);\n  Object.defineProperty(this, 'node', {enumerable: true, value: node});\n  Object.defineProperty(this, 'lane', {enumerable: true, value: lane});\n}\nLinkRequest.prototype = Object.create(RequestEnvelope.prototype);\nLinkRequest.prototype.constructor = LinkRequest;\nObject.defineProperty(LinkRequest.prototype, 'isLinkRequest', {value: true});\nLinkRequest.prototype.encode = function () {\n  return recon(\n    recon.attr('link', recon(\n      recon.slot('node', this.node),\n      recon.slot('lane', this.lane))));\n};\nLinkRequest.decode = function (record) {\n  var node = '';\n  var lane = '';\n  var heading = record.head();\n  if (heading.value instanceof recon.Record) {\n    var headers = heading.value.iterator();\n    var i = 0;\n    while (!headers.isEmpty()) {\n      var header = headers.next();\n      if (header.isField) switch (header.key) {\n        case 'node': node = header.value; break;\n        case 'lane': lane = header.value; break;\n      }\n      else switch (i) {\n        case 0: node = header; break;\n        case 1: lane = header; break;\n      }\n      i += 1;\n    }\n  }\n  return new LinkRequest(node, lane);\n};\n\n\nfunction LinkedResponse(node, lane) {\n  ResponseEnvelope.call(this);\n  Object.defineProperty(this, 'node', {enumerable: true, value: node});\n  Object.defineProperty(this, 'lane', {enumerable: true, value: lane});\n}\nLinkedResponse.prototype = Object.create(ResponseEnvelope.prototype);\nLinkedResponse.prototype.constructor = LinkedResponse;\nObject.defineProperty(LinkedResponse.prototype, 'isLinkedResponse', {value: true});\nLinkedResponse.prototype.encode = function () {\n  return recon(\n    recon.attr('linked', recon(\n      recon.slot('node', this.node),\n      recon.slot('lane', this.lane))));\n};\nLinkedResponse.decode = function (record) {\n  var node = '';\n  var lane = '';\n  var heading = record.head();\n  if (heading.value instanceof recon.Record) {\n    var headers = heading.value.iterator();\n    var i = 0;\n    while (!headers.isEmpty()) {\n      var header = headers.next();\n      if (header.isField) switch (header.key) {\n        case 'node': node = header.value; break;\n        case 'lane': lane = header.value; break;\n      }\n      else switch (i) {\n        case 0: node = header; break;\n        case 1: lane = header; break;\n      }\n      i += 1;\n    }\n  }\n  return new LinkedResponse(node, lane);\n};\n\n\nfunction UnlinkRequest(node, lane) {\n  RequestEnvelope.call(this);\n  Object.defineProperty(this, 'node', {enumerable: true, value: node});\n  Object.defineProperty(this, 'lane', {enumerable: true, value: lane});\n}\nUnlinkRequest.prototype = Object.create(RequestEnvelope.prototype);\nUnlinkRequest.prototype.constructor = UnlinkRequest;\nObject.defineProperty(UnlinkRequest.prototype, 'isUnlinkRequest', {value: true});\nUnlinkRequest.prototype.encode = function () {\n  return recon(\n    recon.attr('unlink', recon(\n      recon.slot('node', this.node),\n      recon.slot('lane', this.lane))));\n};\nUnlinkRequest.decode = function (record) {\n  var node = '';\n  var lane = '';\n  var heading = record.head();\n  if (heading.value instanceof recon.Record) {\n    var headers = heading.value.iterator();\n    var i = 0;\n    while (!headers.isEmpty()) {\n      var header = headers.next();\n      if (header.isField) switch (header.key) {\n        case 'node': node = header.value; break;\n        case 'lane': lane = header.value; break;\n      }\n      else switch (i) {\n        case 0: node = header; break;\n        case 1: lane = header; break;\n      }\n      i += 1;\n    }\n  }\n  return new UnlinkRequest(node, lane);\n};\n\n\nfunction UnlinkedResponse(node, lane) {\n  ResponseEnvelope.call(this);\n  Object.defineProperty(this, 'node', {enumerable: true, value: node});\n  Object.defineProperty(this, 'lane', {enumerable: true, value: lane});\n}\nUnlinkedResponse.prototype = Object.create(ResponseEnvelope.prototype);\nUnlinkedResponse.prototype.constructor = UnlinkedResponse;\nObject.defineProperty(UnlinkedResponse.prototype, 'isUnlinkedResponse', {value: true});\nUnlinkedResponse.prototype.encode = function () {\n  return recon(\n    recon.attr('unlinked', recon(\n      recon.slot('node', this.node),\n      recon.slot('lane', this.lane))));\n};\nUnlinkedResponse.decode = function (record) {\n  var node = '';\n  var lane = '';\n  var heading = record.head();\n  if (heading.value instanceof recon.Record) {\n    var headers = heading.value.iterator();\n    var i = 0;\n    while (!headers.isEmpty()) {\n      var header = headers.next();\n      if (header.isField) switch (header.key) {\n        case 'node': node = header.value; break;\n        case 'lane': lane = header.value; break;\n      }\n      else switch (i) {\n        case 0: node = header; break;\n        case 1: lane = header; break;\n      }\n      i += 1;\n    }\n  }\n  return new UnlinkedResponse(node, lane);\n};\n\n\nexports.decode = decode;\nexports.encode = encode;\nexports.parse = parse;\nexports.stringify = stringify;\nexports.Envelope = Envelope;\nexports.RequestEnvelope = RequestEnvelope;\nexports.ResponseEnvelope = ResponseEnvelope;\nexports.MessageEnvelope = MessageEnvelope;\nexports.EventMessage = EventMessage;\nexports.CommandMessage = CommandMessage;\nexports.SendMessage = SendMessage;\nexports.SendEventMessage = SendEventMessage;\nexports.SendCommandMessage = SendCommandMessage;\nexports.GetRequest = GetRequest;\nexports.PutRequest = PutRequest;\nexports.StateResponse = StateResponse;\nexports.LinkRequest = LinkRequest;\nexports.LinkedResponse = LinkedResponse;\nexports.UnlinkRequest = UnlinkRequest;\nexports.UnlinkedResponse = UnlinkedResponse;\n\n},{\"recon-js\":2}],4:[function(require,module,exports){\nrequire(\"./schemes/http\");\r\nrequire(\"./schemes/urn\");\n},{\"./schemes/http\":5,\"./schemes/urn\":6}],5:[function(require,module,exports){\n(function () {\r\n\tvar URI = require(\"../uri\").URI;\r\n\t\r\n\t//RFC 2616\r\n\tURI.SCHEMES[\"http\"] = {\r\n\t\tserialize : function (components, options) {\r\n\t\t\t//normalize the default port\r\n\t\t\tif (components.port === 80 || components.port === \"\") {\r\n\t\t\t\tcomponents.port = undefined;\r\n\t\t\t}\r\n\t\t\t//normalize the empty path\r\n\t\t\tif (!components.path) {\r\n\t\t\t\tcomponents.path = \"/\";\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//NOTE: We do not parse query strings for HTTP URIs\r\n\t\t\t//as WWW Form Url Encoded query strings are part of the HTML4+ spec,\r\n\t\t\t//and not the HTTP spec. \r\n\t\t\t\r\n\t\t\treturn components;\r\n\t\t}\r\n\t};\r\n}());\n},{\"../uri\":7}],6:[function(require,module,exports){\n(function () {\r\n\tvar URI_NS = require(\"../uri\"),\r\n\t\tURI = URI_NS.URI,\r\n\t\tpctEncChar = URI_NS.pctEncChar,\r\n\t\tNID$ = \"(?:[0-9A-Za-z][0-9A-Za-z\\\\-]{1,31})\",\r\n\t\tPCT_ENCODED$ = \"(?:\\\\%[0-9A-Fa-f]{2})\",\r\n\t\tTRANS$$ = \"[0-9A-Za-z\\\\(\\\\)\\\\+\\\\,\\\\-\\\\.\\\\:\\\\=\\\\@\\\\;\\\\$\\\\_\\\\!\\\\*\\\\'\\\\/\\\\?\\\\#]\",\r\n\t\tNSS$ = \"(?:(?:\" + PCT_ENCODED$ + \"|\" + TRANS$$ + \")+)\",\r\n\t\tURN_SCHEME = new RegExp(\"^urn\\\\:(\" + NID$ + \")$\"),\r\n\t\tURN_PATH = new RegExp(\"^(\" + NID$ + \")\\\\:(\" + NSS$ + \")$\"),\r\n\t\tURN_PARSE = /^([^\\:]+)\\:(.*)/,\r\n\t\tURN_EXCLUDED = /[\\x00-\\x20\\\\\\\"\\&\\<\\>\\[\\]\\^\\`\\{\\|\\}\\~\\x7F-\\xFF]/g,\r\n\t\tUUID = /^[0-9A-Fa-f]{8}(?:\\-[0-9A-Fa-f]{4}){3}\\-[0-9A-Fa-f]{12}$/;\r\n\t\r\n\t//RFC 2141\r\n\tURI.SCHEMES[\"urn\"] = {\r\n\t\tparse : function (components, options) {\r\n\t\t\tvar matches = components.path.match(URN_PATH),\r\n\t\t\t\tscheme, schemeHandler;\r\n\t\t\t\r\n\t\t\tif (!matches) {\r\n\t\t\t\tif (!options.tolerant) {\r\n\t\t\t\t\tcomponents.errors.push(\"URN is not strictly valid.\");\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tmatches = components.path.match(URN_PARSE);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (matches) {\r\n\t\t\t\tscheme = \"urn:\" + matches[1].toLowerCase();\r\n\t\t\t\tschemeHandler = URI.SCHEMES[scheme];\r\n\t\t\t\t\r\n\t\t\t\t//in order to serialize properly, \r\n\t\t\t\t//every URN must have a serializer that calls the URN serializer \r\n\t\t\t\tif (!schemeHandler) {\r\n\t\t\t\t\tschemeHandler = URI.SCHEMES[scheme] = {};\r\n\t\t\t\t}\r\n\t\t\t\tif (!schemeHandler.serialize) {\r\n\t\t\t\t\tschemeHandler.serialize = URI.SCHEMES[\"urn\"].serialize;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tcomponents.scheme = scheme;\r\n\t\t\t\tcomponents.path = matches[2];\r\n\t\t\t\t\r\n\t\t\t\tif (schemeHandler.parse) {\r\n\t\t\t\t\tschemeHandler.parse(components, options);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tcomponents.errors.push(\"URN can not be parsed.\");\r\n\t\t\t}\r\n\t\r\n\t\t\treturn components;\r\n\t\t},\r\n\t\t\r\n\t\tserialize : function (components, options) {\r\n\t\t\tvar scheme = components.scheme || options.scheme,\r\n\t\t\t\tmatches;\r\n\t\t\t\r\n\t\t\tif (scheme && scheme !== \"urn\") {\r\n\t\t\t\tvar matches = scheme.match(URN_SCHEME);\r\n\t\t\t\t\r\n\t\t\t\tif (!matches) {\r\n\t\t\t\t\tmatches = [\"urn:\" + scheme, scheme];\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tcomponents.scheme = \"urn\";\r\n\t\t\t\tcomponents.path = matches[1] + \":\" + (components.path ? components.path.replace(URN_EXCLUDED, pctEncChar) : \"\");\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn components;\r\n\t\t}\r\n\t};\r\n\t\r\n\t//RFC 4122\r\n\tURI.SCHEMES[\"urn:uuid\"] = {\r\n\t\tparse : function (components, options) {\r\n\t\t\tif (!options.tolerant && (!components.path || !components.path.match(UUID))) {\r\n\t\t\t\tcomponents.errors.push(\"UUID is not valid.\");\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tserialize : function (components, options) {\r\n\t\t\t//ensure UUID is valid\r\n\t\t\tif (!options.tolerant && (!components.path || !components.path.match(UUID))) {\r\n\t\t\t\t//invalid UUIDs can not have this scheme\r\n\t\t\t\tcomponents.scheme = undefined;\r\n\t\t\t} else {\r\n\t\t\t\t//normalize UUID\r\n\t\t\t\tcomponents.path = (components.path || \"\").toLowerCase();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn URI.SCHEMES[\"urn\"].serialize(components, options);\r\n\t\t}\r\n\t};\r\n}());\n},{\"../uri\":7}],7:[function(require,module,exports){\n/**\r\n * URI.js\r\n * \r\n * @fileoverview An RFC 3986 compliant, scheme extendable URI parsing/validating/resolving library for JavaScript.\r\n * @author <a href=\"mailto:gary.court@gmail.com\">Gary Court</a>\r\n * @version 1.4.2\r\n * @see http://github.com/garycourt/uri-js\r\n * @license URI.js v1.4.2 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js\r\n */\r\n\r\n/**\r\n * Copyright 2011 Gary Court. All rights reserved.\r\n * \r\n * Redistribution and use in source and binary forms, with or without modification, are\r\n * permitted provided that the following conditions are met:\r\n * \r\n *    1. Redistributions of source code must retain the above copyright notice, this list of\r\n *       conditions and the following disclaimer.\r\n * \r\n *    2. Redistributions in binary form must reproduce the above copyright notice, this list\r\n *       of conditions and the following disclaimer in the documentation and/or other materials\r\n *       provided with the distribution.\r\n * \r\n * THIS SOFTWARE IS PROVIDED BY GARY COURT ``AS IS'' AND ANY EXPRESS OR IMPLIED\r\n * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\r\n * FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL GARY COURT OR\r\n * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\r\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\r\n * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\r\n * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\r\n * ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n * \r\n * The views and conclusions contained in the software and documentation are those of the\r\n * authors and should not be interpreted as representing official policies, either expressed\r\n * or implied, of Gary Court.\r\n */\r\n\r\n/*jslint white: true, sub: true, undef: true, newcap: true, plusplus: true, bitwise: true, regexp: true, nomen: true, indent: 4 */\r\n/*global exports:true, require:true, URI:true */\r\n\r\nif (typeof exports === \"undefined\") {\r\n\texports = {}; \r\n}\r\nif (typeof require !== \"function\") {\r\n\trequire = function (id) {\r\n\t\t\"use strict\";\r\n\t\treturn exports;\r\n\t};\r\n}\r\nURI = (function () {\r\n\t\"use strict\";\r\n\t\r\n\tvar\t\r\n\t\t/**\r\n\t\t * @param {...string} sets\r\n\t\t * @return {string}\r\n\t\t */\r\n\t\tmergeSet = function (sets) {\r\n\t\t\tvar set = sets,\r\n\t\t\t\tx = 1,\r\n\t\t\t\tnextSet = arguments[x];\r\n\t\t\t\r\n\t\t\twhile (nextSet) {\r\n\t\t\t\tset = set.slice(0, -1) + nextSet.slice(1);\r\n\t\t\t\tnextSet = arguments[++x];\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn set;\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * @param {string} str\r\n\t\t * @return {string}\r\n\t\t */\r\n\t\tsubexp = function (str) {\r\n\t\t\treturn \"(?:\" + str + \")\";\r\n\t\t},\r\n\t\r\n\t\tALPHA$$ = \"[A-Za-z]\",\r\n\t\tCR$ = \"[\\\\x0D]\",\r\n\t\tDIGIT$$ = \"[0-9]\",\r\n\t\tDQUOTE$$ = \"[\\\\x22]\",\r\n\t\tHEXDIG$$ = mergeSet(DIGIT$$, \"[A-Fa-f]\"),  //case-insensitive\r\n\t\tLF$$ = \"[\\\\x0A]\",\r\n\t\tSP$$ = \"[\\\\x20]\",\r\n\t\tPCT_ENCODED$ = subexp(\"%\" + HEXDIG$$ + HEXDIG$$),\r\n\t\tGEN_DELIMS$$ = \"[\\\\:\\\\/\\\\?\\\\#\\\\[\\\\]\\\\@]\",\r\n\t\tSUB_DELIMS$$ = \"[\\\\!\\\\$\\\\&\\\\'\\\\(\\\\)\\\\*\\\\+\\\\,\\\\;\\\\=]\",\r\n\t\tRESERVED$$ = mergeSet(GEN_DELIMS$$, SUB_DELIMS$$),\r\n\t\tUNRESERVED$$ = mergeSet(ALPHA$$, DIGIT$$, \"[\\\\-\\\\.\\\\_\\\\~]\"),\r\n\t\tSCHEME$ = subexp(ALPHA$$ + mergeSet(ALPHA$$, DIGIT$$, \"[\\\\+\\\\-\\\\.]\") + \"*\"),\r\n\t\tUSERINFO$ = subexp(subexp(PCT_ENCODED$ + \"|\" + mergeSet(UNRESERVED$$, SUB_DELIMS$$, \"[\\\\:]\")) + \"*\"),\r\n\t\tDEC_OCTET$ = subexp(subexp(\"25[0-5]\") + \"|\" + subexp(\"2[0-4]\" + DIGIT$$) + \"|\" + subexp(\"1\" + DIGIT$$ + DIGIT$$) + \"|\" + subexp(\"[1-9]\" + DIGIT$$) + \"|\" + DIGIT$$),\r\n\t\tIPV4ADDRESS$ = subexp(DEC_OCTET$ + \"\\\\.\" + DEC_OCTET$ + \"\\\\.\" + DEC_OCTET$ + \"\\\\.\" + DEC_OCTET$),\r\n\t\tH16$ = subexp(HEXDIG$$ + \"{1,4}\"),\r\n\t\tLS32$ = subexp(subexp(H16$ + \"\\\\:\" + H16$) + \"|\" + IPV4ADDRESS$),\r\n\t\tIPV6ADDRESS$ = subexp(mergeSet(UNRESERVED$$, SUB_DELIMS$$, \"[\\\\:]\") + \"+\"),  //FIXME\r\n\t\tIPVFUTURE$ = subexp(\"v\" + HEXDIG$$ + \"+\\\\.\" + mergeSet(UNRESERVED$$, SUB_DELIMS$$, \"[\\\\:]\") + \"+\"),\r\n\t\tIP_LITERAL$ = subexp(\"\\\\[\" + subexp(IPV6ADDRESS$ + \"|\" + IPVFUTURE$) + \"\\\\]\"),\r\n\t\tREG_NAME$ = subexp(subexp(PCT_ENCODED$ + \"|\" + mergeSet(UNRESERVED$$, SUB_DELIMS$$)) + \"*\"),\r\n\t\tHOST$ = subexp(IP_LITERAL$ + \"|\" + IPV4ADDRESS$ + \"|\" + REG_NAME$),\r\n\t\tPORT$ = subexp(DIGIT$$ + \"*\"),\r\n\t\tAUTHORITY$ = subexp(subexp(USERINFO$ + \"@\") + \"?\" + HOST$ + subexp(\"\\\\:\" + PORT$) + \"?\"),\r\n\t\tPCHAR$ = subexp(PCT_ENCODED$ + \"|\" + mergeSet(UNRESERVED$$, SUB_DELIMS$$, \"[\\\\:\\\\@]\")),\r\n\t\tSEGMENT$ = subexp(PCHAR$ + \"*\"),\r\n\t\tSEGMENT_NZ$ = subexp(PCHAR$ + \"+\"),\r\n\t\tSEGMENT_NZ_NC$ = subexp(subexp(PCT_ENCODED$ + \"|\" + mergeSet(UNRESERVED$$, SUB_DELIMS$$, \"[\\\\@]\")) + \"+\"),\r\n\t\tPATH_ABEMPTY$ = subexp(subexp(\"\\\\/\" + SEGMENT$) + \"*\"),\r\n\t\tPATH_ABSOLUTE$ = subexp(\"\\\\/\" + subexp(SEGMENT_NZ$ + PATH_ABEMPTY$) + \"?\"),  //simplified\r\n\t\tPATH_NOSCHEME$ = subexp(SEGMENT_NZ_NC$ + PATH_ABEMPTY$),  //simplified\r\n\t\tPATH_ROOTLESS$ = subexp(SEGMENT_NZ$ + PATH_ABEMPTY$),  //simplified\r\n\t\tPATH_EMPTY$ = subexp(\"\"),  //simplified\r\n\t\tPATH$ = subexp(PATH_ABEMPTY$ + \"|\" + PATH_ABSOLUTE$ + \"|\" + PATH_NOSCHEME$ + \"|\" + PATH_ROOTLESS$ + \"|\" + PATH_EMPTY$),\r\n\t\tQUERY$ = subexp(subexp(PCHAR$ + \"|[\\\\/\\\\?]\") + \"*\"),\r\n\t\tFRAGMENT$ = subexp(subexp(PCHAR$ + \"|[\\\\/\\\\?]\") + \"*\"),\r\n\t\tHIER_PART$ = subexp(subexp(\"\\\\/\\\\/\" + AUTHORITY$ + PATH_ABEMPTY$) + \"|\" + PATH_ABSOLUTE$ + \"|\" + PATH_ROOTLESS$ + \"|\" + PATH_EMPTY$),\r\n\t\tURI$ = subexp(SCHEME$ + \"\\\\:\" + HIER_PART$ + subexp(\"\\\\?\" + QUERY$) + \"?\" + subexp(\"\\\\#\" + FRAGMENT$) + \"?\"),\r\n\t\tRELATIVE_PART$ = subexp(subexp(\"\\\\/\\\\/\" + AUTHORITY$ + PATH_ABEMPTY$) + \"|\" + PATH_ABSOLUTE$ + \"|\" + PATH_NOSCHEME$ + \"|\" + PATH_EMPTY$),\r\n\t\tRELATIVE$ = subexp(RELATIVE_PART$ + subexp(\"\\\\?\" + QUERY$) + \"?\" + subexp(\"\\\\#\" + FRAGMENT$) + \"?\"),\r\n\t\tURI_REFERENCE$ = subexp(URI$ + \"|\" + RELATIVE$),\r\n\t\tABSOLUTE_URI$ = subexp(SCHEME$ + \"\\\\:\" + HIER_PART$ + subexp(\"\\\\?\" + QUERY$) + \"?\"),\r\n\t\t\r\n\t\tGENERIC_REF$ = \"^(\" + SCHEME$ + \")\\\\:\" + subexp(subexp(\"\\\\/\\\\/(\" + subexp(\"(\" + USERINFO$ + \")@\") + \"?(\" + HOST$ + \")\" + subexp(\"\\\\:(\" + PORT$ + \")\") + \"?)\") + \"?(\" + PATH_ABEMPTY$ + \"|\" + PATH_ABSOLUTE$ + \"|\" + PATH_ROOTLESS$ + \"|\" + PATH_EMPTY$ + \")\") + subexp(\"\\\\?(\" + QUERY$ + \")\") + \"?\" + subexp(\"\\\\#(\" + FRAGMENT$ + \")\") + \"?$\",\r\n\t\tRELATIVE_REF$ = \"^(){0}\" + subexp(subexp(\"\\\\/\\\\/(\" + subexp(\"(\" + USERINFO$ + \")@\") + \"?(\" + HOST$ + \")\" + subexp(\"\\\\:(\" + PORT$ + \")\") + \"?)\") + \"?(\" + PATH_ABEMPTY$ + \"|\" + PATH_ABSOLUTE$ + \"|\" + PATH_NOSCHEME$ + \"|\" + PATH_EMPTY$ + \")\") + subexp(\"\\\\?(\" + QUERY$ + \")\") + \"?\" + subexp(\"\\\\#(\" + FRAGMENT$ + \")\") + \"?$\",\r\n\t\tABSOLUTE_REF$ = \"^(\" + SCHEME$ + \")\\\\:\" + subexp(subexp(\"\\\\/\\\\/(\" + subexp(\"(\" + USERINFO$ + \")@\") + \"?(\" + HOST$ + \")\" + subexp(\"\\\\:(\" + PORT$ + \")\") + \"?)\") + \"?(\" + PATH_ABEMPTY$ + \"|\" + PATH_ABSOLUTE$ + \"|\" + PATH_ROOTLESS$ + \"|\" + PATH_EMPTY$ + \")\") + subexp(\"\\\\?(\" + QUERY$ + \")\") + \"?$\",\r\n\t\tSAMEDOC_REF$ = \"^\" + subexp(\"\\\\#(\" + FRAGMENT$ + \")\") + \"?$\",\r\n\t\tAUTHORITY_REF$ = \"^\" + subexp(\"(\" + USERINFO$ + \")@\") + \"?(\" + HOST$ + \")\" + subexp(\"\\\\:(\" + PORT$ + \")\") + \"?$\",\r\n\t\t\r\n\t\tURI_REF = new RegExp(\"(\" + GENERIC_REF$ + \")|(\" + RELATIVE_REF$ + \")\"),\r\n\t\tNOT_SCHEME = new RegExp(mergeSet(\"[^]\", ALPHA$$, DIGIT$$, \"[\\\\+\\\\-\\\\.]\"), \"g\"),\r\n\t\tNOT_USERINFO = new RegExp(mergeSet(\"[^\\\\%\\\\:]\", UNRESERVED$$, SUB_DELIMS$$), \"g\"),\r\n\t\tNOT_HOST = new RegExp(mergeSet(\"[^\\\\%]\", UNRESERVED$$, SUB_DELIMS$$), \"g\"),\r\n\t\tNOT_PATH = new RegExp(mergeSet(\"[^\\\\%\\\\/\\\\:\\\\@]\", UNRESERVED$$, SUB_DELIMS$$), \"g\"),\r\n\t\tNOT_PATH_NOSCHEME = new RegExp(mergeSet(\"[^\\\\%\\\\/\\\\@]\", UNRESERVED$$, SUB_DELIMS$$), \"g\"),\r\n\t\tNOT_QUERY = new RegExp(mergeSet(\"[^\\\\%]\", UNRESERVED$$, SUB_DELIMS$$, \"[\\\\:\\\\@\\\\/\\\\?]\"), \"g\"),\r\n\t\tNOT_FRAGMENT = NOT_QUERY,\r\n\t\tESCAPE = new RegExp(mergeSet(\"[^]\", UNRESERVED$$, SUB_DELIMS$$), \"g\"),\r\n\t\tUNRESERVED = new RegExp(UNRESERVED$$, \"g\"),\r\n\t\tOTHER_CHARS = new RegExp(mergeSet(\"[^\\\\%]\", UNRESERVED$$, RESERVED$$), \"g\"),\r\n\t\tPCT_ENCODEDS = new RegExp(PCT_ENCODED$ + \"+\", \"g\"),\r\n\t\tURI_PARSE = /^(?:([^:\\/?#]+):)?(?:\\/\\/((?:([^\\/?#@]*)@)?([^\\/?#:]*)(?:\\:(\\d*))?))?([^?#]*)(?:\\?([^#]*))?(?:#((?:.|\\n)*))?/i,\r\n\t\tRDS1 = /^\\.\\.?\\//,\r\n\t\tRDS2 = /^\\/\\.(\\/|$)/,\r\n\t\tRDS3 = /^\\/\\.\\.(\\/|$)/,\r\n\t\tRDS4 = /^\\.\\.?$/,\r\n\t\tRDS5 = /^\\/?(?:.|\\n)*?(?=\\/|$)/,\r\n\t\tNO_MATCH_IS_UNDEFINED = (\"\").match(/(){0}/)[1] === undefined,\r\n\t\t\r\n\t\t/**\r\n\t\t * @param {string} chr\r\n\t\t * @return {string}\r\n\t\t */\r\n\t\tpctEncChar = function (chr) {\r\n\t\t\tvar c = chr.charCodeAt(0), e;\r\n \r\n\t\t\tif (c < 16) {\r\n\t\t\t\te = \"%0\" + c.toString(16).toUpperCase();\r\n\t\t\t}\r\n\t\t\telse if (c < 128) {\r\n\t\t\t\te = \"%\" + c.toString(16).toUpperCase();\r\n\t\t\t}\r\n\t\t\telse if (c < 2048) {\r\n\t\t\t\te = \"%\" + ((c >> 6) | 192).toString(16).toUpperCase() + \"%\" + ((c & 63) | 128).toString(16).toUpperCase();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\te = \"%\" + ((c >> 12) | 224).toString(16).toUpperCase() + \"%\" + (((c >> 6) & 63) | 128).toString(16).toUpperCase() + \"%\" + ((c & 63) | 128).toString(16).toUpperCase();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn e;\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * @param {string} str\r\n\t\t * @return {string}\r\n\t\t */\r\n\t\tpctDecUnreserved = function (str) {\r\n\t\t\tvar newStr = \"\", \r\n\t\t\t\ti = 0,\r\n\t\t\t\tc, s;\r\n\t \r\n\t\t\twhile (i < str.length) {\r\n\t\t\t\tc = parseInt(str.substr(i + 1, 2), 16);\r\n\t \r\n\t\t\t\tif (c < 128) {\r\n\t\t\t\t\ts = String.fromCharCode(c);\r\n\t\t\t\t\tif (s.match(UNRESERVED)) {\r\n\t\t\t\t\t\tnewStr += s;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tnewStr += str.substr(i, 3);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ti += 3;\r\n\t\t\t\t}\r\n\t\t\t\telse if ((c > 191) && (c < 224)) {\r\n\t\t\t\t\tnewStr += str.substr(i, 6);\r\n\t\t\t\t\ti += 6;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tnewStr += str.substr(i, 9);\r\n\t\t\t\t\ti += 9;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t \r\n\t\t\treturn newStr;\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * @param {string} str\r\n\t\t * @return {string}\r\n\t\t */\r\n\t\tpctDecChars = function (str) {\r\n\t\t\tvar newStr = \"\", \r\n\t\t\t\ti = 0,\r\n\t\t\t\tc, c2, c3;\r\n\t \r\n\t\t\twhile (i < str.length) {\r\n\t\t\t\tc = parseInt(str.substr(i + 1, 2), 16);\r\n\t \r\n\t\t\t\tif (c < 128) {\r\n\t\t\t\t\tnewStr += String.fromCharCode(c);\r\n\t\t\t\t\ti += 3;\r\n\t\t\t\t}\r\n\t\t\t\telse if ((c > 191) && (c < 224)) {\r\n\t\t\t\t\tc2 = parseInt(str.substr(i + 4, 2), 16);\r\n\t\t\t\t\tnewStr += String.fromCharCode(((c & 31) << 6) | (c2 & 63));\r\n\t\t\t\t\ti += 6;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tc2 = parseInt(str.substr(i + 4, 2), 16);\r\n\t\t\t\t\tc3 = parseInt(str.substr(i + 7, 2), 16);\r\n\t\t\t\t\tnewStr += String.fromCharCode(((c & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));\r\n\t\t\t\t\ti += 9;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t \r\n\t\t\treturn newStr;\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * @return {string}\r\n\t\t */\r\n\t\ttypeOf = function (o) {\r\n\t\t\treturn o === undefined ? \"undefined\" : (o === null ? \"null\" : Object.prototype.toString.call(o).split(\" \").pop().split(\"]\").shift().toLowerCase());\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * @constructor\r\n\t\t * @implements URIComponents\r\n\t\t */\r\n\t\tComponents = function () {\r\n\t\t\tthis.errors = [];\r\n\t\t}, \r\n\t\t\r\n\t\t/** @namespace */ \r\n\t\tURI = exports;\r\n\t\r\n\t/**\r\n\t * Components\r\n\t */\r\n\t\r\n\tComponents.prototype = {\r\n\t\t/**\r\n\t\t * @type String\r\n\t\t */\r\n\t\t\r\n\t\tscheme : undefined,\r\n\t\t\r\n\t\t/**\r\n\t\t * @type String\r\n\t\t */\r\n\t\t\r\n\t\tuserinfo : undefined,\r\n\t\t\r\n\t\t/**\r\n\t\t * @type String\r\n\t\t */\r\n\t\t\r\n\t\thost : undefined,\r\n\t\t\r\n\t\t/**\r\n\t\t * @type number\r\n\t\t */\r\n\t\t\r\n\t\tport : undefined,\r\n\t\t\r\n\t\t/**\r\n\t\t * @type string\r\n\t\t */\r\n\t\t\r\n\t\tpath : undefined,\r\n\t\t\r\n\t\t/**\r\n\t\t * @type string\r\n\t\t */\r\n\t\t\r\n\t\tquery : undefined,\r\n\t\t\r\n\t\t/**\r\n\t\t * @type string\r\n\t\t */\r\n\t\t\r\n\t\tfragment : undefined,\r\n\t\t\r\n\t\t/**\r\n\t\t * @type string\r\n\t\t * @values \"uri\", \"absolute\", \"relative\", \"same-document\"\r\n\t\t */\r\n\t\t\r\n\t\treference : undefined,\r\n\t\t\r\n\t\t/**\r\n\t\t * @type Array\r\n\t\t */\r\n\t\t\r\n\t\terrors : undefined\r\n\t};\r\n\t\r\n\t/**\r\n\t * URI\r\n\t */\r\n\t\r\n\t/**\r\n\t * @namespace\r\n\t */\r\n\t\r\n\tURI.SCHEMES = {};\r\n\t\r\n\t/**\r\n\t * @param {string} uriString\r\n\t * @param {Options} [options]\r\n\t * @returns {URIComponents}\r\n\t */\r\n\t\r\n\tURI.parse = function (uriString, options) {\r\n\t\tvar matches, \r\n\t\t\tcomponents = new Components(),\r\n\t\t\tschemeHandler;\r\n\t\t\r\n\t\turiString = uriString ? uriString.toString() : \"\";\r\n\t\toptions = options || {};\r\n\t\t\r\n\t\tif (options.reference === \"suffix\") {\r\n\t\t\turiString = (options.scheme ? options.scheme + \":\" : \"\") + \"//\" + uriString;\r\n\t\t}\r\n\t\t\r\n\t\tmatches = uriString.match(URI_REF);\r\n\t\t\r\n\t\tif (matches) {\r\n\t\t\tif (matches[1]) {\r\n\t\t\t\t//generic URI\r\n\t\t\t\tmatches = matches.slice(1, 10);\r\n\t\t\t} else {\r\n\t\t\t\t//relative URI\r\n\t\t\t\tmatches = matches.slice(10, 19);\r\n\t\t\t}\r\n\t\t} \r\n\t\t\r\n\t\tif (!matches) {\r\n\t\t\tif (!options.tolerant) {\r\n\t\t\t\tcomponents.errors.push(\"URI is not strictly valid.\");\r\n\t\t\t}\r\n\t\t\tmatches = uriString.match(URI_PARSE);\r\n\t\t}\r\n\t\t\r\n\t\tif (matches) {\r\n\t\t\tif (NO_MATCH_IS_UNDEFINED) {\r\n\t\t\t\t//store each component\r\n\t\t\t\tcomponents.scheme = matches[1];\r\n\t\t\t\t//components.authority = matches[2];\r\n\t\t\t\tcomponents.userinfo = matches[3];\r\n\t\t\t\tcomponents.host = matches[4];\r\n\t\t\t\tcomponents.port = parseInt(matches[5], 10);\r\n\t\t\t\tcomponents.path = matches[6] || \"\";\r\n\t\t\t\tcomponents.query = matches[7];\r\n\t\t\t\tcomponents.fragment = matches[8];\r\n\t\t\t\t\r\n\t\t\t\t//fix port number\r\n\t\t\t\tif (isNaN(components.port)) {\r\n\t\t\t\t\tcomponents.port = matches[5];\r\n\t\t\t\t}\r\n\t\t\t} else {  //IE FIX for improper RegExp matching\r\n\t\t\t\t//store each component\r\n\t\t\t\tcomponents.scheme = matches[1] || undefined;\r\n\t\t\t\t//components.authority = (uriString.indexOf(\"//\") !== -1 ? matches[2] : undefined);\r\n\t\t\t\tcomponents.userinfo = (uriString.indexOf(\"@\") !== -1 ? matches[3] : undefined);\r\n\t\t\t\tcomponents.host = (uriString.indexOf(\"//\") !== -1 ? matches[4] : undefined);\r\n\t\t\t\tcomponents.port = parseInt(matches[5], 10);\r\n\t\t\t\tcomponents.path = matches[6] || \"\";\r\n\t\t\t\tcomponents.query = (uriString.indexOf(\"?\") !== -1 ? matches[7] : undefined);\r\n\t\t\t\tcomponents.fragment = (uriString.indexOf(\"#\") !== -1 ? matches[8] : undefined);\r\n\t\t\t\t\r\n\t\t\t\t//fix port number\r\n\t\t\t\tif (isNaN(components.port)) {\r\n\t\t\t\t\tcomponents.port = (uriString.match(/\\/\\/(?:.|\\n)*\\:(?:\\/|\\?|\\#|$)/) ? matches[4] : undefined);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//determine reference type\r\n\t\t\tif (components.scheme === undefined && components.userinfo === undefined && components.host === undefined && components.port === undefined && components.path === undefined && components.query === undefined) {\r\n\t\t\t\tcomponents.reference = \"same-document\";\r\n\t\t\t} else if (components.scheme === undefined) {\r\n\t\t\t\tcomponents.reference = \"relative\";\r\n\t\t\t} else if (components.fragment === undefined) {\r\n\t\t\t\tcomponents.reference = \"absolute\";\r\n\t\t\t} else {\r\n\t\t\t\tcomponents.reference = \"uri\";\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//check for reference errors\r\n\t\t\tif (options.reference && options.reference !== \"suffix\" && options.reference !== components.reference) {\r\n\t\t\t\tcomponents.errors.push(\"URI is not a \" + options.reference + \" reference.\");\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//check if a handler for the scheme exists\r\n\t\t\tschemeHandler = URI.SCHEMES[(options.scheme || components.scheme || \"\").toLowerCase()];\r\n\t\t\tif (schemeHandler && schemeHandler.parse) {\r\n\t\t\t\t//perform extra parsing\r\n\t\t\t\tschemeHandler.parse(components, options);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tcomponents.errors.push(\"URI can not be parsed.\");\r\n\t\t}\r\n\t\t\r\n\t\treturn components;\r\n\t};\r\n\t\r\n\t/**\r\n\t * @private\r\n\t * @param {URIComponents} components\r\n\t * @returns {string|undefined}\r\n\t */\r\n\t\r\n\tURI._recomposeAuthority = function (components) {\r\n\t\tvar uriTokens = [];\r\n\t\t\r\n\t\tif (components.userinfo !== undefined) {\r\n\t\t\turiTokens.push(components.userinfo.toString().replace(NOT_USERINFO, pctEncChar));\r\n\t\t\turiTokens.push(\"@\");\r\n\t\t}\r\n\t\tif (components.host !== undefined) {\r\n\t\t\turiTokens.push(components.host.toString().toLowerCase().replace(NOT_HOST, pctEncChar));\r\n\t\t}\r\n\t\tif (typeof components.port === \"number\") {\r\n\t\t\turiTokens.push(\":\");\r\n\t\t\turiTokens.push(components.port.toString(10));\r\n\t\t}\r\n\t\t\r\n\t\treturn uriTokens.length ? uriTokens.join(\"\") : undefined;\r\n\t};\r\n\t\r\n\t/**\r\n\t * @param {string} input\r\n\t * @returns {string}\r\n\t */\r\n\t\r\n\tURI.removeDotSegments = function (input) {\r\n\t\tvar output = [], s;\r\n\t\t\r\n\t\twhile (input.length) {\r\n\t\t\tif (input.match(RDS1)) {\r\n\t\t\t\tinput = input.replace(RDS1, \"\");\r\n\t\t\t} else if (input.match(RDS2)) {\r\n\t\t\t\tinput = input.replace(RDS2, \"/\");\r\n\t\t\t} else if (input.match(RDS3)) {\r\n\t\t\t\tinput = input.replace(RDS3, \"/\");\r\n\t\t\t\toutput.pop();\r\n\t\t\t} else if (input === \".\" || input === \"..\") {\r\n\t\t\t\tinput = \"\";\r\n\t\t\t} else {\r\n\t\t\t\ts = input.match(RDS5)[0];\r\n\t\t\t\tinput = input.slice(s.length);\r\n\t\t\t\toutput.push(s);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn output.join(\"\");\r\n\t};\r\n\t\r\n\t/**\r\n\t * @param {URIComponents} components\r\n\t * @param {Options} [options]\r\n\t * @returns {string}\r\n\t */\r\n\t\r\n\tURI.serialize = function (components, options) {\r\n\t\tvar uriTokens = [], \r\n\t\t\tschemeHandler,\r\n\t\t\tauthority,\r\n\t\t\ts;\r\n\t\toptions = options || {};\r\n\t\t\r\n\t\t//check if a handler for the scheme exists\r\n\t\tschemeHandler = URI.SCHEMES[(options.scheme || components.scheme || \"\").toLowerCase()];\r\n\t\tif (schemeHandler && schemeHandler.serialize) {\r\n\t\t\t//perform extra serialization\r\n\t\t\tschemeHandler.serialize(components, options);\r\n\t\t}\r\n\t\t\r\n\t\tif (options.reference !== \"suffix\" && components.scheme) {\r\n\t\t\turiTokens.push(components.scheme.toString().toLowerCase().replace(NOT_SCHEME, \"\"));\r\n\t\t\turiTokens.push(\":\");\r\n\t\t}\r\n\t\t\r\n\t\tauthority = URI._recomposeAuthority(components);\r\n\t\tif (authority !== undefined) {\r\n\t\t\tif (options.reference !== \"suffix\") {\r\n\t\t\t\turiTokens.push(\"//\");\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\turiTokens.push(authority);\r\n\t\t\t\r\n\t\t\tif (components.path && components.path.charAt(0) !== \"/\") {\r\n\t\t\t\turiTokens.push(\"/\");\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif (components.path !== undefined) {\r\n\t\t\ts = URI.removeDotSegments(components.path.toString().replace(/%2E/ig, \".\"));\r\n\t\t\t\r\n\t\t\tif (components.scheme) {\r\n\t\t\t\ts = s.replace(NOT_PATH, pctEncChar);\r\n\t\t\t} else {\r\n\t\t\t\ts = s.replace(NOT_PATH_NOSCHEME, pctEncChar);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (authority === undefined) {\r\n\t\t\t\ts = s.replace(/^\\/\\//, \"/%2F\");  //don't allow the path to start with \"//\"\r\n\t\t\t}\r\n\t\t\turiTokens.push(s);\r\n\t\t}\r\n\t\t\r\n\t\tif (components.query !== undefined) {\r\n\t\t\turiTokens.push(\"?\");\r\n\t\t\turiTokens.push(components.query.toString().replace(NOT_QUERY, pctEncChar));\r\n\t\t}\r\n\t\t\r\n\t\tif (components.fragment !== undefined) {\r\n\t\t\turiTokens.push(\"#\");\r\n\t\t\turiTokens.push(components.fragment.toString().replace(NOT_FRAGMENT, pctEncChar));\r\n\t\t}\r\n\t\t\r\n\t\treturn uriTokens\r\n\t\t\t.join('')  //merge tokens into a string\r\n\t\t\t.replace(PCT_ENCODEDS, pctDecUnreserved)  //undecode unreserved characters\r\n\t\t\t//.replace(OTHER_CHARS, pctEncChar)  //replace non-URI characters\r\n\t\t\t.replace(/%[0-9A-Fa-f]{2}/g, function (str) {  //uppercase percent encoded characters\r\n\t\t\t\treturn str.toUpperCase();\r\n\t\t\t})\r\n\t\t;\r\n\t};\r\n\t\r\n\t/**\r\n\t * @param {URIComponents} base\r\n\t * @param {URIComponents} relative\r\n\t * @param {Options} [options]\r\n\t * @param {boolean} [skipNormalization]\r\n\t * @returns {URIComponents}\r\n\t */\r\n\t\r\n\tURI.resolveComponents = function (base, relative, options, skipNormalization) {\r\n\t\tvar target = new Components();\r\n\t\t\r\n\t\tif (!skipNormalization) {\r\n\t\t\tbase = URI.parse(URI.serialize(base, options), options);  //normalize base components\r\n\t\t\trelative = URI.parse(URI.serialize(relative, options), options);  //normalize relative components\r\n\t\t}\r\n\t\toptions = options || {};\r\n\t\t\r\n\t\tif (!options.tolerant && relative.scheme) {\r\n\t\t\ttarget.scheme = relative.scheme;\r\n\t\t\t//target.authority = relative.authority;\r\n\t\t\ttarget.userinfo = relative.userinfo;\r\n\t\t\ttarget.host = relative.host;\r\n\t\t\ttarget.port = relative.port;\r\n\t\t\ttarget.path = URI.removeDotSegments(relative.path);\r\n\t\t\ttarget.query = relative.query;\r\n\t\t} else {\r\n\t\t\tif (relative.userinfo !== undefined || relative.host !== undefined || relative.port !== undefined) {\r\n\t\t\t\t//target.authority = relative.authority;\r\n\t\t\t\ttarget.userinfo = relative.userinfo;\r\n\t\t\t\ttarget.host = relative.host;\r\n\t\t\t\ttarget.port = relative.port;\r\n\t\t\t\ttarget.path = URI.removeDotSegments(relative.path);\r\n\t\t\t\ttarget.query = relative.query;\r\n\t\t\t} else {\r\n\t\t\t\tif (!relative.path) {\r\n\t\t\t\t\ttarget.path = base.path;\r\n\t\t\t\t\tif (relative.query !== undefined) {\r\n\t\t\t\t\t\ttarget.query = relative.query;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttarget.query = base.query;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (relative.path.charAt(0) === \"/\") {\r\n\t\t\t\t\t\ttarget.path = URI.removeDotSegments(relative.path);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif ((base.userinfo !== undefined || base.host !== undefined || base.port !== undefined) && !base.path) {\r\n\t\t\t\t\t\t\ttarget.path = \"/\" + relative.path;\r\n\t\t\t\t\t\t} else if (!base.path) {\r\n\t\t\t\t\t\t\ttarget.path = relative.path;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttarget.path = base.path.slice(0, base.path.lastIndexOf(\"/\") + 1) + relative.path;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttarget.path = URI.removeDotSegments(target.path);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttarget.query = relative.query;\r\n\t\t\t\t}\r\n\t\t\t\t//target.authority = base.authority;\r\n\t\t\t\ttarget.userinfo = base.userinfo;\r\n\t\t\t\ttarget.host = base.host;\r\n\t\t\t\ttarget.port = base.port;\r\n\t\t\t}\r\n\t\t\ttarget.scheme = base.scheme;\r\n\t\t}\r\n\t\t\r\n\t\ttarget.fragment = relative.fragment;\r\n\t\t\r\n\t\treturn target;\r\n\t};\r\n\t\r\n\t/**\r\n\t * @param {string} baseURI\r\n\t * @param {string} relativeURI\r\n\t * @param {Options} [options]\r\n\t * @returns {string}\r\n\t */\r\n\t\r\n\tURI.resolve = function (baseURI, relativeURI, options) {\r\n\t\treturn URI.serialize(URI.resolveComponents(URI.parse(baseURI, options), URI.parse(relativeURI, options), options, true), options);\r\n\t};\r\n\t\r\n\t/**\r\n\t * @param {string|URIComponents} uri\r\n\t * @param {Options} options\r\n\t * @returns {string|URIComponents}\r\n\t */\r\n\t\r\n\tURI.normalize = function (uri, options) {\r\n\t\tif (typeof uri === \"string\") {\r\n\t\t\turi = URI.serialize(URI.parse(uri, options), options);\r\n\t\t} else if (typeOf(uri) === \"object\") {\r\n\t\t\turi = URI.parse(URI.serialize(uri, options), options);\r\n\t\t}\r\n\t\t\r\n\t\treturn uri;\r\n\t};\r\n\t\r\n\t/**\r\n\t * @param {string|URIComponents} uriA\r\n\t * @param {string|URIComponents} uriB\r\n\t * @param {Options} options\r\n\t */\r\n\t\r\n\tURI.equal = function (uriA, uriB, options) {\r\n\t\tif (typeof uriA === \"string\") {\r\n\t\t\turiA = URI.serialize(URI.parse(uriA, options), options);\r\n\t\t} else if (typeOf(uriA) === \"object\") {\r\n\t\t\turiA = URI.serialize(uriA, options);\r\n\t\t}\r\n\t\t\r\n\t\tif (typeof uriB === \"string\") {\r\n\t\t\turiB = URI.serialize(URI.parse(uriB, options), options);\r\n\t\t} else if (typeOf(uriB) === \"object\") {\r\n\t\t\turiB = URI.serialize(uriB, options);\r\n\t\t}\r\n\t\t\r\n\t\treturn uriA === uriB;\r\n\t};\r\n\t\r\n\t/**\r\n\t * @param {string} str\r\n\t * @returns {string}\r\n\t */\r\n\t\r\n\tURI.escapeComponent = function (str) {\r\n\t\treturn str && str.toString().replace(ESCAPE, pctEncChar);\r\n\t};\r\n\t\r\n\t/**\r\n\t * @param {string} str\r\n\t * @returns {string}\r\n\t */\r\n\t\r\n\tURI.unescapeComponent = function (str) {\r\n\t\treturn str && str.toString().replace(PCT_ENCODEDS, pctDecChars);\r\n\t};\r\n\t\r\n\t//export API\r\n\texports.pctEncChar = pctEncChar;\r\n\texports.pctDecChars = pctDecChars;\r\n\texports.Components = Components;\r\n\texports.URI = URI;\r\n\t\r\n\t//name-safe export API\r\n\texports[\"pctEncChar\"] = pctEncChar;\r\n\texports[\"pctDecChars\"] = pctDecChars;\r\n\texports[\"Components\"] = Components;\r\n\texports[\"URI\"] = {\r\n\t\t\"SCHEMES\" : URI.SCHEMES,\r\n\t\t\"parse\" : URI.parse,\r\n\t\t\"removeDotSegments\" : URI.removeDotSegments,\r\n\t\t\"serialize\" : URI.serialize,\r\n\t\t\"resolveComponents\" : URI.resolveComponents,\r\n\t\t\"resolve\" : URI.resolve,\r\n\t\t\"normalize\" : URI.normalize,\r\n\t\t\"equal\" : URI.equal,\r\n\t\t\"escapeComponent\" : URI.escapeComponent,\r\n\t\t\"unescapeComponent\" : URI.unescapeComponent\r\n\t};\r\n\t\r\n\t//load all schemes\r\n\trequire(\"./schemes\");\r\n\t\r\n\treturn URI;\r\n}());\n},{\"./schemes\":4}],8:[function(require,module,exports){\nvar _global = (function() { return this; })();\nvar nativeWebSocket = _global.WebSocket || _global.MozWebSocket;\n\n\n/**\n * Expose a W3C WebSocket class with just one or two arguments.\n */\nfunction W3CWebSocket(uri, protocols) {\n\tvar native_instance;\n\n\tif (protocols) {\n\t\tnative_instance = new nativeWebSocket(uri, protocols);\n\t}\n\telse {\n\t\tnative_instance = new nativeWebSocket(uri);\n\t}\n\n\t/**\n\t * 'native_instance' is an instance of nativeWebSocket (the browser's WebSocket\n\t * class). Since it is an Object it will be returned as it is when creating an\n\t * instance of W3CWebSocket via 'new W3CWebSocket()'.\n\t *\n\t * ECMAScript 5: http://bclary.com/2004/11/07/#a-13.2.2\n\t */\n\treturn native_instance;\n}\n\n\n/**\n * Module exports.\n */\nmodule.exports = {\n    'w3cwebsocket' : nativeWebSocket ? W3CWebSocket : null,\n    'version'      : require('./version')\n};\n\n},{\"./version\":9}],9:[function(require,module,exports){\nmodule.exports = require('../package.json').version;\n\n},{\"../package.json\":10}],10:[function(require,module,exports){\nmodule.exports={\n  \"name\": \"websocket\",\n  \"description\": \"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.\",\n  \"keywords\": [\n    \"websocket\",\n    \"websockets\",\n    \"socket\",\n    \"networking\",\n    \"comet\",\n    \"push\",\n    \"RFC-6455\",\n    \"realtime\",\n    \"server\",\n    \"client\"\n  ],\n  \"author\": {\n    \"name\": \"Brian McKelvey\",\n    \"email\": \"brian@worlize.com\",\n    \"url\": \"https://www.worlize.com/\"\n  },\n  \"version\": \"1.0.17\",\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"https://github.com/theturtle32/WebSocket-Node.git\"\n  },\n  \"homepage\": \"https://github.com/theturtle32/WebSocket-Node\",\n  \"engines\": {\n    \"node\": \">=0.8.0\"\n  },\n  \"dependencies\": {\n    \"debug\": \"~2.1.0\",\n    \"nan\": \"~1.0.0\",\n    \"typedarray-to-buffer\": \"~3.0.0\"\n  },\n  \"devDependencies\": {\n    \"buffer-equal\": \"0.0.1\",\n    \"faucet\": \"0.0.1\",\n    \"gulp\": \"git+https://github.com/gulpjs/gulp.git#4.0\",\n    \"gulp-jshint\": \"^1.9.0\",\n    \"jshint-stylish\": \"^1.0.0\",\n    \"tape\": \"^3.0.0\"\n  },\n  \"config\": {\n    \"verbose\": false\n  },\n  \"scripts\": {\n    \"install\": \"(node-gyp rebuild 2> builderror.log) || (exit 0)\",\n    \"test\": \"faucet test/unit\",\n    \"gulp\": \"gulp\"\n  },\n  \"main\": \"index\",\n  \"directories\": {\n    \"lib\": \"./lib\"\n  },\n  \"browser\": \"lib/browser.js\",\n  \"gitHead\": \"cda940b883aa884906ac13158fe514229a67f426\",\n  \"bugs\": {\n    \"url\": \"https://github.com/theturtle32/WebSocket-Node/issues\"\n  },\n  \"_id\": \"websocket@1.0.17\",\n  \"_shasum\": \"8a572afc6ec120eb41473ca517d07d932f7b6a1c\",\n  \"_from\": \"websocket@>=1.0.17 <2.0.0\",\n  \"_npmVersion\": \"1.4.28\",\n  \"_npmUser\": {\n    \"name\": \"theturtle32\",\n    \"email\": \"brian@worlize.com\"\n  },\n  \"maintainers\": [\n    {\n      \"name\": \"theturtle32\",\n      \"email\": \"brian@worlize.com\"\n    }\n  ],\n  \"dist\": {\n    \"shasum\": \"8a572afc6ec120eb41473ca517d07d932f7b6a1c\",\n    \"tarball\": \"http://registry.npmjs.org/websocket/-/websocket-1.0.17.tgz\"\n  },\n  \"_resolved\": \"https://registry.npmjs.org/websocket/-/websocket-1.0.17.tgz\",\n  \"readme\": \"ERROR: No README data found!\"\n}\n\n},{}]},{},[1])(1)\n});"],"sourceRoot":"/source/"}