!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(t.swim||(t.swim={})).client=e()}}(function(){return function e(t,r,i){function n(o,p){if(!r[o]){if(!t[o]){var a="function"==typeof require&&require;if(!p&&a)return a(o,!0);if(s)return s(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var f=r[o]={exports:{}};t[o][0].call(f.exports,function(e){var r=t[o][1][e];return n(r?r:e)},f,f.exports,e,t,r,i)}return r[o].exports}for(var s="function"==typeof require&&require,o=0;o<i.length;o++)n(i[o]);return n}({1:[function(e,t,r){"use strict";function i(){for(var e in d.bridge){var t=d.bridge[e];t instanceof d&&t.close()}d.bridge={},v={},m={}}function n(e,t,r){"function"==typeof r&&(r={done:r});var i=!1,n=m[e];void 0===n&&(n={},m[e]=n);var s=n[t];if(void 0===s&&(i=!0,s=[],n[t]=s),s.push(r),i){var o=d.get(e),p=new c.LinkRequest(o.relative(e),t);o.send(p)}}function s(e,t,r){var i=m[e];if(void 0!==i){var n=i[t];if(void 0!==n){var s=-1;if(r instanceof Function)for(var o=0,p=n.length;p>o&&0>s;)n[o].done===r?s=o:o+=1;else s=n.indexOf(r);if(!(0>s)&&(n.splice(s,1),0===n.length)){delete i[t],0===i.length&&delete m[e];var a=d.get(e),u=new c.UnlinkRequest(a.relative(e),t);a.send(u)}}}}function o(e,t){var r=h.resolve(e,t.node),i=m[r];if(void 0!==i){var n=i[t.lane];if(void 0!==n)for(var s=0,o=n.length;o>s;){var p=n[s];p.done(t),s+=1}}}function p(e,t,r){var i=d.get(e),n=new c.EventMessage(i.relative(e),t,void 0,r);i.send(n)}function a(e,t,r){var i=d.get(e),n=new c.CommandMessage(i.relative(e),t,void 0,r);i.send(n)}function u(e,t){"function"==typeof t&&(t={done:t});var r=v[e];void 0===r&&(r=[],v[e]=r),r.push(t);var i=d.get(e),n=new c.GetRequest(i.relative(e));i.send(n)}function f(e,t,r){"function"==typeof r&&(r={done:r});var i=v[e];void 0===i&&(i=[],v[e]=i),i.push(r);var n=d.get(e),s=new c.PutRequest(n.relative(e),t);n.send(s)}function l(e,t){for(var r,i=h.resolve(e,t.node),n=v[i]||[];r=n.shift();)r.done(t);delete v[i]}function d(e){this.uri=e,this.socket=new y(e,"swim-0.0"),this.buffer=[],d.bridge[e]=this;var t=this;this.socket.onopen=function(){for(var e;e=t.buffer.shift();)t.send(e)},this.socket.onclose=function(){delete d.bridge[t.uri]},this.socket.onmessage=function(e){var r=e.data;if("string"==typeof r){var i=c.parse(r);i&&t.receive(i)}}}var c=e("swim-proto-js"),h=e("uri-js"),y=e("websocket").w3cwebsocket,v={},m={};d.prototype.send=function(e){this.socket.readyState!==this.socket.OPEN?this.buffer.push(e):this.socket.send(c.stringify(e))},d.prototype.receive=function(e){e.isEventMessage?o(this.uri,e):e.isCommandMessage?o(this.uri,e):e.isStateResponse&&l(this.uri,e)},d.prototype.close=function(){this.socket.readyState!==this.socket.CLOSED||this.socket.readyState!==this.socket.CLOSING?this.socket.close():delete d.bridge[this.uri]},d.prototype.relative=function(e){var t=h.parse(e);return h.serialize({path:t.path,query:t.query,fragment:t.fragment})},d.bridge={},d.endpoint=function(e){var t=h.parse(e),r=t.scheme;return"swim"===r?r="http":"swims"===r&&(r="https"),h.serialize({scheme:r,userinfo:t.userinfo,host:t.host,port:t.port})},d.get=function(e){var t=d.endpoint(e),r=d.bridge[t];return void 0===r&&(r=new d(t)),r},r.reset=i,r.link=n,r.unlink=s,r.sendEvent=p,r.sendCommand=a,r.get=u,r.put=f},{"swim-proto-js":3,"uri-js":7,websocket:8}],2:[function(e,t,r){"use strict";function i(){if(1===arguments.length){var e=arguments[0];if(void 0===e)return Z;if(null===e)return T;if(e.isAttr||e.isSlot){var t=new x;return t.appendField(e),t.state()}return n(e)}return arguments.length>1?s(arguments):Z}function n(e){return null===e?T:e.isRecord||e.isAttr||e.isSlot||"string"==typeof e||"number"==typeof e||"boolean"==typeof e||e instanceof Uint8Array||e===T||e===Z?e:Array.isArray(e)?s(e):"object"==typeof e?e.toRecon&&"function"==typeof e.toRecon?e.toRecon():o(e):Z}function s(e){for(var t=new x,r=e.length,i=0;r>i;){var s=n(e[i]);s.isField?t.appendField(s):t.appendValue(s),i+=1}return t.state()}function o(e){var t,r,n,s=new x,o=e["@"];for(t in o)r=i(t),"string"==typeof r&&(n=i(o[t]),n.isAbsent||s.appendField(new E(r,n)));for(t in e)"@"!==t&&(r=i(t),r.isAbsent||(n=i(e[t]),n.isAbsent||s.appendField(new g(r,n))));return s.state()}function p(e){var t=new j(e),r=(new M).run(t);return r.state()}function a(){var e=new G;return e.writeBlock(i.apply(null,arguments)),e.state()}function u(e){return void 0===e||null===e||e.isExtant?null:e.isAbsent?void 0:e.isRecord?e.isArray()?f(e):l(e):e}function f(e){for(var t=[],r=e.iterator();!r.isEmpty();){var i=u(r.head());t.push(i),r.step()}return t}function l(e){for(var t,r,i=e.iterator(),n={},s=null,o=0;!i.isEmpty();){var p=i.head();p.isField?(t=u(p.key),r=u(p.value),p.isAttr?(null===s&&(s={}),s[t]=r):n[t]=r):(r=u(p),n[o]=r),i.step(),o+=1}return null!==s&&(n["@"]=s),n}function d(e){if(void 0===e)return new Uint8Array(0);for(var t=new R,r=new j(e);!r.isEmpty();)t.appendBase64Char(r.head()),r.step();return t.state()}function c(e,t){return void 0===t&&(t=T),new E(i(e),i(t))}function h(e,t){return void 0===t&&(t=T),new g(i(e),i(t))}function y(){return new b([],{})}function v(){return new x}function m(e,t){if(e===t)return!0;if(e.isRecord&&t.isRecord)return e.equals(t);if(e.isField&&t.isField)return e.equals(t);if(e instanceof Uint8Array&&t instanceof Uint8Array&&e.length===t.length){for(var r=0,i=e.length;i>r&&e[r]===t[r];)r+=1;if(r===i)return!0}return!1}function b(e,t){if(void 0===t){t={};for(var r=0,i=e.length;i>r;){var n=e[r];n.isField&&(t[n.key]=n.value),r+=1}}var s=function(r){var i=t[r];return void 0===i&&"number"==typeof r&&(i=e[r]),i};return s.__proto__=b.prototype,Object.defineProperty(s,"items",{value:e}),Object.defineProperty(s,"index",{value:t}),s}function w(){}function E(e,t){w.call(this),Object.defineProperty(this,"key",{enumerable:!0,value:e}),void 0===t&&(t=T),Object.defineProperty(this,"value",{enumerable:!0,value:t})}function g(e,t){w.call(this),Object.defineProperty(this,"key",{enumerable:!0,value:e}),void 0===t&&(t=T),Object.defineProperty(this,"value",{enumerable:!0,value:t})}function D(e,t){Object.defineProperty(this,"items",{value:e}),Object.defineProperty(this,"index",{value:t||0,writable:!0})}function x(){Object.defineProperty(this,"items",{value:[]}),Object.defineProperty(this,"index",{value:{}})}function O(){Object.defineProperty(this,"items",{value:null,writable:!0}),Object.defineProperty(this,"index",{value:null,writable:!0}),Object.defineProperty(this,"value",{value:null,writable:!0})}function j(e,t){Object.defineProperty(this,"string",{value:e||""}),Object.defineProperty(this,"index",{value:t||0,writable:!0})}function k(){}function C(){Object.defineProperty(this,"string",{value:"",writable:!0})}function R(){Object.defineProperty(this,"buffer",{value:null,writable:!0}),Object.defineProperty(this,"offset",{value:0,writable:!0}),Object.defineProperty(this,"aliased",{value:!0,writable:!0}),Object.defineProperty(this,"p",{value:0,writable:!0}),Object.defineProperty(this,"q",{value:0,writable:!0}),Object.defineProperty(this,"r",{value:0,writable:!0}),Object.defineProperty(this,"s",{value:0,writable:!0})}function S(e){return 32===e||9===e}function P(e){return 10===e||13===e}function F(e){return S(e)||P(e)}function A(e){return e>=65&&90>=e||95===e||e>=97&&122>=e||e>=192&&214>=e||e>=216&&246>=e||e>=248&&767>=e||e>=880&&893>=e||e>=895&&8191>=e||e>=8204&&8205>=e||e>=8304&&8591>=e||e>=11264&&12271>=e||e>=12289&&55295>=e||e>=63744&&64975>=e||e>=65008&&65533>=e||e>=65536&&983039>=e}function q(e){return 45===e||e>=48&&57>=e||e>=65&&90>=e||95===e||e>=97&&122>=e||183===e||e>=192&&214>=e||e>=216&&246>=e||e>=248&&893>=e||e>=895&&8191>=e||e>=8204&&8205>=e||e>=8255&&8256>=e||e>=8304&&8591>=e||e>=11264&&12271>=e||e>=12289&&55295>=e||e>=63744&&64975>=e||e>=65008&&65533>=e||e>=65536&&983039>=e}function z(e){return e>=48&&57>=e||e>=65&&90>=e||e>=97&&122>=e||43===e||45===e||47===e||95===e}function M(e){k.call(this),this.value=e||new U}function U(e,t,r,i){k.call(this),this.builder=e||null,this.key=t||null,this.value=r||null,this.s=i||1}function I(e,t,r){k.call(this),this.ident=e||new W,this.value=t||new U,this.s=r||1}function B(e,t,r,i){k.call(this),this.builder=e||null,this.field=t||null,this.value=r||null,this.s=i||1}function V(e,t,r,i){k.call(this),this.builder=e||null,this.field=t||null,this.value=r||null,this.s=i||1}function N(e,t,r,i){k.call(this),this.builder=e||null,this.key=t||null,this.value=r||null,this.s=i||1}function L(e,t,r,i){k.call(this),this.builder=e||null,this.text=t||null,this.value=r||null,this.s=i||1}function _(e,t){k.call(this),this.text=e||null,this.s=t||1}function $(e,t){k.call(this),this.data=e||null,this.s=t||1}function H(e,t){k.call(this),this.builder=e||null,this.s=t||1}function W(e,t){k.call(this),this.builder=e||null,this.s=t||1}function G(e){Object.defineProperty(this,"builder",{value:e||new C})}b.prototype=Object.create(Function.prototype),b.prototype.constructor=b,Object.defineProperty(b.prototype,"isRecord",{enumerable:!0,value:!0}),Object.defineProperty(b.prototype,"size",{enumerable:!0,get:function(){return this.items.length}}),b.prototype.isEmpty=function(){return 0===this.items.length},b.prototype.isArray=function(){return this.items.length>=0&&0===Object.getOwnPropertyNames(this.index).length},b.prototype.isMarkup=function(){function e(e){for(var t=new j(e);!t.isEmpty()&&S(t.head());)t.step();return t.isEmpty()}for(var t=this.iterator(),r=!1,i=!1,n=0;!t.isEmpty();){var s=t.head();if("string"!=typeof s){if(r)return!1;r=!0,i=!0}else r&&!e(s)?(r=!1,n+=1):0===n&&(n=1);t.step()}return i&&n>=2},b.prototype.hasAttrs=function(){return this.items.length>0&&(this.items[0].isAttr||this.items[this.items.length-1].isAttr)},b.prototype.hasPrefixAttrs=function(){return this.items.length>0&&this.items[0].isAttr},b.prototype.hasPostfixAttrs=function(){return this.items.length>0&&this.items[this.items.length-1].isAttr},b.prototype.contains=function(e){return void 0!==this(e)},b.prototype.head=function(){return this.items.length>0?this.items[0]:Z},b.prototype.tail=function(){return new b(this.items.slice(1))},b.prototype.body=function(){return new b(this.items.slice(0,-1))},b.prototype.foot=function(){return this.items.length>0?this.items[this.items.length-1]:Z},b.prototype.target=function(){for(var e=this.iterator();!e.isEmpty();){var t=e.next();if(!t.isField)return t}return Z},b.prototype.concat=function(){var e=new x;e.appendRecord(this);var t=i.apply(null,arguments);return t.isRecord?e.appendRecord(t):e.appendValue(t),e.state()},b.prototype.iterator=function(){return new D(this.items)},b.prototype.forEach=function(e){for(var t=this.iterator();!t.isEmpty();)e(t.next())},b.prototype.equals=function(e){for(var t=this.iterator(),r=e.iterator();!t.isEmpty()&&!r.isEmpty();)if(!m(t.next(),r.next()))return!1;return t.isEmpty()&&r.isEmpty()},b.prototype.toString=function(){var e=new G;return e.writeRecord(this),e.state()},Object.defineProperty(w.prototype,"isField",{enumerable:!0,value:!0}),Object.defineProperty(w.prototype,"isAttr",{enumerable:!0,value:!1}),Object.defineProperty(w.prototype,"isSlot",{enumerable:!0,value:!1}),E.prototype=Object.create(w.prototype),E.prototype.constructor=E,Object.defineProperty(E.prototype,"isAttr",{enumerable:!0,value:!0}),E.prototype.equals=function(e){return e.isAttr&&m(this.key,e.key)&&m(this.value,e.value)},E.prototype.toString=function(){var e=new G;return e.writeAttr(this),e.state()},g.prototype=Object.create(w.prototype),g.prototype.constructor=g,Object.defineProperty(g.prototype,"isSlot",{enumerable:!0,value:!0}),g.prototype.equals=function(e){return e.isSlot&&m(this.key,e.key)&&m(this.value,e.value)},g.prototype.toString=function(){var e=new G;return e.writeItem(this),e.state()};var T={};Object.defineProperty(T,"isExtant",{enumerable:!0,value:!0});var Z={};Object.defineProperty(Z,"isAbsent",{enumerable:!0,value:!0}),D.prototype.isEmpty=function(){return this.index>=this.items.length},D.prototype.head=function(){if(this.index>=this.items.length)throw"head of empty iterator";return this.items[this.index]},D.prototype.step=function(){if(this.index>=this.items.length)throw"empty iterator step";this.index+=1},D.prototype.next=function(){if(this.index>=this.items.length)return null;var e=this.items[this.index];return this.index+=1,e},D.prototype.dup=function(){return new D(this.items,this.index)},D.prototype.toRecord=function(){return new b(this.items.slice(this.index))},D.prototype.isAllAttrs=function(){for(var e=this.dup();!e.isEmpty();)if(!e.next().isAttr)return!1;return!0},x.prototype.appendField=function(e){this.items.push(e),this.index[e.key]=e.value},x.prototype.appendValue=function(e){this.items.push(e)},x.prototype.appendRecord=function(e){for(var t=e.iterator();!t.isEmpty();){var r=t.next();r.isField?this.appendField(r):this.appendValue(r)}},x.prototype.attr=function(e,t){return this.appendField(c(e,t)),this},x.prototype.slot=function(e,t){return this.appendField(h(e,t)),this},x.prototype.item=function(e){return this.appendValue(n(e)),this},x.prototype.state=function(){return new b(this.items,this.index)},O.prototype.appendField=function(e){null===this.items&&(this.items=[],this.index={},null!==this.value&&(this.items.push(this.value),this.value=null)),this.items.push(e),this.index[e.key]=e.value},O.prototype.appendValue=function(e){null!==this.items?this.items.push(e):null===this.value?this.value=e:(this.items=[],this.index={},this.items.push(this.value),this.value=null,this.items.push(e))},O.prototype.state=function(){return null!==this.value?this.value:null!==this.items?new b(this.items,this.index):Z},j.prototype.isDone=function(){return!1},j.prototype.isEmpty=function(){return this.index>=this.string.length},j.prototype.head=function(){var e=this.string.charCodeAt(this.index);if(55295>=e||e>=57344)return e;if(56319>=e&&this.index+1<this.string.length){var t=this.string.charCodeAt(this.index+1);return t>=56320&&57343>=t?((1023&e)<<10|1023&t)+65536:65533}return 65533},j.prototype.step=function(){var e=this.string.charCodeAt(this.index);if(55295>=e||e>=57344)this.index+=1;else if(56319>=e&&this.index+1<this.string.length){var t=this.string.charCodeAt(this.index+1);this.index+=t>=56320&&57343>=t?2:1}else this.index+=1},j.Done={isDone:function(){return!0},isEmpty:function(){return!0},head:function(){throw"head of empty iterator"},step:function(){throw"empty iterator step"}},j.Done.prototype=Object.create(j.prototype),k.prototype.isCont=function(){return!0},k.prototype.isDone=function(){return!1},k.prototype.isError=function(){return!1},k.prototype.feed=function(){return this},k.prototype.run=function(e){for(var t=this;!e.isEmpty()&&t.isCont();)t=t.feed(e);return e.isEmpty()&&!e.isDone()&&t.isCont()&&(t=t.feed(j.Done)),t},k.Done=function(e){k.call(this),this.value=e},k.Done.prototype=Object.create(k.prototype),k.Done.prototype.constructor=k.Done,k.Done.prototype.isCont=function(){return!1},k.Done.prototype.isDone=function(){return!0},k.Done.prototype.feed=function(){return this},k.Done.prototype.state=function(){return this.value},k.Error=function(e){k.call(this),this.error=e},k.Error.prototype=Object.create(k.prototype),k.Error.prototype.constructor=k.Error,k.Error.prototype.isCont=function(){return!1},k.Error.prototype.isError=function(){return!0},k.Error.prototype.feed=function(){return this},k.Error.prototype.state=function(){throw this.error},k.unexpectedEOF=new k.Error("unexpected end of input"),C.prototype.append=function(e){if(e>=0&&55295>=e||e>=57344&&65535>=e)this.string+=String.fromCharCode(e);else if(e>=65536&&1114111>=e){var t=e-65536;this.string+=String.fromCharCode(55296|t>>>10,56320|1023&t)}else this.string+=String.fromCharCode(65533)},C.prototype.appendString=function(e){for(var t=new j(e);!t.isEmpty();)this.append(t.head()),t.step()},C.prototype.state=function(){return this.string},R.prototype.prepare=function(e){function t(e,t){var r=Math.max(e,t)-1;return r|=r>>1,r|=r>>2,r|=r>>4,r|=r>>8,r+1}if(this.aliased||e>this.buffer.length){var r=new Uint8Array(t(256,e));this.buffer&&r.set(this.buffer),this.buffer=r,this.aliased=!1}},R.prototype.appendByte=function(e){this.prepare(this.offset+1),this.buffer[this.offset]=e,this.offset+=1},R.prototype.decodeBase64Digit=function(e){return e>=65&&90>=e?e-65:e>=97&&122>=e?e-71:e>=48&&57>=e?e+4:43===e||45===e?62:47===e||95===e?63:void 0},R.prototype.decodeBase64Quantum=function(){var e=this.decodeBase64Digit(this.p),t=this.decodeBase64Digit(this.q);if(61!==this.r){var r=this.decodeBase64Digit(this.r);if(61!==this.s){var i=this.decodeBase64Digit(this.s);this.appendByte(e<<2|t>>>4),this.appendByte(t<<4|r>>>2),this.appendByte(r<<6|i)}else this.appendByte(e<<2|t>>>4),this.appendByte(t<<4|r>>>2)}else{if(61!==this.s)throw"incomplete base64 quantum";this.appendByte(e<<2|t>>>4)}},R.prototype.appendBase64Char=function(e){0===this.p?this.p=e:0===this.q?this.q=e:0===this.r?this.r=e:(this.s=e,this.decodeBase64Quantum(),this.s=0,this.r=0,this.q=0,this.p=0)},R.prototype.state=function(){if(this.buffer){if(this.buffer.length!==this.offset){var e=new Uint8Array(this.offset);e.set(this.buffer.subarray(0,this.offset)),this.buffer=e}}else this.buffer=new Uint8Array(0);return this.aliased=!0,this.buffer},M.prototype=Object.create(k.prototype),M.prototype.constructor=M,M.prototype.feed=function(e){for(var t=this.value;(!e.isEmpty()||e.isDone())&&t.isCont();)t=t.feed(e);if(t.isError())return t;if(t.isDone()){if(!e.isEmpty())return new k.Error({found:e.head()});if(e.isDone())return t}return new M(t)},U.prototype=Object.create(k.prototype),U.prototype.constructor=U,U.prototype.feed=function(e){for(var t=0,r=this.s,i=this.value,n=this.key,s=this.builder||new O;!e.isEmpty()||e.isDone();){if(1===r){for(;!e.isEmpty()&&(t=e.head(),F(t));)e.step();if(e.isEmpty()){if(e.isDone())return new k.Done(s.state())}else r=2}if(2===r){for(n=n||new B;(!e.isEmpty()||e.isDone())&&n.isCont();)n=n.feed(e);if(n.isDone())r=3;else if(n.isError())return n}if(3===r){for(;!e.isEmpty()&&(t=e.head(),S(t));)e.step();if(e.isEmpty()){if(e.isDone())return s.appendValue(n.state()),new k.Done(s.state())}else 58===t?(e.step(),r=4):(s.appendValue(n.state()),n=null,r=6)}if(4===r){for(;!e.isEmpty()&&S(e.head());)e.step();if(e.isEmpty()){if(e.isDone())return s.appendField(new g(n.state())),new k.Done(s.state())}else r=5}if(5===r){for(i=i||new B;(!e.isEmpty()||e.isDone())&&i.isCont();)i=i.feed(e);if(i.isDone())s.appendField(new g(n.state(),i.state())),n=null,i=null,r=6;else if(i.isError())return i}if(6===r){for(;!e.isEmpty()&&(t=e.head(),S(t));)e.step();if(e.isEmpty()){if(e.isDone())return new k.Done(s.state())}else{if(44!==t&&59!==t&&!P(t))return new k.Done(s.state());e.step(),r=1}}}return new U(s,n,i,r)},I.prototype=Object.create(k.prototype),I.prototype.constructor=I,I.prototype.feed=function(e){var t=0,r=this.s,i=this.value,n=this.ident;if(1===r)if(e.isEmpty()||(t=e.head(),64!==t)){if(!e.isEmpty())return new k.Error({expected:"'@'",found:t});if(e.isDone())return k.unexpectedEOF}else e.step(),r=2;if(2===r)if(n=n.feed(e),n.isDone())r=3;else if(n.isError())return n;if(3===r)if(e.isEmpty()||40!==e.head()){if(!e.isEmpty()||e.isDone())return new k.Done(new E(n.state()))}else e.step(),r=4;if(4===r){for(;!e.isEmpty()&&(t=e.head(),F(t));)e.step();if(e.isEmpty()){if(e.isDone())return k.unexpectedEOF}else{if(41===t)return e.step(),new k.Done(new E(n.state()));r=5}}if(5===r){for(;(!e.isEmpty()||e.isDone())&&i.isCont();)i=i.feed(e);if(i.isDone())r=6;else if(i.isError())return i}if(6===r){for(;!e.isEmpty()&&(t=e.head(),F(t));)e.step();if(!e.isEmpty())return 41===t?(e.step(),new k.Done(new E(n.state(),i.state()))):new k.Error({expected:"')'",found:t});if(e.isDone())return k.unexpectedEOF}return new I(n,i,r)},B.prototype=Object.create(k.prototype),B.prototype.constructor=B,B.prototype.feed=function(e){for(var t=0,r=this.s,i=this.value,n=this.field,s=this.builder;!e.isEmpty()||e.isDone();){if(1===r)if(e.isEmpty()){if(e.isDone())return new k.Done(s?s.state():Z)}else if(t=e.head(),64===t)n=new I,r=2;else if(123===t)s=s||new x,i=new N(s),r=5;else if(91===t)s=s||new x,i=new L(s),r=5;else if(34===t)i=new _,r=4;else if(37===t)i=new $,r=4;else if(45===t||t>=48&&57>=t)i=new H,r=4;else{if(!A(t))return new k.Done(s?s.state():Z);i=new W,r=4}if(2===r){for(;(!e.isEmpty()||e.isDone())&&n.isCont();)n=n.feed(e);if(n.isDone())s=s||new O,s.appendField(n.state()),n=null,r=3;else if(n.isError())return n}if(3===r){for(;!e.isEmpty()&&S(e.head());)e.step();if(e.isEmpty()){if(e.isDone())return new k.Done(s.state())}else r=1}if(4===r){for(;(!e.isEmpty()||e.isDone())&&i.isCont();)i=i.feed(e);if(i.isDone())s=s||new O,s.appendValue(i.state()),i=null,r=6;else if(i.isError())return i}if(5===r){for(;(!e.isEmpty()||e.isDone())&&i.isCont();)i=i.feed(e);if(i.isDone())i=null,r=6;else if(i.isError())return i}if(6===r){for(;!e.isEmpty()&&S(e.head());)e.step();if(e.isEmpty()){if(e.isDone())return new k.Done(s.state())}else{if(64!==e.head())return new k.Done(s.state());n=new I,r=7}}if(7===r){for(;(!e.isEmpty()||e.isDone())&&n.isCont();)n=n.feed(e);if(n.isDone())s=s||new O,s.appendField(n.state()),n=null,r=6;else if(n.isError())return n}}return new B(s,n,i,r)},V.prototype=Object.create(k.prototype),V.prototype.constructor=V,V.prototype.feed=function(e){for(var t=0,r=this.s,i=this.value,n=this.field,s=this.builder;!e.isEmpty()||e.isDone();){if(1===r)if(e.isEmpty()){if(e.isDone())return new k.Done(s?s.state():Z)}else if(t=e.head(),64===t)n=new I,r=2;else if(123===t)s?(i=new N(s),r=5):(i=new N,r=4);else{if(91!==t)return new k.Done(s?s.state():Z);s?(i=new L(s),r=5):(i=new L,r=4)}if(2===r){for(;(!e.isEmpty()||e.isDone())&&n.isCont();)n=n.feed(e);if(n.isDone())s=s||new O,s.appendField(n.state()),n=null,r=3;else if(n.isError())return n}if(3===r){for(;!e.isEmpty()&&S(e.head());)e.step();if(e.isEmpty()){if(e.isDone())return new k.Done(s.state())}else r=1}if(4===r){for(;(!e.isEmpty()||e.isDone())&&i.isCont();)i=i.feed(e);if(i.isDone())return s=s||new O,s.appendValue(i.state()),new k.Done(s.state());if(i.isError())return i}if(5===r){for(;(!e.isEmpty()||e.isDone())&&i.isCont();)i=i.feed(e);if(i.isDone())return new k.Done(s.state());if(i.isError())return i}}return new V(s,n,i,r)},N.prototype=Object.create(k.prototype),N.prototype.constructor=N,N.prototype.feed=function(e){var t=0,r=this.s,i=this.value,n=this.key,s=this.builder||new x;if(1===r)if(e.isEmpty()){if(e.isDone())return k.unexpectedEOF}else{if(t=e.head(),123!==t)return new k.Error({expected:"'{'",found:t});e.step(),r=2}for(;!e.isEmpty()||e.isDone();){if(2===r){for(;!e.isEmpty()&&(t=e.head(),F(t));)e.step();if(e.isEmpty()){if(e.isDone())return k.unexpectedEOF}else{if(125===t)return e.step(),new k.Done(s.state());r=3}}if(3===r){for(n=n||new B;(!e.isEmpty()||e.isDone())&&n.isCont();)n=n.feed(e);if(n.isDone())r=4;else if(n.isError())return n}if(4===r){for(;!e.isEmpty()&&(t=e.head(),S(t));)e.step();if(e.isEmpty()){if(e.isDone())return s.appendValue(n.state()),new k.Done(s.state())}else 58===t?(e.step(),r=5):(s.appendValue(n.state()),n=null,r=7)}if(5===r){for(;!e.isEmpty()&&S(e.head());)e.step();if(e.isEmpty()){if(e.isDone())return s.appendField(new g(n.state())),new k.Done(s.state())}else r=6}if(6===r){for(i=i||new B;(!e.isEmpty()||e.isDone())&&i.isCont();)i=i.feed(e);if(i.isDone())s.appendField(new g(n.state(),i.state())),n=null,i=null,r=7;else if(i.isError())return i}if(7===r){for(;!e.isEmpty()&&(t=e.head(),S(t));)e.step();if(e.isEmpty()){if(e.isDone())return k.unexpectedEOF}else{if(44!==t&&59!==t&&!P(t))return 125===t?(e.step(),new k.Done(s.state())):new k.Error({expected:"'}', ';', ',', or newline",found:t});e.step(),r=2}}}return new N(s,n,i,r)},L.prototype=Object.create(k.prototype),L.prototype.constructor=L,L.prototype.feed=function(e){var t=0,r=this.s,i=this.value,n=this.text,s=this.builder;if(1===r)if(e.isEmpty()){if(e.isDone())return k.unexpectedEOF}else{if(t=e.head(),91!==t)return new k.Error({expected:"'['",found:t});e.step(),r=2}for(;!e.isEmpty()||e.isDone();){if(2===r){for(;!e.isEmpty()&&(t=e.head(),64!==t&&91!==t&&92!==t&&93!==t&&123!==t&&125!==t);)e.step(),n=n||new C,n.append(t);if(e.isEmpty()){if(e.isDone())return k.unexpectedEOF}else{if(93===t)return e.step(),s=s||new x,n&&s.appendValue(n.state()),new k.Done(s.state());64===t?(s=s||new x,n&&(s.appendValue(n.state()),n=null),i=new V,r=3):123===t?(s=s||new x,n&&(s.appendValue(n.state()),n=null),i=new N(s),r=4):91===t?(s=s||new x,n&&(s.appendValue(n.state()),n=null),i=new L(s),r=4):92===t?(e.step(),r=5):new k.Error({found:t})}}if(3===r){for(;(!e.isEmpty()||e.isDone())&&i.isCont();)i=i.feed(e);if(i.isDone())s.appendValue(i.state()),i=null,r=2;else if(i.isError())return i}if(4===r){for(;(!e.isEmpty()||e.isDone())&&i.isCont();)i=i.feed(e);if(i.isDone())i=null,r=2;else if(i.isError())return i}if(5===r)if(e.isEmpty()){if(e.isDone())return k.unexpectedEOF}else if(t=e.head(),n=n||new C,34===t||47===t||64===t||91===t||92===t||93===t||123===t||125===t)e.step(),n.append(t),r=2;else if(98===t)e.step(),n.append(8),r=2;else if(102===t)e.step(),n.append(12),r=2;else if(110===t)e.step(),n.append(10),r=2;else if(114===t)e.step(),n.append(13),r=2;else{if(116!==t)return new k.Error({expected:"escape character",found:t});e.step(),n.append(9),r=2}}return new L(s,n,i,r)},_.prototype=Object.create(k.prototype),_.prototype.constructor=_,_.prototype.feed=function(e){var t=0,r=this.s,i=this.text;if(1===r)if(e.isEmpty()||(t=e.head(),34!==t)){if(!e.isEmpty())return new k.Error({expected:"'\"'",found:t});if(e.isDone())return k.unexpectedEOF}else e.step(),r=2;for(;!e.isEmpty()||e.isDone();){if(2===r){for(i=i||new C;!e.isEmpty()&&(t=e.head(),34!==t&&92!==t);)e.step(),i.append(t);if(e.isEmpty()){if(e.isDone())return k.unexpectedEOF}else{if(34===t)return e.step(),new k.Done(i.state());92===t&&(e.step(),r=3)}}if(3===r)if(e.isEmpty()){if(e.isDone())return k.unexpectedEOF}else if(t=e.head(),34===t||47===t||64===t||91===t||92===t||93===t||123===t||125===t)e.step(),i.append(t),r=2;else if(98===t)e.step(),i.append(8),r=2;else if(102===t)e.step(),i.append(12),r=2;else if(110===t)e.step(),i.append(10),r=2;else if(114===t)e.step(),i.append(13),r=2;else{if(116!==t)return new k.Error({expected:"escape character",found:t});e.step(),i.append(9),r=2}}return new _(i,r)},$.prototype=Object.create(k.prototype),$.prototype.constructor=$,$.prototype.feed=function(e){var t=0,r=this.s,i=this.data||new R;if(1===r)if(e.isEmpty()||(t=e.head(),37!==t)){if(!e.isEmpty())return new k.Error({expected:"'%'",found:t});if(e.isDone())return k.unexpectedEOF}else e.step(),r=2;for(;!e.isEmpty()||e.isDone();){if(2===r)if(!e.isEmpty()&&(t=e.head(),z(t)))e.step(),i.appendBase64Char(t),r=3;else if(!e.isEmpty()||e.isDone())return new k.Done(i.state());if(3===r)if(!e.isEmpty()&&(t=e.head(),z(t)))e.step(),i.appendBase64Char(t),r=4;else{if(!e.isEmpty())return new k.Error({expected:"base64 digit",found:t});if(e.isDone())return k.unexpectedEOF}if(4===r)if(!e.isEmpty()&&(t=e.head(),z(t)||61===t))e.step(),i.appendBase64Char(t),r=61!==t?5:6;else{if(!e.isEmpty())return new k.Error({expected:"base64 digit",found:t});if(e.isDone())return k.unexpectedEOF}if(5===r)if(!e.isEmpty()&&(t=e.head(),z(t)||61===t)){if(e.step(),i.appendBase64Char(t),61===t)return new k.Done(i.state());r=2}else{if(!e.isEmpty())return new k.Error({expected:"base64 digit",found:t});if(e.isDone())return k.unexpectedEOF}else if(6===r){if(!e.isEmpty()&&(t=e.head(),61===t))return e.step(),i.appendBase64Char(t),new k.Done(i.state());if(!e.isEmpty())return new k.Error({expected:"'='",found:t});if(e.isDone())return k.unexpectedEOF}}return new $(i,r)},H.prototype=Object.create(k.prototype),H.prototype.constructor=H,H.prototype.feed=function(e){var t=0,r=this.s,i=this.builder||new C;if(1===r)if(e.isEmpty()){if(e.isDone())return k.unexpectedEOF}else t=e.head(),45===t&&(e.step(),i.append(t)),r=2;if(2===r)if(e.isEmpty()){if(e.isDone())return k.unexpectedEOF}else if(t=e.head(),48===t)e.step(),i.append(t),r=4;else{if(!(t>=49&&57>=t))return new k.Error({expected:"digit",found:t});e.step(),i.append(t),r=3}if(3===r){for(;!e.isEmpty()&&(t=e.head(),t>=48&&57>=t);)e.step(),i.append(t);if(e.isEmpty()){if(e.isDone())return new k.Done(Number(i.state()))}else r=4}if(4===r)if(e.isEmpty()){if(e.isDone())return new k.Done(Number(i.state()))}else if(t=e.head(),46===t)e.step(),i.append(t),r=5;else{if(69!==t&&101!==t)return new k.Done(Number(i.state()));e.step(),i.append(t),r=8}if(5===r)if(e.isEmpty()){if(e.isDone())return k.unexpectedEOF}else{if(t=e.head(),!(t>=48&&57>=t))return new k.Error({expected:"digit",found:t});e.step(),i.append(t),r=6}if(6===r){for(;!e.isEmpty()&&(t=e.head(),t>=48&&57>=t);)e.step(),i.append(t);if(e.isEmpty()){if(e.isDone())return new k.Done(Number(i.state()))}else r=7}if(7===r){if(t=e.head(),69!==t&&101!==t)return new k.Done(Number(i.state()));e.step(),i.append(t),r=8}if(8===r)if(e.isEmpty()){if(e.isDone())return k.unexpectedEOF}else t=e.head(),(43===t||45===t)&&(e.step(),i.append(t)),r=9;if(9===r)if(e.isEmpty()){if(e.isDone())return k.unexpectedEOF}else{if(t=e.head(),!(t>=48&&57>=t))return new k.Error({expected:"digit",found:t});e.step(),i.append(t),r=10}if(10===r){for(;!e.isEmpty()&&(t=e.head(),t>=48&&57>=t);)e.step(),i.append(t);if(!e.isEmpty()||e.isDone())return new k.Done(Number(i.state()))}return new H(i,r)},W.prototype=Object.create(k.prototype),W.prototype.constructor=W,W.prototype.feed=function(e){var t=0,r=this.s,i=this.builder;if(1===r)if(!e.isEmpty()&&(t=e.head(),A(t)))i=i||new C,e.step(),i.append(t),r=2;else{if(!e.isEmpty())return new k.Error({expected:"identitifer",found:t});if(e.isDone())return k.unexpectedEOF}if(2===r){for(;!e.isEmpty()&&(t=e.head(),q(t));)e.step(),i.append(t);if(!e.isEmpty()||e.isDone()){var n=i.state();return"true"===n?n=!0:"false"===n&&(n=!1),new k.Done(n)}}return new W(i,r)},G.prototype.writeValue=function(e,t){e.isRecord?this.writeRecord(e,t):"string"==typeof e?this.writeText(e,t):"number"==typeof e?this.writeNumber(e):"boolean"==typeof e?this.writeBool(e):e instanceof Uint8Array&&this.writeData(e)},G.prototype.writeAttr=function(e){this.builder.append(64),this.writeIdent(e.key),e.value.isExtant||(this.builder.append(40),this.writeBlock(e.value),this.builder.append(41))},G.prototype.writeItem=function(e){e.isField?(this.writeValue(e.key),this.builder.append(58),e.value.isExtant||this.writeValue(e.value)):this.writeValue(e)},G.prototype.writeBlock=function(e){if(e.isRecord)if(e.isMarkup())this.writeMarkup(e);else if(e.hasAttrs())this.writeRecord(e);else{var t=e.iterator();if(!t.isEmpty())for(this.writeItem(t.next());!t.isEmpty();)this.builder.append(44),this.writeItem(t.next())}else this.writeValue(e)},G.prototype.writeRecord=function(e,t){if(e.isMarkup())this.writeMarkup(e);else{for(var r,i=e.iterator(),n=!1;!i.isEmpty()&&(r=i.head(),r.isAttr);)this.writeAttr(r),i.step(),n=!0;if(i.isEmpty())n||(this.builder.append(123),this.builder.append(125));else{if(i.step(),n&&i.isEmpty())t?r.isRecord||"string"==typeof r?this.writeValue(r,t):(this.builder.append(123),this.writeItem(r),this.builder.append(125)):r.isRecord||r.isSlot?(this.builder.append(123),this.writeItem(r),this.builder.append(125)):(this.builder.append(32),this.writeValue(r));else if(!i.isEmpty()&&i.isAllAttrs())r.isRecord||r.isSlot?(this.builder.append(123),this.writeItem(r),this.builder.append(125)):(n&&this.builder.append(32),this.writeValue(r));else{for(this.builder.append(123),this.writeItem(r);!i.isEmpty()&&(r=i.head(),!r.isAttr||!i.isAllAttrs);)this.builder.append(44),this.writeItem(r),i.step();this.builder.append(125)}for(;!i.isEmpty();)this.writeAttr(i.next())}}},G.prototype.writeMarkup=function(e){for(var t,r=e.iterator(),i=!1;!r.isEmpty()&&(t=r.head(),t.isAttr);)this.writeAttr(t),r.step(),i=!0;for(this.builder.append(91);!r.isEmpty();){if(t=r.head(),"string"==typeof t)for(var n=new j(t);!n.isEmpty();){var s=n.head();switch(s){case 64:case 91:case 92:case 93:case 123:case 125:this.builder.append(92),this.builder.append(s);
break;default:this.builder.append(s)}n.step()}else t.isRecord?this.writeRecord(t,!0):(this.builder.append(123),this.writeItem(t),this.builder.append(125));r.step()}this.builder.append(93)},G.prototype.writeText=function(e,t){function r(){var t=new j(e);if(t.isEmpty()||!A(t.head()))return!1;for(t.step();!t.isEmpty()&&q(t.head());)t.step();return t.isEmpty()}t?this.writeTextMarkup(e):r()?this.writeIdent(e):this.writeString(e)},G.prototype.writeString=function(e){var t=new j(e);for(this.builder.append(34);!t.isEmpty();){var r=t.head();switch(r){case 34:case 92:this.builder.append(92),this.builder.append(r);break;case 8:this.builder.append(92),this.builder.append(98);break;case 12:this.builder.append(92),this.builder.append(102);break;case 10:this.builder.append(92),this.builder.append(110);break;case 13:this.builder.append(92),this.builder.append(114);break;case 9:this.builder.append(92),this.builder.append(116);break;default:this.builder.append(r)}t.step()}this.builder.append(34)},G.prototype.writeIdent=function(e){this.builder.appendString(e)},G.prototype.writeTextMarkup=function(e){var t=new j(e);for(this.builder.append(91);!t.isEmpty();){var r=t.head();switch(r){case 64:case 91:case 92:case 93:case 123:case 125:this.builder.append(92),this.builder.append(r);break;default:this.builder.append(r)}t.step()}this.builder.append(93)},G.prototype.writeNumber=function(e){this.builder.appendString(e.toString())},G.prototype.writeBool=function(e){this.builder.appendString(e.toString())},G.prototype.writeData=function(e){function t(e){return e>=0&&26>e?e+65:e>=26&&52>e?e+71:e>=52&&62>e?e-4:62===e?43:63===e?47:void 0}this.builder.append(37);for(var r,i,n,s=0,o=e.length;o>s+2;)r=e[s],i=e[s+1],n=e[s+2],this.builder.append(t(r>>>2)),this.builder.append(t(63&(r<<4|i>>>4))),this.builder.append(t(63&(i<<2|n>>>6))),this.builder.append(t(63&n)),s+=3;o>s+1?(r=e[s],i=e[s+1],this.builder.append(t(r>>>2)),this.builder.append(t(63&(r<<4|i>>>4))),this.builder.append(t(i<<2&63)),this.builder.append(61),s+=2):o>s&&(r=e[s],this.builder.append(t(r>>>2)),this.builder.append(t(r<<4&63)),this.builder.append(61),this.builder.append(61),s+=1)},G.prototype.state=function(){return this.builder.state()},t.exports=function(){return i.apply(null,arguments)},r=t.exports,r.parse=p,r.stringify=a,r.objectify=u,r.Record=b,r.Field=w,r.Attr=E,r.Slot=g,r.attr=c,r.slot=h,r.base64=d,r.extant=T,r.absent=Z,r.empty=y,r.builder=v,r.compare=m},{}],3:[function(e,t,r){"use strict";function i(e){if(e instanceof E.Record){var t=e.head();if(t.isField)switch(t.key){case"event":return l.decode(e);case"command":return d.decode(e);case"get":return c.decode(e);case"put":return h.decode(e);case"state":return y.decode(e);case"link":return v.decode(e);case"linked":return m.decode(e);case"unlink":return b.decode(e);case"unlinked":return w.decode(e)}}}function n(e){return e.encode()}function s(e){return i(E.parse(e))}function o(e){return E.stringify(n(e))}function p(){}function a(){p.call(this)}function u(){p.call(this)}function f(){p.call(this)}function l(e,t,r,i){f.call(this),Object.defineProperty(this,"node",{enumerable:!0,value:e}),Object.defineProperty(this,"lane",{enumerable:!0,value:t}),Object.defineProperty(this,"via",{enumerable:!0,value:r||E.absent}),Object.defineProperty(this,"body",{enumerable:!0,value:i||E.empty()})}function d(e,t,r,i){f.call(this),Object.defineProperty(this,"node",{enumerable:!0,value:e}),Object.defineProperty(this,"lane",{enumerable:!0,value:t}),Object.defineProperty(this,"via",{enumerable:!0,value:r||E.absent}),Object.defineProperty(this,"body",{enumerable:!0,value:i||E.empty()})}function c(e){a.call(this),Object.defineProperty(this,"node",{enumerable:!0,value:e})}function h(e,t){a.call(this),Object.defineProperty(this,"node",{enumerable:!0,value:e}),Object.defineProperty(this,"body",{enumerable:!0,value:t||E.empty()})}function y(e,t){u.call(this),Object.defineProperty(this,"node",{enumerable:!0,value:e}),Object.defineProperty(this,"body",{enumerable:!0,value:t||E.empty()})}function v(e,t){a.call(this),Object.defineProperty(this,"node",{enumerable:!0,value:e}),Object.defineProperty(this,"lane",{enumerable:!0,value:t})}function m(e,t){u.call(this),Object.defineProperty(this,"node",{enumerable:!0,value:e}),Object.defineProperty(this,"lane",{enumerable:!0,value:t})}function b(e,t){a.call(this),Object.defineProperty(this,"node",{enumerable:!0,value:e}),Object.defineProperty(this,"lane",{enumerable:!0,value:t})}function w(e,t){u.call(this),Object.defineProperty(this,"node",{enumerable:!0,value:e}),Object.defineProperty(this,"lane",{enumerable:!0,value:t})}var E=e("recon-js");Object.defineProperty(p.prototype,"isRequest",{value:!1}),Object.defineProperty(p.prototype,"isResponse",{value:!1}),Object.defineProperty(p.prototype,"isMessage",{value:!1}),Object.defineProperty(p.prototype,"isEventMessage",{value:!1}),Object.defineProperty(p.prototype,"isCommandMessage",{value:!1}),Object.defineProperty(p.prototype,"isGetRequest",{value:!1}),Object.defineProperty(p.prototype,"isPutRequest",{value:!1}),Object.defineProperty(p.prototype,"isStateResponse",{value:!1}),Object.defineProperty(p.prototype,"isLinkRequest",{value:!1}),Object.defineProperty(p.prototype,"isLinkedResponse",{value:!1}),Object.defineProperty(p.prototype,"isUnlinkRequest",{value:!1}),Object.defineProperty(p.prototype,"isUnlinkedResponse",{value:!1}),a.prototype=Object.create(p.prototype),a.prototype.constructor=a,Object.defineProperty(a.prototype,"isRequest",{value:!0}),u.prototype=Object.create(p.prototype),u.prototype.constructor=u,Object.defineProperty(a.prototype,"isResponse",{value:!0}),f.prototype=Object.create(p.prototype),f.prototype.constructor=f,Object.defineProperty(a.prototype,"isMessage",{value:!0}),l.prototype=Object.create(f.prototype),l.prototype.constructor=l,Object.defineProperty(l.prototype,"isEventMessage",{value:!0}),l.prototype.encode=function(){var e=E.builder(),t=E.builder();return t.slot("node",this.node),t.slot("lane",this.lane),this.via.isAbsent||t.slot("via",this.via),e.attr("event",t.state()),e.appendRecord(this.body),e.state()},l.decode=function(e){var t="",r="",i=E.absent,n=e.tail(),s=e.head();if(s.value instanceof E.Record)for(var o=s.value.iterator(),p=0;!o.isEmpty();){var a=o.next();if(a.isField)switch(a.key){case"node":t=a.value;break;case"lane":r=a.value;break;case"via":i=a.value}else switch(p){case 0:t=a;break;case 1:r=a;break;case 2:i=a}p+=1}return new l(t,r,i,n)},d.prototype=Object.create(f.prototype),d.prototype.constructor=d,Object.defineProperty(d.prototype,"isCommandMessage",{value:!0}),d.prototype.encode=function(){var e=E.builder(),t=E.builder();return t.slot("node",this.node),t.slot("lane",this.lane),this.via.isAbsent||t.slot("via",this.via),e.attr("command",t.state()),e.appendRecord(this.body),e.state()},d.decode=function(e){var t="",r="",i=E.absent,n=e.tail(),s=e.head();if(s.value instanceof E.Record)for(var o=s.value.iterator(),p=0;!o.isEmpty();){var a=o.next();if(a.isField)switch(a.key){case"node":t=a.value;break;case"lane":r=a.value;break;case"via":i=a.value}else switch(p){case 0:t=a;break;case 1:r=a;break;case 2:i=a}p+=1}return new d(t,r,i,n)},c.prototype=Object.create(a.prototype),c.prototype.constructor=c,Object.defineProperty(c.prototype,"isGetRequest",{value:!0}),c.prototype.encode=function(){return E(E.attr("get",E(E.slot("node",this.node))))},c.decode=function(e){var t="",r=e.head();if(r.value instanceof E.Record)for(var i=r.value.iterator(),n=0;!i.isEmpty();){var s=i.next();if(s.isField)switch(s.key){case"node":t=s.value}else switch(n){case 0:t=s}n+=1}else r.value.isExtant||(t=r.value);return new c(t)},h.prototype=Object.create(a.prototype),h.prototype.constructor=h,Object.defineProperty(h.prototype,"isPutRequest",{value:!0}),h.prototype.encode=function(){var e=E.builder();return e.attr("put",E(E.slot("node",this.node))),e.appendRecord(this.body),e.state()},h.decode=function(e){var t="",r=e.tail(),i=e.head();if(i.value instanceof E.Record)for(var n=i.value.iterator(),s=0;!n.isEmpty();){var o=n.next();if(o.isField)switch(o.key){case"node":t=o.value}else switch(s){case 0:t=o}s+=1}else i.value.isExtant||(t=i.value);return new h(t,r)},y.prototype=Object.create(u.prototype),y.prototype.constructor=y,Object.defineProperty(y.prototype,"isStateResponse",{value:!0}),y.prototype.encode=function(){var e=E.builder();return e.attr("state",E(E.slot("node",this.node))),e.appendRecord(this.body),e.state()},y.decode=function(e){var t="",r=e.tail(),i=e.head();if(i.value instanceof E.Record)for(var n=i.value.iterator(),s=0;!n.isEmpty();){var o=n.next();if(o.isField)switch(o.key){case"node":t=o.value}else switch(s){case 0:t=o}s+=1}else i.value.isExtant||(t=i.value);return new y(t,r)},v.prototype=Object.create(a.prototype),v.prototype.constructor=v,Object.defineProperty(v.prototype,"isLinkRequest",{value:!0}),v.prototype.encode=function(){return E(E.attr("link",E(E.slot("node",this.node),E.slot("lane",this.lane))))},v.decode=function(e){var t="",r="",i=e.head();if(i.value instanceof E.Record)for(var n=i.value.iterator(),s=0;!n.isEmpty();){var o=n.next();if(o.isField)switch(o.key){case"node":t=o.value;break;case"lane":r=o.value}else switch(s){case 0:t=o;break;case 1:r=o}s+=1}return new v(t,r)},m.prototype=Object.create(u.prototype),m.prototype.constructor=m,Object.defineProperty(m.prototype,"isLinkedResponse",{value:!0}),m.prototype.encode=function(){return E(E.attr("linked",E(E.slot("node",this.node),E.slot("lane",this.lane))))},m.decode=function(e){var t="",r="",i=e.head();if(i.value instanceof E.Record)for(var n=i.value.iterator(),s=0;!n.isEmpty();){var o=n.next();if(o.isField)switch(o.key){case"node":t=o.value;break;case"lane":r=o.value}else switch(s){case 0:t=o;break;case 1:r=o}s+=1}return new m(t,r)},b.prototype=Object.create(a.prototype),b.prototype.constructor=b,Object.defineProperty(b.prototype,"isUnlinkRequest",{value:!0}),b.prototype.encode=function(){return E(E.attr("unlink",E(E.slot("node",this.node),E.slot("lane",this.lane))))},b.decode=function(e){var t="",r="",i=e.head();if(i.value instanceof E.Record)for(var n=i.value.iterator(),s=0;!n.isEmpty();){var o=n.next();if(o.isField)switch(o.key){case"node":t=o.value;break;case"lane":r=o.value}else switch(s){case 0:t=o;break;case 1:r=o}s+=1}return new b(t,r)},w.prototype=Object.create(u.prototype),w.prototype.constructor=w,Object.defineProperty(w.prototype,"isUnlinkedResponse",{value:!0}),w.prototype.encode=function(){return E(E.attr("unlinked",E(E.slot("node",this.node),E.slot("lane",this.lane))))},w.decode=function(e){var t="",r="",i=e.head();if(i.value instanceof E.Record)for(var n=i.value.iterator(),s=0;!n.isEmpty();){var o=n.next();if(o.isField)switch(o.key){case"node":t=o.value;break;case"lane":r=o.value}else switch(s){case 0:t=o;break;case 1:r=o}s+=1}return new w(t,r)},r.decode=i,r.encode=n,r.parse=s,r.stringify=o,r.Envelope=p,r.RequestEnvelope=a,r.ResponseEnvelope=u,r.MessageEnvelope=f,r.EventMessage=l,r.CommandMessage=d,r.GetRequest=c,r.PutRequest=h,r.StateResponse=y,r.LinkRequest=v,r.LinkedResponse=m,r.UnlinkRequest=b,r.UnlinkedResponse=w},{"recon-js":2}],4:[function(e){e("./schemes/http"),e("./schemes/urn")},{"./schemes/http":5,"./schemes/urn":6}],5:[function(e){!function(){var t=e("../uri").URI;t.SCHEMES.http={serialize:function(e){return(80===e.port||""===e.port)&&(e.port=void 0),e.path||(e.path="/"),e}}}()},{"../uri":7}],6:[function(e){!function(){var t=e("../uri"),r=t.URI,i=t.pctEncChar,n="(?:[0-9A-Za-z][0-9A-Za-z\\-]{1,31})",s="(?:\\%[0-9A-Fa-f]{2})",o="[0-9A-Za-z\\(\\)\\+\\,\\-\\.\\:\\=\\@\\;\\$\\_\\!\\*\\'\\/\\?\\#]",p="(?:(?:"+s+"|"+o+")+)",a=new RegExp("^urn\\:("+n+")$"),u=new RegExp("^("+n+")\\:("+p+")$"),f=/^([^\:]+)\:(.*)/,l=/[\x00-\x20\\\"\&\<\>\[\]\^\`\{\|\}\~\x7F-\xFF]/g,d=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/;r.SCHEMES.urn={parse:function(e,t){var i,n,s=e.path.match(u);return s||(t.tolerant||e.errors.push("URN is not strictly valid."),s=e.path.match(f)),s?(i="urn:"+s[1].toLowerCase(),n=r.SCHEMES[i],n||(n=r.SCHEMES[i]={}),n.serialize||(n.serialize=r.SCHEMES.urn.serialize),e.scheme=i,e.path=s[2],n.parse&&n.parse(e,t)):e.errors.push("URN can not be parsed."),e},serialize:function(e,t){var r,n=e.scheme||t.scheme;if(n&&"urn"!==n){var r=n.match(a);r||(r=["urn:"+n,n]),e.scheme="urn",e.path=r[1]+":"+(e.path?e.path.replace(l,i):"")}return e}},r.SCHEMES["urn:uuid"]={parse:function(e,t){t.tolerant||e.path&&e.path.match(d)||e.errors.push("UUID is not valid.")},serialize:function(e,t){return t.tolerant||e.path&&e.path.match(d)?e.path=(e.path||"").toLowerCase():e.scheme=void 0,r.SCHEMES.urn.serialize(e,t)}}}()},{"../uri":7}],7:[function(e,t,r){"undefined"==typeof r&&(r={}),"function"!=typeof e&&(e=function(){"use strict";return r}),URI=function(){"use strict";var t=function(e){for(var t=e,r=1,i=arguments[r];i;)t=t.slice(0,-1)+i.slice(1),i=arguments[++r];return t},i=function(e){return"(?:"+e+")"},n="[A-Za-z]",s="[0-9]",o=t(s,"[A-Fa-f]"),p=i("%"+o+o),a="[\\:\\/\\?\\#\\[\\]\\@]",u="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",f=t(a,u),l=t(n,s,"[\\-\\.\\_\\~]"),d=i(n+t(n,s,"[\\+\\-\\.]")+"*"),c=i(i(p+"|"+t(l,u,"[\\:]"))+"*"),h=i(i("25[0-5]")+"|"+i("2[0-4]"+s)+"|"+i("1"+s+s)+"|"+i("[1-9]"+s)+"|"+s),y=i(h+"\\."+h+"\\."+h+"\\."+h),v=i(o+"{1,4}"),m=(i(i(v+"\\:"+v)+"|"+y),i(t(l,u,"[\\:]")+"+")),b=i("v"+o+"+\\."+t(l,u,"[\\:]")+"+"),w=i("\\["+i(m+"|"+b)+"\\]"),E=i(i(p+"|"+t(l,u))+"*"),g=i(w+"|"+y+"|"+E),D=i(s+"*"),x=i(i(c+"@")+"?"+g+i("\\:"+D)+"?"),O=i(p+"|"+t(l,u,"[\\:\\@]")),j=i(O+"*"),k=i(O+"+"),C=i(i(p+"|"+t(l,u,"[\\@]"))+"+"),R=i(i("\\/"+j)+"*"),S=i("\\/"+i(k+R)+"?"),P=i(C+R),F=i(k+R),A=i(""),q=(i(R+"|"+S+"|"+P+"|"+F+"|"+A),i(i(O+"|[\\/\\?]")+"*")),z=i(i(O+"|[\\/\\?]")+"*"),M=i(i("\\/\\/"+x+R)+"|"+S+"|"+F+"|"+A),U=i(d+"\\:"+M+i("\\?"+q)+"?"+i("\\#"+z)+"?"),I=i(i("\\/\\/"+x+R)+"|"+S+"|"+P+"|"+A),B=i(I+i("\\?"+q)+"?"+i("\\#"+z)+"?"),V=(i(U+"|"+B),i(d+"\\:"+M+i("\\?"+q)+"?"),"^("+d+")\\:"+i(i("\\/\\/("+i("("+c+")@")+"?("+g+")"+i("\\:("+D+")")+"?)")+"?("+R+"|"+S+"|"+F+"|"+A+")")+i("\\?("+q+")")+"?"+i("\\#("+z+")")+"?$"),N="^(){0}"+i(i("\\/\\/("+i("("+c+")@")+"?("+g+")"+i("\\:("+D+")")+"?)")+"?("+R+"|"+S+"|"+P+"|"+A+")")+i("\\?("+q+")")+"?"+i("\\#("+z+")")+"?$",L=("^("+d+")\\:"+i(i("\\/\\/("+i("("+c+")@")+"?("+g+")"+i("\\:("+D+")")+"?)")+"?("+R+"|"+S+"|"+F+"|"+A+")")+i("\\?("+q+")")+"?$","^"+i("\\#("+z+")")+"?$","^"+i("("+c+")@")+"?("+g+")"+i("\\:("+D+")")+"?$",new RegExp("("+V+")|("+N+")")),_=new RegExp(t("[^]",n,s,"[\\+\\-\\.]"),"g"),$=new RegExp(t("[^\\%\\:]",l,u),"g"),H=new RegExp(t("[^\\%]",l,u),"g"),W=new RegExp(t("[^\\%\\/\\:\\@]",l,u),"g"),G=new RegExp(t("[^\\%\\/\\@]",l,u),"g"),T=new RegExp(t("[^\\%]",l,u,"[\\:\\@\\/\\?]"),"g"),Z=T,Q=new RegExp(t("[^]",l,u),"g"),K=new RegExp(l,"g"),J=(new RegExp(t("[^\\%]",l,f),"g"),new RegExp(p+"+","g")),X=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?([^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n)*))?/i,Y=/^\.\.?\//,et=/^\/\.(\/|$)/,tt=/^\/\.\.(\/|$)/,rt=/^\/?(?:.|\n)*?(?=\/|$)/,it=void 0==="".match(/(){0}/)[1],nt=function(e){var t,r=e.charCodeAt(0);return t=16>r?"%0"+r.toString(16).toUpperCase():128>r?"%"+r.toString(16).toUpperCase():2048>r?"%"+(r>>6|192).toString(16).toUpperCase()+"%"+(63&r|128).toString(16).toUpperCase():"%"+(r>>12|224).toString(16).toUpperCase()+"%"+(r>>6&63|128).toString(16).toUpperCase()+"%"+(63&r|128).toString(16).toUpperCase()},st=function(e){for(var t,r,i="",n=0;n<e.length;)t=parseInt(e.substr(n+1,2),16),128>t?(r=String.fromCharCode(t),i+=r.match(K)?r:e.substr(n,3),n+=3):t>191&&224>t?(i+=e.substr(n,6),n+=6):(i+=e.substr(n,9),n+=9);return i},ot=function(e){for(var t,r,i,n="",s=0;s<e.length;)t=parseInt(e.substr(s+1,2),16),128>t?(n+=String.fromCharCode(t),s+=3):t>191&&224>t?(r=parseInt(e.substr(s+4,2),16),n+=String.fromCharCode((31&t)<<6|63&r),s+=6):(r=parseInt(e.substr(s+4,2),16),i=parseInt(e.substr(s+7,2),16),n+=String.fromCharCode((15&t)<<12|(63&r)<<6|63&i),s+=9);return n},pt=function(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()},at=function(){this.errors=[]},ut=r;return at.prototype={scheme:void 0,userinfo:void 0,host:void 0,port:void 0,path:void 0,query:void 0,fragment:void 0,reference:void 0,errors:void 0},ut.SCHEMES={},ut.parse=function(e,t){var r,i,n=new at;return e=e?e.toString():"",t=t||{},"suffix"===t.reference&&(e=(t.scheme?t.scheme+":":"")+"//"+e),r=e.match(L),r&&(r=r[1]?r.slice(1,10):r.slice(10,19)),r||(t.tolerant||n.errors.push("URI is not strictly valid."),r=e.match(X)),r?(it?(n.scheme=r[1],n.userinfo=r[3],n.host=r[4],n.port=parseInt(r[5],10),n.path=r[6]||"",n.query=r[7],n.fragment=r[8],isNaN(n.port)&&(n.port=r[5])):(n.scheme=r[1]||void 0,n.userinfo=-1!==e.indexOf("@")?r[3]:void 0,n.host=-1!==e.indexOf("//")?r[4]:void 0,n.port=parseInt(r[5],10),n.path=r[6]||"",n.query=-1!==e.indexOf("?")?r[7]:void 0,n.fragment=-1!==e.indexOf("#")?r[8]:void 0,isNaN(n.port)&&(n.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?r[4]:void 0)),n.reference=void 0===n.scheme&&void 0===n.userinfo&&void 0===n.host&&void 0===n.port&&void 0===n.path&&void 0===n.query?"same-document":void 0===n.scheme?"relative":void 0===n.fragment?"absolute":"uri",t.reference&&"suffix"!==t.reference&&t.reference!==n.reference&&n.errors.push("URI is not a "+t.reference+" reference."),i=ut.SCHEMES[(t.scheme||n.scheme||"").toLowerCase()],i&&i.parse&&i.parse(n,t)):n.errors.push("URI can not be parsed."),n},ut._recomposeAuthority=function(e){var t=[];return void 0!==e.userinfo&&(t.push(e.userinfo.toString().replace($,nt)),t.push("@")),void 0!==e.host&&t.push(e.host.toString().toLowerCase().replace(H,nt)),"number"==typeof e.port&&(t.push(":"),t.push(e.port.toString(10))),t.length?t.join(""):void 0},ut.removeDotSegments=function(e){for(var t,r=[];e.length;)e.match(Y)?e=e.replace(Y,""):e.match(et)?e=e.replace(et,"/"):e.match(tt)?(e=e.replace(tt,"/"),r.pop()):"."===e||".."===e?e="":(t=e.match(rt)[0],e=e.slice(t.length),r.push(t));return r.join("")},ut.serialize=function(e,t){var r,i,n,s=[];return t=t||{},r=ut.SCHEMES[(t.scheme||e.scheme||"").toLowerCase()],r&&r.serialize&&r.serialize(e,t),"suffix"!==t.reference&&e.scheme&&(s.push(e.scheme.toString().toLowerCase().replace(_,"")),s.push(":")),i=ut._recomposeAuthority(e),void 0!==i&&("suffix"!==t.reference&&s.push("//"),s.push(i),e.path&&"/"!==e.path.charAt(0)&&s.push("/")),void 0!==e.path&&(n=ut.removeDotSegments(e.path.toString().replace(/%2E/gi,".")),n=e.scheme?n.replace(W,nt):n.replace(G,nt),void 0===i&&(n=n.replace(/^\/\//,"/%2F")),s.push(n)),void 0!==e.query&&(s.push("?"),s.push(e.query.toString().replace(T,nt))),void 0!==e.fragment&&(s.push("#"),s.push(e.fragment.toString().replace(Z,nt))),s.join("").replace(J,st).replace(/%[0-9A-Fa-f]{2}/g,function(e){return e.toUpperCase()})},ut.resolveComponents=function(e,t,r,i){var n=new at;return i||(e=ut.parse(ut.serialize(e,r),r),t=ut.parse(ut.serialize(t,r),r)),r=r||{},!r.tolerant&&t.scheme?(n.scheme=t.scheme,n.userinfo=t.userinfo,n.host=t.host,n.port=t.port,n.path=ut.removeDotSegments(t.path),n.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(n.userinfo=t.userinfo,n.host=t.host,n.port=t.port,n.path=ut.removeDotSegments(t.path),n.query=t.query):(t.path?("/"===t.path.charAt(0)?n.path=ut.removeDotSegments(t.path):(n.path=void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:t.path:"/"+t.path,n.path=ut.removeDotSegments(n.path)),n.query=t.query):(n.path=e.path,n.query=void 0!==t.query?t.query:e.query),n.userinfo=e.userinfo,n.host=e.host,n.port=e.port),n.scheme=e.scheme),n.fragment=t.fragment,n},ut.resolve=function(e,t,r){return ut.serialize(ut.resolveComponents(ut.parse(e,r),ut.parse(t,r),r,!0),r)},ut.normalize=function(e,t){return"string"==typeof e?e=ut.serialize(ut.parse(e,t),t):"object"===pt(e)&&(e=ut.parse(ut.serialize(e,t),t)),e},ut.equal=function(e,t,r){return"string"==typeof e?e=ut.serialize(ut.parse(e,r),r):"object"===pt(e)&&(e=ut.serialize(e,r)),"string"==typeof t?t=ut.serialize(ut.parse(t,r),r):"object"===pt(t)&&(t=ut.serialize(t,r)),e===t},ut.escapeComponent=function(e){return e&&e.toString().replace(Q,nt)},ut.unescapeComponent=function(e){return e&&e.toString().replace(J,ot)},r.pctEncChar=nt,r.pctDecChars=ot,r.Components=at,r.URI=ut,r.pctEncChar=nt,r.pctDecChars=ot,r.Components=at,r.URI={SCHEMES:ut.SCHEMES,parse:ut.parse,removeDotSegments:ut.removeDotSegments,serialize:ut.serialize,resolveComponents:ut.resolveComponents,resolve:ut.resolve,normalize:ut.normalize,equal:ut.equal,escapeComponent:ut.escapeComponent,unescapeComponent:ut.unescapeComponent},e("./schemes"),ut}()},{"./schemes":4}],8:[function(e,t){function r(e,t){var r;return r=t?new n(e,t):new n(e)}var i=function(){return this}(),n=i.WebSocket||i.MozWebSocket;t.exports={w3cwebsocket:n?r:null,version:e("./version")}},{"./version":9}],9:[function(e,t){t.exports=e("../package.json").version},{"../package.json":10}],10:[function(e,t){t.exports={name:"websocket",description:"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",keywords:["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],author:{name:"Brian McKelvey",email:"brian@worlize.com",url:"https://www.worlize.com/"},version:"1.0.17",repository:{type:"git",url:"https://github.com/theturtle32/WebSocket-Node.git"},homepage:"https://github.com/theturtle32/WebSocket-Node",engines:{node:">=0.8.0"},dependencies:{debug:"~2.1.0",nan:"~1.0.0","typedarray-to-buffer":"~3.0.0"},devDependencies:{"buffer-equal":"0.0.1",faucet:"0.0.1",gulp:"git+https://github.com/gulpjs/gulp.git#4.0","gulp-jshint":"^1.9.0","jshint-stylish":"^1.0.0",tape:"^3.0.0"},config:{verbose:!1},scripts:{install:"(node-gyp rebuild 2> builderror.log) || (exit 0)",test:"faucet test/unit",gulp:"gulp"},main:"index",directories:{lib:"./lib"},browser:"lib/browser.js",gitHead:"cda940b883aa884906ac13158fe514229a67f426",bugs:{url:"https://github.com/theturtle32/WebSocket-Node/issues"},_id:"websocket@1.0.17",_shasum:"8a572afc6ec120eb41473ca517d07d932f7b6a1c",_from:"websocket@>=1.0.17 <2.0.0",_npmVersion:"1.4.28",_npmUser:{name:"theturtle32",email:"brian@worlize.com"},maintainers:[{name:"theturtle32",email:"brian@worlize.com"}],dist:{shasum:"8a572afc6ec120eb41473ca517d07d932f7b6a1c",tarball:"http://registry.npmjs.org/websocket/-/websocket-1.0.17.tgz"},_resolved:"https://registry.npmjs.org/websocket/-/websocket-1.0.17.tgz",readme:"ERROR: No README data found!"}},{}]},{},[1])(1)});
//# sourceMappingURL=swim-client.min.js.map